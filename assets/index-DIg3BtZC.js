var XD=Object.defineProperty;var V_=i=>{throw TypeError(i)};var KD=(i,e,t)=>e in i?XD(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var Ze=(i,e,t)=>KD(i,typeof e!="symbol"?e+"":e,t),Oy=(i,e,t)=>e.has(i)||V_("Cannot "+t);var p=(i,e,t)=>(Oy(i,e,"read from private field"),t?t.call(i):e.get(i)),L=(i,e,t)=>e.has(i)?V_("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),N=(i,e,t,n)=>(Oy(i,e,"write to private field"),n?n.call(i,t):e.set(i,t),t),M=(i,e,t)=>(Oy(i,e,"access private method"),t);var oi=(i,e,t,n)=>({set _(r){N(i,e,r,t)},get _(){return p(i,e,n)}});function YD(i,e){for(var t=0;t<e.length;t++){const n=e[t];if(typeof n!="string"&&!Array.isArray(n)){for(const r in n)if(r!=="default"&&!(r in i)){const s=Object.getOwnPropertyDescriptor(n,r);s&&Object.defineProperty(i,r,s.get?s:{enumerable:!0,get:()=>n[r]})}}}return Object.freeze(Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const a of s.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&n(a)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();var ln=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function zo(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var qA={exports:{}},Uv={},HA={exports:{}},ut={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qp=Symbol.for("react.element"),ZD=Symbol.for("react.portal"),QD=Symbol.for("react.fragment"),JD=Symbol.for("react.strict_mode"),eO=Symbol.for("react.profiler"),tO=Symbol.for("react.provider"),nO=Symbol.for("react.context"),iO=Symbol.for("react.forward_ref"),rO=Symbol.for("react.suspense"),sO=Symbol.for("react.memo"),aO=Symbol.for("react.lazy"),G_=Symbol.iterator;function oO(i){return i===null||typeof i!="object"?null:(i=G_&&i[G_]||i["@@iterator"],typeof i=="function"?i:null)}var WA={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},$A=Object.assign,VA={};function Ph(i,e,t){this.props=i,this.context=e,this.refs=VA,this.updater=t||WA}Ph.prototype.isReactComponent={};Ph.prototype.setState=function(i,e){if(typeof i!="object"&&typeof i!="function"&&i!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,i,e,"setState")};Ph.prototype.forceUpdate=function(i){this.updater.enqueueForceUpdate(this,i,"forceUpdate")};function GA(){}GA.prototype=Ph.prototype;function rw(i,e,t){this.props=i,this.context=e,this.refs=VA,this.updater=t||WA}var sw=rw.prototype=new GA;sw.constructor=rw;$A(sw,Ph.prototype);sw.isPureReactComponent=!0;var X_=Array.isArray,XA=Object.prototype.hasOwnProperty,aw={current:null},KA={key:!0,ref:!0,__self:!0,__source:!0};function YA(i,e,t){var n,r={},s=null,a=null;if(e!=null)for(n in e.ref!==void 0&&(a=e.ref),e.key!==void 0&&(s=""+e.key),e)XA.call(e,n)&&!KA.hasOwnProperty(n)&&(r[n]=e[n]);var o=arguments.length-2;if(o===1)r.children=t;else if(1<o){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+2];r.children=l}if(i&&i.defaultProps)for(n in o=i.defaultProps,o)r[n]===void 0&&(r[n]=o[n]);return{$$typeof:qp,type:i,key:s,ref:a,props:r,_owner:aw.current}}function lO(i,e){return{$$typeof:qp,type:i.type,key:e,ref:i.ref,props:i.props,_owner:i._owner}}function ow(i){return typeof i=="object"&&i!==null&&i.$$typeof===qp}function uO(i){var e={"=":"=0",":":"=2"};return"$"+i.replace(/[=:]/g,function(t){return e[t]})}var K_=/\/+/g;function Ny(i,e){return typeof i=="object"&&i!==null&&i.key!=null?uO(""+i.key):e.toString(36)}function Rg(i,e,t,n,r){var s=typeof i;(s==="undefined"||s==="boolean")&&(i=null);var a=!1;if(i===null)a=!0;else switch(s){case"string":case"number":a=!0;break;case"object":switch(i.$$typeof){case qp:case ZD:a=!0}}if(a)return a=i,r=r(a),i=n===""?"."+Ny(a,0):n,X_(r)?(t="",i!=null&&(t=i.replace(K_,"$&/")+"/"),Rg(r,e,t,"",function(u){return u})):r!=null&&(ow(r)&&(r=lO(r,t+(!r.key||a&&a.key===r.key?"":(""+r.key).replace(K_,"$&/")+"/")+i)),e.push(r)),1;if(a=0,n=n===""?".":n+":",X_(i))for(var o=0;o<i.length;o++){s=i[o];var l=n+Ny(s,o);a+=Rg(s,e,t,l,r)}else if(l=oO(i),typeof l=="function")for(i=l.call(i),o=0;!(s=i.next()).done;)s=s.value,l=n+Ny(s,o++),a+=Rg(s,e,t,l,r);else if(s==="object")throw e=String(i),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return a}function lg(i,e,t){if(i==null)return i;var n=[],r=0;return Rg(i,n,"","",function(s){return e.call(t,s,r++)}),n}function cO(i){if(i._status===-1){var e=i._result;e=e(),e.then(function(t){(i._status===0||i._status===-1)&&(i._status=1,i._result=t)},function(t){(i._status===0||i._status===-1)&&(i._status=2,i._result=t)}),i._status===-1&&(i._status=0,i._result=e)}if(i._status===1)return i._result.default;throw i._result}var yi={current:null},Pg={transition:null},hO={ReactCurrentDispatcher:yi,ReactCurrentBatchConfig:Pg,ReactCurrentOwner:aw};function ZA(){throw Error("act(...) is not supported in production builds of React.")}ut.Children={map:lg,forEach:function(i,e,t){lg(i,function(){e.apply(this,arguments)},t)},count:function(i){var e=0;return lg(i,function(){e++}),e},toArray:function(i){return lg(i,function(e){return e})||[]},only:function(i){if(!ow(i))throw Error("React.Children.only expected to receive a single React element child.");return i}};ut.Component=Ph;ut.Fragment=QD;ut.Profiler=eO;ut.PureComponent=rw;ut.StrictMode=JD;ut.Suspense=rO;ut.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hO;ut.act=ZA;ut.cloneElement=function(i,e,t){if(i==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+i+".");var n=$A({},i.props),r=i.key,s=i.ref,a=i._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,a=aw.current),e.key!==void 0&&(r=""+e.key),i.type&&i.type.defaultProps)var o=i.type.defaultProps;for(l in e)XA.call(e,l)&&!KA.hasOwnProperty(l)&&(n[l]=e[l]===void 0&&o!==void 0?o[l]:e[l])}var l=arguments.length-2;if(l===1)n.children=t;else if(1<l){o=Array(l);for(var u=0;u<l;u++)o[u]=arguments[u+2];n.children=o}return{$$typeof:qp,type:i.type,key:r,ref:s,props:n,_owner:a}};ut.createContext=function(i){return i={$$typeof:nO,_currentValue:i,_currentValue2:i,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},i.Provider={$$typeof:tO,_context:i},i.Consumer=i};ut.createElement=YA;ut.createFactory=function(i){var e=YA.bind(null,i);return e.type=i,e};ut.createRef=function(){return{current:null}};ut.forwardRef=function(i){return{$$typeof:iO,render:i}};ut.isValidElement=ow;ut.lazy=function(i){return{$$typeof:aO,_payload:{_status:-1,_result:i},_init:cO}};ut.memo=function(i,e){return{$$typeof:sO,type:i,compare:e===void 0?null:e}};ut.startTransition=function(i){var e=Pg.transition;Pg.transition={};try{i()}finally{Pg.transition=e}};ut.unstable_act=ZA;ut.useCallback=function(i,e){return yi.current.useCallback(i,e)};ut.useContext=function(i){return yi.current.useContext(i)};ut.useDebugValue=function(){};ut.useDeferredValue=function(i){return yi.current.useDeferredValue(i)};ut.useEffect=function(i,e){return yi.current.useEffect(i,e)};ut.useId=function(){return yi.current.useId()};ut.useImperativeHandle=function(i,e,t){return yi.current.useImperativeHandle(i,e,t)};ut.useInsertionEffect=function(i,e){return yi.current.useInsertionEffect(i,e)};ut.useLayoutEffect=function(i,e){return yi.current.useLayoutEffect(i,e)};ut.useMemo=function(i,e){return yi.current.useMemo(i,e)};ut.useReducer=function(i,e,t){return yi.current.useReducer(i,e,t)};ut.useRef=function(i){return yi.current.useRef(i)};ut.useState=function(i){return yi.current.useState(i)};ut.useSyncExternalStore=function(i,e,t){return yi.current.useSyncExternalStore(i,e,t)};ut.useTransition=function(){return yi.current.useTransition()};ut.version="18.3.1";HA.exports=ut;var ze=HA.exports;const gt=zo(ze),fO=YD({__proto__:null,default:gt},[ze]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dO=ze,pO=Symbol.for("react.element"),gO=Symbol.for("react.fragment"),mO=Object.prototype.hasOwnProperty,vO=dO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yO={key:!0,ref:!0,__self:!0,__source:!0};function QA(i,e,t){var n,r={},s=null,a=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(a=e.ref);for(n in e)mO.call(e,n)&&!yO.hasOwnProperty(n)&&(r[n]=e[n]);if(i&&i.defaultProps)for(n in e=i.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:pO,type:i,key:s,ref:a,props:r,_owner:vO.current}}Uv.Fragment=gO;Uv.jsx=QA;Uv.jsxs=QA;qA.exports=Uv;var ue=qA.exports,D0={},JA={exports:{}},rr={},ex={exports:{}},tx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(Z,K){var q=Z.length;Z.push(K);e:for(;0<q;){var P=q-1>>>1,B=Z[P];if(0<r(B,K))Z[P]=K,Z[q]=B,q=P;else break e}}function t(Z){return Z.length===0?null:Z[0]}function n(Z){if(Z.length===0)return null;var K=Z[0],q=Z.pop();if(q!==K){Z[0]=q;e:for(var P=0,B=Z.length,V=B>>>1;P<V;){var J=2*(P+1)-1,te=Z[J],U=J+1,Y=Z[U];if(0>r(te,q))U<B&&0>r(Y,te)?(Z[P]=Y,Z[U]=q,P=U):(Z[P]=te,Z[J]=q,P=J);else if(U<B&&0>r(Y,q))Z[P]=Y,Z[U]=q,P=U;else break e}}return K}function r(Z,K){var q=Z.sortIndex-K.sortIndex;return q!==0?q:Z.id-K.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var a=Date,o=a.now();i.unstable_now=function(){return a.now()-o}}var l=[],u=[],c=1,h=null,f=3,d=!1,y=!1,b=!1,v=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function w(Z){for(var K=t(u);K!==null;){if(K.callback===null)n(u);else if(K.startTime<=Z)n(u),K.sortIndex=K.expirationTime,e(l,K);else break;K=t(u)}}function _(Z){if(b=!1,w(Z),!y)if(t(l)!==null)y=!0,$(E);else{var K=t(u);K!==null&&G(_,K.startTime-Z)}}function E(Z,K){y=!1,b&&(b=!1,g(S),S=-1),d=!0;var q=f;try{for(w(K),h=t(l);h!==null&&(!(h.expirationTime>K)||Z&&!k());){var P=h.callback;if(typeof P=="function"){h.callback=null,f=h.priorityLevel;var B=P(h.expirationTime<=K);K=i.unstable_now(),typeof B=="function"?h.callback=B:h===t(l)&&n(l),w(K)}else n(l);h=t(l)}if(h!==null)var V=!0;else{var J=t(u);J!==null&&G(_,J.startTime-K),V=!1}return V}finally{h=null,f=q,d=!1}}var x=!1,A=null,S=-1,O=5,C=-1;function k(){return!(i.unstable_now()-C<O)}function D(){if(A!==null){var Z=i.unstable_now();C=Z;var K=!0;try{K=A(!0,Z)}finally{K?R():(x=!1,A=null)}}else x=!1}var R;if(typeof m=="function")R=function(){m(D)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,H=F.port2;F.port1.onmessage=D,R=function(){H.postMessage(null)}}else R=function(){v(D,0)};function $(Z){A=Z,x||(x=!0,R())}function G(Z,K){S=v(function(){Z(i.unstable_now())},K)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(Z){Z.callback=null},i.unstable_continueExecution=function(){y||d||(y=!0,$(E))},i.unstable_forceFrameRate=function(Z){0>Z||125<Z?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<Z?Math.floor(1e3/Z):5},i.unstable_getCurrentPriorityLevel=function(){return f},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(Z){switch(f){case 1:case 2:case 3:var K=3;break;default:K=f}var q=f;f=K;try{return Z()}finally{f=q}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(Z,K){switch(Z){case 1:case 2:case 3:case 4:case 5:break;default:Z=3}var q=f;f=Z;try{return K()}finally{f=q}},i.unstable_scheduleCallback=function(Z,K,q){var P=i.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?P+q:P):q=P,Z){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=q+B,Z={id:c++,callback:K,priorityLevel:Z,startTime:q,expirationTime:B,sortIndex:-1},q>P?(Z.sortIndex=q,e(u,Z),t(l)===null&&Z===t(u)&&(b?(g(S),S=-1):b=!0,G(_,q-P))):(Z.sortIndex=B,e(l,Z),y||d||(y=!0,$(E))),Z},i.unstable_shouldYield=k,i.unstable_wrapCallback=function(Z){var K=f;return function(){var q=f;f=K;try{return Z.apply(this,arguments)}finally{f=q}}}})(tx);ex.exports=tx;var bO=ex.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wO=ze,ir=bO;function Ae(i){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+i,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+i+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var nx=new Set,qf={};function Au(i,e){Eh(i,e),Eh(i+"Capture",e)}function Eh(i,e){for(qf[i]=e,i=0;i<e.length;i++)nx.add(e[i])}var Aa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),O0=Object.prototype.hasOwnProperty,_O=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Y_={},Z_={};function EO(i){return O0.call(Z_,i)?!0:O0.call(Y_,i)?!1:_O.test(i)?Z_[i]=!0:(Y_[i]=!0,!1)}function AO(i,e,t,n){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:t!==null?!t.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function xO(i,e,t,n){if(e===null||typeof e>"u"||AO(i,e,t,n))return!0;if(n)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function bi(i,e,t,n,r,s,a){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=i,this.type=e,this.sanitizeURL=s,this.removeEmptyString=a}var $n={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){$n[i]=new bi(i,0,!1,i,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var e=i[0];$n[e]=new bi(e,1,!1,i[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(i){$n[i]=new bi(i,2,!1,i.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){$n[i]=new bi(i,2,!1,i,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){$n[i]=new bi(i,3,!1,i.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(i){$n[i]=new bi(i,3,!0,i,null,!1,!1)});["capture","download"].forEach(function(i){$n[i]=new bi(i,4,!1,i,null,!1,!1)});["cols","rows","size","span"].forEach(function(i){$n[i]=new bi(i,6,!1,i,null,!1,!1)});["rowSpan","start"].forEach(function(i){$n[i]=new bi(i,5,!1,i.toLowerCase(),null,!1,!1)});var lw=/[\-:]([a-z])/g;function uw(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var e=i.replace(lw,uw);$n[e]=new bi(e,1,!1,i,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var e=i.replace(lw,uw);$n[e]=new bi(e,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(i){var e=i.replace(lw,uw);$n[e]=new bi(e,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(i){$n[i]=new bi(i,1,!1,i.toLowerCase(),null,!1,!1)});$n.xlinkHref=new bi("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(i){$n[i]=new bi(i,1,!1,i.toLowerCase(),null,!0,!0)});function cw(i,e,t,n){var r=$n.hasOwnProperty(e)?$n[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(xO(e,t,r,n)&&(t=null),n||r===null?EO(e)&&(t===null?i.removeAttribute(e):i.setAttribute(e,""+t)):r.mustUseProperty?i[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,n=r.attributeNamespace,t===null?i.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,n?i.setAttributeNS(n,e,t):i.setAttribute(e,t))))}var Pa=wO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ug=Symbol.for("react.element"),Gu=Symbol.for("react.portal"),Xu=Symbol.for("react.fragment"),hw=Symbol.for("react.strict_mode"),N0=Symbol.for("react.profiler"),ix=Symbol.for("react.provider"),rx=Symbol.for("react.context"),fw=Symbol.for("react.forward_ref"),R0=Symbol.for("react.suspense"),P0=Symbol.for("react.suspense_list"),dw=Symbol.for("react.memo"),Ba=Symbol.for("react.lazy"),sx=Symbol.for("react.offscreen"),Q_=Symbol.iterator;function $h(i){return i===null||typeof i!="object"?null:(i=Q_&&i[Q_]||i["@@iterator"],typeof i=="function"?i:null)}var Yt=Object.assign,Ry;function cf(i){if(Ry===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Ry=e&&e[1]||""}return`
`+Ry+i}var Py=!1;function Ly(i,e){if(!i||Py)return"";Py=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var n=u}Reflect.construct(i,[],e)}else{try{e.call()}catch(u){n=u}i.call(e.prototype)}else{try{throw Error()}catch(u){n=u}i()}}catch(u){if(u&&n&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=n.stack.split(`
`),a=r.length-1,o=s.length-1;1<=a&&0<=o&&r[a]!==s[o];)o--;for(;1<=a&&0<=o;a--,o--)if(r[a]!==s[o]){if(a!==1||o!==1)do if(a--,o--,0>o||r[a]!==s[o]){var l=`
`+r[a].replace(" at new "," at ");return i.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",i.displayName)),l}while(1<=a&&0<=o);break}}}finally{Py=!1,Error.prepareStackTrace=t}return(i=i?i.displayName||i.name:"")?cf(i):""}function SO(i){switch(i.tag){case 5:return cf(i.type);case 16:return cf("Lazy");case 13:return cf("Suspense");case 19:return cf("SuspenseList");case 0:case 2:case 15:return i=Ly(i.type,!1),i;case 11:return i=Ly(i.type.render,!1),i;case 1:return i=Ly(i.type,!0),i;default:return""}}function L0(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case Xu:return"Fragment";case Gu:return"Portal";case N0:return"Profiler";case hw:return"StrictMode";case R0:return"Suspense";case P0:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case rx:return(i.displayName||"Context")+".Consumer";case ix:return(i._context.displayName||"Context")+".Provider";case fw:var e=i.render;return i=i.displayName,i||(i=e.displayName||e.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case dw:return e=i.displayName||null,e!==null?e:L0(i.type)||"Memo";case Ba:e=i._payload,i=i._init;try{return L0(i(e))}catch{}}return null}function CO(i){var e=i.type;switch(i.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=e.render,i=i.displayName||i.name||"",e.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return L0(e);case 8:return e===hw?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Io(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ax(i){var e=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function TO(i){var e=ax(i)?"checked":"value",t=Object.getOwnPropertyDescriptor(i.constructor.prototype,e),n=""+i[e];if(!i.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(i,e,{configurable:!0,get:function(){return r.call(this)},set:function(a){n=""+a,s.call(this,a)}}),Object.defineProperty(i,e,{enumerable:t.enumerable}),{getValue:function(){return n},setValue:function(a){n=""+a},stopTracking:function(){i._valueTracker=null,delete i[e]}}}}function cg(i){i._valueTracker||(i._valueTracker=TO(i))}function ox(i){if(!i)return!1;var e=i._valueTracker;if(!e)return!0;var t=e.getValue(),n="";return i&&(n=ax(i)?i.checked?"true":"false":i.value),i=n,i!==t?(e.setValue(i),!0):!1}function Sm(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function I0(i,e){var t=e.checked;return Yt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??i._wrapperState.initialChecked})}function J_(i,e){var t=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;t=Io(e.value!=null?e.value:t),i._wrapperState={initialChecked:n,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function lx(i,e){e=e.checked,e!=null&&cw(i,"checked",e,!1)}function M0(i,e){lx(i,e);var t=Io(e.value),n=e.type;if(t!=null)n==="number"?(t===0&&i.value===""||i.value!=t)&&(i.value=""+t):i.value!==""+t&&(i.value=""+t);else if(n==="submit"||n==="reset"){i.removeAttribute("value");return}e.hasOwnProperty("value")?F0(i,e.type,t):e.hasOwnProperty("defaultValue")&&F0(i,e.type,Io(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(i.defaultChecked=!!e.defaultChecked)}function e2(i,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+i._wrapperState.initialValue,t||e===i.value||(i.value=e),i.defaultValue=e}t=i.name,t!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,t!==""&&(i.name=t)}function F0(i,e,t){(e!=="number"||Sm(i.ownerDocument)!==i)&&(t==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+t&&(i.defaultValue=""+t))}var hf=Array.isArray;function lc(i,e,t,n){if(i=i.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<i.length;t++)r=e.hasOwnProperty("$"+i[t].value),i[t].selected!==r&&(i[t].selected=r),r&&n&&(i[t].defaultSelected=!0)}else{for(t=""+Io(t),e=null,r=0;r<i.length;r++){if(i[r].value===t){i[r].selected=!0,n&&(i[r].defaultSelected=!0);return}e!==null||i[r].disabled||(e=i[r])}e!==null&&(e.selected=!0)}}function B0(i,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Ae(91));return Yt({},e,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function t2(i,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Ae(92));if(hf(t)){if(1<t.length)throw Error(Ae(93));t=t[0]}e=t}e==null&&(e=""),t=e}i._wrapperState={initialValue:Io(t)}}function ux(i,e){var t=Io(e.value),n=Io(e.defaultValue);t!=null&&(t=""+t,t!==i.value&&(i.value=t),e.defaultValue==null&&i.defaultValue!==t&&(i.defaultValue=t)),n!=null&&(i.defaultValue=""+n)}function n2(i){var e=i.textContent;e===i._wrapperState.initialValue&&e!==""&&e!==null&&(i.value=e)}function cx(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function j0(i,e){return i==null||i==="http://www.w3.org/1999/xhtml"?cx(e):i==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var hg,hx=function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,n,r){MSApp.execUnsafeLocalFunction(function(){return i(e,t,n,r)})}:i}(function(i,e){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=e;else{for(hg=hg||document.createElement("div"),hg.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=hg.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;e.firstChild;)i.appendChild(e.firstChild)}});function Hf(i,e){if(e){var t=i.firstChild;if(t&&t===i.lastChild&&t.nodeType===3){t.nodeValue=e;return}}i.textContent=e}var Of={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},kO=["Webkit","ms","Moz","O"];Object.keys(Of).forEach(function(i){kO.forEach(function(e){e=e+i.charAt(0).toUpperCase()+i.substring(1),Of[e]=Of[i]})});function fx(i,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Of.hasOwnProperty(i)&&Of[i]?(""+e).trim():e+"px"}function dx(i,e){i=i.style;for(var t in e)if(e.hasOwnProperty(t)){var n=t.indexOf("--")===0,r=fx(t,e[t],n);t==="float"&&(t="cssFloat"),n?i.setProperty(t,r):i[t]=r}}var DO=Yt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function z0(i,e){if(e){if(DO[i]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Ae(137,i));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Ae(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Ae(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Ae(62))}}function U0(i,e){if(i.indexOf("-")===-1)return typeof e.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var q0=null;function pw(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var H0=null,uc=null,cc=null;function i2(i){if(i=$p(i)){if(typeof H0!="function")throw Error(Ae(280));var e=i.stateNode;e&&(e=Vv(e),H0(i.stateNode,i.type,e))}}function px(i){uc?cc?cc.push(i):cc=[i]:uc=i}function gx(){if(uc){var i=uc,e=cc;if(cc=uc=null,i2(i),e)for(i=0;i<e.length;i++)i2(e[i])}}function mx(i,e){return i(e)}function vx(){}var Iy=!1;function yx(i,e,t){if(Iy)return i(e,t);Iy=!0;try{return mx(i,e,t)}finally{Iy=!1,(uc!==null||cc!==null)&&(vx(),gx())}}function Wf(i,e){var t=i.stateNode;if(t===null)return null;var n=Vv(t);if(n===null)return null;t=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(i=i.type,n=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!n;break e;default:i=!1}if(i)return null;if(t&&typeof t!="function")throw Error(Ae(231,e,typeof t));return t}var W0=!1;if(Aa)try{var Vh={};Object.defineProperty(Vh,"passive",{get:function(){W0=!0}}),window.addEventListener("test",Vh,Vh),window.removeEventListener("test",Vh,Vh)}catch{W0=!1}function OO(i,e,t,n,r,s,a,o,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(t,u)}catch(c){this.onError(c)}}var Nf=!1,Cm=null,Tm=!1,$0=null,NO={onError:function(i){Nf=!0,Cm=i}};function RO(i,e,t,n,r,s,a,o,l){Nf=!1,Cm=null,OO.apply(NO,arguments)}function PO(i,e,t,n,r,s,a,o,l){if(RO.apply(this,arguments),Nf){if(Nf){var u=Cm;Nf=!1,Cm=null}else throw Error(Ae(198));Tm||(Tm=!0,$0=u)}}function xu(i){var e=i,t=i;if(i.alternate)for(;e.return;)e=e.return;else{i=e;do e=i,e.flags&4098&&(t=e.return),i=e.return;while(i)}return e.tag===3?t:null}function bx(i){if(i.tag===13){var e=i.memoizedState;if(e===null&&(i=i.alternate,i!==null&&(e=i.memoizedState)),e!==null)return e.dehydrated}return null}function r2(i){if(xu(i)!==i)throw Error(Ae(188))}function LO(i){var e=i.alternate;if(!e){if(e=xu(i),e===null)throw Error(Ae(188));return e!==i?null:i}for(var t=i,n=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){t=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return r2(r),i;if(s===n)return r2(r),e;s=s.sibling}throw Error(Ae(188))}if(t.return!==n.return)t=r,n=s;else{for(var a=!1,o=r.child;o;){if(o===t){a=!0,t=r,n=s;break}if(o===n){a=!0,n=r,t=s;break}o=o.sibling}if(!a){for(o=s.child;o;){if(o===t){a=!0,t=s,n=r;break}if(o===n){a=!0,n=s,t=r;break}o=o.sibling}if(!a)throw Error(Ae(189))}}if(t.alternate!==n)throw Error(Ae(190))}if(t.tag!==3)throw Error(Ae(188));return t.stateNode.current===t?i:e}function wx(i){return i=LO(i),i!==null?_x(i):null}function _x(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var e=_x(i);if(e!==null)return e;i=i.sibling}return null}var Ex=ir.unstable_scheduleCallback,s2=ir.unstable_cancelCallback,IO=ir.unstable_shouldYield,MO=ir.unstable_requestPaint,an=ir.unstable_now,FO=ir.unstable_getCurrentPriorityLevel,gw=ir.unstable_ImmediatePriority,Ax=ir.unstable_UserBlockingPriority,km=ir.unstable_NormalPriority,BO=ir.unstable_LowPriority,xx=ir.unstable_IdlePriority,qv=null,Ds=null;function jO(i){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(qv,i,void 0,(i.current.flags&128)===128)}catch{}}var Qr=Math.clz32?Math.clz32:qO,zO=Math.log,UO=Math.LN2;function qO(i){return i>>>=0,i===0?32:31-(zO(i)/UO|0)|0}var fg=64,dg=4194304;function ff(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function Dm(i,e){var t=i.pendingLanes;if(t===0)return 0;var n=0,r=i.suspendedLanes,s=i.pingedLanes,a=t&268435455;if(a!==0){var o=a&~r;o!==0?n=ff(o):(s&=a,s!==0&&(n=ff(s)))}else a=t&~r,a!==0?n=ff(a):s!==0&&(n=ff(s));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(n&4&&(n|=t&16),e=i.entangledLanes,e!==0)for(i=i.entanglements,e&=n;0<e;)t=31-Qr(e),r=1<<t,n|=i[t],e&=~r;return n}function HO(i,e){switch(i){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function WO(i,e){for(var t=i.suspendedLanes,n=i.pingedLanes,r=i.expirationTimes,s=i.pendingLanes;0<s;){var a=31-Qr(s),o=1<<a,l=r[a];l===-1?(!(o&t)||o&n)&&(r[a]=HO(o,e)):l<=e&&(i.expiredLanes|=o),s&=~o}}function V0(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Sx(){var i=fg;return fg<<=1,!(fg&4194240)&&(fg=64),i}function My(i){for(var e=[],t=0;31>t;t++)e.push(i);return e}function Hp(i,e,t){i.pendingLanes|=e,e!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,e=31-Qr(e),i[e]=t}function $O(i,e){var t=i.pendingLanes&~e;i.pendingLanes=e,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=e,i.mutableReadLanes&=e,i.entangledLanes&=e,e=i.entanglements;var n=i.eventTimes;for(i=i.expirationTimes;0<t;){var r=31-Qr(t),s=1<<r;e[r]=0,n[r]=-1,i[r]=-1,t&=~s}}function mw(i,e){var t=i.entangledLanes|=e;for(i=i.entanglements;t;){var n=31-Qr(t),r=1<<n;r&e|i[n]&e&&(i[n]|=e),t&=~r}}var Ct=0;function Cx(i){return i&=-i,1<i?4<i?i&268435455?16:536870912:4:1}var Tx,vw,kx,Dx,Ox,G0=!1,pg=[],So=null,Co=null,To=null,$f=new Map,Vf=new Map,za=[],VO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function a2(i,e){switch(i){case"focusin":case"focusout":So=null;break;case"dragenter":case"dragleave":Co=null;break;case"mouseover":case"mouseout":To=null;break;case"pointerover":case"pointerout":$f.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Vf.delete(e.pointerId)}}function Gh(i,e,t,n,r,s){return i===null||i.nativeEvent!==s?(i={blockedOn:e,domEventName:t,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},e!==null&&(e=$p(e),e!==null&&vw(e)),i):(i.eventSystemFlags|=n,e=i.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),i)}function GO(i,e,t,n,r){switch(e){case"focusin":return So=Gh(So,i,e,t,n,r),!0;case"dragenter":return Co=Gh(Co,i,e,t,n,r),!0;case"mouseover":return To=Gh(To,i,e,t,n,r),!0;case"pointerover":var s=r.pointerId;return $f.set(s,Gh($f.get(s)||null,i,e,t,n,r)),!0;case"gotpointercapture":return s=r.pointerId,Vf.set(s,Gh(Vf.get(s)||null,i,e,t,n,r)),!0}return!1}function Nx(i){var e=nl(i.target);if(e!==null){var t=xu(e);if(t!==null){if(e=t.tag,e===13){if(e=bx(t),e!==null){i.blockedOn=e,Ox(i.priority,function(){kx(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){i.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Lg(i){if(i.blockedOn!==null)return!1;for(var e=i.targetContainers;0<e.length;){var t=X0(i.domEventName,i.eventSystemFlags,e[0],i.nativeEvent);if(t===null){t=i.nativeEvent;var n=new t.constructor(t.type,t);q0=n,t.target.dispatchEvent(n),q0=null}else return e=$p(t),e!==null&&vw(e),i.blockedOn=t,!1;e.shift()}return!0}function o2(i,e,t){Lg(i)&&t.delete(e)}function XO(){G0=!1,So!==null&&Lg(So)&&(So=null),Co!==null&&Lg(Co)&&(Co=null),To!==null&&Lg(To)&&(To=null),$f.forEach(o2),Vf.forEach(o2)}function Xh(i,e){i.blockedOn===e&&(i.blockedOn=null,G0||(G0=!0,ir.unstable_scheduleCallback(ir.unstable_NormalPriority,XO)))}function Gf(i){function e(r){return Xh(r,i)}if(0<pg.length){Xh(pg[0],i);for(var t=1;t<pg.length;t++){var n=pg[t];n.blockedOn===i&&(n.blockedOn=null)}}for(So!==null&&Xh(So,i),Co!==null&&Xh(Co,i),To!==null&&Xh(To,i),$f.forEach(e),Vf.forEach(e),t=0;t<za.length;t++)n=za[t],n.blockedOn===i&&(n.blockedOn=null);for(;0<za.length&&(t=za[0],t.blockedOn===null);)Nx(t),t.blockedOn===null&&za.shift()}var hc=Pa.ReactCurrentBatchConfig,Om=!0;function KO(i,e,t,n){var r=Ct,s=hc.transition;hc.transition=null;try{Ct=1,yw(i,e,t,n)}finally{Ct=r,hc.transition=s}}function YO(i,e,t,n){var r=Ct,s=hc.transition;hc.transition=null;try{Ct=4,yw(i,e,t,n)}finally{Ct=r,hc.transition=s}}function yw(i,e,t,n){if(Om){var r=X0(i,e,t,n);if(r===null)Vy(i,e,n,Nm,t),a2(i,n);else if(GO(r,i,e,t,n))n.stopPropagation();else if(a2(i,n),e&4&&-1<VO.indexOf(i)){for(;r!==null;){var s=$p(r);if(s!==null&&Tx(s),s=X0(i,e,t,n),s===null&&Vy(i,e,n,Nm,t),s===r)break;r=s}r!==null&&n.stopPropagation()}else Vy(i,e,n,null,t)}}var Nm=null;function X0(i,e,t,n){if(Nm=null,i=pw(n),i=nl(i),i!==null)if(e=xu(i),e===null)i=null;else if(t=e.tag,t===13){if(i=bx(e),i!==null)return i;i=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;i=null}else e!==i&&(i=null);return Nm=i,null}function Rx(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FO()){case gw:return 1;case Ax:return 4;case km:case BO:return 16;case xx:return 536870912;default:return 16}default:return 16}}var wo=null,bw=null,Ig=null;function Px(){if(Ig)return Ig;var i,e=bw,t=e.length,n,r="value"in wo?wo.value:wo.textContent,s=r.length;for(i=0;i<t&&e[i]===r[i];i++);var a=t-i;for(n=1;n<=a&&e[t-n]===r[s-n];n++);return Ig=r.slice(i,1<n?1-n:void 0)}function Mg(i){var e=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&e===13&&(i=13)):i=e,i===10&&(i=13),32<=i||i===13?i:0}function gg(){return!0}function l2(){return!1}function sr(i){function e(t,n,r,s,a){this._reactName=t,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=a,this.currentTarget=null;for(var o in i)i.hasOwnProperty(o)&&(t=i[o],this[o]=t?t(s):s[o]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?gg:l2,this.isPropagationStopped=l2,this}return Yt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=gg)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=gg)},persist:function(){},isPersistent:gg}),e}var Lh={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ww=sr(Lh),Wp=Yt({},Lh,{view:0,detail:0}),ZO=sr(Wp),Fy,By,Kh,Hv=Yt({},Wp,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:_w,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Kh&&(Kh&&i.type==="mousemove"?(Fy=i.screenX-Kh.screenX,By=i.screenY-Kh.screenY):By=Fy=0,Kh=i),Fy)},movementY:function(i){return"movementY"in i?i.movementY:By}}),u2=sr(Hv),QO=Yt({},Hv,{dataTransfer:0}),JO=sr(QO),eN=Yt({},Wp,{relatedTarget:0}),jy=sr(eN),tN=Yt({},Lh,{animationName:0,elapsedTime:0,pseudoElement:0}),nN=sr(tN),iN=Yt({},Lh,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rN=sr(iN),sN=Yt({},Lh,{data:0}),c2=sr(sN),aN={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oN={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lN={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function uN(i){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(i):(i=lN[i])?!!e[i]:!1}function _w(){return uN}var cN=Yt({},Wp,{key:function(i){if(i.key){var e=aN[i.key]||i.key;if(e!=="Unidentified")return e}return i.type==="keypress"?(i=Mg(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?oN[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:_w,charCode:function(i){return i.type==="keypress"?Mg(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Mg(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),hN=sr(cN),fN=Yt({},Hv,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),h2=sr(fN),dN=Yt({},Wp,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:_w}),pN=sr(dN),gN=Yt({},Lh,{propertyName:0,elapsedTime:0,pseudoElement:0}),mN=sr(gN),vN=Yt({},Hv,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),yN=sr(vN),bN=[9,13,27,32],Ew=Aa&&"CompositionEvent"in window,Rf=null;Aa&&"documentMode"in document&&(Rf=document.documentMode);var wN=Aa&&"TextEvent"in window&&!Rf,Lx=Aa&&(!Ew||Rf&&8<Rf&&11>=Rf),f2=" ",d2=!1;function Ix(i,e){switch(i){case"keyup":return bN.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Mx(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ku=!1;function _N(i,e){switch(i){case"compositionend":return Mx(e);case"keypress":return e.which!==32?null:(d2=!0,f2);case"textInput":return i=e.data,i===f2&&d2?null:i;default:return null}}function EN(i,e){if(Ku)return i==="compositionend"||!Ew&&Ix(i,e)?(i=Px(),Ig=bw=wo=null,Ku=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Lx&&e.locale!=="ko"?null:e.data;default:return null}}var AN={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function p2(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e==="input"?!!AN[i.type]:e==="textarea"}function Fx(i,e,t,n){px(n),e=Rm(e,"onChange"),0<e.length&&(t=new ww("onChange","change",null,t,n),i.push({event:t,listeners:e}))}var Pf=null,Xf=null;function xN(i){Xx(i,0)}function Wv(i){var e=Qu(i);if(ox(e))return i}function SN(i,e){if(i==="change")return e}var Bx=!1;if(Aa){var zy;if(Aa){var Uy="oninput"in document;if(!Uy){var g2=document.createElement("div");g2.setAttribute("oninput","return;"),Uy=typeof g2.oninput=="function"}zy=Uy}else zy=!1;Bx=zy&&(!document.documentMode||9<document.documentMode)}function m2(){Pf&&(Pf.detachEvent("onpropertychange",jx),Xf=Pf=null)}function jx(i){if(i.propertyName==="value"&&Wv(Xf)){var e=[];Fx(e,Xf,i,pw(i)),yx(xN,e)}}function CN(i,e,t){i==="focusin"?(m2(),Pf=e,Xf=t,Pf.attachEvent("onpropertychange",jx)):i==="focusout"&&m2()}function TN(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Wv(Xf)}function kN(i,e){if(i==="click")return Wv(e)}function DN(i,e){if(i==="input"||i==="change")return Wv(e)}function ON(i,e){return i===e&&(i!==0||1/i===1/e)||i!==i&&e!==e}var ts=typeof Object.is=="function"?Object.is:ON;function Kf(i,e){if(ts(i,e))return!0;if(typeof i!="object"||i===null||typeof e!="object"||e===null)return!1;var t=Object.keys(i),n=Object.keys(e);if(t.length!==n.length)return!1;for(n=0;n<t.length;n++){var r=t[n];if(!O0.call(e,r)||!ts(i[r],e[r]))return!1}return!0}function v2(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function y2(i,e){var t=v2(i);i=0;for(var n;t;){if(t.nodeType===3){if(n=i+t.textContent.length,i<=e&&n>=e)return{node:t,offset:e-i};i=n}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=v2(t)}}function zx(i,e){return i&&e?i===e?!0:i&&i.nodeType===3?!1:e&&e.nodeType===3?zx(i,e.parentNode):"contains"in i?i.contains(e):i.compareDocumentPosition?!!(i.compareDocumentPosition(e)&16):!1:!1}function Ux(){for(var i=window,e=Sm();e instanceof i.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)i=e.contentWindow;else break;e=Sm(i.document)}return e}function Aw(i){var e=i&&i.nodeName&&i.nodeName.toLowerCase();return e&&(e==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||e==="textarea"||i.contentEditable==="true")}function NN(i){var e=Ux(),t=i.focusedElem,n=i.selectionRange;if(e!==t&&t&&t.ownerDocument&&zx(t.ownerDocument.documentElement,t)){if(n!==null&&Aw(t)){if(e=n.start,i=n.end,i===void 0&&(i=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(i,t.value.length);else if(i=(e=t.ownerDocument||document)&&e.defaultView||window,i.getSelection){i=i.getSelection();var r=t.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!i.extend&&s>n&&(r=n,n=s,s=r),r=y2(t,s);var a=y2(t,n);r&&a&&(i.rangeCount!==1||i.anchorNode!==r.node||i.anchorOffset!==r.offset||i.focusNode!==a.node||i.focusOffset!==a.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),i.removeAllRanges(),s>n?(i.addRange(e),i.extend(a.node,a.offset)):(e.setEnd(a.node,a.offset),i.addRange(e)))}}for(e=[],i=t;i=i.parentNode;)i.nodeType===1&&e.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)i=e[t],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var RN=Aa&&"documentMode"in document&&11>=document.documentMode,Yu=null,K0=null,Lf=null,Y0=!1;function b2(i,e,t){var n=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;Y0||Yu==null||Yu!==Sm(n)||(n=Yu,"selectionStart"in n&&Aw(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Lf&&Kf(Lf,n)||(Lf=n,n=Rm(K0,"onSelect"),0<n.length&&(e=new ww("onSelect","select",null,e,t),i.push({event:e,listeners:n}),e.target=Yu)))}function mg(i,e){var t={};return t[i.toLowerCase()]=e.toLowerCase(),t["Webkit"+i]="webkit"+e,t["Moz"+i]="moz"+e,t}var Zu={animationend:mg("Animation","AnimationEnd"),animationiteration:mg("Animation","AnimationIteration"),animationstart:mg("Animation","AnimationStart"),transitionend:mg("Transition","TransitionEnd")},qy={},qx={};Aa&&(qx=document.createElement("div").style,"AnimationEvent"in window||(delete Zu.animationend.animation,delete Zu.animationiteration.animation,delete Zu.animationstart.animation),"TransitionEvent"in window||delete Zu.transitionend.transition);function $v(i){if(qy[i])return qy[i];if(!Zu[i])return i;var e=Zu[i],t;for(t in e)if(e.hasOwnProperty(t)&&t in qx)return qy[i]=e[t];return i}var Hx=$v("animationend"),Wx=$v("animationiteration"),$x=$v("animationstart"),Vx=$v("transitionend"),Gx=new Map,w2="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Uo(i,e){Gx.set(i,e),Au(e,[i])}for(var Hy=0;Hy<w2.length;Hy++){var Wy=w2[Hy],PN=Wy.toLowerCase(),LN=Wy[0].toUpperCase()+Wy.slice(1);Uo(PN,"on"+LN)}Uo(Hx,"onAnimationEnd");Uo(Wx,"onAnimationIteration");Uo($x,"onAnimationStart");Uo("dblclick","onDoubleClick");Uo("focusin","onFocus");Uo("focusout","onBlur");Uo(Vx,"onTransitionEnd");Eh("onMouseEnter",["mouseout","mouseover"]);Eh("onMouseLeave",["mouseout","mouseover"]);Eh("onPointerEnter",["pointerout","pointerover"]);Eh("onPointerLeave",["pointerout","pointerover"]);Au("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Au("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Au("onBeforeInput",["compositionend","keypress","textInput","paste"]);Au("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Au("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var df="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),IN=new Set("cancel close invalid load scroll toggle".split(" ").concat(df));function _2(i,e,t){var n=i.type||"unknown-event";i.currentTarget=t,PO(n,e,void 0,i),i.currentTarget=null}function Xx(i,e){e=(e&4)!==0;for(var t=0;t<i.length;t++){var n=i[t],r=n.event;n=n.listeners;e:{var s=void 0;if(e)for(var a=n.length-1;0<=a;a--){var o=n[a],l=o.instance,u=o.currentTarget;if(o=o.listener,l!==s&&r.isPropagationStopped())break e;_2(r,o,u),s=l}else for(a=0;a<n.length;a++){if(o=n[a],l=o.instance,u=o.currentTarget,o=o.listener,l!==s&&r.isPropagationStopped())break e;_2(r,o,u),s=l}}}if(Tm)throw i=$0,Tm=!1,$0=null,i}function It(i,e){var t=e[tb];t===void 0&&(t=e[tb]=new Set);var n=i+"__bubble";t.has(n)||(Kx(e,i,2,!1),t.add(n))}function $y(i,e,t){var n=0;e&&(n|=4),Kx(t,i,n,e)}var vg="_reactListening"+Math.random().toString(36).slice(2);function Yf(i){if(!i[vg]){i[vg]=!0,nx.forEach(function(t){t!=="selectionchange"&&(IN.has(t)||$y(t,!1,i),$y(t,!0,i))});var e=i.nodeType===9?i:i.ownerDocument;e===null||e[vg]||(e[vg]=!0,$y("selectionchange",!1,e))}}function Kx(i,e,t,n){switch(Rx(e)){case 1:var r=KO;break;case 4:r=YO;break;default:r=yw}t=r.bind(null,e,t,i),r=void 0,!W0||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?i.addEventListener(e,t,{capture:!0,passive:r}):i.addEventListener(e,t,!0):r!==void 0?i.addEventListener(e,t,{passive:r}):i.addEventListener(e,t,!1)}function Vy(i,e,t,n,r){var s=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var a=n.tag;if(a===3||a===4){var o=n.stateNode.containerInfo;if(o===r||o.nodeType===8&&o.parentNode===r)break;if(a===4)for(a=n.return;a!==null;){var l=a.tag;if((l===3||l===4)&&(l=a.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;a=a.return}for(;o!==null;){if(a=nl(o),a===null)return;if(l=a.tag,l===5||l===6){n=s=a;continue e}o=o.parentNode}}n=n.return}yx(function(){var u=s,c=pw(t),h=[];e:{var f=Gx.get(i);if(f!==void 0){var d=ww,y=i;switch(i){case"keypress":if(Mg(t)===0)break e;case"keydown":case"keyup":d=hN;break;case"focusin":y="focus",d=jy;break;case"focusout":y="blur",d=jy;break;case"beforeblur":case"afterblur":d=jy;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":d=u2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":d=JO;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":d=pN;break;case Hx:case Wx:case $x:d=nN;break;case Vx:d=mN;break;case"scroll":d=ZO;break;case"wheel":d=yN;break;case"copy":case"cut":case"paste":d=rN;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":d=h2}var b=(e&4)!==0,v=!b&&i==="scroll",g=b?f!==null?f+"Capture":null:f;b=[];for(var m=u,w;m!==null;){w=m;var _=w.stateNode;if(w.tag===5&&_!==null&&(w=_,g!==null&&(_=Wf(m,g),_!=null&&b.push(Zf(m,_,w)))),v)break;m=m.return}0<b.length&&(f=new d(f,y,null,t,c),h.push({event:f,listeners:b}))}}if(!(e&7)){e:{if(f=i==="mouseover"||i==="pointerover",d=i==="mouseout"||i==="pointerout",f&&t!==q0&&(y=t.relatedTarget||t.fromElement)&&(nl(y)||y[xa]))break e;if((d||f)&&(f=c.window===c?c:(f=c.ownerDocument)?f.defaultView||f.parentWindow:window,d?(y=t.relatedTarget||t.toElement,d=u,y=y?nl(y):null,y!==null&&(v=xu(y),y!==v||y.tag!==5&&y.tag!==6)&&(y=null)):(d=null,y=u),d!==y)){if(b=u2,_="onMouseLeave",g="onMouseEnter",m="mouse",(i==="pointerout"||i==="pointerover")&&(b=h2,_="onPointerLeave",g="onPointerEnter",m="pointer"),v=d==null?f:Qu(d),w=y==null?f:Qu(y),f=new b(_,m+"leave",d,t,c),f.target=v,f.relatedTarget=w,_=null,nl(c)===u&&(b=new b(g,m+"enter",y,t,c),b.target=w,b.relatedTarget=v,_=b),v=_,d&&y)t:{for(b=d,g=y,m=0,w=b;w;w=Nu(w))m++;for(w=0,_=g;_;_=Nu(_))w++;for(;0<m-w;)b=Nu(b),m--;for(;0<w-m;)g=Nu(g),w--;for(;m--;){if(b===g||g!==null&&b===g.alternate)break t;b=Nu(b),g=Nu(g)}b=null}else b=null;d!==null&&E2(h,f,d,b,!1),y!==null&&v!==null&&E2(h,v,y,b,!0)}}e:{if(f=u?Qu(u):window,d=f.nodeName&&f.nodeName.toLowerCase(),d==="select"||d==="input"&&f.type==="file")var E=SN;else if(p2(f))if(Bx)E=DN;else{E=TN;var x=CN}else(d=f.nodeName)&&d.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(E=kN);if(E&&(E=E(i,u))){Fx(h,E,t,c);break e}x&&x(i,f,u),i==="focusout"&&(x=f._wrapperState)&&x.controlled&&f.type==="number"&&F0(f,"number",f.value)}switch(x=u?Qu(u):window,i){case"focusin":(p2(x)||x.contentEditable==="true")&&(Yu=x,K0=u,Lf=null);break;case"focusout":Lf=K0=Yu=null;break;case"mousedown":Y0=!0;break;case"contextmenu":case"mouseup":case"dragend":Y0=!1,b2(h,t,c);break;case"selectionchange":if(RN)break;case"keydown":case"keyup":b2(h,t,c)}var A;if(Ew)e:{switch(i){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ku?Ix(i,t)&&(S="onCompositionEnd"):i==="keydown"&&t.keyCode===229&&(S="onCompositionStart");S&&(Lx&&t.locale!=="ko"&&(Ku||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ku&&(A=Px()):(wo=c,bw="value"in wo?wo.value:wo.textContent,Ku=!0)),x=Rm(u,S),0<x.length&&(S=new c2(S,i,null,t,c),h.push({event:S,listeners:x}),A?S.data=A:(A=Mx(t),A!==null&&(S.data=A)))),(A=wN?_N(i,t):EN(i,t))&&(u=Rm(u,"onBeforeInput"),0<u.length&&(c=new c2("onBeforeInput","beforeinput",null,t,c),h.push({event:c,listeners:u}),c.data=A))}Xx(h,e)})}function Zf(i,e,t){return{instance:i,listener:e,currentTarget:t}}function Rm(i,e){for(var t=e+"Capture",n=[];i!==null;){var r=i,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Wf(i,t),s!=null&&n.unshift(Zf(i,s,r)),s=Wf(i,e),s!=null&&n.push(Zf(i,s,r))),i=i.return}return n}function Nu(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function E2(i,e,t,n,r){for(var s=e._reactName,a=[];t!==null&&t!==n;){var o=t,l=o.alternate,u=o.stateNode;if(l!==null&&l===n)break;o.tag===5&&u!==null&&(o=u,r?(l=Wf(t,s),l!=null&&a.unshift(Zf(t,l,o))):r||(l=Wf(t,s),l!=null&&a.push(Zf(t,l,o)))),t=t.return}a.length!==0&&i.push({event:e,listeners:a})}var MN=/\r\n?/g,FN=/\u0000|\uFFFD/g;function A2(i){return(typeof i=="string"?i:""+i).replace(MN,`
`).replace(FN,"")}function yg(i,e,t){if(e=A2(e),A2(i)!==e&&t)throw Error(Ae(425))}function Pm(){}var Z0=null,Q0=null;function J0(i,e){return i==="textarea"||i==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var eb=typeof setTimeout=="function"?setTimeout:void 0,BN=typeof clearTimeout=="function"?clearTimeout:void 0,x2=typeof Promise=="function"?Promise:void 0,jN=typeof queueMicrotask=="function"?queueMicrotask:typeof x2<"u"?function(i){return x2.resolve(null).then(i).catch(zN)}:eb;function zN(i){setTimeout(function(){throw i})}function Gy(i,e){var t=e,n=0;do{var r=t.nextSibling;if(i.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(n===0){i.removeChild(r),Gf(e);return}n--}else t!=="$"&&t!=="$?"&&t!=="$!"||n++;t=r}while(t);Gf(e)}function ko(i){for(;i!=null;i=i.nextSibling){var e=i.nodeType;if(e===1||e===3)break;if(e===8){if(e=i.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return i}function S2(i){i=i.previousSibling;for(var e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return i;e--}else t==="/$"&&e++}i=i.previousSibling}return null}var Ih=Math.random().toString(36).slice(2),ks="__reactFiber$"+Ih,Qf="__reactProps$"+Ih,xa="__reactContainer$"+Ih,tb="__reactEvents$"+Ih,UN="__reactListeners$"+Ih,qN="__reactHandles$"+Ih;function nl(i){var e=i[ks];if(e)return e;for(var t=i.parentNode;t;){if(e=t[xa]||t[ks]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(i=S2(i);i!==null;){if(t=i[ks])return t;i=S2(i)}return e}i=t,t=i.parentNode}return null}function $p(i){return i=i[ks]||i[xa],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Qu(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(Ae(33))}function Vv(i){return i[Qf]||null}var nb=[],Ju=-1;function qo(i){return{current:i}}function Bt(i){0>Ju||(i.current=nb[Ju],nb[Ju]=null,Ju--)}function Pt(i,e){Ju++,nb[Ju]=i.current,i.current=e}var Mo={},si=qo(Mo),Ri=qo(!1),du=Mo;function Ah(i,e){var t=i.type.contextTypes;if(!t)return Mo;var n=i.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=e,i.__reactInternalMemoizedMaskedChildContext=r),r}function Pi(i){return i=i.childContextTypes,i!=null}function Lm(){Bt(Ri),Bt(si)}function C2(i,e,t){if(si.current!==Mo)throw Error(Ae(168));Pt(si,e),Pt(Ri,t)}function Yx(i,e,t){var n=i.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return t;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(Ae(108,CO(i)||"Unknown",r));return Yt({},t,n)}function Im(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Mo,du=si.current,Pt(si,i),Pt(Ri,Ri.current),!0}function T2(i,e,t){var n=i.stateNode;if(!n)throw Error(Ae(169));t?(i=Yx(i,e,du),n.__reactInternalMemoizedMergedChildContext=i,Bt(Ri),Bt(si),Pt(si,i)):Bt(Ri),Pt(Ri,t)}var Hs=null,Gv=!1,Xy=!1;function Zx(i){Hs===null?Hs=[i]:Hs.push(i)}function HN(i){Gv=!0,Zx(i)}function Ho(){if(!Xy&&Hs!==null){Xy=!0;var i=0,e=Ct;try{var t=Hs;for(Ct=1;i<t.length;i++){var n=t[i];do n=n(!0);while(n!==null)}Hs=null,Gv=!1}catch(r){throw Hs!==null&&(Hs=Hs.slice(i+1)),Ex(gw,Ho),r}finally{Ct=e,Xy=!1}}return null}var ec=[],tc=0,Mm=null,Fm=0,vr=[],yr=0,pu=null,ma=1,va="";function Xo(i,e){ec[tc++]=Fm,ec[tc++]=Mm,Mm=i,Fm=e}function Qx(i,e,t){vr[yr++]=ma,vr[yr++]=va,vr[yr++]=pu,pu=i;var n=ma;i=va;var r=32-Qr(n)-1;n&=~(1<<r),t+=1;var s=32-Qr(e)+r;if(30<s){var a=r-r%5;s=(n&(1<<a)-1).toString(32),n>>=a,r-=a,ma=1<<32-Qr(e)+r|t<<r|n,va=s+i}else ma=1<<s|t<<r|n,va=i}function xw(i){i.return!==null&&(Xo(i,1),Qx(i,1,0))}function Sw(i){for(;i===Mm;)Mm=ec[--tc],ec[tc]=null,Fm=ec[--tc],ec[tc]=null;for(;i===pu;)pu=vr[--yr],vr[yr]=null,va=vr[--yr],vr[yr]=null,ma=vr[--yr],vr[yr]=null}var tr=null,er=null,Wt=!1,Yr=null;function Jx(i,e){var t=_r(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=i,e=i.deletions,e===null?(i.deletions=[t],i.flags|=16):e.push(t)}function k2(i,e){switch(i.tag){case 5:var t=i.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(i.stateNode=e,tr=i,er=ko(e.firstChild),!0):!1;case 6:return e=i.pendingProps===""||e.nodeType!==3?null:e,e!==null?(i.stateNode=e,tr=i,er=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=pu!==null?{id:ma,overflow:va}:null,i.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=_r(18,null,null,0),t.stateNode=e,t.return=i,i.child=t,tr=i,er=null,!0):!1;default:return!1}}function ib(i){return(i.mode&1)!==0&&(i.flags&128)===0}function rb(i){if(Wt){var e=er;if(e){var t=e;if(!k2(i,e)){if(ib(i))throw Error(Ae(418));e=ko(t.nextSibling);var n=tr;e&&k2(i,e)?Jx(n,t):(i.flags=i.flags&-4097|2,Wt=!1,tr=i)}}else{if(ib(i))throw Error(Ae(418));i.flags=i.flags&-4097|2,Wt=!1,tr=i}}}function D2(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;tr=i}function bg(i){if(i!==tr)return!1;if(!Wt)return D2(i),Wt=!0,!1;var e;if((e=i.tag!==3)&&!(e=i.tag!==5)&&(e=i.type,e=e!=="head"&&e!=="body"&&!J0(i.type,i.memoizedProps)),e&&(e=er)){if(ib(i))throw eS(),Error(Ae(418));for(;e;)Jx(i,e),e=ko(e.nextSibling)}if(D2(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(Ae(317));e:{for(i=i.nextSibling,e=0;i;){if(i.nodeType===8){var t=i.data;if(t==="/$"){if(e===0){er=ko(i.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}i=i.nextSibling}er=null}}else er=tr?ko(i.stateNode.nextSibling):null;return!0}function eS(){for(var i=er;i;)i=ko(i.nextSibling)}function xh(){er=tr=null,Wt=!1}function Cw(i){Yr===null?Yr=[i]:Yr.push(i)}var WN=Pa.ReactCurrentBatchConfig;function Yh(i,e,t){if(i=t.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Ae(309));var n=t.stateNode}if(!n)throw Error(Ae(147,i));var r=n,s=""+i;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(a){var o=r.refs;a===null?delete o[s]:o[s]=a},e._stringRef=s,e)}if(typeof i!="string")throw Error(Ae(284));if(!t._owner)throw Error(Ae(290,i))}return i}function wg(i,e){throw i=Object.prototype.toString.call(e),Error(Ae(31,i==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":i))}function O2(i){var e=i._init;return e(i._payload)}function tS(i){function e(g,m){if(i){var w=g.deletions;w===null?(g.deletions=[m],g.flags|=16):w.push(m)}}function t(g,m){if(!i)return null;for(;m!==null;)e(g,m),m=m.sibling;return null}function n(g,m){for(g=new Map;m!==null;)m.key!==null?g.set(m.key,m):g.set(m.index,m),m=m.sibling;return g}function r(g,m){return g=Ro(g,m),g.index=0,g.sibling=null,g}function s(g,m,w){return g.index=w,i?(w=g.alternate,w!==null?(w=w.index,w<m?(g.flags|=2,m):w):(g.flags|=2,m)):(g.flags|=1048576,m)}function a(g){return i&&g.alternate===null&&(g.flags|=2),g}function o(g,m,w,_){return m===null||m.tag!==6?(m=t0(w,g.mode,_),m.return=g,m):(m=r(m,w),m.return=g,m)}function l(g,m,w,_){var E=w.type;return E===Xu?c(g,m,w.props.children,_,w.key):m!==null&&(m.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ba&&O2(E)===m.type)?(_=r(m,w.props),_.ref=Yh(g,m,w),_.return=g,_):(_=Hg(w.type,w.key,w.props,null,g.mode,_),_.ref=Yh(g,m,w),_.return=g,_)}function u(g,m,w,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==w.containerInfo||m.stateNode.implementation!==w.implementation?(m=n0(w,g.mode,_),m.return=g,m):(m=r(m,w.children||[]),m.return=g,m)}function c(g,m,w,_,E){return m===null||m.tag!==7?(m=cu(w,g.mode,_,E),m.return=g,m):(m=r(m,w),m.return=g,m)}function h(g,m,w){if(typeof m=="string"&&m!==""||typeof m=="number")return m=t0(""+m,g.mode,w),m.return=g,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ug:return w=Hg(m.type,m.key,m.props,null,g.mode,w),w.ref=Yh(g,null,m),w.return=g,w;case Gu:return m=n0(m,g.mode,w),m.return=g,m;case Ba:var _=m._init;return h(g,_(m._payload),w)}if(hf(m)||$h(m))return m=cu(m,g.mode,w,null),m.return=g,m;wg(g,m)}return null}function f(g,m,w,_){var E=m!==null?m.key:null;if(typeof w=="string"&&w!==""||typeof w=="number")return E!==null?null:o(g,m,""+w,_);if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ug:return w.key===E?l(g,m,w,_):null;case Gu:return w.key===E?u(g,m,w,_):null;case Ba:return E=w._init,f(g,m,E(w._payload),_)}if(hf(w)||$h(w))return E!==null?null:c(g,m,w,_,null);wg(g,w)}return null}function d(g,m,w,_,E){if(typeof _=="string"&&_!==""||typeof _=="number")return g=g.get(w)||null,o(m,g,""+_,E);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ug:return g=g.get(_.key===null?w:_.key)||null,l(m,g,_,E);case Gu:return g=g.get(_.key===null?w:_.key)||null,u(m,g,_,E);case Ba:var x=_._init;return d(g,m,w,x(_._payload),E)}if(hf(_)||$h(_))return g=g.get(w)||null,c(m,g,_,E,null);wg(m,_)}return null}function y(g,m,w,_){for(var E=null,x=null,A=m,S=m=0,O=null;A!==null&&S<w.length;S++){A.index>S?(O=A,A=null):O=A.sibling;var C=f(g,A,w[S],_);if(C===null){A===null&&(A=O);break}i&&A&&C.alternate===null&&e(g,A),m=s(C,m,S),x===null?E=C:x.sibling=C,x=C,A=O}if(S===w.length)return t(g,A),Wt&&Xo(g,S),E;if(A===null){for(;S<w.length;S++)A=h(g,w[S],_),A!==null&&(m=s(A,m,S),x===null?E=A:x.sibling=A,x=A);return Wt&&Xo(g,S),E}for(A=n(g,A);S<w.length;S++)O=d(A,g,S,w[S],_),O!==null&&(i&&O.alternate!==null&&A.delete(O.key===null?S:O.key),m=s(O,m,S),x===null?E=O:x.sibling=O,x=O);return i&&A.forEach(function(k){return e(g,k)}),Wt&&Xo(g,S),E}function b(g,m,w,_){var E=$h(w);if(typeof E!="function")throw Error(Ae(150));if(w=E.call(w),w==null)throw Error(Ae(151));for(var x=E=null,A=m,S=m=0,O=null,C=w.next();A!==null&&!C.done;S++,C=w.next()){A.index>S?(O=A,A=null):O=A.sibling;var k=f(g,A,C.value,_);if(k===null){A===null&&(A=O);break}i&&A&&k.alternate===null&&e(g,A),m=s(k,m,S),x===null?E=k:x.sibling=k,x=k,A=O}if(C.done)return t(g,A),Wt&&Xo(g,S),E;if(A===null){for(;!C.done;S++,C=w.next())C=h(g,C.value,_),C!==null&&(m=s(C,m,S),x===null?E=C:x.sibling=C,x=C);return Wt&&Xo(g,S),E}for(A=n(g,A);!C.done;S++,C=w.next())C=d(A,g,S,C.value,_),C!==null&&(i&&C.alternate!==null&&A.delete(C.key===null?S:C.key),m=s(C,m,S),x===null?E=C:x.sibling=C,x=C);return i&&A.forEach(function(D){return e(g,D)}),Wt&&Xo(g,S),E}function v(g,m,w,_){if(typeof w=="object"&&w!==null&&w.type===Xu&&w.key===null&&(w=w.props.children),typeof w=="object"&&w!==null){switch(w.$$typeof){case ug:e:{for(var E=w.key,x=m;x!==null;){if(x.key===E){if(E=w.type,E===Xu){if(x.tag===7){t(g,x.sibling),m=r(x,w.props.children),m.return=g,g=m;break e}}else if(x.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===Ba&&O2(E)===x.type){t(g,x.sibling),m=r(x,w.props),m.ref=Yh(g,x,w),m.return=g,g=m;break e}t(g,x);break}else e(g,x);x=x.sibling}w.type===Xu?(m=cu(w.props.children,g.mode,_,w.key),m.return=g,g=m):(_=Hg(w.type,w.key,w.props,null,g.mode,_),_.ref=Yh(g,m,w),_.return=g,g=_)}return a(g);case Gu:e:{for(x=w.key;m!==null;){if(m.key===x)if(m.tag===4&&m.stateNode.containerInfo===w.containerInfo&&m.stateNode.implementation===w.implementation){t(g,m.sibling),m=r(m,w.children||[]),m.return=g,g=m;break e}else{t(g,m);break}else e(g,m);m=m.sibling}m=n0(w,g.mode,_),m.return=g,g=m}return a(g);case Ba:return x=w._init,v(g,m,x(w._payload),_)}if(hf(w))return y(g,m,w,_);if($h(w))return b(g,m,w,_);wg(g,w)}return typeof w=="string"&&w!==""||typeof w=="number"?(w=""+w,m!==null&&m.tag===6?(t(g,m.sibling),m=r(m,w),m.return=g,g=m):(t(g,m),m=t0(w,g.mode,_),m.return=g,g=m),a(g)):t(g,m)}return v}var Sh=tS(!0),nS=tS(!1),Bm=qo(null),jm=null,nc=null,Tw=null;function kw(){Tw=nc=jm=null}function Dw(i){var e=Bm.current;Bt(Bm),i._currentValue=e}function sb(i,e,t){for(;i!==null;){var n=i.alternate;if((i.childLanes&e)!==e?(i.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),i===t)break;i=i.return}}function fc(i,e){jm=i,Tw=nc=null,i=i.dependencies,i!==null&&i.firstContext!==null&&(i.lanes&e&&(Ni=!0),i.firstContext=null)}function xr(i){var e=i._currentValue;if(Tw!==i)if(i={context:i,memoizedValue:e,next:null},nc===null){if(jm===null)throw Error(Ae(308));nc=i,jm.dependencies={lanes:0,firstContext:i}}else nc=nc.next=i;return e}var il=null;function Ow(i){il===null?il=[i]:il.push(i)}function iS(i,e,t,n){var r=e.interleaved;return r===null?(t.next=t,Ow(e)):(t.next=r.next,r.next=t),e.interleaved=t,Sa(i,n)}function Sa(i,e){i.lanes|=e;var t=i.alternate;for(t!==null&&(t.lanes|=e),t=i,i=i.return;i!==null;)i.childLanes|=e,t=i.alternate,t!==null&&(t.childLanes|=e),t=i,i=i.return;return t.tag===3?t.stateNode:null}var ja=!1;function Nw(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function rS(i,e){i=i.updateQueue,e.updateQueue===i&&(e.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ba(i,e){return{eventTime:i,lane:e,tag:0,payload:null,callback:null,next:null}}function Do(i,e,t){var n=i.updateQueue;if(n===null)return null;if(n=n.shared,vt&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Sa(i,t)}return r=n.interleaved,r===null?(e.next=e,Ow(n)):(e.next=r.next,r.next=e),n.interleaved=e,Sa(i,t)}function Fg(i,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,mw(i,t)}}function N2(i,e){var t=i.updateQueue,n=i.alternate;if(n!==null&&(n=n.updateQueue,t===n)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var a={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=a:s=s.next=a,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},i.updateQueue=t;return}i=t.lastBaseUpdate,i===null?t.firstBaseUpdate=e:i.next=e,t.lastBaseUpdate=e}function zm(i,e,t,n){var r=i.updateQueue;ja=!1;var s=r.firstBaseUpdate,a=r.lastBaseUpdate,o=r.shared.pending;if(o!==null){r.shared.pending=null;var l=o,u=l.next;l.next=null,a===null?s=u:a.next=u,a=l;var c=i.alternate;c!==null&&(c=c.updateQueue,o=c.lastBaseUpdate,o!==a&&(o===null?c.firstBaseUpdate=u:o.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;a=0,c=u=l=null,o=s;do{var f=o.lane,d=o.eventTime;if((n&f)===f){c!==null&&(c=c.next={eventTime:d,lane:0,tag:o.tag,payload:o.payload,callback:o.callback,next:null});e:{var y=i,b=o;switch(f=e,d=t,b.tag){case 1:if(y=b.payload,typeof y=="function"){h=y.call(d,h,f);break e}h=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=b.payload,f=typeof y=="function"?y.call(d,h,f):y,f==null)break e;h=Yt({},h,f);break e;case 2:ja=!0}}o.callback!==null&&o.lane!==0&&(i.flags|=64,f=r.effects,f===null?r.effects=[o]:f.push(o))}else d={eventTime:d,lane:f,tag:o.tag,payload:o.payload,callback:o.callback,next:null},c===null?(u=c=d,l=h):c=c.next=d,a|=f;if(o=o.next,o===null){if(o=r.shared.pending,o===null)break;f=o,o=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(!0);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do a|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);mu|=a,i.lanes=a,i.memoizedState=h}}function R2(i,e,t){if(i=e.effects,e.effects=null,i!==null)for(e=0;e<i.length;e++){var n=i[e],r=n.callback;if(r!==null){if(n.callback=null,n=t,typeof r!="function")throw Error(Ae(191,r));r.call(n)}}}var Vp={},Os=qo(Vp),Jf=qo(Vp),ed=qo(Vp);function rl(i){if(i===Vp)throw Error(Ae(174));return i}function Rw(i,e){switch(Pt(ed,e),Pt(Jf,i),Pt(Os,Vp),i=e.nodeType,i){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:j0(null,"");break;default:i=i===8?e.parentNode:e,e=i.namespaceURI||null,i=i.tagName,e=j0(e,i)}Bt(Os),Pt(Os,e)}function Ch(){Bt(Os),Bt(Jf),Bt(ed)}function sS(i){rl(ed.current);var e=rl(Os.current),t=j0(e,i.type);e!==t&&(Pt(Jf,i),Pt(Os,t))}function Pw(i){Jf.current===i&&(Bt(Os),Bt(Jf))}var Gt=qo(0);function Um(i){for(var e=i;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ky=[];function Lw(){for(var i=0;i<Ky.length;i++)Ky[i]._workInProgressVersionPrimary=null;Ky.length=0}var Bg=Pa.ReactCurrentDispatcher,Yy=Pa.ReactCurrentBatchConfig,gu=0,Kt=null,En=null,Pn=null,qm=!1,If=!1,td=0,$N=0;function Gn(){throw Error(Ae(321))}function Iw(i,e){if(e===null)return!1;for(var t=0;t<e.length&&t<i.length;t++)if(!ts(i[t],e[t]))return!1;return!0}function Mw(i,e,t,n,r,s){if(gu=s,Kt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Bg.current=i===null||i.memoizedState===null?KN:YN,i=t(n,r),If){s=0;do{if(If=!1,td=0,25<=s)throw Error(Ae(301));s+=1,Pn=En=null,e.updateQueue=null,Bg.current=ZN,i=t(n,r)}while(If)}if(Bg.current=Hm,e=En!==null&&En.next!==null,gu=0,Pn=En=Kt=null,qm=!1,e)throw Error(Ae(300));return i}function Fw(){var i=td!==0;return td=0,i}function cs(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Pn===null?Kt.memoizedState=Pn=i:Pn=Pn.next=i,Pn}function Sr(){if(En===null){var i=Kt.alternate;i=i!==null?i.memoizedState:null}else i=En.next;var e=Pn===null?Kt.memoizedState:Pn.next;if(e!==null)Pn=e,En=i;else{if(i===null)throw Error(Ae(310));En=i,i={memoizedState:En.memoizedState,baseState:En.baseState,baseQueue:En.baseQueue,queue:En.queue,next:null},Pn===null?Kt.memoizedState=Pn=i:Pn=Pn.next=i}return Pn}function nd(i,e){return typeof e=="function"?e(i):e}function Zy(i){var e=Sr(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=i;var n=En,r=n.baseQueue,s=t.pending;if(s!==null){if(r!==null){var a=r.next;r.next=s.next,s.next=a}n.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,n=n.baseState;var o=a=null,l=null,u=s;do{var c=u.lane;if((gu&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),n=u.hasEagerState?u.eagerState:i(n,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(o=l=h,a=n):l=l.next=h,Kt.lanes|=c,mu|=c}u=u.next}while(u!==null&&u!==s);l===null?a=n:l.next=o,ts(n,e.memoizedState)||(Ni=!0),e.memoizedState=n,e.baseState=a,e.baseQueue=l,t.lastRenderedState=n}if(i=t.interleaved,i!==null){r=i;do s=r.lane,Kt.lanes|=s,mu|=s,r=r.next;while(r!==i)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function Qy(i){var e=Sr(),t=e.queue;if(t===null)throw Error(Ae(311));t.lastRenderedReducer=i;var n=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var a=r=r.next;do s=i(s,a.action),a=a.next;while(a!==r);ts(s,e.memoizedState)||(Ni=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,n]}function aS(){}function oS(i,e){var t=Kt,n=Sr(),r=e(),s=!ts(n.memoizedState,r);if(s&&(n.memoizedState=r,Ni=!0),n=n.queue,Bw(cS.bind(null,t,n,i),[i]),n.getSnapshot!==e||s||Pn!==null&&Pn.memoizedState.tag&1){if(t.flags|=2048,id(9,uS.bind(null,t,n,r,e),void 0,null),Ln===null)throw Error(Ae(349));gu&30||lS(t,e,r)}return r}function lS(i,e,t){i.flags|=16384,i={getSnapshot:e,value:t},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.stores=[i]):(t=e.stores,t===null?e.stores=[i]:t.push(i))}function uS(i,e,t,n){e.value=t,e.getSnapshot=n,hS(e)&&fS(i)}function cS(i,e,t){return t(function(){hS(e)&&fS(i)})}function hS(i){var e=i.getSnapshot;i=i.value;try{var t=e();return!ts(i,t)}catch{return!0}}function fS(i){var e=Sa(i,1);e!==null&&Jr(e,i,1,-1)}function P2(i){var e=cs();return typeof i=="function"&&(i=i()),e.memoizedState=e.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nd,lastRenderedState:i},e.queue=i,i=i.dispatch=XN.bind(null,Kt,i),[e.memoizedState,i]}function id(i,e,t,n){return i={tag:i,create:e,destroy:t,deps:n,next:null},e=Kt.updateQueue,e===null?(e={lastEffect:null,stores:null},Kt.updateQueue=e,e.lastEffect=i.next=i):(t=e.lastEffect,t===null?e.lastEffect=i.next=i:(n=t.next,t.next=i,i.next=n,e.lastEffect=i)),i}function dS(){return Sr().memoizedState}function jg(i,e,t,n){var r=cs();Kt.flags|=i,r.memoizedState=id(1|e,t,void 0,n===void 0?null:n)}function Xv(i,e,t,n){var r=Sr();n=n===void 0?null:n;var s=void 0;if(En!==null){var a=En.memoizedState;if(s=a.destroy,n!==null&&Iw(n,a.deps)){r.memoizedState=id(e,t,s,n);return}}Kt.flags|=i,r.memoizedState=id(1|e,t,s,n)}function L2(i,e){return jg(8390656,8,i,e)}function Bw(i,e){return Xv(2048,8,i,e)}function pS(i,e){return Xv(4,2,i,e)}function gS(i,e){return Xv(4,4,i,e)}function mS(i,e){if(typeof e=="function")return i=i(),e(i),function(){e(null)};if(e!=null)return i=i(),e.current=i,function(){e.current=null}}function vS(i,e,t){return t=t!=null?t.concat([i]):null,Xv(4,4,mS.bind(null,e,i),t)}function jw(){}function yS(i,e){var t=Sr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Iw(e,n[1])?n[0]:(t.memoizedState=[i,e],i)}function bS(i,e){var t=Sr();e=e===void 0?null:e;var n=t.memoizedState;return n!==null&&e!==null&&Iw(e,n[1])?n[0]:(i=i(),t.memoizedState=[i,e],i)}function wS(i,e,t){return gu&21?(ts(t,e)||(t=Sx(),Kt.lanes|=t,mu|=t,i.baseState=!0),e):(i.baseState&&(i.baseState=!1,Ni=!0),i.memoizedState=t)}function VN(i,e){var t=Ct;Ct=t!==0&&4>t?t:4,i(!0);var n=Yy.transition;Yy.transition={};try{i(!1),e()}finally{Ct=t,Yy.transition=n}}function _S(){return Sr().memoizedState}function GN(i,e,t){var n=No(i);if(t={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null},ES(i))AS(e,t);else if(t=iS(i,e,t,n),t!==null){var r=pi();Jr(t,i,n,r),xS(t,e,n)}}function XN(i,e,t){var n=No(i),r={lane:n,action:t,hasEagerState:!1,eagerState:null,next:null};if(ES(i))AS(e,r);else{var s=i.alternate;if(i.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var a=e.lastRenderedState,o=s(a,t);if(r.hasEagerState=!0,r.eagerState=o,ts(o,a)){var l=e.interleaved;l===null?(r.next=r,Ow(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=iS(i,e,r,n),t!==null&&(r=pi(),Jr(t,i,n,r),xS(t,e,n))}}function ES(i){var e=i.alternate;return i===Kt||e!==null&&e===Kt}function AS(i,e){If=qm=!0;var t=i.pending;t===null?e.next=e:(e.next=t.next,t.next=e),i.pending=e}function xS(i,e,t){if(t&4194240){var n=e.lanes;n&=i.pendingLanes,t|=n,e.lanes=t,mw(i,t)}}var Hm={readContext:xr,useCallback:Gn,useContext:Gn,useEffect:Gn,useImperativeHandle:Gn,useInsertionEffect:Gn,useLayoutEffect:Gn,useMemo:Gn,useReducer:Gn,useRef:Gn,useState:Gn,useDebugValue:Gn,useDeferredValue:Gn,useTransition:Gn,useMutableSource:Gn,useSyncExternalStore:Gn,useId:Gn,unstable_isNewReconciler:!1},KN={readContext:xr,useCallback:function(i,e){return cs().memoizedState=[i,e===void 0?null:e],i},useContext:xr,useEffect:L2,useImperativeHandle:function(i,e,t){return t=t!=null?t.concat([i]):null,jg(4194308,4,mS.bind(null,e,i),t)},useLayoutEffect:function(i,e){return jg(4194308,4,i,e)},useInsertionEffect:function(i,e){return jg(4,2,i,e)},useMemo:function(i,e){var t=cs();return e=e===void 0?null:e,i=i(),t.memoizedState=[i,e],i},useReducer:function(i,e,t){var n=cs();return e=t!==void 0?t(e):e,n.memoizedState=n.baseState=e,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:e},n.queue=i,i=i.dispatch=GN.bind(null,Kt,i),[n.memoizedState,i]},useRef:function(i){var e=cs();return i={current:i},e.memoizedState=i},useState:P2,useDebugValue:jw,useDeferredValue:function(i){return cs().memoizedState=i},useTransition:function(){var i=P2(!1),e=i[0];return i=VN.bind(null,i[1]),cs().memoizedState=i,[e,i]},useMutableSource:function(){},useSyncExternalStore:function(i,e,t){var n=Kt,r=cs();if(Wt){if(t===void 0)throw Error(Ae(407));t=t()}else{if(t=e(),Ln===null)throw Error(Ae(349));gu&30||lS(n,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,L2(cS.bind(null,n,s,i),[i]),n.flags|=2048,id(9,uS.bind(null,n,s,t,e),void 0,null),t},useId:function(){var i=cs(),e=Ln.identifierPrefix;if(Wt){var t=va,n=ma;t=(n&~(1<<32-Qr(n)-1)).toString(32)+t,e=":"+e+"R"+t,t=td++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=$N++,e=":"+e+"r"+t.toString(32)+":";return i.memoizedState=e},unstable_isNewReconciler:!1},YN={readContext:xr,useCallback:yS,useContext:xr,useEffect:Bw,useImperativeHandle:vS,useInsertionEffect:pS,useLayoutEffect:gS,useMemo:bS,useReducer:Zy,useRef:dS,useState:function(){return Zy(nd)},useDebugValue:jw,useDeferredValue:function(i){var e=Sr();return wS(e,En.memoizedState,i)},useTransition:function(){var i=Zy(nd)[0],e=Sr().memoizedState;return[i,e]},useMutableSource:aS,useSyncExternalStore:oS,useId:_S,unstable_isNewReconciler:!1},ZN={readContext:xr,useCallback:yS,useContext:xr,useEffect:Bw,useImperativeHandle:vS,useInsertionEffect:pS,useLayoutEffect:gS,useMemo:bS,useReducer:Qy,useRef:dS,useState:function(){return Qy(nd)},useDebugValue:jw,useDeferredValue:function(i){var e=Sr();return En===null?e.memoizedState=i:wS(e,En.memoizedState,i)},useTransition:function(){var i=Qy(nd)[0],e=Sr().memoizedState;return[i,e]},useMutableSource:aS,useSyncExternalStore:oS,useId:_S,unstable_isNewReconciler:!1};function Pr(i,e){if(i&&i.defaultProps){e=Yt({},e),i=i.defaultProps;for(var t in i)e[t]===void 0&&(e[t]=i[t]);return e}return e}function ab(i,e,t,n){e=i.memoizedState,t=t(n,e),t=t==null?e:Yt({},e,t),i.memoizedState=t,i.lanes===0&&(i.updateQueue.baseState=t)}var Kv={isMounted:function(i){return(i=i._reactInternals)?xu(i)===i:!1},enqueueSetState:function(i,e,t){i=i._reactInternals;var n=pi(),r=No(i),s=ba(n,r);s.payload=e,t!=null&&(s.callback=t),e=Do(i,s,r),e!==null&&(Jr(e,i,r,n),Fg(e,i,r))},enqueueReplaceState:function(i,e,t){i=i._reactInternals;var n=pi(),r=No(i),s=ba(n,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Do(i,s,r),e!==null&&(Jr(e,i,r,n),Fg(e,i,r))},enqueueForceUpdate:function(i,e){i=i._reactInternals;var t=pi(),n=No(i),r=ba(t,n);r.tag=2,e!=null&&(r.callback=e),e=Do(i,r,n),e!==null&&(Jr(e,i,n,t),Fg(e,i,n))}};function I2(i,e,t,n,r,s,a){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(n,s,a):e.prototype&&e.prototype.isPureReactComponent?!Kf(t,n)||!Kf(r,s):!0}function SS(i,e,t){var n=!1,r=Mo,s=e.contextType;return typeof s=="object"&&s!==null?s=xr(s):(r=Pi(e)?du:si.current,n=e.contextTypes,s=(n=n!=null)?Ah(i,r):Mo),e=new e(t,s),i.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Kv,i.stateNode=e,e._reactInternals=i,n&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=r,i.__reactInternalMemoizedMaskedChildContext=s),e}function M2(i,e,t,n){i=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,n),e.state!==i&&Kv.enqueueReplaceState(e,e.state,null)}function ob(i,e,t,n){var r=i.stateNode;r.props=t,r.state=i.memoizedState,r.refs={},Nw(i);var s=e.contextType;typeof s=="object"&&s!==null?r.context=xr(s):(s=Pi(e)?du:si.current,r.context=Ah(i,s)),r.state=i.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(ab(i,e,s,t),r.state=i.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Kv.enqueueReplaceState(r,r.state,null),zm(i,t,r,n),r.state=i.memoizedState),typeof r.componentDidMount=="function"&&(i.flags|=4194308)}function Th(i,e){try{var t="",n=e;do t+=SO(n),n=n.return;while(n);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:i,source:e,stack:r,digest:null}}function Jy(i,e,t){return{value:i,source:null,stack:t??null,digest:e??null}}function lb(i,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var QN=typeof WeakMap=="function"?WeakMap:Map;function CS(i,e,t){t=ba(-1,t),t.tag=3,t.payload={element:null};var n=e.value;return t.callback=function(){$m||($m=!0,yb=n),lb(i,e)},t}function TS(i,e,t){t=ba(-1,t),t.tag=3;var n=i.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;t.payload=function(){return n(r)},t.callback=function(){lb(i,e)}}var s=i.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){lb(i,e),typeof n!="function"&&(Oo===null?Oo=new Set([this]):Oo.add(this));var a=e.stack;this.componentDidCatch(e.value,{componentStack:a!==null?a:""})}),t}function F2(i,e,t){var n=i.pingCache;if(n===null){n=i.pingCache=new QN;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(t)||(r.add(t),i=fR.bind(null,i,e,t),e.then(i,i))}function B2(i){do{var e;if((e=i.tag===13)&&(e=i.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return i;i=i.return}while(i!==null);return null}function j2(i,e,t,n,r){return i.mode&1?(i.flags|=65536,i.lanes=r,i):(i===e?i.flags|=65536:(i.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=ba(-1,1),e.tag=2,Do(t,e,1))),t.lanes|=1),i)}var JN=Pa.ReactCurrentOwner,Ni=!1;function di(i,e,t,n){e.child=i===null?nS(e,null,t,n):Sh(e,i.child,t,n)}function z2(i,e,t,n,r){t=t.render;var s=e.ref;return fc(e,r),n=Mw(i,e,t,n,s,r),t=Fw(),i!==null&&!Ni?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Ca(i,e,r)):(Wt&&t&&xw(e),e.flags|=1,di(i,e,n,r),e.child)}function U2(i,e,t,n,r){if(i===null){var s=t.type;return typeof s=="function"&&!Gw(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,kS(i,e,s,n,r)):(i=Hg(t.type,null,n,e,e.mode,r),i.ref=e.ref,i.return=e,e.child=i)}if(s=i.child,!(i.lanes&r)){var a=s.memoizedProps;if(t=t.compare,t=t!==null?t:Kf,t(a,n)&&i.ref===e.ref)return Ca(i,e,r)}return e.flags|=1,i=Ro(s,n),i.ref=e.ref,i.return=e,e.child=i}function kS(i,e,t,n,r){if(i!==null){var s=i.memoizedProps;if(Kf(s,n)&&i.ref===e.ref)if(Ni=!1,e.pendingProps=n=s,(i.lanes&r)!==0)i.flags&131072&&(Ni=!0);else return e.lanes=i.lanes,Ca(i,e,r)}return ub(i,e,t,n,r)}function DS(i,e,t){var n=e.pendingProps,r=n.children,s=i!==null?i.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pt(rc,Zi),Zi|=t;else{if(!(t&1073741824))return i=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:i,cachePool:null,transitions:null},e.updateQueue=null,Pt(rc,Zi),Zi|=i,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:t,Pt(rc,Zi),Zi|=n}else s!==null?(n=s.baseLanes|t,e.memoizedState=null):n=t,Pt(rc,Zi),Zi|=n;return di(i,e,r,t),e.child}function OS(i,e){var t=e.ref;(i===null&&t!==null||i!==null&&i.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function ub(i,e,t,n,r){var s=Pi(t)?du:si.current;return s=Ah(e,s),fc(e,r),t=Mw(i,e,t,n,s,r),n=Fw(),i!==null&&!Ni?(e.updateQueue=i.updateQueue,e.flags&=-2053,i.lanes&=~r,Ca(i,e,r)):(Wt&&n&&xw(e),e.flags|=1,di(i,e,t,r),e.child)}function q2(i,e,t,n,r){if(Pi(t)){var s=!0;Im(e)}else s=!1;if(fc(e,r),e.stateNode===null)zg(i,e),SS(e,t,n),ob(e,t,n,r),n=!0;else if(i===null){var a=e.stateNode,o=e.memoizedProps;a.props=o;var l=a.context,u=t.contextType;typeof u=="object"&&u!==null?u=xr(u):(u=Pi(t)?du:si.current,u=Ah(e,u));var c=t.getDerivedStateFromProps,h=typeof c=="function"||typeof a.getSnapshotBeforeUpdate=="function";h||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==n||l!==u)&&M2(e,a,n,u),ja=!1;var f=e.memoizedState;a.state=f,zm(e,n,a,r),l=e.memoizedState,o!==n||f!==l||Ri.current||ja?(typeof c=="function"&&(ab(e,t,c,n),l=e.memoizedState),(o=ja||I2(e,t,o,n,f,l,u))?(h||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount()),typeof a.componentDidMount=="function"&&(e.flags|=4194308)):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=l),a.props=n,a.state=l,a.context=u,n=o):(typeof a.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{a=e.stateNode,rS(i,e),o=e.memoizedProps,u=e.type===e.elementType?o:Pr(e.type,o),a.props=u,h=e.pendingProps,f=a.context,l=t.contextType,typeof l=="object"&&l!==null?l=xr(l):(l=Pi(t)?du:si.current,l=Ah(e,l));var d=t.getDerivedStateFromProps;(c=typeof d=="function"||typeof a.getSnapshotBeforeUpdate=="function")||typeof a.UNSAFE_componentWillReceiveProps!="function"&&typeof a.componentWillReceiveProps!="function"||(o!==h||f!==l)&&M2(e,a,n,l),ja=!1,f=e.memoizedState,a.state=f,zm(e,n,a,r);var y=e.memoizedState;o!==h||f!==y||Ri.current||ja?(typeof d=="function"&&(ab(e,t,d,n),y=e.memoizedState),(u=ja||I2(e,t,u,n,f,y,l)||!1)?(c||typeof a.UNSAFE_componentWillUpdate!="function"&&typeof a.componentWillUpdate!="function"||(typeof a.componentWillUpdate=="function"&&a.componentWillUpdate(n,y,l),typeof a.UNSAFE_componentWillUpdate=="function"&&a.UNSAFE_componentWillUpdate(n,y,l)),typeof a.componentDidUpdate=="function"&&(e.flags|=4),typeof a.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=y),a.props=n,a.state=y,a.context=l,n=u):(typeof a.componentDidUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=4),typeof a.getSnapshotBeforeUpdate!="function"||o===i.memoizedProps&&f===i.memoizedState||(e.flags|=1024),n=!1)}return cb(i,e,t,n,s,r)}function cb(i,e,t,n,r,s){OS(i,e);var a=(e.flags&128)!==0;if(!n&&!a)return r&&T2(e,t,!1),Ca(i,e,s);n=e.stateNode,JN.current=e;var o=a&&typeof t.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,i!==null&&a?(e.child=Sh(e,i.child,null,s),e.child=Sh(e,null,o,s)):di(i,e,o,s),e.memoizedState=n.state,r&&T2(e,t,!0),e.child}function NS(i){var e=i.stateNode;e.pendingContext?C2(i,e.pendingContext,e.pendingContext!==e.context):e.context&&C2(i,e.context,!1),Rw(i,e.containerInfo)}function H2(i,e,t,n,r){return xh(),Cw(r),e.flags|=256,di(i,e,t,n),e.child}var hb={dehydrated:null,treeContext:null,retryLane:0};function fb(i){return{baseLanes:i,cachePool:null,transitions:null}}function RS(i,e,t){var n=e.pendingProps,r=Gt.current,s=!1,a=(e.flags&128)!==0,o;if((o=a)||(o=i!==null&&i.memoizedState===null?!1:(r&2)!==0),o?(s=!0,e.flags&=-129):(i===null||i.memoizedState!==null)&&(r|=1),Pt(Gt,r&1),i===null)return rb(e),i=e.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?(e.mode&1?i.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(a=n.children,i=n.fallback,s?(n=e.mode,s=e.child,a={mode:"hidden",children:a},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=a):s=Qv(a,n,0,null),i=cu(i,n,t,null),s.return=e,i.return=e,s.sibling=i,e.child=s,e.child.memoizedState=fb(t),e.memoizedState=hb,i):zw(e,a));if(r=i.memoizedState,r!==null&&(o=r.dehydrated,o!==null))return eR(i,e,a,n,o,r,t);if(s){s=n.fallback,a=e.mode,r=i.child,o=r.sibling;var l={mode:"hidden",children:n.children};return!(a&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=l,e.deletions=null):(n=Ro(r,l),n.subtreeFlags=r.subtreeFlags&14680064),o!==null?s=Ro(o,s):(s=cu(s,a,t,null),s.flags|=2),s.return=e,n.return=e,n.sibling=s,e.child=n,n=s,s=e.child,a=i.child.memoizedState,a=a===null?fb(t):{baseLanes:a.baseLanes|t,cachePool:null,transitions:a.transitions},s.memoizedState=a,s.childLanes=i.childLanes&~t,e.memoizedState=hb,n}return s=i.child,i=s.sibling,n=Ro(s,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=t),n.return=e,n.sibling=null,i!==null&&(t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)),e.child=n,e.memoizedState=null,n}function zw(i,e){return e=Qv({mode:"visible",children:e},i.mode,0,null),e.return=i,i.child=e}function _g(i,e,t,n){return n!==null&&Cw(n),Sh(e,i.child,null,t),i=zw(e,e.pendingProps.children),i.flags|=2,e.memoizedState=null,i}function eR(i,e,t,n,r,s,a){if(t)return e.flags&256?(e.flags&=-257,n=Jy(Error(Ae(422))),_g(i,e,a,n)):e.memoizedState!==null?(e.child=i.child,e.flags|=128,null):(s=n.fallback,r=e.mode,n=Qv({mode:"visible",children:n.children},r,0,null),s=cu(s,r,a,null),s.flags|=2,n.return=e,s.return=e,n.sibling=s,e.child=n,e.mode&1&&Sh(e,i.child,null,a),e.child.memoizedState=fb(a),e.memoizedState=hb,s);if(!(e.mode&1))return _g(i,e,a,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var o=n.dgst;return n=o,s=Error(Ae(419)),n=Jy(s,n,void 0),_g(i,e,a,n)}if(o=(a&i.childLanes)!==0,Ni||o){if(n=Ln,n!==null){switch(a&-a){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|a)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Sa(i,r),Jr(n,i,r,-1))}return Vw(),n=Jy(Error(Ae(421))),_g(i,e,a,n)}return r.data==="$?"?(e.flags|=128,e.child=i.child,e=dR.bind(null,i),r._reactRetry=e,null):(i=s.treeContext,er=ko(r.nextSibling),tr=e,Wt=!0,Yr=null,i!==null&&(vr[yr++]=ma,vr[yr++]=va,vr[yr++]=pu,ma=i.id,va=i.overflow,pu=e),e=zw(e,n.children),e.flags|=4096,e)}function W2(i,e,t){i.lanes|=e;var n=i.alternate;n!==null&&(n.lanes|=e),sb(i.return,e,t)}function e0(i,e,t,n,r){var s=i.memoizedState;s===null?i.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=t,s.tailMode=r)}function PS(i,e,t){var n=e.pendingProps,r=n.revealOrder,s=n.tail;if(di(i,e,n.children,t),n=Gt.current,n&2)n=n&1|2,e.flags|=128;else{if(i!==null&&i.flags&128)e:for(i=e.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&W2(i,t,e);else if(i.tag===19)W2(i,t,e);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===e)break e;for(;i.sibling===null;){if(i.return===null||i.return===e)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}n&=1}if(Pt(Gt,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)i=t.alternate,i!==null&&Um(i)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),e0(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(i=r.alternate,i!==null&&Um(i)===null){e.child=r;break}i=r.sibling,r.sibling=t,t=r,r=i}e0(e,!0,t,null,s);break;case"together":e0(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function zg(i,e){!(e.mode&1)&&i!==null&&(i.alternate=null,e.alternate=null,e.flags|=2)}function Ca(i,e,t){if(i!==null&&(e.dependencies=i.dependencies),mu|=e.lanes,!(t&e.childLanes))return null;if(i!==null&&e.child!==i.child)throw Error(Ae(153));if(e.child!==null){for(i=e.child,t=Ro(i,i.pendingProps),e.child=t,t.return=e;i.sibling!==null;)i=i.sibling,t=t.sibling=Ro(i,i.pendingProps),t.return=e;t.sibling=null}return e.child}function tR(i,e,t){switch(e.tag){case 3:NS(e),xh();break;case 5:sS(e);break;case 1:Pi(e.type)&&Im(e);break;case 4:Rw(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Pt(Bm,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pt(Gt,Gt.current&1),e.flags|=128,null):t&e.child.childLanes?RS(i,e,t):(Pt(Gt,Gt.current&1),i=Ca(i,e,t),i!==null?i.sibling:null);Pt(Gt,Gt.current&1);break;case 19:if(n=(t&e.childLanes)!==0,i.flags&128){if(n)return PS(i,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pt(Gt,Gt.current),n)break;return null;case 22:case 23:return e.lanes=0,DS(i,e,t)}return Ca(i,e,t)}var LS,db,IS,MS;LS=function(i,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)i.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};db=function(){};IS=function(i,e,t,n){var r=i.memoizedProps;if(r!==n){i=e.stateNode,rl(Os.current);var s=null;switch(t){case"input":r=I0(i,r),n=I0(i,n),s=[];break;case"select":r=Yt({},r,{value:void 0}),n=Yt({},n,{value:void 0}),s=[];break;case"textarea":r=B0(i,r),n=B0(i,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(i.onclick=Pm)}z0(t,n);var a;t=null;for(u in r)if(!n.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var o=r[u];for(a in o)o.hasOwnProperty(a)&&(t||(t={}),t[a]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(qf.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in n){var l=n[u];if(o=r!=null?r[u]:void 0,n.hasOwnProperty(u)&&l!==o&&(l!=null||o!=null))if(u==="style")if(o){for(a in o)!o.hasOwnProperty(a)||l&&l.hasOwnProperty(a)||(t||(t={}),t[a]="");for(a in l)l.hasOwnProperty(a)&&o[a]!==l[a]&&(t||(t={}),t[a]=l[a])}else t||(s||(s=[]),s.push(u,t)),t=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,o=o?o.__html:void 0,l!=null&&o!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(qf.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&It("scroll",i),s||o===l||(s=[])):(s=s||[]).push(u,l))}t&&(s=s||[]).push("style",t);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};MS=function(i,e,t,n){t!==n&&(e.flags|=4)};function Zh(i,e){if(!Wt)switch(i.tailMode){case"hidden":e=i.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?i.tail=null:t.sibling=null;break;case"collapsed":t=i.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e||i.tail===null?i.tail=null:i.tail.sibling=null:n.sibling=null}}function Xn(i){var e=i.alternate!==null&&i.alternate.child===i.child,t=0,n=0;if(e)for(var r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=i,r=r.sibling;else for(r=i.child;r!==null;)t|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=i,r=r.sibling;return i.subtreeFlags|=n,i.childLanes=t,e}function nR(i,e,t){var n=e.pendingProps;switch(Sw(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Xn(e),null;case 1:return Pi(e.type)&&Lm(),Xn(e),null;case 3:return n=e.stateNode,Ch(),Bt(Ri),Bt(si),Lw(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(i===null||i.child===null)&&(bg(e)?e.flags|=4:i===null||i.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Yr!==null&&(_b(Yr),Yr=null))),db(i,e),Xn(e),null;case 5:Pw(e);var r=rl(ed.current);if(t=e.type,i!==null&&e.stateNode!=null)IS(i,e,t,n,r),i.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(Ae(166));return Xn(e),null}if(i=rl(Os.current),bg(e)){n=e.stateNode,t=e.type;var s=e.memoizedProps;switch(n[ks]=e,n[Qf]=s,i=(e.mode&1)!==0,t){case"dialog":It("cancel",n),It("close",n);break;case"iframe":case"object":case"embed":It("load",n);break;case"video":case"audio":for(r=0;r<df.length;r++)It(df[r],n);break;case"source":It("error",n);break;case"img":case"image":case"link":It("error",n),It("load",n);break;case"details":It("toggle",n);break;case"input":J_(n,s),It("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},It("invalid",n);break;case"textarea":t2(n,s),It("invalid",n)}z0(t,s),r=null;for(var a in s)if(s.hasOwnProperty(a)){var o=s[a];a==="children"?typeof o=="string"?n.textContent!==o&&(s.suppressHydrationWarning!==!0&&yg(n.textContent,o,i),r=["children",o]):typeof o=="number"&&n.textContent!==""+o&&(s.suppressHydrationWarning!==!0&&yg(n.textContent,o,i),r=["children",""+o]):qf.hasOwnProperty(a)&&o!=null&&a==="onScroll"&&It("scroll",n)}switch(t){case"input":cg(n),e2(n,s,!0);break;case"textarea":cg(n),n2(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Pm)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{a=r.nodeType===9?r:r.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=cx(t)),i==="http://www.w3.org/1999/xhtml"?t==="script"?(i=a.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof n.is=="string"?i=a.createElement(t,{is:n.is}):(i=a.createElement(t),t==="select"&&(a=i,n.multiple?a.multiple=!0:n.size&&(a.size=n.size))):i=a.createElementNS(i,t),i[ks]=e,i[Qf]=n,LS(i,e,!1,!1),e.stateNode=i;e:{switch(a=U0(t,n),t){case"dialog":It("cancel",i),It("close",i),r=n;break;case"iframe":case"object":case"embed":It("load",i),r=n;break;case"video":case"audio":for(r=0;r<df.length;r++)It(df[r],i);r=n;break;case"source":It("error",i),r=n;break;case"img":case"image":case"link":It("error",i),It("load",i),r=n;break;case"details":It("toggle",i),r=n;break;case"input":J_(i,n),r=I0(i,n),It("invalid",i);break;case"option":r=n;break;case"select":i._wrapperState={wasMultiple:!!n.multiple},r=Yt({},n,{value:void 0}),It("invalid",i);break;case"textarea":t2(i,n),r=B0(i,n),It("invalid",i);break;default:r=n}z0(t,r),o=r;for(s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="style"?dx(i,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&hx(i,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Hf(i,l):typeof l=="number"&&Hf(i,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(qf.hasOwnProperty(s)?l!=null&&s==="onScroll"&&It("scroll",i):l!=null&&cw(i,s,l,a))}switch(t){case"input":cg(i),e2(i,n,!1);break;case"textarea":cg(i),n2(i);break;case"option":n.value!=null&&i.setAttribute("value",""+Io(n.value));break;case"select":i.multiple=!!n.multiple,s=n.value,s!=null?lc(i,!!n.multiple,s,!1):n.defaultValue!=null&&lc(i,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(i.onclick=Pm)}switch(t){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Xn(e),null;case 6:if(i&&e.stateNode!=null)MS(i,e,i.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(Ae(166));if(t=rl(ed.current),rl(Os.current),bg(e)){if(n=e.stateNode,t=e.memoizedProps,n[ks]=e,(s=n.nodeValue!==t)&&(i=tr,i!==null))switch(i.tag){case 3:yg(n.nodeValue,t,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&yg(n.nodeValue,t,(i.mode&1)!==0)}s&&(e.flags|=4)}else n=(t.nodeType===9?t:t.ownerDocument).createTextNode(n),n[ks]=e,e.stateNode=n}return Xn(e),null;case 13:if(Bt(Gt),n=e.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Wt&&er!==null&&e.mode&1&&!(e.flags&128))eS(),xh(),e.flags|=98560,s=!1;else if(s=bg(e),n!==null&&n.dehydrated!==null){if(i===null){if(!s)throw Error(Ae(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Ae(317));s[ks]=e}else xh(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Xn(e),s=!1}else Yr!==null&&(_b(Yr),Yr=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(n=n!==null,n!==(i!==null&&i.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(i===null||Gt.current&1?An===0&&(An=3):Vw())),e.updateQueue!==null&&(e.flags|=4),Xn(e),null);case 4:return Ch(),db(i,e),i===null&&Yf(e.stateNode.containerInfo),Xn(e),null;case 10:return Dw(e.type._context),Xn(e),null;case 17:return Pi(e.type)&&Lm(),Xn(e),null;case 19:if(Bt(Gt),s=e.memoizedState,s===null)return Xn(e),null;if(n=(e.flags&128)!==0,a=s.rendering,a===null)if(n)Zh(s,!1);else{if(An!==0||i!==null&&i.flags&128)for(i=e.child;i!==null;){if(a=Um(i),a!==null){for(e.flags|=128,Zh(s,!1),n=a.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=t,t=e.child;t!==null;)s=t,i=n,s.flags&=14680066,a=s.alternate,a===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=a.childLanes,s.lanes=a.lanes,s.child=a.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=a.memoizedProps,s.memoizedState=a.memoizedState,s.updateQueue=a.updateQueue,s.type=a.type,i=a.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),t=t.sibling;return Pt(Gt,Gt.current&1|2),e.child}i=i.sibling}s.tail!==null&&an()>kh&&(e.flags|=128,n=!0,Zh(s,!1),e.lanes=4194304)}else{if(!n)if(i=Um(a),i!==null){if(e.flags|=128,n=!0,t=i.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),Zh(s,!0),s.tail===null&&s.tailMode==="hidden"&&!a.alternate&&!Wt)return Xn(e),null}else 2*an()-s.renderingStartTime>kh&&t!==1073741824&&(e.flags|=128,n=!0,Zh(s,!1),e.lanes=4194304);s.isBackwards?(a.sibling=e.child,e.child=a):(t=s.last,t!==null?t.sibling=a:e.child=a,s.last=a)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=an(),e.sibling=null,t=Gt.current,Pt(Gt,n?t&1|2:t&1),e):(Xn(e),null);case 22:case 23:return $w(),n=e.memoizedState!==null,i!==null&&i.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Zi&1073741824&&(Xn(e),e.subtreeFlags&6&&(e.flags|=8192)):Xn(e),null;case 24:return null;case 25:return null}throw Error(Ae(156,e.tag))}function iR(i,e){switch(Sw(e),e.tag){case 1:return Pi(e.type)&&Lm(),i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 3:return Ch(),Bt(Ri),Bt(si),Lw(),i=e.flags,i&65536&&!(i&128)?(e.flags=i&-65537|128,e):null;case 5:return Pw(e),null;case 13:if(Bt(Gt),i=e.memoizedState,i!==null&&i.dehydrated!==null){if(e.alternate===null)throw Error(Ae(340));xh()}return i=e.flags,i&65536?(e.flags=i&-65537|128,e):null;case 19:return Bt(Gt),null;case 4:return Ch(),null;case 10:return Dw(e.type._context),null;case 22:case 23:return $w(),null;case 24:return null;default:return null}}var Eg=!1,ii=!1,rR=typeof WeakSet=="function"?WeakSet:Set,je=null;function ic(i,e){var t=i.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(n){Jt(i,e,n)}else t.current=null}function pb(i,e,t){try{t()}catch(n){Jt(i,e,n)}}var $2=!1;function sR(i,e){if(Z0=Om,i=Ux(),Aw(i)){if("selectionStart"in i)var t={start:i.selectionStart,end:i.selectionEnd};else e:{t=(t=i.ownerDocument)&&t.defaultView||window;var n=t.getSelection&&t.getSelection();if(n&&n.rangeCount!==0){t=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var a=0,o=-1,l=-1,u=0,c=0,h=i,f=null;t:for(;;){for(var d;h!==t||r!==0&&h.nodeType!==3||(o=a+r),h!==s||n!==0&&h.nodeType!==3||(l=a+n),h.nodeType===3&&(a+=h.nodeValue.length),(d=h.firstChild)!==null;)f=h,h=d;for(;;){if(h===i)break t;if(f===t&&++u===r&&(o=a),f===s&&++c===n&&(l=a),(d=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=d}t=o===-1||l===-1?null:{start:o,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(Q0={focusedElem:i,selectionRange:t},Om=!1,je=e;je!==null;)if(e=je,i=e.child,(e.subtreeFlags&1028)!==0&&i!==null)i.return=e,je=i;else for(;je!==null;){e=je;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var b=y.memoizedProps,v=y.memoizedState,g=e.stateNode,m=g.getSnapshotBeforeUpdate(e.elementType===e.type?b:Pr(e.type,b),v);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var w=e.stateNode.containerInfo;w.nodeType===1?w.textContent="":w.nodeType===9&&w.documentElement&&w.removeChild(w.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Ae(163))}}catch(_){Jt(e,e.return,_)}if(i=e.sibling,i!==null){i.return=e.return,je=i;break}je=e.return}return y=$2,$2=!1,y}function Mf(i,e,t){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&i)===i){var s=r.destroy;r.destroy=void 0,s!==void 0&&pb(e,t,s)}r=r.next}while(r!==n)}}function Yv(i,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&i)===i){var n=t.create;t.destroy=n()}t=t.next}while(t!==e)}}function gb(i){var e=i.ref;if(e!==null){var t=i.stateNode;switch(i.tag){case 5:i=t;break;default:i=t}typeof e=="function"?e(i):e.current=i}}function FS(i){var e=i.alternate;e!==null&&(i.alternate=null,FS(e)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(e=i.stateNode,e!==null&&(delete e[ks],delete e[Qf],delete e[tb],delete e[UN],delete e[qN])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function BS(i){return i.tag===5||i.tag===3||i.tag===4}function V2(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||BS(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function mb(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(i,e):t.insertBefore(i,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(i,t)):(e=t,e.appendChild(i)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=Pm));else if(n!==4&&(i=i.child,i!==null))for(mb(i,e,t),i=i.sibling;i!==null;)mb(i,e,t),i=i.sibling}function vb(i,e,t){var n=i.tag;if(n===5||n===6)i=i.stateNode,e?t.insertBefore(i,e):t.appendChild(i);else if(n!==4&&(i=i.child,i!==null))for(vb(i,e,t),i=i.sibling;i!==null;)vb(i,e,t),i=i.sibling}var Un=null,Xr=!1;function Ia(i,e,t){for(t=t.child;t!==null;)jS(i,e,t),t=t.sibling}function jS(i,e,t){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(qv,t)}catch{}switch(t.tag){case 5:ii||ic(t,e);case 6:var n=Un,r=Xr;Un=null,Ia(i,e,t),Un=n,Xr=r,Un!==null&&(Xr?(i=Un,t=t.stateNode,i.nodeType===8?i.parentNode.removeChild(t):i.removeChild(t)):Un.removeChild(t.stateNode));break;case 18:Un!==null&&(Xr?(i=Un,t=t.stateNode,i.nodeType===8?Gy(i.parentNode,t):i.nodeType===1&&Gy(i,t),Gf(i)):Gy(Un,t.stateNode));break;case 4:n=Un,r=Xr,Un=t.stateNode.containerInfo,Xr=!0,Ia(i,e,t),Un=n,Xr=r;break;case 0:case 11:case 14:case 15:if(!ii&&(n=t.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,a=s.destroy;s=s.tag,a!==void 0&&(s&2||s&4)&&pb(t,e,a),r=r.next}while(r!==n)}Ia(i,e,t);break;case 1:if(!ii&&(ic(t,e),n=t.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=t.memoizedProps,n.state=t.memoizedState,n.componentWillUnmount()}catch(o){Jt(t,e,o)}Ia(i,e,t);break;case 21:Ia(i,e,t);break;case 22:t.mode&1?(ii=(n=ii)||t.memoizedState!==null,Ia(i,e,t),ii=n):Ia(i,e,t);break;default:Ia(i,e,t)}}function G2(i){var e=i.updateQueue;if(e!==null){i.updateQueue=null;var t=i.stateNode;t===null&&(t=i.stateNode=new rR),e.forEach(function(n){var r=pR.bind(null,i,n);t.has(n)||(t.add(n),n.then(r,r))})}}function Or(i,e){var t=e.deletions;if(t!==null)for(var n=0;n<t.length;n++){var r=t[n];try{var s=i,a=e,o=a;e:for(;o!==null;){switch(o.tag){case 5:Un=o.stateNode,Xr=!1;break e;case 3:Un=o.stateNode.containerInfo,Xr=!0;break e;case 4:Un=o.stateNode.containerInfo,Xr=!0;break e}o=o.return}if(Un===null)throw Error(Ae(160));jS(s,a,r),Un=null,Xr=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Jt(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)zS(e,i),e=e.sibling}function zS(i,e){var t=i.alternate,n=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Or(e,i),rs(i),n&4){try{Mf(3,i,i.return),Yv(3,i)}catch(b){Jt(i,i.return,b)}try{Mf(5,i,i.return)}catch(b){Jt(i,i.return,b)}}break;case 1:Or(e,i),rs(i),n&512&&t!==null&&ic(t,t.return);break;case 5:if(Or(e,i),rs(i),n&512&&t!==null&&ic(t,t.return),i.flags&32){var r=i.stateNode;try{Hf(r,"")}catch(b){Jt(i,i.return,b)}}if(n&4&&(r=i.stateNode,r!=null)){var s=i.memoizedProps,a=t!==null?t.memoizedProps:s,o=i.type,l=i.updateQueue;if(i.updateQueue=null,l!==null)try{o==="input"&&s.type==="radio"&&s.name!=null&&lx(r,s),U0(o,a);var u=U0(o,s);for(a=0;a<l.length;a+=2){var c=l[a],h=l[a+1];c==="style"?dx(r,h):c==="dangerouslySetInnerHTML"?hx(r,h):c==="children"?Hf(r,h):cw(r,c,h,u)}switch(o){case"input":M0(r,s);break;case"textarea":ux(r,s);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var d=s.value;d!=null?lc(r,!!s.multiple,d,!1):f!==!!s.multiple&&(s.defaultValue!=null?lc(r,!!s.multiple,s.defaultValue,!0):lc(r,!!s.multiple,s.multiple?[]:"",!1))}r[Qf]=s}catch(b){Jt(i,i.return,b)}}break;case 6:if(Or(e,i),rs(i),n&4){if(i.stateNode===null)throw Error(Ae(162));r=i.stateNode,s=i.memoizedProps;try{r.nodeValue=s}catch(b){Jt(i,i.return,b)}}break;case 3:if(Or(e,i),rs(i),n&4&&t!==null&&t.memoizedState.isDehydrated)try{Gf(e.containerInfo)}catch(b){Jt(i,i.return,b)}break;case 4:Or(e,i),rs(i);break;case 13:Or(e,i),rs(i),r=i.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Hw=an())),n&4&&G2(i);break;case 22:if(c=t!==null&&t.memoizedState!==null,i.mode&1?(ii=(u=ii)||c,Or(e,i),ii=u):Or(e,i),rs(i),n&8192){if(u=i.memoizedState!==null,(i.stateNode.isHidden=u)&&!c&&i.mode&1)for(je=i,c=i.child;c!==null;){for(h=je=c;je!==null;){switch(f=je,d=f.child,f.tag){case 0:case 11:case 14:case 15:Mf(4,f,f.return);break;case 1:ic(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){n=f,t=f.return;try{e=n,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(b){Jt(n,t,b)}}break;case 5:ic(f,f.return);break;case 22:if(f.memoizedState!==null){K2(h);continue}}d!==null?(d.return=f,je=d):K2(h)}c=c.sibling}e:for(c=null,h=i;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(o=h.stateNode,l=h.memoizedProps.style,a=l!=null&&l.hasOwnProperty("display")?l.display:null,o.style.display=fx("display",a))}catch(b){Jt(i,i.return,b)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(b){Jt(i,i.return,b)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===i)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===i)break e;for(;h.sibling===null;){if(h.return===null||h.return===i)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Or(e,i),rs(i),n&4&&G2(i);break;case 21:break;default:Or(e,i),rs(i)}}function rs(i){var e=i.flags;if(e&2){try{e:{for(var t=i.return;t!==null;){if(BS(t)){var n=t;break e}t=t.return}throw Error(Ae(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Hf(r,""),n.flags&=-33);var s=V2(i);vb(i,s,r);break;case 3:case 4:var a=n.stateNode.containerInfo,o=V2(i);mb(i,o,a);break;default:throw Error(Ae(161))}}catch(l){Jt(i,i.return,l)}i.flags&=-3}e&4096&&(i.flags&=-4097)}function aR(i,e,t){je=i,US(i)}function US(i,e,t){for(var n=(i.mode&1)!==0;je!==null;){var r=je,s=r.child;if(r.tag===22&&n){var a=r.memoizedState!==null||Eg;if(!a){var o=r.alternate,l=o!==null&&o.memoizedState!==null||ii;o=Eg;var u=ii;if(Eg=a,(ii=l)&&!u)for(je=r;je!==null;)a=je,l=a.child,a.tag===22&&a.memoizedState!==null?Y2(r):l!==null?(l.return=a,je=l):Y2(r);for(;s!==null;)je=s,US(s),s=s.sibling;je=r,Eg=o,ii=u}X2(i)}else r.subtreeFlags&8772&&s!==null?(s.return=r,je=s):X2(i)}}function X2(i){for(;je!==null;){var e=je;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ii||Yv(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!ii)if(t===null)n.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:Pr(e.type,t.memoizedProps);n.componentDidUpdate(r,t.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&R2(e,s,n);break;case 3:var a=e.updateQueue;if(a!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}R2(e,a,t)}break;case 5:var o=e.stateNode;if(t===null&&e.flags&4){t=o;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Gf(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Ae(163))}ii||e.flags&512&&gb(e)}catch(f){Jt(e,e.return,f)}}if(e===i){je=null;break}if(t=e.sibling,t!==null){t.return=e.return,je=t;break}je=e.return}}function K2(i){for(;je!==null;){var e=je;if(e===i){je=null;break}var t=e.sibling;if(t!==null){t.return=e.return,je=t;break}je=e.return}}function Y2(i){for(;je!==null;){var e=je;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{Yv(4,e)}catch(l){Jt(e,t,l)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(l){Jt(e,r,l)}}var s=e.return;try{gb(e)}catch(l){Jt(e,s,l)}break;case 5:var a=e.return;try{gb(e)}catch(l){Jt(e,a,l)}}}catch(l){Jt(e,e.return,l)}if(e===i){je=null;break}var o=e.sibling;if(o!==null){o.return=e.return,je=o;break}je=e.return}}var oR=Math.ceil,Wm=Pa.ReactCurrentDispatcher,Uw=Pa.ReactCurrentOwner,Er=Pa.ReactCurrentBatchConfig,vt=0,Ln=null,fn=null,Hn=0,Zi=0,rc=qo(0),An=0,rd=null,mu=0,Zv=0,qw=0,Ff=null,Di=null,Hw=0,kh=1/0,zs=null,$m=!1,yb=null,Oo=null,Ag=!1,_o=null,Vm=0,Bf=0,bb=null,Ug=-1,qg=0;function pi(){return vt&6?an():Ug!==-1?Ug:Ug=an()}function No(i){return i.mode&1?vt&2&&Hn!==0?Hn&-Hn:WN.transition!==null?(qg===0&&(qg=Sx()),qg):(i=Ct,i!==0||(i=window.event,i=i===void 0?16:Rx(i.type)),i):1}function Jr(i,e,t,n){if(50<Bf)throw Bf=0,bb=null,Error(Ae(185));Hp(i,t,n),(!(vt&2)||i!==Ln)&&(i===Ln&&(!(vt&2)&&(Zv|=t),An===4&&Ua(i,Hn)),Li(i,n),t===1&&vt===0&&!(e.mode&1)&&(kh=an()+500,Gv&&Ho()))}function Li(i,e){var t=i.callbackNode;WO(i,e);var n=Dm(i,i===Ln?Hn:0);if(n===0)t!==null&&s2(t),i.callbackNode=null,i.callbackPriority=0;else if(e=n&-n,i.callbackPriority!==e){if(t!=null&&s2(t),e===1)i.tag===0?HN(Z2.bind(null,i)):Zx(Z2.bind(null,i)),jN(function(){!(vt&6)&&Ho()}),t=null;else{switch(Cx(n)){case 1:t=gw;break;case 4:t=Ax;break;case 16:t=km;break;case 536870912:t=xx;break;default:t=km}t=KS(t,qS.bind(null,i))}i.callbackPriority=e,i.callbackNode=t}}function qS(i,e){if(Ug=-1,qg=0,vt&6)throw Error(Ae(327));var t=i.callbackNode;if(dc()&&i.callbackNode!==t)return null;var n=Dm(i,i===Ln?Hn:0);if(n===0)return null;if(n&30||n&i.expiredLanes||e)e=Gm(i,n);else{e=n;var r=vt;vt|=2;var s=WS();(Ln!==i||Hn!==e)&&(zs=null,kh=an()+500,uu(i,e));do try{cR();break}catch(o){HS(i,o)}while(!0);kw(),Wm.current=s,vt=r,fn!==null?e=0:(Ln=null,Hn=0,e=An)}if(e!==0){if(e===2&&(r=V0(i),r!==0&&(n=r,e=wb(i,r))),e===1)throw t=rd,uu(i,0),Ua(i,n),Li(i,an()),t;if(e===6)Ua(i,n);else{if(r=i.current.alternate,!(n&30)&&!lR(r)&&(e=Gm(i,n),e===2&&(s=V0(i),s!==0&&(n=s,e=wb(i,s))),e===1))throw t=rd,uu(i,0),Ua(i,n),Li(i,an()),t;switch(i.finishedWork=r,i.finishedLanes=n,e){case 0:case 1:throw Error(Ae(345));case 2:Ko(i,Di,zs);break;case 3:if(Ua(i,n),(n&130023424)===n&&(e=Hw+500-an(),10<e)){if(Dm(i,0)!==0)break;if(r=i.suspendedLanes,(r&n)!==n){pi(),i.pingedLanes|=i.suspendedLanes&r;break}i.timeoutHandle=eb(Ko.bind(null,i,Di,zs),e);break}Ko(i,Di,zs);break;case 4:if(Ua(i,n),(n&4194240)===n)break;for(e=i.eventTimes,r=-1;0<n;){var a=31-Qr(n);s=1<<a,a=e[a],a>r&&(r=a),n&=~s}if(n=r,n=an()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*oR(n/1960))-n,10<n){i.timeoutHandle=eb(Ko.bind(null,i,Di,zs),n);break}Ko(i,Di,zs);break;case 5:Ko(i,Di,zs);break;default:throw Error(Ae(329))}}}return Li(i,an()),i.callbackNode===t?qS.bind(null,i):null}function wb(i,e){var t=Ff;return i.current.memoizedState.isDehydrated&&(uu(i,e).flags|=256),i=Gm(i,e),i!==2&&(e=Di,Di=t,e!==null&&_b(e)),i}function _b(i){Di===null?Di=i:Di.push.apply(Di,i)}function lR(i){for(var e=i;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var n=0;n<t.length;n++){var r=t[n],s=r.getSnapshot;r=r.value;try{if(!ts(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===i)break;for(;e.sibling===null;){if(e.return===null||e.return===i)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ua(i,e){for(e&=~qw,e&=~Zv,i.suspendedLanes|=e,i.pingedLanes&=~e,i=i.expirationTimes;0<e;){var t=31-Qr(e),n=1<<t;i[t]=-1,e&=~n}}function Z2(i){if(vt&6)throw Error(Ae(327));dc();var e=Dm(i,0);if(!(e&1))return Li(i,an()),null;var t=Gm(i,e);if(i.tag!==0&&t===2){var n=V0(i);n!==0&&(e=n,t=wb(i,n))}if(t===1)throw t=rd,uu(i,0),Ua(i,e),Li(i,an()),t;if(t===6)throw Error(Ae(345));return i.finishedWork=i.current.alternate,i.finishedLanes=e,Ko(i,Di,zs),Li(i,an()),null}function Ww(i,e){var t=vt;vt|=1;try{return i(e)}finally{vt=t,vt===0&&(kh=an()+500,Gv&&Ho())}}function vu(i){_o!==null&&_o.tag===0&&!(vt&6)&&dc();var e=vt;vt|=1;var t=Er.transition,n=Ct;try{if(Er.transition=null,Ct=1,i)return i()}finally{Ct=n,Er.transition=t,vt=e,!(vt&6)&&Ho()}}function $w(){Zi=rc.current,Bt(rc)}function uu(i,e){i.finishedWork=null,i.finishedLanes=0;var t=i.timeoutHandle;if(t!==-1&&(i.timeoutHandle=-1,BN(t)),fn!==null)for(t=fn.return;t!==null;){var n=t;switch(Sw(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Lm();break;case 3:Ch(),Bt(Ri),Bt(si),Lw();break;case 5:Pw(n);break;case 4:Ch();break;case 13:Bt(Gt);break;case 19:Bt(Gt);break;case 10:Dw(n.type._context);break;case 22:case 23:$w()}t=t.return}if(Ln=i,fn=i=Ro(i.current,null),Hn=Zi=e,An=0,rd=null,qw=Zv=mu=0,Di=Ff=null,il!==null){for(e=0;e<il.length;e++)if(t=il[e],n=t.interleaved,n!==null){t.interleaved=null;var r=n.next,s=t.pending;if(s!==null){var a=s.next;s.next=r,n.next=a}t.pending=n}il=null}return i}function HS(i,e){do{var t=fn;try{if(kw(),Bg.current=Hm,qm){for(var n=Kt.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}qm=!1}if(gu=0,Pn=En=Kt=null,If=!1,td=0,Uw.current=null,t===null||t.return===null){An=1,rd=e,fn=null;break}e:{var s=i,a=t.return,o=t,l=e;if(e=Hn,o.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=o,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var f=c.alternate;f?(c.updateQueue=f.updateQueue,c.memoizedState=f.memoizedState,c.lanes=f.lanes):(c.updateQueue=null,c.memoizedState=null)}var d=B2(a);if(d!==null){d.flags&=-257,j2(d,a,o,s,e),d.mode&1&&F2(s,u,e),e=d,l=u;var y=e.updateQueue;if(y===null){var b=new Set;b.add(l),e.updateQueue=b}else y.add(l);break e}else{if(!(e&1)){F2(s,u,e),Vw();break e}l=Error(Ae(426))}}else if(Wt&&o.mode&1){var v=B2(a);if(v!==null){!(v.flags&65536)&&(v.flags|=256),j2(v,a,o,s,e),Cw(Th(l,o));break e}}s=l=Th(l,o),An!==4&&(An=2),Ff===null?Ff=[s]:Ff.push(s),s=a;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var g=CS(s,l,e);N2(s,g);break e;case 1:o=l;var m=s.type,w=s.stateNode;if(!(s.flags&128)&&(typeof m.getDerivedStateFromError=="function"||w!==null&&typeof w.componentDidCatch=="function"&&(Oo===null||!Oo.has(w)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=TS(s,o,e);N2(s,_);break e}}s=s.return}while(s!==null)}VS(t)}catch(E){e=E,fn===t&&t!==null&&(fn=t=t.return);continue}break}while(!0)}function WS(){var i=Wm.current;return Wm.current=Hm,i===null?Hm:i}function Vw(){(An===0||An===3||An===2)&&(An=4),Ln===null||!(mu&268435455)&&!(Zv&268435455)||Ua(Ln,Hn)}function Gm(i,e){var t=vt;vt|=2;var n=WS();(Ln!==i||Hn!==e)&&(zs=null,uu(i,e));do try{uR();break}catch(r){HS(i,r)}while(!0);if(kw(),vt=t,Wm.current=n,fn!==null)throw Error(Ae(261));return Ln=null,Hn=0,An}function uR(){for(;fn!==null;)$S(fn)}function cR(){for(;fn!==null&&!IO();)$S(fn)}function $S(i){var e=XS(i.alternate,i,Zi);i.memoizedProps=i.pendingProps,e===null?VS(i):fn=e,Uw.current=null}function VS(i){var e=i;do{var t=e.alternate;if(i=e.return,e.flags&32768){if(t=iR(t,e),t!==null){t.flags&=32767,fn=t;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{An=6,fn=null;return}}else if(t=nR(t,e,Zi),t!==null){fn=t;return}if(e=e.sibling,e!==null){fn=e;return}fn=e=i}while(e!==null);An===0&&(An=5)}function Ko(i,e,t){var n=Ct,r=Er.transition;try{Er.transition=null,Ct=1,hR(i,e,t,n)}finally{Er.transition=r,Ct=n}return null}function hR(i,e,t,n){do dc();while(_o!==null);if(vt&6)throw Error(Ae(327));t=i.finishedWork;var r=i.finishedLanes;if(t===null)return null;if(i.finishedWork=null,i.finishedLanes=0,t===i.current)throw Error(Ae(177));i.callbackNode=null,i.callbackPriority=0;var s=t.lanes|t.childLanes;if($O(i,s),i===Ln&&(fn=Ln=null,Hn=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||Ag||(Ag=!0,KS(km,function(){return dc(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Er.transition,Er.transition=null;var a=Ct;Ct=1;var o=vt;vt|=4,Uw.current=null,sR(i,t),zS(t,i),NN(Q0),Om=!!Z0,Q0=Z0=null,i.current=t,aR(t),MO(),vt=o,Ct=a,Er.transition=s}else i.current=t;if(Ag&&(Ag=!1,_o=i,Vm=r),s=i.pendingLanes,s===0&&(Oo=null),jO(t.stateNode),Li(i,an()),e!==null)for(n=i.onRecoverableError,t=0;t<e.length;t++)r=e[t],n(r.value,{componentStack:r.stack,digest:r.digest});if($m)throw $m=!1,i=yb,yb=null,i;return Vm&1&&i.tag!==0&&dc(),s=i.pendingLanes,s&1?i===bb?Bf++:(Bf=0,bb=i):Bf=0,Ho(),null}function dc(){if(_o!==null){var i=Cx(Vm),e=Er.transition,t=Ct;try{if(Er.transition=null,Ct=16>i?16:i,_o===null)var n=!1;else{if(i=_o,_o=null,Vm=0,vt&6)throw Error(Ae(331));var r=vt;for(vt|=4,je=i.current;je!==null;){var s=je,a=s.child;if(je.flags&16){var o=s.deletions;if(o!==null){for(var l=0;l<o.length;l++){var u=o[l];for(je=u;je!==null;){var c=je;switch(c.tag){case 0:case 11:case 15:Mf(8,c,s)}var h=c.child;if(h!==null)h.return=c,je=h;else for(;je!==null;){c=je;var f=c.sibling,d=c.return;if(FS(c),c===u){je=null;break}if(f!==null){f.return=d,je=f;break}je=d}}}var y=s.alternate;if(y!==null){var b=y.child;if(b!==null){y.child=null;do{var v=b.sibling;b.sibling=null,b=v}while(b!==null)}}je=s}}if(s.subtreeFlags&2064&&a!==null)a.return=s,je=a;else e:for(;je!==null;){if(s=je,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Mf(9,s,s.return)}var g=s.sibling;if(g!==null){g.return=s.return,je=g;break e}je=s.return}}var m=i.current;for(je=m;je!==null;){a=je;var w=a.child;if(a.subtreeFlags&2064&&w!==null)w.return=a,je=w;else e:for(a=m;je!==null;){if(o=je,o.flags&2048)try{switch(o.tag){case 0:case 11:case 15:Yv(9,o)}}catch(E){Jt(o,o.return,E)}if(o===a){je=null;break e}var _=o.sibling;if(_!==null){_.return=o.return,je=_;break e}je=o.return}}if(vt=r,Ho(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(qv,i)}catch{}n=!0}return n}finally{Ct=t,Er.transition=e}}return!1}function Q2(i,e,t){e=Th(t,e),e=CS(i,e,1),i=Do(i,e,1),e=pi(),i!==null&&(Hp(i,1,e),Li(i,e))}function Jt(i,e,t){if(i.tag===3)Q2(i,i,t);else for(;e!==null;){if(e.tag===3){Q2(e,i,t);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Oo===null||!Oo.has(n))){i=Th(t,i),i=TS(e,i,1),e=Do(e,i,1),i=pi(),e!==null&&(Hp(e,1,i),Li(e,i));break}}e=e.return}}function fR(i,e,t){var n=i.pingCache;n!==null&&n.delete(e),e=pi(),i.pingedLanes|=i.suspendedLanes&t,Ln===i&&(Hn&t)===t&&(An===4||An===3&&(Hn&130023424)===Hn&&500>an()-Hw?uu(i,0):qw|=t),Li(i,e)}function GS(i,e){e===0&&(i.mode&1?(e=dg,dg<<=1,!(dg&130023424)&&(dg=4194304)):e=1);var t=pi();i=Sa(i,e),i!==null&&(Hp(i,e,t),Li(i,t))}function dR(i){var e=i.memoizedState,t=0;e!==null&&(t=e.retryLane),GS(i,t)}function pR(i,e){var t=0;switch(i.tag){case 13:var n=i.stateNode,r=i.memoizedState;r!==null&&(t=r.retryLane);break;case 19:n=i.stateNode;break;default:throw Error(Ae(314))}n!==null&&n.delete(e),GS(i,t)}var XS;XS=function(i,e,t){if(i!==null)if(i.memoizedProps!==e.pendingProps||Ri.current)Ni=!0;else{if(!(i.lanes&t)&&!(e.flags&128))return Ni=!1,tR(i,e,t);Ni=!!(i.flags&131072)}else Ni=!1,Wt&&e.flags&1048576&&Qx(e,Fm,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;zg(i,e),i=e.pendingProps;var r=Ah(e,si.current);fc(e,t),r=Mw(null,e,n,i,r,t);var s=Fw();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Pi(n)?(s=!0,Im(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Nw(e),r.updater=Kv,e.stateNode=r,r._reactInternals=e,ob(e,n,i,t),e=cb(null,e,n,!0,s,t)):(e.tag=0,Wt&&s&&xw(e),di(null,e,r,t),e=e.child),e;case 16:n=e.elementType;e:{switch(zg(i,e),i=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=mR(n),i=Pr(n,i),r){case 0:e=ub(null,e,n,i,t);break e;case 1:e=q2(null,e,n,i,t);break e;case 11:e=z2(null,e,n,i,t);break e;case 14:e=U2(null,e,n,Pr(n.type,i),t);break e}throw Error(Ae(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Pr(n,r),ub(i,e,n,r,t);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Pr(n,r),q2(i,e,n,r,t);case 3:e:{if(NS(e),i===null)throw Error(Ae(387));n=e.pendingProps,s=e.memoizedState,r=s.element,rS(i,e),zm(e,n,null,t);var a=e.memoizedState;if(n=a.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:a.cache,pendingSuspenseBoundaries:a.pendingSuspenseBoundaries,transitions:a.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=Th(Error(Ae(423)),e),e=H2(i,e,n,t,r);break e}else if(n!==r){r=Th(Error(Ae(424)),e),e=H2(i,e,n,t,r);break e}else for(er=ko(e.stateNode.containerInfo.firstChild),tr=e,Wt=!0,Yr=null,t=nS(e,null,n,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(xh(),n===r){e=Ca(i,e,t);break e}di(i,e,n,t)}e=e.child}return e;case 5:return sS(e),i===null&&rb(e),n=e.type,r=e.pendingProps,s=i!==null?i.memoizedProps:null,a=r.children,J0(n,r)?a=null:s!==null&&J0(n,s)&&(e.flags|=32),OS(i,e),di(i,e,a,t),e.child;case 6:return i===null&&rb(e),null;case 13:return RS(i,e,t);case 4:return Rw(e,e.stateNode.containerInfo),n=e.pendingProps,i===null?e.child=Sh(e,null,n,t):di(i,e,n,t),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Pr(n,r),z2(i,e,n,r,t);case 7:return di(i,e,e.pendingProps,t),e.child;case 8:return di(i,e,e.pendingProps.children,t),e.child;case 12:return di(i,e,e.pendingProps.children,t),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,s=e.memoizedProps,a=r.value,Pt(Bm,n._currentValue),n._currentValue=a,s!==null)if(ts(s.value,a)){if(s.children===r.children&&!Ri.current){e=Ca(i,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var o=s.dependencies;if(o!==null){a=s.child;for(var l=o.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=ba(-1,t&-t),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),sb(s.return,t,e),o.lanes|=t;break}l=l.next}}else if(s.tag===10)a=s.type===e.type?null:s.child;else if(s.tag===18){if(a=s.return,a===null)throw Error(Ae(341));a.lanes|=t,o=a.alternate,o!==null&&(o.lanes|=t),sb(a,t,e),a=s.sibling}else a=s.child;if(a!==null)a.return=s;else for(a=s;a!==null;){if(a===e){a=null;break}if(s=a.sibling,s!==null){s.return=a.return,a=s;break}a=a.return}s=a}di(i,e,r.children,t),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,fc(e,t),r=xr(r),n=n(r),e.flags|=1,di(i,e,n,t),e.child;case 14:return n=e.type,r=Pr(n,e.pendingProps),r=Pr(n.type,r),U2(i,e,n,r,t);case 15:return kS(i,e,e.type,e.pendingProps,t);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Pr(n,r),zg(i,e),e.tag=1,Pi(n)?(i=!0,Im(e)):i=!1,fc(e,t),SS(e,n,r),ob(e,n,r,t),cb(null,e,n,!0,i,t);case 19:return PS(i,e,t);case 22:return DS(i,e,t)}throw Error(Ae(156,e.tag))};function KS(i,e){return Ex(i,e)}function gR(i,e,t,n){this.tag=i,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function _r(i,e,t,n){return new gR(i,e,t,n)}function Gw(i){return i=i.prototype,!(!i||!i.isReactComponent)}function mR(i){if(typeof i=="function")return Gw(i)?1:0;if(i!=null){if(i=i.$$typeof,i===fw)return 11;if(i===dw)return 14}return 2}function Ro(i,e){var t=i.alternate;return t===null?(t=_r(i.tag,e,i.key,i.mode),t.elementType=i.elementType,t.type=i.type,t.stateNode=i.stateNode,t.alternate=i,i.alternate=t):(t.pendingProps=e,t.type=i.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=i.flags&14680064,t.childLanes=i.childLanes,t.lanes=i.lanes,t.child=i.child,t.memoizedProps=i.memoizedProps,t.memoizedState=i.memoizedState,t.updateQueue=i.updateQueue,e=i.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=i.sibling,t.index=i.index,t.ref=i.ref,t}function Hg(i,e,t,n,r,s){var a=2;if(n=i,typeof i=="function")Gw(i)&&(a=1);else if(typeof i=="string")a=5;else e:switch(i){case Xu:return cu(t.children,r,s,e);case hw:a=8,r|=8;break;case N0:return i=_r(12,t,e,r|2),i.elementType=N0,i.lanes=s,i;case R0:return i=_r(13,t,e,r),i.elementType=R0,i.lanes=s,i;case P0:return i=_r(19,t,e,r),i.elementType=P0,i.lanes=s,i;case sx:return Qv(t,r,s,e);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case ix:a=10;break e;case rx:a=9;break e;case fw:a=11;break e;case dw:a=14;break e;case Ba:a=16,n=null;break e}throw Error(Ae(130,i==null?i:typeof i,""))}return e=_r(a,t,e,r),e.elementType=i,e.type=n,e.lanes=s,e}function cu(i,e,t,n){return i=_r(7,i,n,e),i.lanes=t,i}function Qv(i,e,t,n){return i=_r(22,i,n,e),i.elementType=sx,i.lanes=t,i.stateNode={isHidden:!1},i}function t0(i,e,t){return i=_r(6,i,null,e),i.lanes=t,i}function n0(i,e,t){return e=_r(4,i.children!==null?i.children:[],i.key,e),e.lanes=t,e.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},e}function vR(i,e,t,n,r){this.tag=e,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=My(0),this.expirationTimes=My(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=My(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Xw(i,e,t,n,r,s,a,o,l){return i=new vR(i,e,t,o,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=_r(3,null,null,e),i.current=s,s.stateNode=i,s.memoizedState={element:n,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},Nw(s),i}function yR(i,e,t){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Gu,key:n==null?null:""+n,children:i,containerInfo:e,implementation:t}}function YS(i){if(!i)return Mo;i=i._reactInternals;e:{if(xu(i)!==i||i.tag!==1)throw Error(Ae(170));var e=i;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Pi(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Ae(171))}if(i.tag===1){var t=i.type;if(Pi(t))return Yx(i,t,e)}return e}function ZS(i,e,t,n,r,s,a,o,l){return i=Xw(t,n,!0,i,r,s,a,o,l),i.context=YS(null),t=i.current,n=pi(),r=No(t),s=ba(n,r),s.callback=e??null,Do(t,s,r),i.current.lanes=r,Hp(i,r,n),Li(i,n),i}function Jv(i,e,t,n){var r=e.current,s=pi(),a=No(r);return t=YS(t),e.context===null?e.context=t:e.pendingContext=t,e=ba(s,a),e.payload={element:i},n=n===void 0?null:n,n!==null&&(e.callback=n),i=Do(r,e,a),i!==null&&(Jr(i,r,a,s),Fg(i,r,a)),a}function Xm(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function J2(i,e){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var t=i.retryLane;i.retryLane=t!==0&&t<e?t:e}}function Kw(i,e){J2(i,e),(i=i.alternate)&&J2(i,e)}function bR(){return null}var QS=typeof reportError=="function"?reportError:function(i){console.error(i)};function Yw(i){this._internalRoot=i}ey.prototype.render=Yw.prototype.render=function(i){var e=this._internalRoot;if(e===null)throw Error(Ae(409));Jv(i,e,null,null)};ey.prototype.unmount=Yw.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var e=i.containerInfo;vu(function(){Jv(null,i,null,null)}),e[xa]=null}};function ey(i){this._internalRoot=i}ey.prototype.unstable_scheduleHydration=function(i){if(i){var e=Dx();i={blockedOn:null,target:i,priority:e};for(var t=0;t<za.length&&e!==0&&e<za[t].priority;t++);za.splice(t,0,i),t===0&&Nx(i)}};function Zw(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ty(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function eE(){}function wR(i,e,t,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var u=Xm(a);s.call(u)}}var a=ZS(e,n,i,0,null,!1,!1,"",eE);return i._reactRootContainer=a,i[xa]=a.current,Yf(i.nodeType===8?i.parentNode:i),vu(),a}for(;r=i.lastChild;)i.removeChild(r);if(typeof n=="function"){var o=n;n=function(){var u=Xm(l);o.call(u)}}var l=Xw(i,0,!1,null,null,!1,!1,"",eE);return i._reactRootContainer=l,i[xa]=l.current,Yf(i.nodeType===8?i.parentNode:i),vu(function(){Jv(e,l,t,n)}),l}function ny(i,e,t,n,r){var s=t._reactRootContainer;if(s){var a=s;if(typeof r=="function"){var o=r;r=function(){var l=Xm(a);o.call(l)}}Jv(e,a,i,r)}else a=wR(t,e,i,r,n);return Xm(a)}Tx=function(i){switch(i.tag){case 3:var e=i.stateNode;if(e.current.memoizedState.isDehydrated){var t=ff(e.pendingLanes);t!==0&&(mw(e,t|1),Li(e,an()),!(vt&6)&&(kh=an()+500,Ho()))}break;case 13:vu(function(){var n=Sa(i,1);if(n!==null){var r=pi();Jr(n,i,1,r)}}),Kw(i,1)}};vw=function(i){if(i.tag===13){var e=Sa(i,134217728);if(e!==null){var t=pi();Jr(e,i,134217728,t)}Kw(i,134217728)}};kx=function(i){if(i.tag===13){var e=No(i),t=Sa(i,e);if(t!==null){var n=pi();Jr(t,i,e,n)}Kw(i,e)}};Dx=function(){return Ct};Ox=function(i,e){var t=Ct;try{return Ct=i,e()}finally{Ct=t}};H0=function(i,e,t){switch(e){case"input":if(M0(i,t),e=t.name,t.type==="radio"&&e!=null){for(t=i;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var n=t[e];if(n!==i&&n.form===i.form){var r=Vv(n);if(!r)throw Error(Ae(90));ox(n),M0(n,r)}}}break;case"textarea":ux(i,t);break;case"select":e=t.value,e!=null&&lc(i,!!t.multiple,e,!1)}};mx=Ww;vx=vu;var _R={usingClientEntryPoint:!1,Events:[$p,Qu,Vv,px,gx,Ww]},Qh={findFiberByHostInstance:nl,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ER={bundleType:Qh.bundleType,version:Qh.version,rendererPackageName:Qh.rendererPackageName,rendererConfig:Qh.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Pa.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=wx(i),i===null?null:i.stateNode},findFiberByHostInstance:Qh.findFiberByHostInstance||bR,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xg=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xg.isDisabled&&xg.supportsFiber)try{qv=xg.inject(ER),Ds=xg}catch{}}rr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_R;rr.createPortal=function(i,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Zw(e))throw Error(Ae(200));return yR(i,e,null,t)};rr.createRoot=function(i,e){if(!Zw(i))throw Error(Ae(299));var t=!1,n="",r=QS;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Xw(i,1,!1,null,null,t,!1,n,r),i[xa]=e.current,Yf(i.nodeType===8?i.parentNode:i),new Yw(e)};rr.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var e=i._reactInternals;if(e===void 0)throw typeof i.render=="function"?Error(Ae(188)):(i=Object.keys(i).join(","),Error(Ae(268,i)));return i=wx(e),i=i===null?null:i.stateNode,i};rr.flushSync=function(i){return vu(i)};rr.hydrate=function(i,e,t){if(!ty(e))throw Error(Ae(200));return ny(null,i,e,!0,t)};rr.hydrateRoot=function(i,e,t){if(!Zw(i))throw Error(Ae(405));var n=t!=null&&t.hydratedSources||null,r=!1,s="",a=QS;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),e=ZS(e,null,i,1,t??null,r,!1,s,a),i[xa]=e.current,Yf(i),n)for(i=0;i<n.length;i++)t=n[i],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new ey(e)};rr.render=function(i,e,t){if(!ty(e))throw Error(Ae(200));return ny(null,i,e,!1,t)};rr.unmountComponentAtNode=function(i){if(!ty(i))throw Error(Ae(40));return i._reactRootContainer?(vu(function(){ny(null,null,i,!1,function(){i._reactRootContainer=null,i[xa]=null})}),!0):!1};rr.unstable_batchedUpdates=Ww;rr.unstable_renderSubtreeIntoContainer=function(i,e,t,n){if(!ty(t))throw Error(Ae(200));if(i==null||i._reactInternals===void 0)throw Error(Ae(38));return ny(i,e,t,!1,n)};rr.version="18.3.1-next-f1338f8080-20240426";function JS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(JS)}catch(i){console.error(i)}}JS(),JA.exports=rr;var eC=JA.exports,tE=eC;D0.createRoot=tE.createRoot,D0.hydrateRoot=tE.hydrateRoot;/**
 * @remix-run/router v1.23.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function sd(){return sd=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},sd.apply(this,arguments)}var Eo;(function(i){i.Pop="POP",i.Push="PUSH",i.Replace="REPLACE"})(Eo||(Eo={}));const nE="popstate";function AR(i){i===void 0&&(i={});function e(n,r){let{pathname:s,search:a,hash:o}=n.location;return Eb("",{pathname:s,search:a,hash:o},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(n,r){return typeof r=="string"?r:Km(r)}return SR(e,t,null,i)}function pn(i,e){if(i===!1||i===null||typeof i>"u")throw new Error(e)}function Qw(i,e){if(!i){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function xR(){return Math.random().toString(36).substr(2,8)}function iE(i,e){return{usr:i.state,key:i.key,idx:e}}function Eb(i,e,t,n){return t===void 0&&(t=null),sd({pathname:typeof i=="string"?i:i.pathname,search:"",hash:""},typeof e=="string"?Mh(e):e,{state:t,key:e&&e.key||n||xR()})}function Km(i){let{pathname:e="/",search:t="",hash:n=""}=i;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),n&&n!=="#"&&(e+=n.charAt(0)==="#"?n:"#"+n),e}function Mh(i){let e={};if(i){let t=i.indexOf("#");t>=0&&(e.hash=i.substr(t),i=i.substr(0,t));let n=i.indexOf("?");n>=0&&(e.search=i.substr(n),i=i.substr(0,n)),i&&(e.pathname=i)}return e}function SR(i,e,t,n){n===void 0&&(n={});let{window:r=document.defaultView,v5Compat:s=!1}=n,a=r.history,o=Eo.Pop,l=null,u=c();u==null&&(u=0,a.replaceState(sd({},a.state,{idx:u}),""));function c(){return(a.state||{idx:null}).idx}function h(){o=Eo.Pop;let v=c(),g=v==null?null:v-u;u=v,l&&l({action:o,location:b.location,delta:g})}function f(v,g){o=Eo.Push;let m=Eb(b.location,v,g);u=c()+1;let w=iE(m,u),_=b.createHref(m);try{a.pushState(w,"",_)}catch(E){if(E instanceof DOMException&&E.name==="DataCloneError")throw E;r.location.assign(_)}s&&l&&l({action:o,location:b.location,delta:1})}function d(v,g){o=Eo.Replace;let m=Eb(b.location,v,g);u=c();let w=iE(m,u),_=b.createHref(m);a.replaceState(w,"",_),s&&l&&l({action:o,location:b.location,delta:0})}function y(v){let g=r.location.origin!=="null"?r.location.origin:r.location.href,m=typeof v=="string"?v:Km(v);return m=m.replace(/ $/,"%20"),pn(g,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,g)}let b={get action(){return o},get location(){return i(r,a)},listen(v){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(nE,h),l=v,()=>{r.removeEventListener(nE,h),l=null}},createHref(v){return e(r,v)},createURL:y,encodeLocation(v){let g=y(v);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:d,go(v){return a.go(v)}};return b}var rE;(function(i){i.data="data",i.deferred="deferred",i.redirect="redirect",i.error="error"})(rE||(rE={}));function CR(i,e,t){return t===void 0&&(t="/"),TR(i,e,t)}function TR(i,e,t,n){let r=typeof e=="string"?Mh(e):e,s=Jw(r.pathname||"/",t);if(s==null)return null;let a=tC(i);kR(a);let o=null;for(let l=0;o==null&&l<a.length;++l){let u=zR(s);o=FR(a[l],u)}return o}function tC(i,e,t,n){e===void 0&&(e=[]),t===void 0&&(t=[]),n===void 0&&(n="");let r=(s,a,o)=>{let l={relativePath:o===void 0?s.path||"":o,caseSensitive:s.caseSensitive===!0,childrenIndex:a,route:s};l.relativePath.startsWith("/")&&(pn(l.relativePath.startsWith(n),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+n+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(n.length));let u=Po([n,l.relativePath]),c=t.concat(l);s.children&&s.children.length>0&&(pn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),tC(s.children,e,c,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:IR(u,s.index),routesMeta:c})};return i.forEach((s,a)=>{var o;if(s.path===""||!((o=s.path)!=null&&o.includes("?")))r(s,a);else for(let l of nC(s.path))r(s,a,l)}),e}function nC(i){let e=i.split("/");if(e.length===0)return[];let[t,...n]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(n.length===0)return r?[s,""]:[s];let a=nC(n.join("/")),o=[];return o.push(...a.map(l=>l===""?s:[s,l].join("/"))),r&&o.push(...a),o.map(l=>i.startsWith("/")&&l===""?"/":l)}function kR(i){i.sort((e,t)=>e.score!==t.score?t.score-e.score:MR(e.routesMeta.map(n=>n.childrenIndex),t.routesMeta.map(n=>n.childrenIndex)))}const DR=/^:[\w-]+$/,OR=3,NR=2,RR=1,PR=10,LR=-2,sE=i=>i==="*";function IR(i,e){let t=i.split("/"),n=t.length;return t.some(sE)&&(n+=LR),e&&(n+=NR),t.filter(r=>!sE(r)).reduce((r,s)=>r+(DR.test(s)?OR:s===""?RR:PR),n)}function MR(i,e){return i.length===e.length&&i.slice(0,-1).every((n,r)=>n===e[r])?i[i.length-1]-e[e.length-1]:0}function FR(i,e,t){let{routesMeta:n}=i,r={},s="/",a=[];for(let o=0;o<n.length;++o){let l=n[o],u=o===n.length-1,c=s==="/"?e:e.slice(s.length)||"/",h=BR({path:l.relativePath,caseSensitive:l.caseSensitive,end:u},c),f=l.route;if(!h)return null;Object.assign(r,h.params),a.push({params:r,pathname:Po([s,h.pathname]),pathnameBase:$R(Po([s,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(s=Po([s,h.pathnameBase]))}return a}function BR(i,e){typeof i=="string"&&(i={path:i,caseSensitive:!1,end:!0});let[t,n]=jR(i.path,i.caseSensitive,i.end),r=e.match(t);if(!r)return null;let s=r[0],a=s.replace(/(.)\/+$/,"$1"),o=r.slice(1);return{params:n.reduce((u,c,h)=>{let{paramName:f,isOptional:d}=c;if(f==="*"){let b=o[h]||"";a=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const y=o[h];return d&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:a,pattern:i}}function jR(i,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),Qw(i==="*"||!i.endsWith("*")||i.endsWith("/*"),'Route path "'+i+'" will be treated as if it were '+('"'+i.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+i.replace(/\*$/,"/*")+'".'));let n=[],r="^"+i.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,o,l)=>(n.push({paramName:o,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return i.endsWith("*")?(n.push({paramName:"*"}),r+=i==="*"||i==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":i!==""&&i!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function zR(i){try{return i.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return Qw(!1,'The URL path "'+i+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),i}}function Jw(i,e){if(e==="/")return i;if(!i.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,n=i.charAt(t);return n&&n!=="/"?null:i.slice(t)||"/"}const UR=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,qR=i=>UR.test(i);function HR(i,e){e===void 0&&(e="/");let{pathname:t,search:n="",hash:r=""}=typeof i=="string"?Mh(i):i,s;if(t)if(qR(t))s=t;else{if(t.includes("//")){let a=t;t=t.replace(/\/\/+/g,"/"),Qw(!1,"Pathnames cannot have embedded double slashes - normalizing "+(a+" -> "+t))}t.startsWith("/")?s=aE(t.substring(1),"/"):s=aE(t,e)}else s=e;return{pathname:s,search:VR(n),hash:GR(r)}}function aE(i,e){let t=e.replace(/\/+$/,"").split("/");return i.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function i0(i,e,t,n){return"Cannot include a '"+i+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(n)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function WR(i){return i.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function iC(i,e){let t=WR(i);return e?t.map((n,r)=>r===t.length-1?n.pathname:n.pathnameBase):t.map(n=>n.pathnameBase)}function rC(i,e,t,n){n===void 0&&(n=!1);let r;typeof i=="string"?r=Mh(i):(r=sd({},i),pn(!r.pathname||!r.pathname.includes("?"),i0("?","pathname","search",r)),pn(!r.pathname||!r.pathname.includes("#"),i0("#","pathname","hash",r)),pn(!r.search||!r.search.includes("#"),i0("#","search","hash",r)));let s=i===""||r.pathname==="",a=s?"/":r.pathname,o;if(a==null)o=t;else{let h=e.length-1;if(!n&&a.startsWith("..")){let f=a.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}o=h>=0?e[h]:"/"}let l=HR(r,o),u=a&&a!=="/"&&a.endsWith("/"),c=(s||a===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(u||c)&&(l.pathname+="/"),l}const Po=i=>i.join("/").replace(/\/\/+/g,"/"),$R=i=>i.replace(/\/+$/,"").replace(/^\/*/,"/"),VR=i=>!i||i==="?"?"":i.startsWith("?")?i:"?"+i,GR=i=>!i||i==="#"?"":i.startsWith("#")?i:"#"+i;function XR(i){return i!=null&&typeof i.status=="number"&&typeof i.statusText=="string"&&typeof i.internal=="boolean"&&"data"in i}const sC=["post","put","patch","delete"];new Set(sC);const KR=["get",...sC];new Set(KR);/**
 * React Router v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ad(){return ad=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},ad.apply(this,arguments)}const e_=ze.createContext(null),YR=ze.createContext(null),Su=ze.createContext(null),iy=ze.createContext(null),Wo=ze.createContext({outlet:null,matches:[],isDataRoute:!1}),aC=ze.createContext(null);function ZR(i,e){let{relative:t}=e===void 0?{}:e;Gp()||pn(!1);let{basename:n,navigator:r}=ze.useContext(Su),{hash:s,pathname:a,search:o}=cC(i,{relative:t}),l=a;return n!=="/"&&(l=a==="/"?n:Po([n,a])),r.createHref({pathname:l,search:o,hash:s})}function Gp(){return ze.useContext(iy)!=null}function ry(){return Gp()||pn(!1),ze.useContext(iy).location}function oC(i){ze.useContext(Su).static||ze.useLayoutEffect(i)}function lC(){let{isDataRoute:i}=ze.useContext(Wo);return i?cP():QR()}function QR(){Gp()||pn(!1);let i=ze.useContext(e_),{basename:e,future:t,navigator:n}=ze.useContext(Su),{matches:r}=ze.useContext(Wo),{pathname:s}=ry(),a=JSON.stringify(iC(r,t.v7_relativeSplatPath)),o=ze.useRef(!1);return oC(()=>{o.current=!0}),ze.useCallback(function(u,c){if(c===void 0&&(c={}),!o.current)return;if(typeof u=="number"){n.go(u);return}let h=rC(u,JSON.parse(a),s,c.relative==="path");i==null&&e!=="/"&&(h.pathname=h.pathname==="/"?e:Po([e,h.pathname])),(c.replace?n.replace:n.push)(h,c.state,c)},[e,n,a,s,i])}function uC(){let{matches:i}=ze.useContext(Wo),e=i[i.length-1];return e?e.params:{}}function cC(i,e){let{relative:t}=e===void 0?{}:e,{future:n}=ze.useContext(Su),{matches:r}=ze.useContext(Wo),{pathname:s}=ry(),a=JSON.stringify(iC(r,n.v7_relativeSplatPath));return ze.useMemo(()=>rC(i,JSON.parse(a),s,t==="path"),[i,a,s,t])}function JR(i,e){return eP(i,e)}function eP(i,e,t,n){Gp()||pn(!1);let{navigator:r}=ze.useContext(Su),{matches:s}=ze.useContext(Wo),a=s[s.length-1],o=a?a.params:{};a&&a.pathname;let l=a?a.pathnameBase:"/";a&&a.route;let u=ry(),c;if(e){var h;let v=typeof e=="string"?Mh(e):e;l==="/"||(h=v.pathname)!=null&&h.startsWith(l)||pn(!1),c=v}else c=u;let f=c.pathname||"/",d=f;if(l!=="/"){let v=l.replace(/^\//,"").split("/");d="/"+f.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=CR(i,{pathname:d}),b=sP(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},o,v.params),pathname:Po([l,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?l:Po([l,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),s,t,n);return e&&b?ze.createElement(iy.Provider,{value:{location:ad({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:Eo.Pop}},b):b}function tP(){let i=uP(),e=XR(i)?i.status+" "+i.statusText:i instanceof Error?i.message:JSON.stringify(i),t=i instanceof Error?i.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return ze.createElement(ze.Fragment,null,ze.createElement("h2",null,"Unexpected Application Error!"),ze.createElement("h3",{style:{fontStyle:"italic"}},e),t?ze.createElement("pre",{style:r},t):null,null)}const nP=ze.createElement(tP,null);class iP extends ze.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?ze.createElement(Wo.Provider,{value:this.props.routeContext},ze.createElement(aC.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function rP(i){let{routeContext:e,match:t,children:n}=i,r=ze.useContext(e_);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),ze.createElement(Wo.Provider,{value:e},n)}function sP(i,e,t,n){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),n===void 0&&(n=null),i==null){var s;if(!t)return null;if(t.errors)i=t.matches;else if((s=n)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)i=t.matches;else return null}let a=i,o=(r=t)==null?void 0:r.errors;if(o!=null){let c=a.findIndex(h=>h.route.id&&(o==null?void 0:o[h.route.id])!==void 0);c>=0||pn(!1),a=a.slice(0,Math.min(a.length,c+1))}let l=!1,u=-1;if(t&&n&&n.v7_partialHydration)for(let c=0;c<a.length;c++){let h=a[c];if((h.route.HydrateFallback||h.route.hydrateFallbackElement)&&(u=c),h.route.id){let{loaderData:f,errors:d}=t,y=h.route.loader&&f[h.route.id]===void 0&&(!d||d[h.route.id]===void 0);if(h.route.lazy||y){l=!0,u>=0?a=a.slice(0,u+1):a=[a[0]];break}}}return a.reduceRight((c,h,f)=>{let d,y=!1,b=null,v=null;t&&(d=o&&h.route.id?o[h.route.id]:void 0,b=h.route.errorElement||nP,l&&(u<0&&f===0?(hP("route-fallback"),y=!0,v=null):u===f&&(y=!0,v=h.route.hydrateFallbackElement||null)));let g=e.concat(a.slice(0,f+1)),m=()=>{let w;return d?w=b:y?w=v:h.route.Component?w=ze.createElement(h.route.Component,null):h.route.element?w=h.route.element:w=c,ze.createElement(rP,{match:h,routeContext:{outlet:c,matches:g,isDataRoute:t!=null},children:w})};return t&&(h.route.ErrorBoundary||h.route.errorElement||f===0)?ze.createElement(iP,{location:t.location,revalidation:t.revalidation,component:b,error:d,children:m(),routeContext:{outlet:null,matches:g,isDataRoute:!0}}):m()},null)}var hC=function(i){return i.UseBlocker="useBlocker",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i}(hC||{}),fC=function(i){return i.UseBlocker="useBlocker",i.UseLoaderData="useLoaderData",i.UseActionData="useActionData",i.UseRouteError="useRouteError",i.UseNavigation="useNavigation",i.UseRouteLoaderData="useRouteLoaderData",i.UseMatches="useMatches",i.UseRevalidator="useRevalidator",i.UseNavigateStable="useNavigate",i.UseRouteId="useRouteId",i}(fC||{});function aP(i){let e=ze.useContext(e_);return e||pn(!1),e}function oP(i){let e=ze.useContext(YR);return e||pn(!1),e}function lP(i){let e=ze.useContext(Wo);return e||pn(!1),e}function dC(i){let e=lP(),t=e.matches[e.matches.length-1];return t.route.id||pn(!1),t.route.id}function uP(){var i;let e=ze.useContext(aC),t=oP(),n=dC();return e!==void 0?e:(i=t.errors)==null?void 0:i[n]}function cP(){let{router:i}=aP(hC.UseNavigateStable),e=dC(fC.UseNavigateStable),t=ze.useRef(!1);return oC(()=>{t.current=!0}),ze.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?i.navigate(r):i.navigate(r,ad({fromRouteId:e},s)))},[i,e])}const oE={};function hP(i,e,t){oE[i]||(oE[i]=!0)}function fP(i,e){i==null||i.v7_startTransition,i==null||i.v7_relativeSplatPath}function Wg(i){pn(!1)}function dP(i){let{basename:e="/",children:t=null,location:n,navigationType:r=Eo.Pop,navigator:s,static:a=!1,future:o}=i;Gp()&&pn(!1);let l=e.replace(/^\/*/,"/"),u=ze.useMemo(()=>({basename:l,navigator:s,static:a,future:ad({v7_relativeSplatPath:!1},o)}),[l,o,s,a]);typeof n=="string"&&(n=Mh(n));let{pathname:c="/",search:h="",hash:f="",state:d=null,key:y="default"}=n,b=ze.useMemo(()=>{let v=Jw(c,l);return v==null?null:{location:{pathname:v,search:h,hash:f,state:d,key:y},navigationType:r}},[l,c,h,f,d,y,r]);return b==null?null:ze.createElement(Su.Provider,{value:u},ze.createElement(iy.Provider,{children:t,value:b}))}function pP(i){let{children:e,location:t}=i;return JR(Ab(e),t)}new Promise(()=>{});function Ab(i,e){e===void 0&&(e=[]);let t=[];return ze.Children.forEach(i,(n,r)=>{if(!ze.isValidElement(n))return;let s=[...e,r];if(n.type===ze.Fragment){t.push.apply(t,Ab(n.props.children,s));return}n.type!==Wg&&pn(!1),!n.props.index||!n.props.children||pn(!1);let a={id:n.props.id||s.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(a.children=Ab(n.props.children,s)),t.push(a)}),t}/**
 * React Router DOM v6.30.3
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function xb(){return xb=Object.assign?Object.assign.bind():function(i){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(i[n]=t[n])}return i},xb.apply(this,arguments)}function gP(i,e){if(i==null)return{};var t={},n=Object.keys(i),r,s;for(s=0;s<n.length;s++)r=n[s],!(e.indexOf(r)>=0)&&(t[r]=i[r]);return t}function mP(i){return!!(i.metaKey||i.altKey||i.ctrlKey||i.shiftKey)}function vP(i,e){return i.button===0&&(!e||e==="_self")&&!mP(i)}const yP=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],bP="6";try{window.__reactRouterVersion=bP}catch{}const wP="startTransition",lE=fO[wP];function _P(i){let{basename:e,children:t,future:n,window:r}=i,s=ze.useRef();s.current==null&&(s.current=AR({window:r,v5Compat:!0}));let a=s.current,[o,l]=ze.useState({action:a.action,location:a.location}),{v7_startTransition:u}=n||{},c=ze.useCallback(h=>{u&&lE?lE(()=>l(h)):l(h)},[l,u]);return ze.useLayoutEffect(()=>a.listen(c),[a,c]),ze.useEffect(()=>fP(n),[n]),ze.createElement(dP,{basename:e,children:t,location:o.location,navigationType:o.action,navigator:a,future:n})}const EP=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",AP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,od=ze.forwardRef(function(e,t){let{onClick:n,relative:r,reloadDocument:s,replace:a,state:o,target:l,to:u,preventScrollReset:c,viewTransition:h}=e,f=gP(e,yP),{basename:d}=ze.useContext(Su),y,b=!1;if(typeof u=="string"&&AP.test(u)&&(y=u,EP))try{let w=new URL(window.location.href),_=u.startsWith("//")?new URL(w.protocol+u):new URL(u),E=Jw(_.pathname,d);_.origin===w.origin&&E!=null?u=E+_.search+_.hash:b=!0}catch{}let v=ZR(u,{relative:r}),g=xP(u,{replace:a,state:o,target:l,preventScrollReset:c,relative:r,viewTransition:h});function m(w){n&&n(w),w.defaultPrevented||g(w)}return ze.createElement("a",xb({},f,{href:y||v,onClick:b||s?n:m,ref:t,target:l}))});var uE;(function(i){i.UseScrollRestoration="useScrollRestoration",i.UseSubmit="useSubmit",i.UseSubmitFetcher="useSubmitFetcher",i.UseFetcher="useFetcher",i.useViewTransitionState="useViewTransitionState"})(uE||(uE={}));var cE;(function(i){i.UseFetcher="useFetcher",i.UseFetchers="useFetchers",i.UseScrollRestoration="useScrollRestoration"})(cE||(cE={}));function xP(i,e){let{target:t,replace:n,state:r,preventScrollReset:s,relative:a,viewTransition:o}=e===void 0?{}:e,l=lC(),u=ry(),c=cC(i,{relative:a});return ze.useCallback(h=>{if(vP(h,t)){h.preventDefault();let f=n!==void 0?n:Km(u)===Km(c);l(i,{replace:f,state:r,preventScrollReset:s,relative:a,viewTransition:o})}},[u,l,c,n,r,t,i,s,a,o])}const SP="useandom-26T198340PX75pxJACKVERYMINDBUSHWOLF_GQZbfghjklqvwyzrict";let t_=(i=21)=>{let e="",t=crypto.getRandomValues(new Uint8Array(i|=0));for(;i--;)e+=SP[t[i]&63];return e};const Sb=(i,e)=>e.some(t=>i instanceof t);let hE,fE;function CP(){return hE||(hE=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function TP(){return fE||(fE=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Cb=new WeakMap,r0=new WeakMap,sy=new WeakMap;function kP(i){const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",a)},s=()=>{t(hu(i.result)),r()},a=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",a)});return sy.set(e,i),e}function DP(i){if(Cb.has(i))return;const e=new Promise((t,n)=>{const r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",a),i.removeEventListener("abort",a)},s=()=>{t(),r()},a=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",a),i.addEventListener("abort",a)});Cb.set(i,e)}let Tb={get(i,e,t){if(i instanceof IDBTransaction){if(e==="done")return Cb.get(i);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return hu(i[e])},set(i,e,t){return i[e]=t,!0},has(i,e){return i instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in i}};function pC(i){Tb=i(Tb)}function OP(i){return TP().includes(i)?function(...e){return i.apply(kb(this),e),hu(this.request)}:function(...e){return hu(i.apply(kb(this),e))}}function NP(i){return typeof i=="function"?OP(i):(i instanceof IDBTransaction&&DP(i),Sb(i,CP())?new Proxy(i,Tb):i)}function hu(i){if(i instanceof IDBRequest)return kP(i);if(r0.has(i))return r0.get(i);const e=NP(i);return e!==i&&(r0.set(i,e),sy.set(e,i)),e}const kb=i=>sy.get(i);function RP(i,e,{blocked:t,upgrade:n,blocking:r,terminated:s}={}){const a=indexedDB.open(i,e),o=hu(a);return n&&a.addEventListener("upgradeneeded",l=>{n(hu(a.result),l.oldVersion,l.newVersion,hu(a.transaction),l)}),t&&a.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),o.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",u=>r(u.oldVersion,u.newVersion,u))}).catch(()=>{}),o}const PP=["get","getKey","getAll","getAllKeys","count"],LP=["put","add","delete","clear"],s0=new Map;function dE(i,e){if(!(i instanceof IDBDatabase&&!(e in i)&&typeof e=="string"))return;if(s0.get(e))return s0.get(e);const t=e.replace(/FromIndex$/,""),n=e!==t,r=LP.includes(t);if(!(t in(n?IDBIndex:IDBObjectStore).prototype)||!(r||PP.includes(t)))return;const s=async function(a,...o){const l=this.transaction(a,r?"readwrite":"readonly");let u=l.store;return n&&(u=u.index(o.shift())),(await Promise.all([u[t](...o),r&&l.done]))[0]};return s0.set(e,s),s}pC(i=>({...i,get:(e,t,n)=>dE(e,t)||i.get(e,t,n),has:(e,t)=>!!dE(e,t)||i.has(e,t)}));const IP=["continue","continuePrimaryKey","advance"],pE={},Db=new WeakMap,gC=new WeakMap,MP={get(i,e){if(!IP.includes(e))return i[e];let t=pE[e];return t||(t=pE[e]=function(...n){Db.set(this,gC.get(this)[e](...n))}),t}};async function*FP(...i){let e=this;if(e instanceof IDBCursor||(e=await e.openCursor(...i)),!e)return;e=e;const t=new Proxy(e,MP);for(gC.set(t,e),sy.set(t,kb(e));e;)yield t,e=await(Db.get(t)||e.continue()),Db.delete(t)}function gE(i,e){return e===Symbol.asyncIterator&&Sb(i,[IDBIndex,IDBObjectStore,IDBCursor])||e==="iterate"&&Sb(i,[IDBIndex,IDBObjectStore])}pC(i=>({...i,get(e,t,n){return gE(e,t)?FP:i.get(e,t,n)},has(e,t){return gE(e,t)||i.has(e,t)}}));const BP="solonook-db",jP=1,Cr=RP(BP,jP,{upgrade(i){i.createObjectStore("books",{keyPath:"id"}).createIndex("by_updatedAt","updatedAt");const t=i.createObjectStore("docs",{keyPath:"id"});t.createIndex("by_bookId","bookId"),t.createIndex("by_updatedAt","updatedAt");const n=i.createObjectStore("notes",{keyPath:"id"});n.createIndex("by_docId","docId"),n.createIndex("by_doc_loc",["docId","locationKey"]),n.createIndex("by_updatedAt","updatedAt")}});async function Ym(i){await(await Cr).put("books",i)}async function zP(){return(await(await Cr).getAllFromIndex("books","by_updatedAt")).sort((e,t)=>t.updatedAt-e.updatedAt)}async function a0(i){return(await Cr).get("books",i)}async function UP(i){const e=await Cr,t=await e.getAllFromIndex("docs","by_bookId",i);for(const n of t)await vC(n.id);await e.delete("books",i)}async function mC(i){await(await Cr).put("docs",i)}async function qP(i){return(await(await Cr).getAllFromIndex("docs","by_bookId",i)).sort((n,r)=>r.updatedAt-n.updatedAt)}async function HP(i){return(await Cr).get("docs",i)}async function vC(i){const e=await Cr,t=await e.getAllFromIndex("notes","by_docId",i);for(const n of t)await e.delete("notes",n.id);await e.delete("docs",i)}async function WP(i){await(await Cr).put("notes",i)}async function mE(i){return(await(await Cr).getAllFromIndex("notes","by_docId",i)).sort((n,r)=>r.updatedAt-n.updatedAt)}async function $P(){const i=await Cr,e=await i.getAll("books"),t=await i.getAll("docs"),n=await i.getAll("notes");return{books:e,docs:t,notes:n,exportedAt:Date.now()}}async function VP(i){const t=(await Cr).transaction(["books","docs","notes"],"readwrite");for(const n of i.books)await t.objectStore("books").put(n);for(const n of i.docs)await t.objectStore("docs").put(n);for(const n of i.notes)await t.objectStore("notes").put(n);await t.done}function GP(i){const e=["B","KB","MB","GB"];let t=i,n=0;for(;t>=1024&&n<e.length-1;)t/=1024,n++;return`${t.toFixed(n===0?0:1)} ${e[n]}`}function XP(i,e){const t=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=document.createElement("a");n.href=URL.createObjectURL(t),n.download=i,n.click(),setTimeout(()=>URL.revokeObjectURL(n.href),1500)}async function n_(i){const e=document.createElement("input");return e.type="file",e.accept=i,await new Promise(t=>{e.onchange=()=>{var n;return t(((n=e.files)==null?void 0:n[0])??null)},e.click()})}async function KP(){return n_("image/*")}function fu(){return Date.now()}function YP({setToast:i}){const[e,t]=gt.useState([]),[n,r]=gt.useState("");async function s(){t(await zP())}gt.useEffect(()=>{s()},[]);async function a(){const u=n.trim();if(!u)return;const c=fu(),h={id:t_(),title:u,createdAt:c,updatedAt:c};await Ym(h),r(""),i("Created a new folder/book."),s()}async function o(u){const c=await KP();if(!c)return;const h=await ZP(c),f={...u,coverUrl:h,updatedAt:fu()};await Ym(f),i("Updated cover."),s()}async function l(u){confirm("Delete this folder/book and its documents + notes?")&&(await UP(u),i("Deleted folder/book."),s())}return ue.jsxs("div",{className:"card",style:{padding:14},children:[ue.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[ue.jsxs("div",{children:[ue.jsx("div",{className:"h1",children:"Your Library"}),ue.jsx("div",{className:"small",children:"Folders behave like books. Each can have a custom cover."})]}),ue.jsxs("div",{className:"row",children:[ue.jsx("input",{className:"input",value:n,onChange:u=>r(u.target.value),placeholder:"New folder/book name"}),ue.jsx("button",{className:"btn primary",onClick:a,children:"Create"})]})]}),ue.jsx("hr",{className:"hr"}),e.length===0?ue.jsx("div",{className:"small",children:"No folders yet. Create one above."}):ue.jsx("div",{className:"grid",children:e.map(u=>ue.jsxs("div",{className:"tile",children:[ue.jsxs(od,{to:`/book/${u.id}`,children:[ue.jsx("div",{className:"cover",children:u.coverUrl?ue.jsx("img",{src:u.coverUrl,alt:""}):ue.jsx("div",{className:"small",children:"No cover"})}),ue.jsx("div",{style:{marginTop:10,fontWeight:650},children:u.title}),ue.jsxs("div",{className:"small",children:["Updated ",new Date(u.updatedAt).toLocaleString()]})]}),ue.jsxs("div",{className:"row",style:{marginTop:10,justifyContent:"space-between"},children:[ue.jsx("button",{className:"btn",onClick:()=>o(u),children:"Set cover"}),ue.jsx("button",{className:"btn danger",onClick:()=>l(u.id),children:"Delete"})]})]},u.id))})]})}async function ZP(i){return await new Promise((e,t)=>{const n=new FileReader;n.onload=()=>e(String(n.result)),n.onerror=t,n.readAsDataURL(i)})}async function i_(){return await navigator.storage.getDirectory()}async function QP(i,e){const t=await i_(),n=i.split("/").filter(Boolean);let r=t;for(let l=0;l<n.length-1;l++)r=await r.getDirectoryHandle(n[l],{create:!0});const s=n[n.length-1],o=await(await r.getFileHandle(s,{create:!0})).createWritable();await o.write(e),await o.close()}async function yC(i){const e=await i_(),t=i.split("/").filter(Boolean);let n=e;for(let a=0;a<t.length-1;a++)n=await n.getDirectoryHandle(t[a],{create:!1});const r=t[t.length-1];return await(await n.getFileHandle(r,{create:!1})).getFile()}async function JP(i){const e=await i_(),t=i.split("/").filter(Boolean);let n=e;for(let r=0;r<t.length-1;r++)n=await n.getDirectoryHandle(t[r],{create:!1});await n.removeEntry(t[t.length-1])}function eL({setToast:i}){const{bookId:e}=uC(),[t,n]=gt.useState(""),[r,s]=gt.useState([]);async function a(){if(!e)return;const f=await a0(e);n((f==null?void 0:f.title)??"(missing)"),s(await qP(e))}gt.useEffect(()=>{a()},[e]);async function o(){if(!e)return;const f=await a0(e);if(!f)return;const d=prompt("Rename folder/book:",f.title);d&&(await Ym({...f,title:d.trim(),updatedAt:fu()}),i("Renamed."),a())}async function l(f){if(!e)return;const y=await n_(f==="pdf"?"application/pdf":"application/epub+zip,.epub");if(!y)return;const b=t_(),v=y.name.replace(/[^a-zA-Z0-9._-]/g,"_"),g=`docs/${b}-${v}`;await QP(g,y);const m=fu(),w={id:b,bookId:e,title:y.name.replace(/\.(pdf|epub)$/i,""),type:f,mime:y.type||(f==="pdf"?"application/pdf":"application/epub+zip"),size:y.size,opfsPath:g,createdAt:m,updatedAt:m};await mC(w),i(`Imported ${f.toUpperCase()}.`),a()}async function u(f){if(!e)return;const d=await a0(e);d&&(await Ym({...d,coverDocId:f.id,updatedAt:fu()}),i("Cover linked to a document (note: this build uses manual image covers in Library)."),a())}async function c(f){confirm("Delete this document and its notes?")&&(await vC(f.id),await JP(f.opfsPath).catch(()=>{}),i("Deleted document."),a())}async function h(f){const d=await yC(f.opfsPath),y=document.createElement("a");y.href=URL.createObjectURL(d),y.download=`${f.title}.${f.type}`,y.click(),setTimeout(()=>URL.revokeObjectURL(y.href),1500)}return ue.jsxs("div",{className:"card",style:{padding:14},children:[ue.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[ue.jsxs("div",{children:[ue.jsx("div",{className:"h1",children:t}),ue.jsx("div",{className:"small",children:"Import PDFs/EPUBs here. Everything is stored locally on your phone."})]}),ue.jsxs("div",{className:"row",children:[ue.jsx(od,{className:"btn",to:"/",children:" Library"}),ue.jsx("button",{className:"btn",onClick:o,children:"Rename"}),ue.jsx("button",{className:"btn primary",onClick:()=>l("pdf"),children:"+ PDF"}),ue.jsx("button",{className:"btn primary",onClick:()=>l("epub"),children:"+ EPUB"})]})]}),ue.jsx("hr",{className:"hr"}),r.length===0?ue.jsx("div",{className:"small",children:"No documents yet. Add a PDF or EPUB."}):ue.jsx("div",{className:"grid",children:r.map(f=>ue.jsxs("div",{className:"tile",children:[ue.jsxs(od,{to:`/read/${f.id}`,children:[ue.jsx("div",{className:"cover",children:ue.jsxs("div",{style:{textAlign:"center",padding:10},children:[ue.jsx("div",{style:{fontWeight:800,fontSize:22},children:f.type.toUpperCase()}),ue.jsx("div",{className:"small",style:{marginTop:6},children:GP(f.size)})]})}),ue.jsx("div",{style:{marginTop:10,fontWeight:650},children:f.title}),ue.jsxs("div",{className:"small",children:["Updated ",new Date(f.updatedAt).toLocaleString()]})]}),ue.jsxs("div",{className:"row",style:{marginTop:10,justifyContent:"space-between"},children:[ue.jsx("button",{className:"btn",onClick:()=>h(f),children:"Export file"}),ue.jsx("button",{className:"btn",onClick:()=>u(f),children:"Use as cover"}),ue.jsx("button",{className:"btn danger",onClick:()=>c(f),children:"Delete"})]})]},f.id))}),ue.jsx("hr",{className:"hr"}),ue.jsx("div",{className:"small",children:"Coming next: Merge PDFs into one Book PDF (requires reading PDF pages and re-writing a combined PDF). This starter focuses on offline library + reader + writing nook first."})]})}var jf={};jf.d=(i,e)=>{for(var t in e)jf.o(e,t)&&!jf.o(i,t)&&Object.defineProperty(i,t,{enumerable:!0,get:e[t]})};jf.o=(i,e)=>Object.prototype.hasOwnProperty.call(i,e);var et=globalThis.pdfjsLib={};jf.d(et,{AbortException:()=>Fo,AnnotationEditorLayer:()=>B1,AnnotationEditorParamsType:()=>ft,AnnotationEditorType:()=>nt,AnnotationEditorUIManager:()=>bu,AnnotationLayer:()=>KI,AnnotationMode:()=>qa,ColorPicker:()=>nv,DOMSVGFactory:()=>f_,DrawLayer:()=>U1,FeatureTest:()=>gi,GlobalWorkerOptions:()=>ga,ImageKind:()=>$g,InvalidPDFException:()=>Nb,MissingPDFException:()=>ld,OPS:()=>Lr,OutputScale:()=>Pb,PDFDataRangeTransport:()=>wT,PDFDateString:()=>l_,PDFWorker:()=>gc,PasswordResponses:()=>rL,PermissionFlag:()=>iL,PixelsPerInch:()=>Bo,RenderingCancelledException:()=>a_,TextLayer:()=>ud,TouchManager:()=>ev,UnexpectedResponseException:()=>Zm,Util:()=>$e,VerbosityLevel:()=>ay,XfaLayer:()=>ET,build:()=>DI,createValidAbsoluteUrl:()=>lL,fetchData:()=>cy,getDocument:()=>wI,getFilenameFromUrl:()=>vL,getPdfFilenameFromUrl:()=>yL,getXfaPageViewport:()=>bL,isDataScheme:()=>hy,isPdfFile:()=>o_,noContextMenu:()=>ns,normalizeUnicode:()=>pL,setLayerDimensions:()=>yu,shadow:()=>ot,stopEvent:()=>Ji,version:()=>kI});const ri=typeof process=="object"&&process+""=="[object process]"&&!process.versions.nw&&!(process.versions.electron&&process.type&&process.type!=="browser"),bC=[1,0,0,1,0,0],Ob=[.001,0,0,.001,0,0],tL=1e7,o0=1.35,Yi={ANY:1,DISPLAY:2,PRINT:4,ANNOTATIONS_FORMS:16,ANNOTATIONS_STORAGE:32,ANNOTATIONS_DISABLE:64,IS_EDITING:128,OPLIST:256},qa={DISABLE:0,ENABLE:1,ENABLE_FORMS:2,ENABLE_STORAGE:3},nL="pdfjs_internal_editor_",nt={DISABLE:-1,NONE:0,FREETEXT:3,HIGHLIGHT:9,STAMP:13,INK:15},ft={RESIZE:1,CREATE:2,FREETEXT_SIZE:11,FREETEXT_COLOR:12,FREETEXT_OPACITY:13,INK_COLOR:21,INK_THICKNESS:22,INK_OPACITY:23,HIGHLIGHT_COLOR:31,HIGHLIGHT_DEFAULT_COLOR:32,HIGHLIGHT_THICKNESS:33,HIGHLIGHT_FREE:34,HIGHLIGHT_SHOW_ALL:35,DRAW_STEP:41},iL={PRINT:4,MODIFY_CONTENTS:8,COPY:16,MODIFY_ANNOTATIONS:32,FILL_INTERACTIVE_FORMS:256,COPY_FOR_ACCESSIBILITY:512,ASSEMBLE:1024,PRINT_HIGH_QUALITY:2048},Kn={FILL:0,STROKE:1,FILL_STROKE:2,INVISIBLE:3,FILL_STROKE_MASK:3,ADD_TO_PATH_FLAG:4},$g={GRAYSCALE_1BPP:1,RGB_24BPP:2,RGBA_32BPP:3},yn={TEXT:1,LINK:2,FREETEXT:3,LINE:4,SQUARE:5,CIRCLE:6,POLYGON:7,POLYLINE:8,HIGHLIGHT:9,UNDERLINE:10,SQUIGGLY:11,STRIKEOUT:12,STAMP:13,CARET:14,INK:15,POPUP:16,FILEATTACHMENT:17,WIDGET:20},Jh={SOLID:1,DASHED:2,BEVELED:3,INSET:4,UNDERLINE:5},ay={ERRORS:0,WARNINGS:1,INFOS:5},Lr={dependency:1,setLineWidth:2,setLineCap:3,setLineJoin:4,setMiterLimit:5,setDash:6,setRenderingIntent:7,setFlatness:8,setGState:9,save:10,restore:11,transform:12,moveTo:13,lineTo:14,curveTo:15,curveTo2:16,curveTo3:17,closePath:18,rectangle:19,stroke:20,closeStroke:21,fill:22,eoFill:23,fillStroke:24,eoFillStroke:25,closeFillStroke:26,closeEOFillStroke:27,endPath:28,clip:29,eoClip:30,beginText:31,endText:32,setCharSpacing:33,setWordSpacing:34,setHScale:35,setLeading:36,setFont:37,setTextRenderingMode:38,setTextRise:39,moveText:40,setLeadingMoveText:41,setTextMatrix:42,nextLine:43,showText:44,showSpacedText:45,nextLineShowText:46,nextLineSetSpacingShowText:47,setCharWidth:48,setCharWidthAndBounds:49,setStrokeColorSpace:50,setFillColorSpace:51,setStrokeColor:52,setStrokeColorN:53,setFillColor:54,setFillColorN:55,setStrokeGray:56,setFillGray:57,setStrokeRGBColor:58,setFillRGBColor:59,setStrokeCMYKColor:60,setFillCMYKColor:61,shadingFill:62,beginInlineImage:63,beginImageData:64,endInlineImage:65,paintXObject:66,markPoint:67,markPointProps:68,beginMarkedContent:69,beginMarkedContentProps:70,endMarkedContent:71,beginCompat:72,endCompat:73,paintFormXObjectBegin:74,paintFormXObjectEnd:75,beginGroup:76,endGroup:77,beginAnnotation:80,endAnnotation:81,paintImageMaskXObject:83,paintImageMaskXObjectGroup:84,paintImageXObject:85,paintInlineImageXObject:86,paintInlineImageXObjectGroup:87,paintImageXObjectRepeat:88,paintImageMaskXObjectRepeat:89,paintSolidColorImageMask:90,constructPath:91,setStrokeTransparent:92,setFillTransparent:93},rL={NEED_PASSWORD:1,INCORRECT_PASSWORD:2};let oy=ay.WARNINGS;function sL(i){Number.isInteger(i)&&(oy=i)}function aL(){return oy}function ly(i){oy>=ay.INFOS&&console.log(`Info: ${i}`)}function it(i){oy>=ay.WARNINGS&&console.log(`Warning: ${i}`)}function Nt(i){throw new Error(i)}function dn(i,e){i||Nt(e)}function oL(i){switch(i==null?void 0:i.protocol){case"http:":case"https:":case"ftp:":case"mailto:":case"tel:":return!0;default:return!1}}function lL(i,e=null,t=null){if(!i)return null;try{if(t&&typeof i=="string"){if(t.addDefaultProtocol&&i.startsWith("www.")){const r=i.match(/\./g);(r==null?void 0:r.length)>=2&&(i=`http://${i}`)}if(t.tryConvertEncoding)try{i=dL(i)}catch{}}const n=e?new URL(i,e):new URL(i);if(oL(n))return n}catch{}return null}function ot(i,e,t,n=!1){return Object.defineProperty(i,e,{value:t,enumerable:!n,configurable:!0,writable:!1}),t}const $o=function(){function e(t,n){this.message=t,this.name=n}return e.prototype=new Error,e.constructor=e,e}();class vE extends $o{constructor(e,t){super(e,"PasswordException"),this.code=t}}class l0 extends $o{constructor(e,t){super(e,"UnknownErrorException"),this.details=t}}class Nb extends $o{constructor(e){super(e,"InvalidPDFException")}}class ld extends $o{constructor(e){super(e,"MissingPDFException")}}class Zm extends $o{constructor(e,t){super(e,"UnexpectedResponseException"),this.status=t}}class uL extends $o{constructor(e){super(e,"FormatError")}}class Fo extends $o{constructor(e){super(e,"AbortException")}}function wC(i){(typeof i!="object"||(i==null?void 0:i.length)===void 0)&&Nt("Invalid argument for bytesToString");const e=i.length,t=8192;if(e<t)return String.fromCharCode.apply(null,i);const n=[];for(let r=0;r<e;r+=t){const s=Math.min(r+t,e),a=i.subarray(r,s);n.push(String.fromCharCode.apply(null,a))}return n.join("")}function uy(i){typeof i!="string"&&Nt("Invalid argument for stringToBytes");const e=i.length,t=new Uint8Array(e);for(let n=0;n<e;++n)t[n]=i.charCodeAt(n)&255;return t}function cL(i){return String.fromCharCode(i>>24&255,i>>16&255,i>>8&255,i&255)}function r_(i){const e=Object.create(null);for(const[t,n]of i)e[t]=n;return e}function hL(){const i=new Uint8Array(4);return i[0]=1,new Uint32Array(i.buffer,0,1)[0]===1}function fL(){try{return new Function(""),!0}catch{return!1}}class gi{static get isLittleEndian(){return ot(this,"isLittleEndian",hL())}static get isEvalSupported(){return ot(this,"isEvalSupported",fL())}static get isOffscreenCanvasSupported(){return ot(this,"isOffscreenCanvasSupported",typeof OffscreenCanvas<"u")}static get isImageDecoderSupported(){return ot(this,"isImageDecoderSupported",typeof ImageDecoder<"u")}static get platform(){return typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.platform)=="string"?ot(this,"platform",{isMac:navigator.platform.includes("Mac"),isWindows:navigator.platform.includes("Win"),isFirefox:typeof(navigator==null?void 0:navigator.userAgent)=="string"&&navigator.userAgent.includes("Firefox")}):ot(this,"platform",{isMac:!1,isWindows:!1,isFirefox:!1})}static get isCSSRoundSupported(){var e,t;return ot(this,"isCSSRoundSupported",(t=(e=globalThis.CSS)==null?void 0:e.supports)==null?void 0:t.call(e,"width: round(1.5px, 1px)"))}}const u0=Array.from(Array(256).keys(),i=>i.toString(16).padStart(2,"0"));var _a,Vg,Rb;class $e{static makeHexColor(e,t,n){return`#${u0[e]}${u0[t]}${u0[n]}`}static scaleMinMax(e,t){let n;e[0]?(e[0]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[0],t[2]*=e[0],e[3]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[3],t[3]*=e[3]):(n=t[0],t[0]=t[1],t[1]=n,n=t[2],t[2]=t[3],t[3]=n,e[1]<0&&(n=t[1],t[1]=t[3],t[3]=n),t[1]*=e[1],t[3]*=e[1],e[2]<0&&(n=t[0],t[0]=t[2],t[2]=n),t[0]*=e[2],t[2]*=e[2]),t[0]+=e[4],t[1]+=e[5],t[2]+=e[4],t[3]+=e[5]}static transform(e,t){return[e[0]*t[0]+e[2]*t[1],e[1]*t[0]+e[3]*t[1],e[0]*t[2]+e[2]*t[3],e[1]*t[2]+e[3]*t[3],e[0]*t[4]+e[2]*t[5]+e[4],e[1]*t[4]+e[3]*t[5]+e[5]]}static applyTransform(e,t){const n=e[0]*t[0]+e[1]*t[2]+t[4],r=e[0]*t[1]+e[1]*t[3]+t[5];return[n,r]}static applyInverseTransform(e,t){const n=t[0]*t[3]-t[1]*t[2],r=(e[0]*t[3]-e[1]*t[2]+t[2]*t[5]-t[4]*t[3])/n,s=(-e[0]*t[1]+e[1]*t[0]+t[4]*t[1]-t[5]*t[0])/n;return[r,s]}static getAxialAlignedBoundingBox(e,t){const n=this.applyTransform(e,t),r=this.applyTransform(e.slice(2,4),t),s=this.applyTransform([e[0],e[3]],t),a=this.applyTransform([e[2],e[1]],t);return[Math.min(n[0],r[0],s[0],a[0]),Math.min(n[1],r[1],s[1],a[1]),Math.max(n[0],r[0],s[0],a[0]),Math.max(n[1],r[1],s[1],a[1])]}static inverseTransform(e){const t=e[0]*e[3]-e[1]*e[2];return[e[3]/t,-e[1]/t,-e[2]/t,e[0]/t,(e[2]*e[5]-e[4]*e[3])/t,(e[4]*e[1]-e[5]*e[0])/t]}static singularValueDecompose2dScale(e){const t=[e[0],e[2],e[1],e[3]],n=e[0]*t[0]+e[1]*t[2],r=e[0]*t[1]+e[1]*t[3],s=e[2]*t[0]+e[3]*t[2],a=e[2]*t[1]+e[3]*t[3],o=(n+a)/2,l=Math.sqrt((n+a)**2-4*(n*a-s*r))/2,u=o+l||1,c=o-l||1;return[Math.sqrt(u),Math.sqrt(c)]}static normalizeRect(e){const t=e.slice(0);return e[0]>e[2]&&(t[0]=e[2],t[2]=e[0]),e[1]>e[3]&&(t[1]=e[3],t[3]=e[1]),t}static intersect(e,t){const n=Math.max(Math.min(e[0],e[2]),Math.min(t[0],t[2])),r=Math.min(Math.max(e[0],e[2]),Math.max(t[0],t[2]));if(n>r)return null;const s=Math.max(Math.min(e[1],e[3]),Math.min(t[1],t[3])),a=Math.min(Math.max(e[1],e[3]),Math.max(t[1],t[3]));return s>a?null:[n,s,r,a]}static bezierBoundingBox(e,t,n,r,s,a,o,l,u){return u?(u[0]=Math.min(u[0],e,o),u[1]=Math.min(u[1],t,l),u[2]=Math.max(u[2],e,o),u[3]=Math.max(u[3],t,l)):u=[Math.min(e,o),Math.min(t,l),Math.max(e,o),Math.max(t,l)],M(this,_a,Rb).call(this,e,n,s,o,t,r,a,l,3*(-e+3*(n-s)+o),6*(e-2*n+s),3*(n-e),u),M(this,_a,Rb).call(this,e,n,s,o,t,r,a,l,3*(-t+3*(r-a)+l),6*(t-2*r+a),3*(r-t),u),u}}_a=new WeakSet,Vg=function(e,t,n,r,s,a,o,l,u,c){if(u<=0||u>=1)return;const h=1-u,f=u*u,d=f*u,y=h*(h*(h*e+3*u*t)+3*f*n)+d*r,b=h*(h*(h*s+3*u*a)+3*f*o)+d*l;c[0]=Math.min(c[0],y),c[1]=Math.min(c[1],b),c[2]=Math.max(c[2],y),c[3]=Math.max(c[3],b)},Rb=function(e,t,n,r,s,a,o,l,u,c,h,f){if(Math.abs(u)<1e-12){Math.abs(c)>=1e-12&&M(this,_a,Vg).call(this,e,t,n,r,s,a,o,l,-h/c,f);return}const d=c**2-4*h*u;if(d<0)return;const y=Math.sqrt(d),b=2*u;M(this,_a,Vg).call(this,e,t,n,r,s,a,o,l,(-c+y)/b,f),M(this,_a,Vg).call(this,e,t,n,r,s,a,o,l,(-c-y)/b,f)},L($e,_a);function dL(i){return decodeURIComponent(escape(i))}let c0=null,yE=null;function pL(i){return c0||(c0=/([\u00a0\u00b5\u037e\u0eb3\u2000-\u200a\u202f\u2126\ufb00-\ufb04\ufb06\ufb20-\ufb36\ufb38-\ufb3c\ufb3e\ufb40-\ufb41\ufb43-\ufb44\ufb46-\ufba1\ufba4-\ufba9\ufbae-\ufbb1\ufbd3-\ufbdc\ufbde-\ufbe7\ufbea-\ufbf8\ufbfc-\ufbfd\ufc00-\ufc5d\ufc64-\ufcf1\ufcf5-\ufd3d\ufd88\ufdf4\ufdfa-\ufdfb\ufe71\ufe77\ufe79\ufe7b\ufe7d]+)|(\ufb05+)/gu,yE=new Map([["","t"]])),i.replaceAll(c0,(e,t,n)=>t?t.normalize("NFKC"):yE.get(n))}function gL(){if(typeof crypto.randomUUID=="function")return crypto.randomUUID();const i=new Uint8Array(32);return crypto.getRandomValues(i),wC(i)}const s_="pdfjs_internal_id_";function mL(i){return Uint8Array.prototype.toBase64?i.toBase64():btoa(wC(i))}typeof Promise.try!="function"&&(Promise.try=function(i,...e){return new Promise(t=>{t(i(...e))})});const Fs="http://www.w3.org/2000/svg",el=class el{};Ze(el,"CSS",96),Ze(el,"PDF",72),Ze(el,"PDF_TO_CSS_UNITS",el.CSS/el.PDF);let Bo=el;async function cy(i,e="text"){if(pf(i,document.baseURI)){const t=await fetch(i);if(!t.ok)throw new Error(t.statusText);switch(e){case"arraybuffer":return t.arrayBuffer();case"blob":return t.blob();case"json":return t.json()}return t.text()}return new Promise((t,n)=>{const r=new XMLHttpRequest;r.open("GET",i,!0),r.responseType=e,r.onreadystatechange=()=>{if(r.readyState===XMLHttpRequest.DONE){if(r.status===200||r.status===0){switch(e){case"arraybuffer":case"blob":case"json":t(r.response);return}t(r.responseText);return}n(new Error(r.statusText))}},r.send(null)})}class Xp{constructor({viewBox:e,userUnit:t,scale:n,rotation:r,offsetX:s=0,offsetY:a=0,dontFlip:o=!1}){this.viewBox=e,this.userUnit=t,this.scale=n,this.rotation=r,this.offsetX=s,this.offsetY=a,n*=t;const l=(e[2]+e[0])/2,u=(e[3]+e[1])/2;let c,h,f,d;switch(r%=360,r<0&&(r+=360),r){case 180:c=-1,h=0,f=0,d=1;break;case 90:c=0,h=1,f=1,d=0;break;case 270:c=0,h=-1,f=-1,d=0;break;case 0:c=1,h=0,f=0,d=-1;break;default:throw new Error("PageViewport: Invalid rotation, must be a multiple of 90 degrees.")}o&&(f=-f,d=-d);let y,b,v,g;c===0?(y=Math.abs(u-e[1])*n+s,b=Math.abs(l-e[0])*n+a,v=(e[3]-e[1])*n,g=(e[2]-e[0])*n):(y=Math.abs(l-e[0])*n+s,b=Math.abs(u-e[1])*n+a,v=(e[2]-e[0])*n,g=(e[3]-e[1])*n),this.transform=[c*n,h*n,f*n,d*n,y-c*n*l-f*n*u,b-h*n*l-d*n*u],this.width=v,this.height=g}get rawDims(){const{userUnit:e,viewBox:t}=this,n=t.map(r=>r*e);return ot(this,"rawDims",{pageWidth:n[2]-n[0],pageHeight:n[3]-n[1],pageX:n[0],pageY:n[1]})}clone({scale:e=this.scale,rotation:t=this.rotation,offsetX:n=this.offsetX,offsetY:r=this.offsetY,dontFlip:s=!1}={}){return new Xp({viewBox:this.viewBox.slice(),userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}convertToViewportPoint(e,t){return $e.applyTransform([e,t],this.transform)}convertToViewportRectangle(e){const t=$e.applyTransform([e[0],e[1]],this.transform),n=$e.applyTransform([e[2],e[3]],this.transform);return[t[0],t[1],n[0],n[1]]}convertToPdfPoint(e,t){return $e.applyInverseTransform([e,t],this.transform)}}class a_ extends $o{constructor(e,t=0){super(e,"RenderingCancelledException"),this.extraDelay=t}}function hy(i){const e=i.length;let t=0;for(;t<e&&i[t].trim()==="";)t++;return i.substring(t,t+5).toLowerCase()==="data:"}function o_(i){return typeof i=="string"&&/\.pdf$/i.test(i)}function vL(i){return[i]=i.split(/[#?]/,1),i.substring(i.lastIndexOf("/")+1)}function yL(i,e="document.pdf"){if(typeof i!="string")return e;if(hy(i))return it('getPdfFilenameFromUrl: ignore "data:"-URL for performance reasons.'),e;const t=/^(?:(?:[^:]+:)?\/\/[^/]+)?([^?#]*)(\?[^#]*)?(#.*)?$/,n=/[^/?#=]+\.pdf\b(?!.*\.pdf\b)/i,r=t.exec(i);let s=n.exec(r[1])||n.exec(r[2])||n.exec(r[3]);if(s&&(s=s[0],s.includes("%")))try{s=n.exec(decodeURIComponent(s))[0]}catch{}return s||e}class bE{constructor(){Ze(this,"started",Object.create(null));Ze(this,"times",[])}time(e){e in this.started&&it(`Timer is already running for ${e}`),this.started[e]=Date.now()}timeEnd(e){e in this.started||it(`Timer has not been started for ${e}`),this.times.push({name:e,start:this.started[e],end:Date.now()}),delete this.started[e]}toString(){const e=[];let t=0;for(const{name:n}of this.times)t=Math.max(n.length,t);for(const{name:n,start:r,end:s}of this.times)e.push(`${n.padEnd(t)} ${s-r}ms
`);return e.join("")}}function pf(i,e){try{const{protocol:t}=e?new URL(i,e):new URL(i);return t==="http:"||t==="https:"}catch{return!1}}function ns(i){i.preventDefault()}function Ji(i){i.preventDefault(),i.stopPropagation()}var vd;class l_{static toDateObject(e){if(!e||typeof e!="string")return null;p(this,vd)||N(this,vd,new RegExp("^D:(\\d{4})(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?(\\d{2})?([Z|+|-])?(\\d{2})?'?(\\d{2})?'?"));const t=p(this,vd).exec(e);if(!t)return null;const n=parseInt(t[1],10);let r=parseInt(t[2],10);r=r>=1&&r<=12?r-1:0;let s=parseInt(t[3],10);s=s>=1&&s<=31?s:1;let a=parseInt(t[4],10);a=a>=0&&a<=23?a:0;let o=parseInt(t[5],10);o=o>=0&&o<=59?o:0;let l=parseInt(t[6],10);l=l>=0&&l<=59?l:0;const u=t[7]||"Z";let c=parseInt(t[8],10);c=c>=0&&c<=23?c:0;let h=parseInt(t[9],10)||0;return h=h>=0&&h<=59?h:0,u==="-"?(a+=c,o+=h):u==="+"&&(a-=c,o-=h),new Date(Date.UTC(n,r,s,a,o,l))}}vd=new WeakMap,L(l_,vd);function bL(i,{scale:e=1,rotation:t=0}){const{width:n,height:r}=i.attributes.style,s=[0,0,parseInt(n),parseInt(r)];return new Xp({viewBox:s,userUnit:1,scale:e,rotation:t})}function u_(i){if(i.startsWith("#")){const e=parseInt(i.slice(1),16);return[(e&16711680)>>16,(e&65280)>>8,e&255]}return i.startsWith("rgb(")?i.slice(4,-1).split(",").map(e=>parseInt(e)):i.startsWith("rgba(")?i.slice(5,-1).split(",").map(e=>parseInt(e)).slice(0,3):(it(`Not a valid color format: "${i}"`),[0,0,0])}function wL(i){const e=document.createElement("span");e.style.visibility="hidden",document.body.append(e);for(const t of i.keys()){e.style.color=t;const n=window.getComputedStyle(e).color;i.set(t,u_(n))}e.remove()}function qt(i){const{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform();return[e,t,n,r,s,a]}function ss(i){const{a:e,b:t,c:n,d:r,e:s,f:a}=i.getTransform().invertSelf();return[e,t,n,r,s,a]}function yu(i,e,t=!1,n=!0){if(e instanceof Xp){const{pageWidth:r,pageHeight:s}=e.rawDims,{style:a}=i,o=gi.isCSSRoundSupported,l=`var(--scale-factor) * ${r}px`,u=`var(--scale-factor) * ${s}px`,c=o?`round(down, ${l}, var(--scale-round-x, 1px))`:`calc(${l})`,h=o?`round(down, ${u}, var(--scale-round-y, 1px))`:`calc(${u})`;!t||e.rotation%180===0?(a.width=c,a.height=h):(a.width=h,a.height=c)}n&&i.setAttribute("data-main-rotation",e.rotation)}class Pb{constructor(){const e=window.devicePixelRatio||1;this.sx=e,this.sy=e}get scaled(){return this.sx!==1||this.sy!==1}get symmetric(){return this.sx===this.sy}}var Ha,sl,Mr,al,yd,bd,Ev,_C,mi,EC,AC,Gg,xC,Ib;const Us=class Us{constructor(e){L(this,mi);L(this,Ha,null);L(this,sl,null);L(this,Mr);L(this,al,null);L(this,yd,null);N(this,Mr,e),p(Us,bd)||N(Us,bd,Object.freeze({freetext:"pdfjs-editor-remove-freetext-button",highlight:"pdfjs-editor-remove-highlight-button",ink:"pdfjs-editor-remove-ink-button",stamp:"pdfjs-editor-remove-stamp-button"}))}render(){const e=N(this,Ha,document.createElement("div"));e.classList.add("editToolbar","hidden"),e.setAttribute("role","toolbar");const t=p(this,Mr)._uiManager._signal;e.addEventListener("contextmenu",ns,{signal:t}),e.addEventListener("pointerdown",M(Us,Ev,_C),{signal:t});const n=N(this,al,document.createElement("div"));n.className="buttons",e.append(n);const r=p(this,Mr).toolbarPosition;if(r){const{style:s}=e,a=p(this,Mr)._uiManager.direction==="ltr"?1-r[0]:r[0];s.insetInlineEnd=`${100*a}%`,s.top=`calc(${100*r[1]}% + var(--editor-toolbar-vert-offset))`}return M(this,mi,xC).call(this),e}get div(){return p(this,Ha)}hide(){var e;p(this,Ha).classList.add("hidden"),(e=p(this,sl))==null||e.hideDropdown()}show(){var e;p(this,Ha).classList.remove("hidden"),(e=p(this,yd))==null||e.shown()}async addAltText(e){const t=await e.render();M(this,mi,Gg).call(this,t),p(this,al).prepend(t,p(this,mi,Ib)),N(this,yd,e)}addColorPicker(e){N(this,sl,e);const t=e.renderButton();M(this,mi,Gg).call(this,t),p(this,al).prepend(t,p(this,mi,Ib))}remove(){var e;p(this,Ha).remove(),(e=p(this,sl))==null||e.destroy(),N(this,sl,null)}};Ha=new WeakMap,sl=new WeakMap,Mr=new WeakMap,al=new WeakMap,yd=new WeakMap,bd=new WeakMap,Ev=new WeakSet,_C=function(e){e.stopPropagation()},mi=new WeakSet,EC=function(e){p(this,Mr)._focusEventsAllowed=!1,Ji(e)},AC=function(e){p(this,Mr)._focusEventsAllowed=!0,Ji(e)},Gg=function(e){const t=p(this,Mr)._uiManager._signal;e.addEventListener("focusin",M(this,mi,EC).bind(this),{capture:!0,signal:t}),e.addEventListener("focusout",M(this,mi,AC).bind(this),{capture:!0,signal:t}),e.addEventListener("contextmenu",ns,{signal:t})},xC=function(){const{editorType:e,_uiManager:t}=p(this,Mr),n=document.createElement("button");n.className="delete",n.tabIndex=0,n.setAttribute("data-l10n-id",p(Us,bd)[e]),M(this,mi,Gg).call(this,n),n.addEventListener("click",r=>{t.delete()},{signal:t._signal}),p(this,al).append(n)},Ib=function(){const e=document.createElement("div");return e.className="divider",e},L(Us,Ev),L(Us,bd,null);let Lb=Us;var wd,ol,ll,jo,SC,CC,TC;class _L{constructor(e){L(this,jo);L(this,wd,null);L(this,ol,null);L(this,ll);N(this,ll,e)}show(e,t,n){const[r,s]=M(this,jo,CC).call(this,t,n),{style:a}=p(this,ol)||N(this,ol,M(this,jo,SC).call(this));e.append(p(this,ol)),a.insetInlineEnd=`${100*r}%`,a.top=`calc(${100*s}% + var(--editor-toolbar-vert-offset))`}hide(){p(this,ol).remove()}}wd=new WeakMap,ol=new WeakMap,ll=new WeakMap,jo=new WeakSet,SC=function(){const e=N(this,ol,document.createElement("div"));e.className="editToolbar",e.setAttribute("role","toolbar"),e.addEventListener("contextmenu",ns,{signal:p(this,ll)._signal});const t=N(this,wd,document.createElement("div"));return t.className="buttons",e.append(t),M(this,jo,TC).call(this),e},CC=function(e,t){let n=0,r=0;for(const s of e){const a=s.y+s.height;if(a<n)continue;const o=s.x+(t?s.width:0);if(a>n){r=o,n=a;continue}t?o>r&&(r=o):o<r&&(r=o)}return[t?1-r:r,n]},TC=function(){const e=document.createElement("button");e.className="highlightButton",e.tabIndex=0,e.setAttribute("data-l10n-id","pdfjs-highlight-floating-button1");const t=document.createElement("span");e.append(t),t.className="visuallyHidden",t.setAttribute("data-l10n-id","pdfjs-highlight-floating-button-label");const n=p(this,ll)._signal;e.addEventListener("contextmenu",ns,{signal:n}),e.addEventListener("click",()=>{p(this,ll).highlightSelection("floating_button")},{signal:n}),p(this,wd).append(e)};function Qm(i,e,t){for(const n of t)e.addEventListener(n,i[n].bind(i))}var Av;class EL{constructor(){L(this,Av,0)}get id(){return`${nL}${oi(this,Av)._++}`}}Av=new WeakMap;var vc,_d,Qn,yc,Xg;const F_=class F_{constructor(){L(this,yc);L(this,vc,gL());L(this,_d,0);L(this,Qn,null)}static get _isSVGFittingCanvas(){const e='data:image/svg+xml;charset=UTF-8,<svg viewBox="0 0 1 1" width="1" height="1" xmlns="http://www.w3.org/2000/svg"><rect width="1" height="1" style="fill:red;"/></svg>',n=new OffscreenCanvas(1,3).getContext("2d",{willReadFrequently:!0}),r=new Image;r.src=e;const s=r.decode().then(()=>(n.drawImage(r,0,0,1,1,0,0,1,3),new Uint32Array(n.getImageData(0,0,1,1).data.buffer)[0]===0));return ot(this,"_isSVGFittingCanvas",s)}async getFromFile(e){const{lastModified:t,name:n,size:r,type:s}=e;return M(this,yc,Xg).call(this,`${t}_${n}_${r}_${s}`,e)}async getFromUrl(e){return M(this,yc,Xg).call(this,e,e)}async getFromBlob(e,t){const n=await t;return M(this,yc,Xg).call(this,e,n)}async getFromId(e){p(this,Qn)||N(this,Qn,new Map);const t=p(this,Qn).get(e);if(!t)return null;if(t.bitmap)return t.refCounter+=1,t;if(t.file)return this.getFromFile(t.file);if(t.blobPromise){const{blobPromise:n}=t;return delete t.blobPromise,this.getFromBlob(t.id,n)}return this.getFromUrl(t.url)}getFromCanvas(e,t){p(this,Qn)||N(this,Qn,new Map);let n=p(this,Qn).get(e);if(n!=null&&n.bitmap)return n.refCounter+=1,n;const r=new OffscreenCanvas(t.width,t.height);return r.getContext("2d").drawImage(t,0,0),n={bitmap:r.transferToImageBitmap(),id:`image_${p(this,vc)}_${oi(this,_d)._++}`,refCounter:1,isSvg:!1},p(this,Qn).set(e,n),p(this,Qn).set(n.id,n),n}getSvgUrl(e){const t=p(this,Qn).get(e);return t!=null&&t.isSvg?t.svgUrl:null}deleteId(e){var r;p(this,Qn)||N(this,Qn,new Map);const t=p(this,Qn).get(e);if(!t||(t.refCounter-=1,t.refCounter!==0))return;const{bitmap:n}=t;if(!t.url&&!t.file){const s=new OffscreenCanvas(n.width,n.height);s.getContext("bitmaprenderer").transferFromImageBitmap(n),t.blobPromise=s.convertToBlob()}(r=n.close)==null||r.call(n),t.bitmap=null}isValidId(e){return e.startsWith(`image_${p(this,vc)}_`)}};vc=new WeakMap,_d=new WeakMap,Qn=new WeakMap,yc=new WeakSet,Xg=async function(e,t){p(this,Qn)||N(this,Qn,new Map);let n=p(this,Qn).get(e);if(n===null)return null;if(n!=null&&n.bitmap)return n.refCounter+=1,n;try{n||(n={bitmap:null,id:`image_${p(this,vc)}_${oi(this,_d)._++}`,refCounter:0,isSvg:!1});let r;if(typeof t=="string"?(n.url=t,r=await cy(t,"blob")):t instanceof File?r=n.file=t:t instanceof Blob&&(r=t),r.type==="image/svg+xml"){const s=F_._isSVGFittingCanvas,a=new FileReader,o=new Image,l=new Promise((u,c)=>{o.onload=()=>{n.bitmap=o,n.isSvg=!0,u()},a.onload=async()=>{const h=n.svgUrl=a.result;o.src=await s?`${h}#svgView(preserveAspectRatio(none))`:h},o.onerror=a.onerror=c});a.readAsDataURL(r),await l}else n.bitmap=await createImageBitmap(r);n.refCounter=1}catch(r){it(r),n=null}return p(this,Qn).set(e,n),n&&p(this,Qn).set(n.id,n),n};let Mb=F_;var rn,Wa,Ed,$t;class AL{constructor(e=128){L(this,rn,[]);L(this,Wa,!1);L(this,Ed);L(this,$t,-1);N(this,Ed,e)}add({cmd:e,undo:t,post:n,mustExec:r,type:s=NaN,overwriteIfSameType:a=!1,keepUndo:o=!1}){if(r&&e(),p(this,Wa))return;const l={cmd:e,undo:t,post:n,type:s};if(p(this,$t)===-1){p(this,rn).length>0&&(p(this,rn).length=0),N(this,$t,0),p(this,rn).push(l);return}if(a&&p(this,rn)[p(this,$t)].type===s){o&&(l.undo=p(this,rn)[p(this,$t)].undo),p(this,rn)[p(this,$t)]=l;return}const u=p(this,$t)+1;u===p(this,Ed)?p(this,rn).splice(0,1):(N(this,$t,u),u<p(this,rn).length&&p(this,rn).splice(u)),p(this,rn).push(l)}undo(){if(p(this,$t)===-1)return;N(this,Wa,!0);const{undo:e,post:t}=p(this,rn)[p(this,$t)];e(),t==null||t(),N(this,Wa,!1),N(this,$t,p(this,$t)-1)}redo(){if(p(this,$t)<p(this,rn).length-1){N(this,$t,p(this,$t)+1),N(this,Wa,!0);const{cmd:e,post:t}=p(this,rn)[p(this,$t)];e(),t==null||t(),N(this,Wa,!1)}}hasSomethingToUndo(){return p(this,$t)!==-1}hasSomethingToRedo(){return p(this,$t)<p(this,rn).length-1}cleanType(e){if(p(this,$t)!==-1){for(let t=p(this,$t);t>=0;t--)if(p(this,rn)[t].type!==e){p(this,rn).splice(t+1,p(this,$t)-t),N(this,$t,t);return}p(this,rn).length=0,N(this,$t,-1)}}destroy(){N(this,rn,null)}}rn=new WeakMap,Wa=new WeakMap,Ed=new WeakMap,$t=new WeakMap;var xv,kC;class Kp{constructor(e){L(this,xv);this.buffer=[],this.callbacks=new Map,this.allKeys=new Set;const{isMac:t}=gi.platform;for(const[n,r,s={}]of e)for(const a of n){const o=a.startsWith("mac+");t&&o?(this.callbacks.set(a.slice(4),{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1))):!t&&!o&&(this.callbacks.set(a,{callback:r,options:s}),this.allKeys.add(a.split("+").at(-1)))}}exec(e,t){if(!this.allKeys.has(t.key))return;const n=this.callbacks.get(M(this,xv,kC).call(this,t));if(!n)return;const{callback:r,options:{bubbles:s=!1,args:a=[],checker:o=null}}=n;o&&!o(e,t)||(r.bind(e,...a,t)(),s||Ji(t))}}xv=new WeakSet,kC=function(e){e.altKey&&this.buffer.push("alt"),e.ctrlKey&&this.buffer.push("ctrl"),e.metaKey&&this.buffer.push("meta"),e.shiftKey&&this.buffer.push("shift"),this.buffer.push(e.key);const t=this.buffer.join("+");return this.buffer.length=0,t};const Sv=class Sv{get _colors(){const e=new Map([["CanvasText",null],["Canvas",null]]);return wL(e),ot(this,"_colors",e)}convert(e){const t=u_(e);if(!window.matchMedia("(forced-colors: active)").matches)return t;for(const[n,r]of this._colors)if(r.every((s,a)=>s===t[a]))return Sv._colorsMapping.get(n);return t}getHexCode(e){const t=this._colors.get(e);return t?$e.makeHexColor(...t):e}};Ze(Sv,"_colorsMapping",new Map([["CanvasText",[0,0,0]],["Canvas",[255,255,255]]]));let Fb=Sv;var bc,Bi,wn,Mn,wc,Ws,_c,cr,$a,ul,Ec,cl,hs,Fr,hl,Ad,xd,Ac,Sd,fs,Va,xc,Ga,ds,Cv,Xa,Cd,Ka,fl,Td,kd,Tn,xt,$s,dl,Dd,Od,Ya,ps,Vs,Nd,hr,Oe,Kg,Bb,DC,OC,Yg,NC,RC,PC,jb,LC,zb,Ub,IC,li,Bs,MC,FC,qb,BC,gf,Hb;const ac=class ac{constructor(e,t,n,r,s,a,o,l,u,c,h,f,d){L(this,Oe);L(this,bc,new AbortController);L(this,Bi,null);L(this,wn,new Map);L(this,Mn,new Map);L(this,wc,null);L(this,Ws,null);L(this,_c,null);L(this,cr,new AL);L(this,$a,null);L(this,ul,null);L(this,Ec,0);L(this,cl,new Set);L(this,hs,null);L(this,Fr,null);L(this,hl,new Set);Ze(this,"_editorUndoBar",null);L(this,Ad,!1);L(this,xd,!1);L(this,Ac,!1);L(this,Sd,null);L(this,fs,null);L(this,Va,null);L(this,xc,null);L(this,Ga,!1);L(this,ds,null);L(this,Cv,new EL);L(this,Xa,!1);L(this,Cd,!1);L(this,Ka,null);L(this,fl,null);L(this,Td,null);L(this,kd,null);L(this,Tn,nt.NONE);L(this,xt,new Set);L(this,$s,null);L(this,dl,null);L(this,Dd,null);L(this,Od,{isEditing:!1,isEmpty:!0,hasSomethingToUndo:!1,hasSomethingToRedo:!1,hasSelectedEditor:!1,hasSelectedText:!1});L(this,Ya,[0,0]);L(this,ps,null);L(this,Vs,null);L(this,Nd,null);L(this,hr,null);const y=this._signal=p(this,bc).signal;N(this,Vs,e),N(this,Nd,t),N(this,wc,n),this._eventBus=r,r._on("editingaction",this.onEditingAction.bind(this),{signal:y}),r._on("pagechanging",this.onPageChanging.bind(this),{signal:y}),r._on("scalechanging",this.onScaleChanging.bind(this),{signal:y}),r._on("rotationchanging",this.onRotationChanging.bind(this),{signal:y}),r._on("setpreference",this.onSetPreference.bind(this),{signal:y}),r._on("switchannotationeditorparams",b=>this.updateParams(b.type,b.value),{signal:y}),M(this,Oe,NC).call(this),M(this,Oe,IC).call(this),M(this,Oe,jb).call(this),N(this,Ws,s.annotationStorage),N(this,Sd,s.filterFactory),N(this,dl,a),N(this,xc,o||null),N(this,Ad,l),N(this,xd,u),N(this,Ac,c),N(this,kd,h||null),this.viewParameters={realScale:Bo.PDF_TO_CSS_UNITS,rotation:0},this.isShiftKeyDown=!1,this._editorUndoBar=f||null,this._supportsPinchToZoom=d!==!1}static get _keyboardManager(){const e=ac.prototype,t=a=>p(a,Vs).contains(document.activeElement)&&document.activeElement.tagName!=="BUTTON"&&a.hasSomethingToControl(),n=(a,{target:o})=>{if(o instanceof HTMLInputElement){const{type:l}=o;return l!=="text"&&l!=="number"}return!0},r=this.TRANSLATE_SMALL,s=this.TRANSLATE_BIG;return ot(this,"_keyboardManager",new Kp([[["ctrl+a","mac+meta+a"],e.selectAll,{checker:n}],[["ctrl+z","mac+meta+z"],e.undo,{checker:n}],[["ctrl+y","ctrl+shift+z","mac+meta+shift+z","ctrl+shift+Z","mac+meta+shift+Z"],e.redo,{checker:n}],[["Backspace","alt+Backspace","ctrl+Backspace","shift+Backspace","mac+Backspace","mac+alt+Backspace","mac+ctrl+Backspace","Delete","ctrl+Delete","shift+Delete","mac+Delete"],e.delete,{checker:n}],[["Enter","mac+Enter"],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&p(a,Vs).contains(o)&&!a.isEnterHandled}],[[" ","mac+ "],e.addNewEditorFromKeyboard,{checker:(a,{target:o})=>!(o instanceof HTMLButtonElement)&&p(a,Vs).contains(document.activeElement)}],[["Escape","mac+Escape"],e.unselectAll],[["ArrowLeft","mac+ArrowLeft"],e.translateSelectedEditors,{args:[-r,0],checker:t}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e.translateSelectedEditors,{args:[-s,0],checker:t}],[["ArrowRight","mac+ArrowRight"],e.translateSelectedEditors,{args:[r,0],checker:t}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e.translateSelectedEditors,{args:[s,0],checker:t}],[["ArrowUp","mac+ArrowUp"],e.translateSelectedEditors,{args:[0,-r],checker:t}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e.translateSelectedEditors,{args:[0,-s],checker:t}],[["ArrowDown","mac+ArrowDown"],e.translateSelectedEditors,{args:[0,r],checker:t}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e.translateSelectedEditors,{args:[0,s],checker:t}]]))}destroy(){var e,t,n,r,s;(e=p(this,hr))==null||e.resolve(),N(this,hr,null),(t=p(this,bc))==null||t.abort(),N(this,bc,null),this._signal=null;for(const a of p(this,Mn).values())a.destroy();p(this,Mn).clear(),p(this,wn).clear(),p(this,hl).clear(),N(this,Bi,null),p(this,xt).clear(),p(this,cr).destroy(),(n=p(this,wc))==null||n.destroy(),(r=p(this,ds))==null||r.hide(),N(this,ds,null),p(this,fs)&&(clearTimeout(p(this,fs)),N(this,fs,null)),p(this,ps)&&(clearTimeout(p(this,ps)),N(this,ps,null)),(s=this._editorUndoBar)==null||s.destroy()}combinedSignal(e){return AbortSignal.any([this._signal,e.signal])}get mlManager(){return p(this,kd)}get useNewAltTextFlow(){return p(this,xd)}get useNewAltTextWhenAddingImage(){return p(this,Ac)}get hcmFilter(){return ot(this,"hcmFilter",p(this,dl)?p(this,Sd).addHCMFilter(p(this,dl).foreground,p(this,dl).background):"none")}get direction(){return ot(this,"direction",getComputedStyle(p(this,Vs)).direction)}get highlightColors(){return ot(this,"highlightColors",p(this,xc)?new Map(p(this,xc).split(",").map(e=>e.split("=").map(t=>t.trim()))):null)}get highlightColorNames(){return ot(this,"highlightColorNames",this.highlightColors?new Map(Array.from(this.highlightColors,e=>e.reverse())):null)}setCurrentDrawingSession(e){e?(this.unselectAll(),this.disableUserSelect(!0)):this.disableUserSelect(!1),N(this,ul,e)}setMainHighlightColorPicker(e){N(this,Td,e)}editAltText(e,t=!1){var n;(n=p(this,wc))==null||n.editAltText(this,e,t)}switchToMode(e,t){this._eventBus.on("annotationeditormodechanged",t,{once:!0,signal:this._signal}),this._eventBus.dispatch("showannotationeditorui",{source:this,mode:e})}setPreference(e,t){this._eventBus.dispatch("setpreference",{source:this,name:e,value:t})}onSetPreference({name:e,value:t}){switch(e){case"enableNewAltTextWhenAddingImage":N(this,Ac,t);break}}onPageChanging({pageNumber:e}){N(this,Ec,e-1)}focusMainContainer(){p(this,Vs).focus()}findParent(e,t){for(const n of p(this,Mn).values()){const{x:r,y:s,width:a,height:o}=n.div.getBoundingClientRect();if(e>=r&&e<=r+a&&t>=s&&t<=s+o)return n}return null}disableUserSelect(e=!1){p(this,Nd).classList.toggle("noUserSelect",e)}addShouldRescale(e){p(this,hl).add(e)}removeShouldRescale(e){p(this,hl).delete(e)}onScaleChanging({scale:e}){var t;this.commitOrRemove(),this.viewParameters.realScale=e*Bo.PDF_TO_CSS_UNITS;for(const n of p(this,hl))n.onScaleChanging();(t=p(this,ul))==null||t.onScaleChanging()}onRotationChanging({pagesRotation:e}){this.commitOrRemove(),this.viewParameters.rotation=e}highlightSelection(e=""){const t=document.getSelection();if(!t||t.isCollapsed)return;const{anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a}=t,o=t.toString(),u=M(this,Oe,Kg).call(this,t).closest(".textLayer"),c=this.getSelectionBoxes(u);if(!c)return;t.empty();const h=M(this,Oe,Bb).call(this,u),f=p(this,Tn)===nt.NONE,d=()=>{h==null||h.createAndAddNewEditor({x:0,y:0},!1,{methodOfCreation:e,boxes:c,anchorNode:n,anchorOffset:r,focusNode:s,focusOffset:a,text:o}),f&&this.showAllEditors("highlight",!0,!0)};if(f){this.switchToMode(nt.HIGHLIGHT,d);return}d()}addToAnnotationStorage(e){!e.isEmpty()&&p(this,Ws)&&!p(this,Ws).has(e.id)&&p(this,Ws).setValue(e.id,e)}blur(){if(this.isShiftKeyDown=!1,p(this,Ga)&&(N(this,Ga,!1),M(this,Oe,Yg).call(this,"main_toolbar")),!this.hasSelection)return;const{activeElement:e}=document;for(const t of p(this,xt))if(t.div.contains(e)){N(this,fl,[t,e]),t._focusEventsAllowed=!1;break}}focus(){if(!p(this,fl))return;const[e,t]=p(this,fl);N(this,fl,null),t.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:this._signal}),t.focus()}addEditListeners(){M(this,Oe,jb).call(this),M(this,Oe,zb).call(this)}removeEditListeners(){M(this,Oe,LC).call(this),M(this,Oe,Ub).call(this)}dragOver(e){for(const{type:t}of e.dataTransfer.items)for(const n of p(this,Fr))if(n.isHandlingMimeForPasting(t)){e.dataTransfer.dropEffect="copy",e.preventDefault();return}}drop(e){for(const t of e.dataTransfer.items)for(const n of p(this,Fr))if(n.isHandlingMimeForPasting(t.type)){n.paste(t,this.currentLayer),e.preventDefault();return}}copy(e){var n;if(e.preventDefault(),(n=p(this,Bi))==null||n.commitOrRemove(),!this.hasSelection)return;const t=[];for(const r of p(this,xt)){const s=r.serialize(!0);s&&t.push(s)}t.length!==0&&e.clipboardData.setData("application/pdfjs",JSON.stringify(t))}cut(e){this.copy(e),this.delete()}async paste(e){e.preventDefault();const{clipboardData:t}=e;for(const s of t.items)for(const a of p(this,Fr))if(a.isHandlingMimeForPasting(s.type)){a.paste(s,this.currentLayer);return}let n=t.getData("application/pdfjs");if(!n)return;try{n=JSON.parse(n)}catch(s){it(`paste: "${s.message}".`);return}if(!Array.isArray(n))return;this.unselectAll();const r=this.currentLayer;try{const s=[];for(const l of n){const u=await r.deserialize(l);if(!u)return;s.push(u)}const a=()=>{for(const l of s)M(this,Oe,qb).call(this,l);M(this,Oe,Hb).call(this,s)},o=()=>{for(const l of s)l.remove()};this.addCommands({cmd:a,undo:o,mustExec:!0})}catch(s){it(`paste: "${s.message}".`)}}keydown(e){!this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!0),p(this,Tn)!==nt.NONE&&!this.isEditorHandlingKeyboard&&ac._keyboardManager.exec(this,e)}keyup(e){this.isShiftKeyDown&&e.key==="Shift"&&(this.isShiftKeyDown=!1,p(this,Ga)&&(N(this,Ga,!1),M(this,Oe,Yg).call(this,"main_toolbar")))}onEditingAction({name:e}){switch(e){case"undo":case"redo":case"delete":case"selectAll":this[e]();break;case"highlightSelection":this.highlightSelection("context_menu");break}}setEditingState(e){e?(M(this,Oe,RC).call(this),M(this,Oe,zb).call(this),M(this,Oe,li).call(this,{isEditing:p(this,Tn)!==nt.NONE,isEmpty:M(this,Oe,gf).call(this),hasSomethingToUndo:p(this,cr).hasSomethingToUndo(),hasSomethingToRedo:p(this,cr).hasSomethingToRedo(),hasSelectedEditor:!1})):(M(this,Oe,PC).call(this),M(this,Oe,Ub).call(this),M(this,Oe,li).call(this,{isEditing:!1}),this.disableUserSelect(!1))}registerEditorTypes(e){if(!p(this,Fr)){N(this,Fr,e);for(const t of p(this,Fr))M(this,Oe,Bs).call(this,t.defaultPropertiesToUpdate)}}getId(){return p(this,Cv).id}get currentLayer(){return p(this,Mn).get(p(this,Ec))}getLayer(e){return p(this,Mn).get(e)}get currentPageIndex(){return p(this,Ec)}addLayer(e){p(this,Mn).set(e.pageIndex,e),p(this,Xa)?e.enable():e.disable()}removeLayer(e){p(this,Mn).delete(e.pageIndex)}async updateMode(e,t=null,n=!1){var r;if(p(this,Tn)!==e&&!(p(this,hr)&&(await p(this,hr).promise,!p(this,hr)))){if(N(this,hr,Promise.withResolvers()),N(this,Tn,e),e===nt.NONE){this.setEditingState(!1),M(this,Oe,FC).call(this),(r=this._editorUndoBar)==null||r.hide(),p(this,hr).resolve();return}this.setEditingState(!0),await M(this,Oe,MC).call(this),this.unselectAll();for(const s of p(this,Mn).values())s.updateMode(e);if(!t){n&&this.addNewEditorFromKeyboard(),p(this,hr).resolve();return}for(const s of p(this,wn).values())s.annotationElementId===t?(this.setSelected(s),s.enterInEditMode()):s.unselect();p(this,hr).resolve()}}addNewEditorFromKeyboard(){this.currentLayer.canCreateNewEmptyEditor()&&this.currentLayer.addNewEditor()}updateToolbar(e){e!==p(this,Tn)&&this._eventBus.dispatch("switchannotationeditormode",{source:this,mode:e})}updateParams(e,t){var n;if(p(this,Fr)){switch(e){case ft.CREATE:this.currentLayer.addNewEditor();return;case ft.HIGHLIGHT_DEFAULT_COLOR:(n=p(this,Td))==null||n.updateColor(t);break;case ft.HIGHLIGHT_SHOW_ALL:this._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:{type:"highlight",action:"toggle_visibility"}}}),(p(this,Dd)||N(this,Dd,new Map)).set(e,t),this.showAllEditors("highlight",t);break}for(const r of p(this,xt))r.updateParams(e,t);for(const r of p(this,Fr))r.updateDefaultParams(e,t)}}showAllEditors(e,t,n=!1){var s;for(const a of p(this,wn).values())a.editorType===e&&a.show(t);(((s=p(this,Dd))==null?void 0:s.get(ft.HIGHLIGHT_SHOW_ALL))??!0)!==t&&M(this,Oe,Bs).call(this,[[ft.HIGHLIGHT_SHOW_ALL,t]])}enableWaiting(e=!1){if(p(this,Cd)!==e){N(this,Cd,e);for(const t of p(this,Mn).values())e?t.disableClick():t.enableClick(),t.div.classList.toggle("waiting",e)}}getEditors(e){const t=[];for(const n of p(this,wn).values())n.pageIndex===e&&t.push(n);return t}getEditor(e){return p(this,wn).get(e)}addEditor(e){p(this,wn).set(e.id,e)}removeEditor(e){var t;e.div.contains(document.activeElement)&&(p(this,fs)&&clearTimeout(p(this,fs)),N(this,fs,setTimeout(()=>{this.focusMainContainer(),N(this,fs,null)},0))),p(this,wn).delete(e.id),this.unselect(e),(!e.annotationElementId||!p(this,cl).has(e.annotationElementId))&&((t=p(this,Ws))==null||t.remove(e.id))}addDeletedAnnotationElement(e){p(this,cl).add(e.annotationElementId),this.addChangedExistingAnnotation(e),e.deleted=!0}isDeletedAnnotationElement(e){return p(this,cl).has(e)}removeDeletedAnnotationElement(e){p(this,cl).delete(e.annotationElementId),this.removeChangedExistingAnnotation(e),e.deleted=!1}setActiveEditor(e){p(this,Bi)!==e&&(N(this,Bi,e),e&&M(this,Oe,Bs).call(this,e.propertiesToUpdate))}updateUI(e){p(this,Oe,BC)===e&&M(this,Oe,Bs).call(this,e.propertiesToUpdate)}updateUIForDefaultProperties(e){M(this,Oe,Bs).call(this,e.defaultPropertiesToUpdate)}toggleSelected(e){if(p(this,xt).has(e)){p(this,xt).delete(e),e.unselect(),M(this,Oe,li).call(this,{hasSelectedEditor:this.hasSelection});return}p(this,xt).add(e),e.select(),M(this,Oe,Bs).call(this,e.propertiesToUpdate),M(this,Oe,li).call(this,{hasSelectedEditor:!0})}setSelected(e){var t;(t=p(this,ul))==null||t.commitOrRemove();for(const n of p(this,xt))n!==e&&n.unselect();p(this,xt).clear(),p(this,xt).add(e),e.select(),M(this,Oe,Bs).call(this,e.propertiesToUpdate),M(this,Oe,li).call(this,{hasSelectedEditor:!0})}isSelected(e){return p(this,xt).has(e)}get firstSelectedEditor(){return p(this,xt).values().next().value}unselect(e){e.unselect(),p(this,xt).delete(e),M(this,Oe,li).call(this,{hasSelectedEditor:this.hasSelection})}get hasSelection(){return p(this,xt).size!==0}get isEnterHandled(){return p(this,xt).size===1&&this.firstSelectedEditor.isEnterHandled}undo(){var e;p(this,cr).undo(),M(this,Oe,li).call(this,{hasSomethingToUndo:p(this,cr).hasSomethingToUndo(),hasSomethingToRedo:!0,isEmpty:M(this,Oe,gf).call(this)}),(e=this._editorUndoBar)==null||e.hide()}redo(){p(this,cr).redo(),M(this,Oe,li).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:p(this,cr).hasSomethingToRedo(),isEmpty:M(this,Oe,gf).call(this)})}addCommands(e){p(this,cr).add(e),M(this,Oe,li).call(this,{hasSomethingToUndo:!0,hasSomethingToRedo:!1,isEmpty:M(this,Oe,gf).call(this)})}cleanUndoStack(e){p(this,cr).cleanType(e)}delete(){var s;this.commitOrRemove();const e=(s=this.currentLayer)==null?void 0:s.endDrawingSession(!0);if(!this.hasSelection&&!e)return;const t=e?[e]:[...p(this,xt)],n=()=>{var a;(a=this._editorUndoBar)==null||a.show(r,t.length===1?t[0].editorType:t.length);for(const o of t)o.remove()},r=()=>{for(const a of t)M(this,Oe,qb).call(this,a)};this.addCommands({cmd:n,undo:r,mustExec:!0})}commitOrRemove(){var e;(e=p(this,Bi))==null||e.commitOrRemove()}hasSomethingToControl(){return p(this,Bi)||this.hasSelection}selectAll(){for(const e of p(this,xt))e.commit();M(this,Oe,Hb).call(this,p(this,wn).values())}unselectAll(){var e;if(!(p(this,Bi)&&(p(this,Bi).commitOrRemove(),p(this,Tn)!==nt.NONE))&&!((e=p(this,ul))!=null&&e.commitOrRemove())&&this.hasSelection){for(const t of p(this,xt))t.unselect();p(this,xt).clear(),M(this,Oe,li).call(this,{hasSelectedEditor:!1})}}translateSelectedEditors(e,t,n=!1){if(n||this.commitOrRemove(),!this.hasSelection)return;p(this,Ya)[0]+=e,p(this,Ya)[1]+=t;const[r,s]=p(this,Ya),a=[...p(this,xt)],o=1e3;p(this,ps)&&clearTimeout(p(this,ps)),N(this,ps,setTimeout(()=>{N(this,ps,null),p(this,Ya)[0]=p(this,Ya)[1]=0,this.addCommands({cmd:()=>{for(const l of a)p(this,wn).has(l.id)&&l.translateInPage(r,s)},undo:()=>{for(const l of a)p(this,wn).has(l.id)&&l.translateInPage(-r,-s)},mustExec:!1})},o));for(const l of a)l.translateInPage(e,t)}setUpDragSession(){if(this.hasSelection){this.disableUserSelect(!0),N(this,hs,new Map);for(const e of p(this,xt))p(this,hs).set(e,{savedX:e.x,savedY:e.y,savedPageIndex:e.pageIndex,newX:0,newY:0,newPageIndex:-1})}}endDragSession(){if(!p(this,hs))return!1;this.disableUserSelect(!1);const e=p(this,hs);N(this,hs,null);let t=!1;for(const[{x:r,y:s,pageIndex:a},o]of e)o.newX=r,o.newY=s,o.newPageIndex=a,t||(t=r!==o.savedX||s!==o.savedY||a!==o.savedPageIndex);if(!t)return!1;const n=(r,s,a,o)=>{if(p(this,wn).has(r.id)){const l=p(this,Mn).get(o);l?r._setParentAndPosition(l,s,a):(r.pageIndex=o,r.x=s,r.y=a)}};return this.addCommands({cmd:()=>{for(const[r,{newX:s,newY:a,newPageIndex:o}]of e)n(r,s,a,o)},undo:()=>{for(const[r,{savedX:s,savedY:a,savedPageIndex:o}]of e)n(r,s,a,o)},mustExec:!0}),!0}dragSelectedEditors(e,t){if(p(this,hs))for(const n of p(this,hs).keys())n.drag(e,t)}rebuild(e){if(e.parent===null){const t=this.getLayer(e.pageIndex);t?(t.changeParent(e),t.addOrRebuild(e)):(this.addEditor(e),this.addToAnnotationStorage(e),e.rebuild())}else e.parent.addOrRebuild(e)}get isEditorHandlingKeyboard(){var e;return((e=this.getActive())==null?void 0:e.shouldGetKeyboardEvents())||p(this,xt).size===1&&this.firstSelectedEditor.shouldGetKeyboardEvents()}isActive(e){return p(this,Bi)===e}getActive(){return p(this,Bi)}getMode(){return p(this,Tn)}get imageManager(){return ot(this,"imageManager",new Mb)}getSelectionBoxes(e){if(!e)return null;const t=document.getSelection();for(let u=0,c=t.rangeCount;u<c;u++)if(!e.contains(t.getRangeAt(u).commonAncestorContainer))return null;const{x:n,y:r,width:s,height:a}=e.getBoundingClientRect();let o;switch(e.getAttribute("data-main-rotation")){case"90":o=(u,c,h,f)=>({x:(c-r)/a,y:1-(u+h-n)/s,width:f/a,height:h/s});break;case"180":o=(u,c,h,f)=>({x:1-(u+h-n)/s,y:1-(c+f-r)/a,width:h/s,height:f/a});break;case"270":o=(u,c,h,f)=>({x:1-(c+f-r)/a,y:(u-n)/s,width:f/a,height:h/s});break;default:o=(u,c,h,f)=>({x:(u-n)/s,y:(c-r)/a,width:h/s,height:f/a});break}const l=[];for(let u=0,c=t.rangeCount;u<c;u++){const h=t.getRangeAt(u);if(!h.collapsed)for(const{x:f,y:d,width:y,height:b}of h.getClientRects())y===0||b===0||l.push(o(f,d,y,b))}return l.length===0?null:l}addChangedExistingAnnotation({annotationElementId:e,id:t}){(p(this,_c)||N(this,_c,new Map)).set(e,t)}removeChangedExistingAnnotation({annotationElementId:e}){var t;(t=p(this,_c))==null||t.delete(e)}renderAnnotationElement(e){var r;const t=(r=p(this,_c))==null?void 0:r.get(e.data.id);if(!t)return;const n=p(this,Ws).getRawValue(t);n&&(p(this,Tn)===nt.NONE&&!n.hasBeenModified||n.renderAnnotationElement(e))}};bc=new WeakMap,Bi=new WeakMap,wn=new WeakMap,Mn=new WeakMap,wc=new WeakMap,Ws=new WeakMap,_c=new WeakMap,cr=new WeakMap,$a=new WeakMap,ul=new WeakMap,Ec=new WeakMap,cl=new WeakMap,hs=new WeakMap,Fr=new WeakMap,hl=new WeakMap,Ad=new WeakMap,xd=new WeakMap,Ac=new WeakMap,Sd=new WeakMap,fs=new WeakMap,Va=new WeakMap,xc=new WeakMap,Ga=new WeakMap,ds=new WeakMap,Cv=new WeakMap,Xa=new WeakMap,Cd=new WeakMap,Ka=new WeakMap,fl=new WeakMap,Td=new WeakMap,kd=new WeakMap,Tn=new WeakMap,xt=new WeakMap,$s=new WeakMap,dl=new WeakMap,Dd=new WeakMap,Od=new WeakMap,Ya=new WeakMap,ps=new WeakMap,Vs=new WeakMap,Nd=new WeakMap,hr=new WeakMap,Oe=new WeakSet,Kg=function({anchorNode:e}){return e.nodeType===Node.TEXT_NODE?e.parentElement:e},Bb=function(e){const{currentLayer:t}=this;if(t.hasTextLayer(e))return t;for(const n of p(this,Mn).values())if(n.hasTextLayer(e))return n;return null},DC=function(){const e=document.getSelection();if(!e||e.isCollapsed)return;const n=M(this,Oe,Kg).call(this,e).closest(".textLayer"),r=this.getSelectionBoxes(n);r&&(p(this,ds)||N(this,ds,new _L(this)),p(this,ds).show(n,r,this.direction==="ltr"))},OC=function(){var s,a,o;const e=document.getSelection();if(!e||e.isCollapsed){p(this,$s)&&((s=p(this,ds))==null||s.hide(),N(this,$s,null),M(this,Oe,li).call(this,{hasSelectedText:!1}));return}const{anchorNode:t}=e;if(t===p(this,$s))return;const r=M(this,Oe,Kg).call(this,e).closest(".textLayer");if(!r){p(this,$s)&&((a=p(this,ds))==null||a.hide(),N(this,$s,null),M(this,Oe,li).call(this,{hasSelectedText:!1}));return}if((o=p(this,ds))==null||o.hide(),N(this,$s,t),M(this,Oe,li).call(this,{hasSelectedText:!0}),!(p(this,Tn)!==nt.HIGHLIGHT&&p(this,Tn)!==nt.NONE)&&(p(this,Tn)===nt.HIGHLIGHT&&this.showAllEditors("highlight",!0,!0),N(this,Ga,this.isShiftKeyDown),!this.isShiftKeyDown)){const l=p(this,Tn)===nt.HIGHLIGHT?M(this,Oe,Bb).call(this,r):null;l==null||l.toggleDrawing();const u=new AbortController,c=this.combinedSignal(u),h=f=>{f.type==="pointerup"&&f.button!==0||(u.abort(),l==null||l.toggleDrawing(!0),f.type==="pointerup"&&M(this,Oe,Yg).call(this,"main_toolbar"))};window.addEventListener("pointerup",h,{signal:c}),window.addEventListener("blur",h,{signal:c})}},Yg=function(e=""){p(this,Tn)===nt.HIGHLIGHT?this.highlightSelection(e):p(this,Ad)&&M(this,Oe,DC).call(this)},NC=function(){document.addEventListener("selectionchange",M(this,Oe,OC).bind(this),{signal:this._signal})},RC=function(){if(p(this,Va))return;N(this,Va,new AbortController);const e=this.combinedSignal(p(this,Va));window.addEventListener("focus",this.focus.bind(this),{signal:e}),window.addEventListener("blur",this.blur.bind(this),{signal:e})},PC=function(){var e;(e=p(this,Va))==null||e.abort(),N(this,Va,null)},jb=function(){if(p(this,Ka))return;N(this,Ka,new AbortController);const e=this.combinedSignal(p(this,Ka));window.addEventListener("keydown",this.keydown.bind(this),{signal:e}),window.addEventListener("keyup",this.keyup.bind(this),{signal:e})},LC=function(){var e;(e=p(this,Ka))==null||e.abort(),N(this,Ka,null)},zb=function(){if(p(this,$a))return;N(this,$a,new AbortController);const e=this.combinedSignal(p(this,$a));document.addEventListener("copy",this.copy.bind(this),{signal:e}),document.addEventListener("cut",this.cut.bind(this),{signal:e}),document.addEventListener("paste",this.paste.bind(this),{signal:e})},Ub=function(){var e;(e=p(this,$a))==null||e.abort(),N(this,$a,null)},IC=function(){const e=this._signal;document.addEventListener("dragover",this.dragOver.bind(this),{signal:e}),document.addEventListener("drop",this.drop.bind(this),{signal:e})},li=function(e){Object.entries(e).some(([n,r])=>p(this,Od)[n]!==r)&&(this._eventBus.dispatch("annotationeditorstateschanged",{source:this,details:Object.assign(p(this,Od),e)}),p(this,Tn)===nt.HIGHLIGHT&&e.hasSelectedEditor===!1&&M(this,Oe,Bs).call(this,[[ft.HIGHLIGHT_FREE,!0]]))},Bs=function(e){this._eventBus.dispatch("annotationeditorparamschanged",{source:this,details:e})},MC=async function(){if(!p(this,Xa)){N(this,Xa,!0);const e=[];for(const t of p(this,Mn).values())e.push(t.enable());await Promise.all(e);for(const t of p(this,wn).values())t.enable()}},FC=function(){if(this.unselectAll(),p(this,Xa)){N(this,Xa,!1);for(const e of p(this,Mn).values())e.disable();for(const e of p(this,wn).values())e.disable()}},qb=function(e){const t=p(this,Mn).get(e.pageIndex);t?t.addOrRebuild(e):(this.addEditor(e),this.addToAnnotationStorage(e))},BC=function(){let e=null;for(e of p(this,xt));return e},gf=function(){if(p(this,wn).size===0)return!0;if(p(this,wn).size===1)for(const e of p(this,wn).values())return e.isEmpty();return!1},Hb=function(e){for(const t of p(this,xt))t.unselect();p(this,xt).clear();for(const t of e)t.isEmpty()||(p(this,xt).add(t),t.select());M(this,Oe,li).call(this,{hasSelectedEditor:this.hasSelection})},Ze(ac,"TRANSLATE_SMALL",1),Ze(ac,"TRANSLATE_BIG",10);let bu=ac;var kn,gs,Br,Sc,ms,ji,Cc,vs,Si,Gs,pl,ys,Za,Zr,mf,Zg;const ui=class ui{constructor(e){L(this,Zr);L(this,kn,null);L(this,gs,!1);L(this,Br,null);L(this,Sc,null);L(this,ms,null);L(this,ji,null);L(this,Cc,!1);L(this,vs,null);L(this,Si,null);L(this,Gs,null);L(this,pl,null);L(this,ys,!1);N(this,Si,e),N(this,ys,e._uiManager.useNewAltTextFlow),p(ui,Za)||N(ui,Za,Object.freeze({added:"pdfjs-editor-new-alt-text-added-button","added-label":"pdfjs-editor-new-alt-text-added-button-label",missing:"pdfjs-editor-new-alt-text-missing-button","missing-label":"pdfjs-editor-new-alt-text-missing-button-label",review:"pdfjs-editor-new-alt-text-to-review-button","review-label":"pdfjs-editor-new-alt-text-to-review-button-label"}))}static initialize(e){ui._l10n??(ui._l10n=e)}async render(){const e=N(this,Br,document.createElement("button"));e.className="altText",e.tabIndex="0";const t=N(this,Sc,document.createElement("span"));e.append(t),p(this,ys)?(e.classList.add("new"),e.setAttribute("data-l10n-id",p(ui,Za).missing),t.setAttribute("data-l10n-id",p(ui,Za)["missing-label"])):(e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button"),t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-button-label"));const n=p(this,Si)._uiManager._signal;e.addEventListener("contextmenu",ns,{signal:n}),e.addEventListener("pointerdown",s=>s.stopPropagation(),{signal:n});const r=s=>{s.preventDefault(),p(this,Si)._uiManager.editAltText(p(this,Si)),p(this,ys)&&p(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_clicked",data:{label:p(this,Zr,mf)}})};return e.addEventListener("click",r,{capture:!0,signal:n}),e.addEventListener("keydown",s=>{s.target===e&&s.key==="Enter"&&(N(this,Cc,!0),r(s))},{signal:n}),await M(this,Zr,Zg).call(this),e}finish(){p(this,Br)&&(p(this,Br).focus({focusVisible:p(this,Cc)}),N(this,Cc,!1))}isEmpty(){return p(this,ys)?p(this,kn)===null:!p(this,kn)&&!p(this,gs)}hasData(){return p(this,ys)?p(this,kn)!==null||!!p(this,Gs):this.isEmpty()}get guessedText(){return p(this,Gs)}async setGuessedText(e){p(this,kn)===null&&(N(this,Gs,e),N(this,pl,await ui._l10n.get("pdfjs-editor-new-alt-text-generated-alt-text-with-disclaimer",{generatedAltText:e})),M(this,Zr,Zg).call(this))}toggleAltTextBadge(e=!1){var t;if(!p(this,ys)||p(this,kn)){(t=p(this,vs))==null||t.remove(),N(this,vs,null);return}if(!p(this,vs)){const n=N(this,vs,document.createElement("div"));n.className="noAltTextBadge",p(this,Si).div.append(n)}p(this,vs).classList.toggle("hidden",!e)}serialize(e){let t=p(this,kn);return!e&&p(this,Gs)===t&&(t=p(this,pl)),{altText:t,decorative:p(this,gs),guessedText:p(this,Gs),textWithDisclaimer:p(this,pl)}}get data(){return{altText:p(this,kn),decorative:p(this,gs)}}set data({altText:e,decorative:t,guessedText:n,textWithDisclaimer:r,cancel:s=!1}){n&&(N(this,Gs,n),N(this,pl,r)),!(p(this,kn)===e&&p(this,gs)===t)&&(s||(N(this,kn,e),N(this,gs,t)),M(this,Zr,Zg).call(this))}toggle(e=!1){p(this,Br)&&(!e&&p(this,ji)&&(clearTimeout(p(this,ji)),N(this,ji,null)),p(this,Br).disabled=!e)}shown(){p(this,Si)._reportTelemetry({action:"pdfjs.image.alt_text.image_status_label_displayed",data:{label:p(this,Zr,mf)}})}destroy(){var e,t;(e=p(this,Br))==null||e.remove(),N(this,Br,null),N(this,Sc,null),N(this,ms,null),(t=p(this,vs))==null||t.remove(),N(this,vs,null)}};kn=new WeakMap,gs=new WeakMap,Br=new WeakMap,Sc=new WeakMap,ms=new WeakMap,ji=new WeakMap,Cc=new WeakMap,vs=new WeakMap,Si=new WeakMap,Gs=new WeakMap,pl=new WeakMap,ys=new WeakMap,Za=new WeakMap,Zr=new WeakSet,mf=function(){return p(this,kn)&&"added"||p(this,kn)===null&&this.guessedText&&"review"||"missing"},Zg=async function(){var r,s,a;const e=p(this,Br);if(!e)return;if(p(this,ys)){if(e.classList.toggle("done",!!p(this,kn)),e.setAttribute("data-l10n-id",p(ui,Za)[p(this,Zr,mf)]),(r=p(this,Sc))==null||r.setAttribute("data-l10n-id",p(ui,Za)[`${p(this,Zr,mf)}-label`]),!p(this,kn)){(s=p(this,ms))==null||s.remove();return}}else{if(!p(this,kn)&&!p(this,gs)){e.classList.remove("done"),(a=p(this,ms))==null||a.remove();return}e.classList.add("done"),e.setAttribute("data-l10n-id","pdfjs-editor-alt-text-edit-button")}let t=p(this,ms);if(!t){N(this,ms,t=document.createElement("span")),t.className="tooltip",t.setAttribute("role","tooltip"),t.id=`alt-text-tooltip-${p(this,Si).id}`;const o=100,l=p(this,Si)._uiManager._signal;l.addEventListener("abort",()=>{clearTimeout(p(this,ji)),N(this,ji,null)},{once:!0}),e.addEventListener("mouseenter",()=>{N(this,ji,setTimeout(()=>{N(this,ji,null),p(this,ms).classList.add("show"),p(this,Si)._reportTelemetry({action:"alt_text_tooltip"})},o))},{signal:l}),e.addEventListener("mouseleave",()=>{var u;p(this,ji)&&(clearTimeout(p(this,ji)),N(this,ji,null)),(u=p(this,ms))==null||u.classList.remove("show")},{signal:l})}p(this,gs)?t.setAttribute("data-l10n-id","pdfjs-editor-alt-text-decorative-tooltip"):(t.removeAttribute("data-l10n-id"),t.textContent=p(this,kn)),t.parentNode||e.append(t);const n=p(this,Si).getImageForAltText();n==null||n.setAttribute("aria-describedby",t.id)},L(ui,Za,null),Ze(ui,"_l10n",null);let Jm=ui;var Rd,gl,Pd,Ld,Id,Md,Fd,Tc,Xs,ml,Qa,Na,jC,zC,Wb;const B_=class B_{constructor({container:e,isPinchingDisabled:t=null,isPinchingStopped:n=null,onPinchStart:r=null,onPinching:s=null,onPinchEnd:a=null,signal:o}){L(this,Na);L(this,Rd);L(this,gl,!1);L(this,Pd,null);L(this,Ld);L(this,Id);L(this,Md);L(this,Fd);L(this,Tc);L(this,Xs,null);L(this,ml);L(this,Qa,null);N(this,Rd,e),N(this,Pd,n),N(this,Ld,t),N(this,Id,r),N(this,Md,s),N(this,Fd,a),N(this,ml,new AbortController),N(this,Tc,AbortSignal.any([o,p(this,ml).signal])),e.addEventListener("touchstart",M(this,Na,jC).bind(this),{passive:!1,signal:p(this,Tc)})}get MIN_TOUCH_DISTANCE_TO_PINCH(){return ot(this,"MIN_TOUCH_DISTANCE_TO_PINCH",35/(window.devicePixelRatio||1))}destroy(){var e;(e=p(this,ml))==null||e.abort(),N(this,ml,null)}};Rd=new WeakMap,gl=new WeakMap,Pd=new WeakMap,Ld=new WeakMap,Id=new WeakMap,Md=new WeakMap,Fd=new WeakMap,Tc=new WeakMap,Xs=new WeakMap,ml=new WeakMap,Qa=new WeakMap,Na=new WeakSet,jC=function(e){var r,s,a;if((r=p(this,Ld))!=null&&r.call(this)||e.touches.length<2)return;if(!p(this,Qa)){N(this,Qa,new AbortController);const o=AbortSignal.any([p(this,Tc),p(this,Qa).signal]),l=p(this,Rd),u={signal:o,passive:!1};l.addEventListener("touchmove",M(this,Na,zC).bind(this),u),l.addEventListener("touchend",M(this,Na,Wb).bind(this),u),l.addEventListener("touchcancel",M(this,Na,Wb).bind(this),u),(s=p(this,Id))==null||s.call(this)}if(Ji(e),e.touches.length!==2||(a=p(this,Pd))!=null&&a.call(this)){N(this,Xs,null);return}let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]),N(this,Xs,{touch0X:t.screenX,touch0Y:t.screenY,touch1X:n.screenX,touch1Y:n.screenY})},zC=function(e){var _;if(!p(this,Xs)||e.touches.length!==2)return;let[t,n]=e.touches;t.identifier>n.identifier&&([t,n]=[n,t]);const{screenX:r,screenY:s}=t,{screenX:a,screenY:o}=n,l=p(this,Xs),{touch0X:u,touch0Y:c,touch1X:h,touch1Y:f}=l,d=h-u,y=f-c,b=a-r,v=o-s,g=Math.hypot(b,v)||1,m=Math.hypot(d,y)||1;if(!p(this,gl)&&Math.abs(m-g)<=B_.MIN_TOUCH_DISTANCE_TO_PINCH)return;if(l.touch0X=r,l.touch0Y=s,l.touch1X=a,l.touch1Y=o,e.preventDefault(),!p(this,gl)){N(this,gl,!0);return}const w=[(r+a)/2,(s+o)/2];(_=p(this,Md))==null||_.call(this,w,m,g)},Wb=function(e){var t;p(this,Qa).abort(),N(this,Qa,null),(t=p(this,Fd))==null||t.call(this),p(this,Xs)&&(e.preventDefault(),N(this,Xs,null),N(this,gl,!1))};let ev=B_;var vl,jr,Mt,kc,Ja,Bd,yl,Fn,bl,Ks,eo,jd,wl,zi,zd,_l,Ys,bs,Dc,Oc,fr,El,Ud,Tv,Qe,$b,qd,Vb,Qg,UC,qC,Gb,Jg,Xb,HC,WC,$C,Kb,VC,Yb,GC,XC,KC,Zb,vf;const rt=class rt{constructor(e){L(this,Qe);L(this,vl,null);L(this,jr,null);L(this,Mt,null);L(this,kc,!1);L(this,Ja,null);L(this,Bd,"");L(this,yl,!1);L(this,Fn,null);L(this,bl,null);L(this,Ks,null);L(this,eo,null);L(this,jd,"");L(this,wl,!1);L(this,zi,null);L(this,zd,!1);L(this,_l,!1);L(this,Ys,!1);L(this,bs,null);L(this,Dc,0);L(this,Oc,0);L(this,fr,null);L(this,El,null);Ze(this,"_editToolbar",null);Ze(this,"_initialOptions",Object.create(null));Ze(this,"_initialData",null);Ze(this,"_isVisible",!0);Ze(this,"_uiManager",null);Ze(this,"_focusEventsAllowed",!0);L(this,Ud,!1);L(this,Tv,rt._zIndex++);this.parent=e.parent,this.id=e.id,this.width=this.height=null,this.pageIndex=e.parent.pageIndex,this.name=e.name,this.div=null,this._uiManager=e.uiManager,this.annotationElementId=null,this._willKeepAspectRatio=!1,this._initialOptions.isCentered=e.isCentered,this._structTreeParentId=null;const{rotation:t,rawDims:{pageWidth:n,pageHeight:r,pageX:s,pageY:a}}=this.parent.viewport;this.rotation=t,this.pageRotation=(360+t-this._uiManager.viewParameters.rotation)%360,this.pageDimensions=[n,r],this.pageTranslation=[s,a];const[o,l]=this.parentDimensions;this.x=e.x/o,this.y=e.y/l,this.isAttachedToDOM=!1,this.deleted=!1}static get _resizerKeyboardManager(){const e=rt.prototype._resizeWithKeyboard,t=bu.TRANSLATE_SMALL,n=bu.TRANSLATE_BIG;return ot(this,"_resizerKeyboardManager",new Kp([[["ArrowLeft","mac+ArrowLeft"],e,{args:[-t,0]}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],e,{args:[-n,0]}],[["ArrowRight","mac+ArrowRight"],e,{args:[t,0]}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],e,{args:[n,0]}],[["ArrowUp","mac+ArrowUp"],e,{args:[0,-t]}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],e,{args:[0,-n]}],[["ArrowDown","mac+ArrowDown"],e,{args:[0,t]}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],e,{args:[0,n]}],[["Escape","mac+Escape"],rt.prototype._stopResizingWithKeyboard]]))}get editorType(){return Object.getPrototypeOf(this).constructor._type}static get isDrawer(){return!1}static get _defaultLineColor(){return ot(this,"_defaultLineColor",this._colorManager.getHexCode("CanvasText"))}static deleteAnnotationElement(e){const t=new xL({id:e.parent.getNextId(),parent:e.parent,uiManager:e._uiManager});t.annotationElementId=e.annotationElementId,t.deleted=!0,t._uiManager.addToAnnotationStorage(t)}static initialize(e,t){if(rt._l10n??(rt._l10n=e),rt._l10nResizer||(rt._l10nResizer=Object.freeze({topLeft:"pdfjs-editor-resizer-top-left",topMiddle:"pdfjs-editor-resizer-top-middle",topRight:"pdfjs-editor-resizer-top-right",middleRight:"pdfjs-editor-resizer-middle-right",bottomRight:"pdfjs-editor-resizer-bottom-right",bottomMiddle:"pdfjs-editor-resizer-bottom-middle",bottomLeft:"pdfjs-editor-resizer-bottom-left",middleLeft:"pdfjs-editor-resizer-middle-left"})),rt._borderLineWidth!==-1)return;const n=getComputedStyle(document.documentElement);rt._borderLineWidth=parseFloat(n.getPropertyValue("--outline-width"))||0}static updateDefaultParams(e,t){}static get defaultPropertiesToUpdate(){return[]}static isHandlingMimeForPasting(e){return!1}static paste(e,t){Nt("Not implemented")}get propertiesToUpdate(){return[]}get _isDraggable(){return p(this,Ud)}set _isDraggable(e){var t;N(this,Ud,e),(t=this.div)==null||t.classList.toggle("draggable",e)}get isEnterHandled(){return!0}center(){const[e,t]=this.pageDimensions;switch(this.parentRotation){case 90:this.x-=this.height*t/(e*2),this.y+=this.width*e/(t*2);break;case 180:this.x+=this.width/2,this.y+=this.height/2;break;case 270:this.x+=this.height*t/(e*2),this.y-=this.width*e/(t*2);break;default:this.x-=this.width/2,this.y-=this.height/2;break}this.fixAndSetPosition()}addCommands(e){this._uiManager.addCommands(e)}get currentLayer(){return this._uiManager.currentLayer}setInBackground(){this.div.style.zIndex=0}setInForeground(){this.div.style.zIndex=p(this,Tv)}setParent(e){e!==null?(this.pageIndex=e.pageIndex,this.pageDimensions=e.pageDimensions):M(this,Qe,vf).call(this),this.parent=e}focusin(e){this._focusEventsAllowed&&(p(this,wl)?N(this,wl,!1):this.parent.setSelected(this))}focusout(e){var n;if(!this._focusEventsAllowed||!this.isAttachedToDOM)return;const t=e.relatedTarget;t!=null&&t.closest(`#${this.id}`)||(e.preventDefault(),(n=this.parent)!=null&&n.isMultipleSelection||this.commitOrRemove())}commitOrRemove(){this.isEmpty()?this.remove():this.commit()}commit(){this.addToAnnotationStorage()}addToAnnotationStorage(){this._uiManager.addToAnnotationStorage(this)}setAt(e,t,n,r){const[s,a]=this.parentDimensions;[n,r]=this.screenToPageTranslation(n,r),this.x=(e+n)/s,this.y=(t+r)/a,this.fixAndSetPosition()}translate(e,t){M(this,Qe,$b).call(this,this.parentDimensions,e,t)}translateInPage(e,t){p(this,zi)||N(this,zi,[this.x,this.y,this.width,this.height]),M(this,Qe,$b).call(this,this.pageDimensions,e,t),this.div.scrollIntoView({block:"nearest"})}drag(e,t){p(this,zi)||N(this,zi,[this.x,this.y,this.width,this.height]);const{div:n,parentDimensions:[r,s]}=this;if(this.x+=e/r,this.y+=t/s,this.parent&&(this.x<0||this.x>1||this.y<0||this.y>1)){const{x:h,y:f}=this.div.getBoundingClientRect();this.parent.findNewParent(this,h,f)&&(this.x-=Math.floor(this.x),this.y-=Math.floor(this.y))}let{x:a,y:o}=this;const[l,u]=this.getBaseTranslation();a+=l,o+=u;const{style:c}=n;c.left=`${(100*a).toFixed(2)}%`,c.top=`${(100*o).toFixed(2)}%`,this._onTranslating(a,o),n.scrollIntoView({block:"nearest"})}_onTranslating(e,t){}_onTranslated(e,t){}get _hasBeenMoved(){return!!p(this,zi)&&(p(this,zi)[0]!==this.x||p(this,zi)[1]!==this.y)}get _hasBeenResized(){return!!p(this,zi)&&(p(this,zi)[2]!==this.width||p(this,zi)[3]!==this.height)}getBaseTranslation(){const[e,t]=this.parentDimensions,{_borderLineWidth:n}=rt,r=n/e,s=n/t;switch(this.rotation){case 90:return[-r,s];case 180:return[r,s];case 270:return[r,-s];default:return[-r,-s]}}get _mustFixPosition(){return!0}fixAndSetPosition(e=this.rotation){const{div:{style:t},pageDimensions:[n,r]}=this;let{x:s,y:a,width:o,height:l}=this;if(o*=n,l*=r,s*=n,a*=r,this._mustFixPosition)switch(e){case 0:s=Math.max(0,Math.min(n-o,s)),a=Math.max(0,Math.min(r-l,a));break;case 90:s=Math.max(0,Math.min(n-l,s)),a=Math.min(r,Math.max(o,a));break;case 180:s=Math.min(n,Math.max(o,s)),a=Math.min(r,Math.max(l,a));break;case 270:s=Math.min(n,Math.max(l,s)),a=Math.max(0,Math.min(r-o,a));break}this.x=s/=n,this.y=a/=r;const[u,c]=this.getBaseTranslation();s+=u,a+=c,t.left=`${(100*s).toFixed(2)}%`,t.top=`${(100*a).toFixed(2)}%`,this.moveInDOM()}screenToPageTranslation(e,t){var n;return M(n=rt,qd,Vb).call(n,e,t,this.parentRotation)}pageTranslationToScreen(e,t){var n;return M(n=rt,qd,Vb).call(n,e,t,360-this.parentRotation)}get parentScale(){return this._uiManager.viewParameters.realScale}get parentRotation(){return(this._uiManager.viewParameters.rotation+this.pageRotation)%360}get parentDimensions(){const{parentScale:e,pageDimensions:[t,n]}=this;return[t*e,n*e]}setDims(e,t){const[n,r]=this.parentDimensions,{style:s}=this.div;s.width=`${(100*e/n).toFixed(2)}%`,p(this,yl)||(s.height=`${(100*t/r).toFixed(2)}%`)}fixDims(){const{style:e}=this.div,{height:t,width:n}=e,r=n.endsWith("%"),s=!p(this,yl)&&t.endsWith("%");if(r&&s)return;const[a,o]=this.parentDimensions;r||(e.width=`${(100*parseFloat(n)/a).toFixed(2)}%`),!p(this,yl)&&!s&&(e.height=`${(100*parseFloat(t)/o).toFixed(2)}%`)}getInitialTranslation(){return[0,0]}_onResized(){}static _round(e){return Math.round(e*1e4)/1e4}_onResizing(){}altTextFinish(){var e;(e=p(this,Mt))==null||e.finish()}async addEditToolbar(){return this._editToolbar||p(this,_l)?this._editToolbar:(this._editToolbar=new Lb(this),this.div.append(this._editToolbar.render()),p(this,Mt)&&await this._editToolbar.addAltText(p(this,Mt)),this._editToolbar)}removeEditToolbar(){var e;this._editToolbar&&(this._editToolbar.remove(),this._editToolbar=null,(e=p(this,Mt))==null||e.destroy())}addContainer(e){var n;const t=(n=this._editToolbar)==null?void 0:n.div;t?t.before(e):this.div.append(e)}getClientDimensions(){return this.div.getBoundingClientRect()}async addAltTextButton(){p(this,Mt)||(Jm.initialize(rt._l10n),N(this,Mt,new Jm(this)),p(this,vl)&&(p(this,Mt).data=p(this,vl),N(this,vl,null)),await this.addEditToolbar())}get altTextData(){var e;return(e=p(this,Mt))==null?void 0:e.data}set altTextData(e){p(this,Mt)&&(p(this,Mt).data=e)}get guessedAltText(){var e;return(e=p(this,Mt))==null?void 0:e.guessedText}async setGuessedAltText(e){var t;await((t=p(this,Mt))==null?void 0:t.setGuessedText(e))}serializeAltText(e){var t;return(t=p(this,Mt))==null?void 0:t.serialize(e)}hasAltText(){return!!p(this,Mt)&&!p(this,Mt).isEmpty()}hasAltTextData(){var e;return((e=p(this,Mt))==null?void 0:e.hasData())??!1}render(){var s;this.div=document.createElement("div"),this.div.setAttribute("data-editor-rotation",(360-this.rotation)%360),this.div.className=this.name,this.div.setAttribute("id",this.id),this.div.tabIndex=p(this,kc)?-1:0,this._isVisible||this.div.classList.add("hidden"),this.setInForeground(),M(this,Qe,Yb).call(this);const[e,t]=this.parentDimensions;this.parentRotation%180!==0&&(this.div.style.maxWidth=`${(100*t/e).toFixed(2)}%`,this.div.style.maxHeight=`${(100*e/t).toFixed(2)}%`);const[n,r]=this.getInitialTranslation();return this.translate(n,r),Qm(this,this.div,["pointerdown"]),this.isResizable&&this._uiManager._supportsPinchToZoom&&(p(this,El)||N(this,El,new ev({container:this.div,isPinchingDisabled:()=>!this.isSelected,onPinchStart:M(this,Qe,HC).bind(this),onPinching:M(this,Qe,WC).bind(this),onPinchEnd:M(this,Qe,$C).bind(this),signal:this._uiManager._signal}))),(s=this._uiManager._editorUndoBar)==null||s.hide(),this.div}pointerdown(e){const{isMac:t}=gi.platform;if(e.button!==0||e.ctrlKey&&t){e.preventDefault();return}if(N(this,wl,!0),this._isDraggable){M(this,Qe,VC).call(this,e);return}M(this,Qe,Kb).call(this,e)}get isSelected(){return this._uiManager.isSelected(this)}_onStartDragging(){}_onStopDragging(){}moveInDOM(){p(this,bs)&&clearTimeout(p(this,bs)),N(this,bs,setTimeout(()=>{var e;N(this,bs,null),(e=this.parent)==null||e.moveEditorInDOM(this)},0))}_setParentAndPosition(e,t,n){e.changeParent(this),this.x=t,this.y=n,this.fixAndSetPosition(),this._onTranslated()}getRect(e,t,n=this.rotation){const r=this.parentScale,[s,a]=this.pageDimensions,[o,l]=this.pageTranslation,u=e/r,c=t/r,h=this.x*s,f=this.y*a,d=this.width*s,y=this.height*a;switch(n){case 0:return[h+u+o,a-f-c-y+l,h+u+d+o,a-f-c+l];case 90:return[h+c+o,a-f+u+l,h+c+y+o,a-f+u+d+l];case 180:return[h-u-d+o,a-f+c+l,h-u+o,a-f+c+y+l];case 270:return[h-c-y+o,a-f-u-d+l,h-c+o,a-f-u+l];default:throw new Error("Invalid rotation")}}getRectInCurrentCoords(e,t){const[n,r,s,a]=e,o=s-n,l=a-r;switch(this.rotation){case 0:return[n,t-a,o,l];case 90:return[n,t-r,l,o];case 180:return[s,t-r,o,l];case 270:return[s,t-a,l,o];default:throw new Error("Invalid rotation")}}onceAdded(e){}isEmpty(){return!1}enableEditMode(){N(this,_l,!0)}disableEditMode(){N(this,_l,!1)}isInEditMode(){return p(this,_l)}shouldGetKeyboardEvents(){return p(this,Ys)}needsToBeRebuilt(){return this.div&&!this.isAttachedToDOM}get isOnScreen(){const{top:e,left:t,bottom:n,right:r}=this.getClientDimensions(),{innerHeight:s,innerWidth:a}=window;return t<a&&r>0&&e<s&&n>0}rebuild(){M(this,Qe,Yb).call(this)}rotate(e){}resize(){}serializeDeleted(){var e;return{id:this.annotationElementId,deleted:!0,pageIndex:this.pageIndex,popupRef:((e=this._initialData)==null?void 0:e.popupRef)||""}}serialize(e=!1,t=null){Nt("An editor must be serializable")}static async deserialize(e,t,n){const r=new this.prototype.constructor({parent:t,id:t.getNextId(),uiManager:n});r.rotation=e.rotation,N(r,vl,e.accessibilityData);const[s,a]=r.pageDimensions,[o,l,u,c]=r.getRectInCurrentCoords(e.rect,a);return r.x=o/s,r.y=l/a,r.width=u/s,r.height=c/a,r}get hasBeenModified(){return!!this.annotationElementId&&(this.deleted||this.serialize()!==null)}remove(){var e,t;if((e=p(this,eo))==null||e.abort(),N(this,eo,null),this.isEmpty()||this.commit(),this.parent?this.parent.remove(this):this._uiManager.removeEditor(this),p(this,bs)&&(clearTimeout(p(this,bs)),N(this,bs,null)),M(this,Qe,vf).call(this),this.removeEditToolbar(),p(this,fr)){for(const n of p(this,fr).values())clearTimeout(n);N(this,fr,null)}this.parent=null,(t=p(this,El))==null||t.destroy(),N(this,El,null)}get isResizable(){return!1}makeResizable(){this.isResizable&&(M(this,Qe,UC).call(this),p(this,Fn).classList.remove("hidden"),Qm(this,this.div,["keydown"]))}get toolbarPosition(){return null}keydown(e){if(!this.isResizable||e.target!==this.div||e.key!=="Enter")return;this._uiManager.setSelected(this),N(this,Ks,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const t=p(this,Fn).children;if(!p(this,jr)){N(this,jr,Array.from(t));const a=M(this,Qe,GC).bind(this),o=M(this,Qe,XC).bind(this),l=this._uiManager._signal;for(const u of p(this,jr)){const c=u.getAttribute("data-resizer-name");u.setAttribute("role","spinbutton"),u.addEventListener("keydown",a,{signal:l}),u.addEventListener("blur",o,{signal:l}),u.addEventListener("focus",M(this,Qe,KC).bind(this,c),{signal:l}),u.setAttribute("data-l10n-id",rt._l10nResizer[c])}}const n=p(this,jr)[0];let r=0;for(const a of t){if(a===n)break;r++}const s=(360-this.rotation+this.parentRotation)%360/90*(p(this,jr).length/4);if(s!==r){if(s<r)for(let o=0;o<r-s;o++)p(this,Fn).append(p(this,Fn).firstChild);else if(s>r)for(let o=0;o<s-r;o++)p(this,Fn).firstChild.before(p(this,Fn).lastChild);let a=0;for(const o of t){const u=p(this,jr)[a++].getAttribute("data-resizer-name");o.setAttribute("data-l10n-id",rt._l10nResizer[u])}}M(this,Qe,Zb).call(this,0),N(this,Ys,!0),p(this,Fn).firstChild.focus({focusVisible:!0}),e.preventDefault(),e.stopImmediatePropagation()}_resizeWithKeyboard(e,t){p(this,Ys)&&M(this,Qe,Xb).call(this,p(this,jd),{deltaX:e,deltaY:t,fromKeyboard:!0})}_stopResizingWithKeyboard(){M(this,Qe,vf).call(this),this.div.focus()}select(){var e,t,n;if(this.makeResizable(),(e=this.div)==null||e.classList.add("selectedEditor"),!this._editToolbar){this.addEditToolbar().then(()=>{var r,s;(r=this.div)!=null&&r.classList.contains("selectedEditor")&&((s=this._editToolbar)==null||s.show())});return}(t=this._editToolbar)==null||t.show(),(n=p(this,Mt))==null||n.toggleAltTextBadge(!1)}unselect(){var e,t,n,r,s;(e=p(this,Fn))==null||e.classList.add("hidden"),(t=this.div)==null||t.classList.remove("selectedEditor"),(n=this.div)!=null&&n.contains(document.activeElement)&&this._uiManager.currentLayer.div.focus({preventScroll:!0}),(r=this._editToolbar)==null||r.hide(),(s=p(this,Mt))==null||s.toggleAltTextBadge(!0)}updateParams(e,t){}disableEditing(){}enableEditing(){}enterInEditMode(){}getImageForAltText(){return null}get contentDiv(){return this.div}get isEditing(){return p(this,zd)}set isEditing(e){N(this,zd,e),this.parent&&(e?(this.parent.setSelected(this),this.parent.setActiveEditor(this)):this.parent.setActiveEditor(null))}setAspectRatio(e,t){N(this,yl,!0);const n=e/t,{style:r}=this.div;r.aspectRatio=n,r.height="auto"}static get MIN_SIZE(){return 16}static canCreateNewEmptyEditor(){return!0}get telemetryInitialData(){return{action:"added"}}get telemetryFinalData(){return null}_reportTelemetry(e,t=!1){if(t){p(this,fr)||N(this,fr,new Map);const{action:n}=e;let r=p(this,fr).get(n);r&&clearTimeout(r),r=setTimeout(()=>{this._reportTelemetry(e),p(this,fr).delete(n),p(this,fr).size===0&&N(this,fr,null)},rt._telemetryTimeout),p(this,fr).set(n,r);return}e.type||(e.type=this.editorType),this._uiManager._eventBus.dispatch("reporttelemetry",{source:this,details:{type:"editing",data:e}})}show(e=this._isVisible){this.div.classList.toggle("hidden",!e),this._isVisible=e}enable(){this.div&&(this.div.tabIndex=0),N(this,kc,!1)}disable(){this.div&&(this.div.tabIndex=-1),N(this,kc,!0)}renderAnnotationElement(e){let t=e.container.querySelector(".annotationContent");if(!t)t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),e.container.prepend(t);else if(t.nodeName==="CANVAS"){const n=t;t=document.createElement("div"),t.classList.add("annotationContent",this.editorType),n.before(t)}return t}resetAnnotationElement(e){const{firstChild:t}=e.container;(t==null?void 0:t.nodeName)==="DIV"&&t.classList.contains("annotationContent")&&t.remove()}};vl=new WeakMap,jr=new WeakMap,Mt=new WeakMap,kc=new WeakMap,Ja=new WeakMap,Bd=new WeakMap,yl=new WeakMap,Fn=new WeakMap,bl=new WeakMap,Ks=new WeakMap,eo=new WeakMap,jd=new WeakMap,wl=new WeakMap,zi=new WeakMap,zd=new WeakMap,_l=new WeakMap,Ys=new WeakMap,bs=new WeakMap,Dc=new WeakMap,Oc=new WeakMap,fr=new WeakMap,El=new WeakMap,Ud=new WeakMap,Tv=new WeakMap,Qe=new WeakSet,$b=function([e,t],n,r){[n,r]=this.screenToPageTranslation(n,r),this.x+=n/e,this.y+=r/t,this._onTranslating(this.x,this.y),this.fixAndSetPosition()},qd=new WeakSet,Vb=function(e,t,n){switch(n){case 90:return[t,-e];case 180:return[-e,-t];case 270:return[-t,e];default:return[e,t]}},Qg=function(e){switch(e){case 90:{const[t,n]=this.pageDimensions;return[0,-t/n,n/t,0]}case 180:return[-1,0,0,-1];case 270:{const[t,n]=this.pageDimensions;return[0,t/n,-n/t,0]}default:return[1,0,0,1]}},UC=function(){if(p(this,Fn))return;N(this,Fn,document.createElement("div")),p(this,Fn).classList.add("resizers");const e=this._willKeepAspectRatio?["topLeft","topRight","bottomRight","bottomLeft"]:["topLeft","topMiddle","topRight","middleRight","bottomRight","bottomMiddle","bottomLeft","middleLeft"],t=this._uiManager._signal;for(const n of e){const r=document.createElement("div");p(this,Fn).append(r),r.classList.add("resizer",n),r.setAttribute("data-resizer-name",n),r.addEventListener("pointerdown",M(this,Qe,qC).bind(this,n),{signal:t}),r.addEventListener("contextmenu",ns,{signal:t}),r.tabIndex=-1}this.div.prepend(p(this,Fn))},qC=function(e,t){var c;t.preventDefault();const{isMac:n}=gi.platform;if(t.button!==0||t.ctrlKey&&n)return;(c=p(this,Mt))==null||c.toggle(!1);const r=this._isDraggable;this._isDraggable=!1,N(this,bl,[t.screenX,t.screenY]);const s=new AbortController,a=this._uiManager.combinedSignal(s);this.parent.togglePointerEvents(!1),window.addEventListener("pointermove",M(this,Qe,Xb).bind(this,e),{passive:!0,capture:!0,signal:a}),window.addEventListener("touchmove",Ji,{passive:!1,signal:a}),window.addEventListener("contextmenu",ns,{signal:a}),N(this,Ks,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height});const o=this.parent.div.style.cursor,l=this.div.style.cursor;this.div.style.cursor=this.parent.div.style.cursor=window.getComputedStyle(t.target).cursor;const u=()=>{var h;s.abort(),this.parent.togglePointerEvents(!0),(h=p(this,Mt))==null||h.toggle(!0),this._isDraggable=r,this.parent.div.style.cursor=o,this.div.style.cursor=l,M(this,Qe,Jg).call(this)};window.addEventListener("pointerup",u,{signal:a}),window.addEventListener("blur",u,{signal:a})},Gb=function(e,t,n,r){this.width=n,this.height=r,this.x=e,this.y=t;const[s,a]=this.parentDimensions;this.setDims(s*n,a*r),this.fixAndSetPosition(),this._onResized()},Jg=function(){if(!p(this,Ks))return;const{savedX:e,savedY:t,savedWidth:n,savedHeight:r}=p(this,Ks);N(this,Ks,null);const s=this.x,a=this.y,o=this.width,l=this.height;s===e&&a===t&&o===n&&l===r||this.addCommands({cmd:M(this,Qe,Gb).bind(this,s,a,o,l),undo:M(this,Qe,Gb).bind(this,e,t,n,r),mustExec:!0})},Xb=function(e,t){const[n,r]=this.parentDimensions,s=this.x,a=this.y,o=this.width,l=this.height,u=rt.MIN_SIZE/n,c=rt.MIN_SIZE/r,h=M(this,Qe,Qg).call(this,this.rotation),f=($,G)=>[h[0]*$+h[2]*G,h[1]*$+h[3]*G],d=M(this,Qe,Qg).call(this,360-this.rotation),y=($,G)=>[d[0]*$+d[2]*G,d[1]*$+d[3]*G];let b,v,g=!1,m=!1;switch(e){case"topLeft":g=!0,b=($,G)=>[0,0],v=($,G)=>[$,G];break;case"topMiddle":b=($,G)=>[$/2,0],v=($,G)=>[$/2,G];break;case"topRight":g=!0,b=($,G)=>[$,0],v=($,G)=>[0,G];break;case"middleRight":m=!0,b=($,G)=>[$,G/2],v=($,G)=>[0,G/2];break;case"bottomRight":g=!0,b=($,G)=>[$,G],v=($,G)=>[0,0];break;case"bottomMiddle":b=($,G)=>[$/2,G],v=($,G)=>[$/2,0];break;case"bottomLeft":g=!0,b=($,G)=>[0,G],v=($,G)=>[$,0];break;case"middleLeft":m=!0,b=($,G)=>[0,G/2],v=($,G)=>[$,G/2];break}const w=b(o,l),_=v(o,l);let E=f(..._);const x=rt._round(s+E[0]),A=rt._round(a+E[1]);let S=1,O=1,C,k;if(t.fromKeyboard)({deltaX:C,deltaY:k}=t);else{const{screenX:$,screenY:G}=t,[Z,K]=p(this,bl);[C,k]=this.screenToPageTranslation($-Z,G-K),p(this,bl)[0]=$,p(this,bl)[1]=G}if([C,k]=y(C/n,k/r),g){const $=Math.hypot(o,l);S=O=Math.max(Math.min(Math.hypot(_[0]-w[0]-C,_[1]-w[1]-k)/$,1/o,1/l),u/o,c/l)}else m?S=Math.max(u,Math.min(1,Math.abs(_[0]-w[0]-C)))/o:O=Math.max(c,Math.min(1,Math.abs(_[1]-w[1]-k)))/l;const D=rt._round(o*S),R=rt._round(l*O);E=f(...v(D,R));const F=x-E[0],H=A-E[1];p(this,zi)||N(this,zi,[this.x,this.y,this.width,this.height]),this.width=D,this.height=R,this.x=F,this.y=H,this.setDims(n*D,r*R),this.fixAndSetPosition(),this._onResizing()},HC=function(){var e;N(this,Ks,{savedX:this.x,savedY:this.y,savedWidth:this.width,savedHeight:this.height}),(e=p(this,Mt))==null||e.toggle(!1),this.parent.togglePointerEvents(!1)},WC=function(e,t,n){let s=.7*(n/t)+1-.7;if(s===1)return;const a=M(this,Qe,Qg).call(this,this.rotation),o=(x,A)=>[a[0]*x+a[2]*A,a[1]*x+a[3]*A],[l,u]=this.parentDimensions,c=this.x,h=this.y,f=this.width,d=this.height,y=rt.MIN_SIZE/l,b=rt.MIN_SIZE/u;s=Math.max(Math.min(s,1/f,1/d),y/f,b/d);const v=rt._round(f*s),g=rt._round(d*s);if(v===f&&g===d)return;p(this,zi)||N(this,zi,[c,h,f,d]);const m=o(f/2,d/2),w=rt._round(c+m[0]),_=rt._round(h+m[1]),E=o(v/2,g/2);this.x=w-E[0],this.y=_-E[1],this.width=v,this.height=g,this.setDims(l*v,u*g),this.fixAndSetPosition(),this._onResizing()},$C=function(){var e;(e=p(this,Mt))==null||e.toggle(!0),this.parent.togglePointerEvents(!0),M(this,Qe,Jg).call(this)},Kb=function(e){const{isMac:t}=gi.platform;e.ctrlKey&&!t||e.shiftKey||e.metaKey&&t?this.parent.toggleSelected(this):this.parent.setSelected(this)},VC=function(e){const{isSelected:t}=this;this._uiManager.setUpDragSession();let n=!1;const r=new AbortController,s=this._uiManager.combinedSignal(r),a={capture:!0,passive:!1,signal:s},o=u=>{r.abort(),N(this,Ja,null),N(this,wl,!1),this._uiManager.endDragSession()||M(this,Qe,Kb).call(this,u),n&&this._onStopDragging()};t&&(N(this,Dc,e.clientX),N(this,Oc,e.clientY),N(this,Ja,e.pointerId),N(this,Bd,e.pointerType),window.addEventListener("pointermove",u=>{n||(n=!0,this._onStartDragging());const{clientX:c,clientY:h,pointerId:f}=u;if(f!==p(this,Ja)){Ji(u);return}const[d,y]=this.screenToPageTranslation(c-p(this,Dc),h-p(this,Oc));N(this,Dc,c),N(this,Oc,h),this._uiManager.dragSelectedEditors(d,y)},a),window.addEventListener("touchmove",Ji,a),window.addEventListener("pointerdown",u=>{u.pointerType===p(this,Bd)&&(p(this,El)||u.isPrimary)&&o(u),Ji(u)},a));const l=u=>{if(!p(this,Ja)||p(this,Ja)===u.pointerId){o(u);return}Ji(u)};window.addEventListener("pointerup",l,{signal:s}),window.addEventListener("blur",l,{signal:s})},Yb=function(){if(p(this,eo)||!this.div)return;N(this,eo,new AbortController);const e=this._uiManager.combinedSignal(p(this,eo));this.div.addEventListener("focusin",this.focusin.bind(this),{signal:e}),this.div.addEventListener("focusout",this.focusout.bind(this),{signal:e})},GC=function(e){rt._resizerKeyboardManager.exec(this,e)},XC=function(e){var t;p(this,Ys)&&((t=e.relatedTarget)==null?void 0:t.parentNode)!==p(this,Fn)&&M(this,Qe,vf).call(this)},KC=function(e){N(this,jd,p(this,Ys)?e:"")},Zb=function(e){if(p(this,jr))for(const t of p(this,jr))t.tabIndex=e},vf=function(){N(this,Ys,!1),M(this,Qe,Zb).call(this,-1),M(this,Qe,Jg).call(this)},L(rt,qd),Ze(rt,"_l10n",null),Ze(rt,"_l10nResizer",null),Ze(rt,"_borderLineWidth",-1),Ze(rt,"_colorManager",new Fb),Ze(rt,"_zIndex",1),Ze(rt,"_telemetryTimeout",1e3);let Xt=rt;class xL extends Xt{constructor(e){super(e),this.annotationElementId=e.annotationElementId,this.deleted=!0}serialize(){return this.serializeDeleted()}}const wE=3285377520,lr=4294901760,as=65535;class YC{constructor(e){this.h1=e?e&4294967295:wE,this.h2=e?e&4294967295:wE}update(e){let t,n;if(typeof e=="string"){t=new Uint8Array(e.length*2),n=0;for(let b=0,v=e.length;b<v;b++){const g=e.charCodeAt(b);g<=255?t[n++]=g:(t[n++]=g>>>8,t[n++]=g&255)}}else if(ArrayBuffer.isView(e))t=e.slice(),n=t.byteLength;else throw new Error("Invalid data format, must be a string or TypedArray.");const r=n>>2,s=n-r*4,a=new Uint32Array(t.buffer,0,r);let o=0,l=0,u=this.h1,c=this.h2;const h=3432918353,f=461845907,d=h&as,y=f&as;for(let b=0;b<r;b++)b&1?(o=a[b],o=o*h&lr|o*d&as,o=o<<15|o>>>17,o=o*f&lr|o*y&as,u^=o,u=u<<13|u>>>19,u=u*5+3864292196):(l=a[b],l=l*h&lr|l*d&as,l=l<<15|l>>>17,l=l*f&lr|l*y&as,c^=l,c=c<<13|c>>>19,c=c*5+3864292196);switch(o=0,s){case 3:o^=t[r*4+2]<<16;case 2:o^=t[r*4+1]<<8;case 1:o^=t[r*4],o=o*h&lr|o*d&as,o=o<<15|o>>>17,o=o*f&lr|o*y&as,r&1?u^=o:c^=o}this.h1=u,this.h2=c}hexdigest(){let e=this.h1,t=this.h2;return e^=t>>>1,e=e*3981806797&lr|e*36045&as,t=t*4283543511&lr|((t<<16|e>>>16)*2950163797&lr)>>>16,e^=t>>>1,e=e*444984403&lr|e*60499&as,t=t*3301882366&lr|((t<<16|e>>>16)*3120437893&lr)>>>16,e^=t>>>1,(e>>>0).toString(16).padStart(8,"0")+(t>>>0).toString(16).padStart(8,"0")}}const Qb=Object.freeze({map:null,hash:"",transfer:void 0});var Al,xl,Dn,kv,ZC;class c_{constructor(){L(this,kv);L(this,Al,!1);L(this,xl,null);L(this,Dn,new Map);this.onSetModified=null,this.onResetModified=null,this.onAnnotationEditor=null}getValue(e,t){const n=p(this,Dn).get(e);return n===void 0?t:Object.assign(t,n)}getRawValue(e){return p(this,Dn).get(e)}remove(e){if(p(this,Dn).delete(e),p(this,Dn).size===0&&this.resetModified(),typeof this.onAnnotationEditor=="function"){for(const t of p(this,Dn).values())if(t instanceof Xt)return;this.onAnnotationEditor(null)}}setValue(e,t){const n=p(this,Dn).get(e);let r=!1;if(n!==void 0)for(const[s,a]of Object.entries(t))n[s]!==a&&(r=!0,n[s]=a);else r=!0,p(this,Dn).set(e,t);r&&M(this,kv,ZC).call(this),t instanceof Xt&&typeof this.onAnnotationEditor=="function"&&this.onAnnotationEditor(t.constructor._type)}has(e){return p(this,Dn).has(e)}getAll(){return p(this,Dn).size>0?r_(p(this,Dn)):null}setAll(e){for(const[t,n]of Object.entries(e))this.setValue(t,n)}get size(){return p(this,Dn).size}resetModified(){p(this,Al)&&(N(this,Al,!1),typeof this.onResetModified=="function"&&this.onResetModified())}get print(){return new QC(this)}get serializable(){if(p(this,Dn).size===0)return Qb;const e=new Map,t=new YC,n=[],r=Object.create(null);let s=!1;for(const[a,o]of p(this,Dn)){const l=o instanceof Xt?o.serialize(!1,r):o;l&&(e.set(a,l),t.update(`${a}:${JSON.stringify(l)}`),s||(s=!!l.bitmap))}if(s)for(const a of e.values())a.bitmap&&n.push(a.bitmap);return e.size>0?{map:e,hash:t.hexdigest(),transfer:n}:Qb}get editorStats(){let e=null;const t=new Map;for(const n of p(this,Dn).values()){if(!(n instanceof Xt))continue;const r=n.telemetryFinalData;if(!r)continue;const{type:s}=r;t.has(s)||t.set(s,Object.getPrototypeOf(n).constructor),e||(e=Object.create(null));const a=e[s]||(e[s]=new Map);for(const[o,l]of Object.entries(r)){if(o==="type")continue;let u=a.get(o);u||(u=new Map,a.set(o,u));const c=u.get(l)??0;u.set(l,c+1)}}for(const[n,r]of t)e[n]=r.computeTelemetryFinalData(e[n]);return e}resetModifiedIds(){N(this,xl,null)}get modifiedIds(){if(p(this,xl))return p(this,xl);const e=[];for(const t of p(this,Dn).values())!(t instanceof Xt)||!t.annotationElementId||!t.serialize()||e.push(t.annotationElementId);return N(this,xl,{ids:new Set(e),hash:e.join(",")})}}Al=new WeakMap,xl=new WeakMap,Dn=new WeakMap,kv=new WeakSet,ZC=function(){p(this,Al)||(N(this,Al,!0),typeof this.onSetModified=="function"&&this.onSetModified())};var Hd;class QC extends c_{constructor(t){super();L(this,Hd);const{map:n,hash:r,transfer:s}=t.serializable,a=structuredClone(n,s?{transfer:s}:null);N(this,Hd,{map:a,hash:r,transfer:s})}get print(){Nt("Should not call PrintAnnotationStorage.print")}get serializable(){return p(this,Hd)}get modifiedIds(){return ot(this,"modifiedIds",{ids:new Set,hash:""})}}Hd=new WeakMap;var Nc;class SL{constructor({ownerDocument:e=globalThis.document,styleElement:t=null}){L(this,Nc,new Set);this._document=e,this.nativeFontFaces=new Set,this.styleElement=null,this.loadingRequests=[],this.loadTestFontId=0}addNativeFontFace(e){this.nativeFontFaces.add(e),this._document.fonts.add(e)}removeNativeFontFace(e){this.nativeFontFaces.delete(e),this._document.fonts.delete(e)}insertRule(e){this.styleElement||(this.styleElement=this._document.createElement("style"),this._document.documentElement.getElementsByTagName("head")[0].append(this.styleElement));const t=this.styleElement.sheet;t.insertRule(e,t.cssRules.length)}clear(){for(const e of this.nativeFontFaces)this._document.fonts.delete(e);this.nativeFontFaces.clear(),p(this,Nc).clear(),this.styleElement&&(this.styleElement.remove(),this.styleElement=null)}async loadSystemFont({systemFontInfo:e,_inspectFont:t}){if(!(!e||p(this,Nc).has(e.loadedName))){if(dn(!this.disableFontFace,"loadSystemFont shouldn't be called when `disableFontFace` is set."),this.isFontLoadingAPISupported){const{loadedName:n,src:r,style:s}=e,a=new FontFace(n,r,s);this.addNativeFontFace(a);try{await a.load(),p(this,Nc).add(n),t==null||t(e)}catch{it(`Cannot load system font: ${e.baseFontName}, installing it could help to improve PDF rendering.`),this.removeNativeFontFace(a)}return}Nt("Not implemented: loadSystemFont without the Font Loading API.")}}async bind(e){if(e.attached||e.missingFile&&!e.systemFontInfo)return;if(e.attached=!0,e.systemFontInfo){await this.loadSystemFont(e);return}if(this.isFontLoadingAPISupported){const n=e.createNativeFontFace();if(n){this.addNativeFontFace(n);try{await n.loaded}catch(r){throw it(`Failed to load font '${n.family}': '${r}'.`),e.disableFontFace=!0,r}}return}const t=e.createFontFaceRule();if(t){if(this.insertRule(t),this.isSyncFontLoadingSupported)return;await new Promise(n=>{const r=this._queueLoadingCallback(n);this._prepareFontLoadEvent(e,r)})}}get isFontLoadingAPISupported(){var t;const e=!!((t=this._document)!=null&&t.fonts);return ot(this,"isFontLoadingAPISupported",e)}get isSyncFontLoadingSupported(){let e=!1;return(ri||typeof navigator<"u"&&typeof(navigator==null?void 0:navigator.userAgent)=="string"&&/Mozilla\/5.0.*?rv:\d+.*? Gecko/.test(navigator.userAgent))&&(e=!0),ot(this,"isSyncFontLoadingSupported",e)}_queueLoadingCallback(e){function t(){for(dn(!r.done,"completeRequest() cannot be called twice."),r.done=!0;n.length>0&&n[0].done;){const s=n.shift();setTimeout(s.callback,0)}}const{loadingRequests:n}=this,r={done:!1,complete:t,callback:e};return n.push(r),r}get _loadTestFont(){const e=atob("T1RUTwALAIAAAwAwQ0ZGIDHtZg4AAAOYAAAAgUZGVE1lkzZwAAAEHAAAABxHREVGABQAFQAABDgAAAAeT1MvMlYNYwkAAAEgAAAAYGNtYXABDQLUAAACNAAAAUJoZWFk/xVFDQAAALwAAAA2aGhlYQdkA+oAAAD0AAAAJGhtdHgD6AAAAAAEWAAAAAZtYXhwAAJQAAAAARgAAAAGbmFtZVjmdH4AAAGAAAAAsXBvc3T/hgAzAAADeAAAACAAAQAAAAEAALZRFsRfDzz1AAsD6AAAAADOBOTLAAAAAM4KHDwAAAAAA+gDIQAAAAgAAgAAAAAAAAABAAADIQAAAFoD6AAAAAAD6AABAAAAAAAAAAAAAAAAAAAAAQAAUAAAAgAAAAQD6AH0AAUAAAKKArwAAACMAooCvAAAAeAAMQECAAACAAYJAAAAAAAAAAAAAQAAAAAAAAAAAAAAAFBmRWQAwAAuAC4DIP84AFoDIQAAAAAAAQAAAAAAAAAAACAAIAABAAAADgCuAAEAAAAAAAAAAQAAAAEAAAAAAAEAAQAAAAEAAAAAAAIAAQAAAAEAAAAAAAMAAQAAAAEAAAAAAAQAAQAAAAEAAAAAAAUAAQAAAAEAAAAAAAYAAQAAAAMAAQQJAAAAAgABAAMAAQQJAAEAAgABAAMAAQQJAAIAAgABAAMAAQQJAAMAAgABAAMAAQQJAAQAAgABAAMAAQQJAAUAAgABAAMAAQQJAAYAAgABWABYAAAAAAAAAwAAAAMAAAAcAAEAAAAAADwAAwABAAAAHAAEACAAAAAEAAQAAQAAAC7//wAAAC7////TAAEAAAAAAAABBgAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAD/gwAyAAAAAQAAAAAAAAAAAAAAAAAAAAABAAQEAAEBAQJYAAEBASH4DwD4GwHEAvgcA/gXBIwMAYuL+nz5tQXkD5j3CBLnEQACAQEBIVhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYWFhYAAABAQAADwACAQEEE/t3Dov6fAH6fAT+fPp8+nwHDosMCvm1Cvm1DAz6fBQAAAAAAAABAAAAAMmJbzEAAAAAzgTjFQAAAADOBOQpAAEAAAAAAAAADAAUAAQAAAABAAAAAgABAAAAAAAAAAAD6AAAAAAAAA==");return ot(this,"_loadTestFont",e)}_prepareFontLoadEvent(e,t){function n(_,E){return _.charCodeAt(E)<<24|_.charCodeAt(E+1)<<16|_.charCodeAt(E+2)<<8|_.charCodeAt(E+3)&255}function r(_,E,x,A){const S=_.substring(0,E),O=_.substring(E+x);return S+A+O}let s,a;const o=this._document.createElement("canvas");o.width=1,o.height=1;const l=o.getContext("2d");let u=0;function c(_,E){if(++u>30){it("Load test font never loaded."),E();return}if(l.font="30px "+_,l.fillText(".",0,20),l.getImageData(0,0,1,1).data[3]>0){E();return}setTimeout(c.bind(null,_,E))}const h=`lt${Date.now()}${this.loadTestFontId++}`;let f=this._loadTestFont;f=r(f,976,h.length,h);const y=16,b=1482184792;let v=n(f,y);for(s=0,a=h.length-3;s<a;s+=4)v=v-b+n(h,s)|0;s<h.length&&(v=v-b+n(h+"XXX",s)|0),f=r(f,y,4,cL(v));const g=`url(data:font/opentype;base64,${btoa(f)});`,m=`@font-face {font-family:"${h}";src:${g}}`;this.insertRule(m);const w=this._document.createElement("div");w.style.visibility="hidden",w.style.width=w.style.height="10px",w.style.position="absolute",w.style.top=w.style.left="0px";for(const _ of[e.loadedName,h]){const E=this._document.createElement("span");E.textContent="Hi",E.style.fontFamily=_,w.append(E)}this._document.body.append(w),c(h,()=>{w.remove(),t.complete()})}}Nc=new WeakMap;class CL{constructor(e,{disableFontFace:t=!1,fontExtraProperties:n=!1,inspectFont:r=null}){this.compiledGlyphs=Object.create(null);for(const s in e)this[s]=e[s];this.disableFontFace=t===!0,this.fontExtraProperties=n===!0,this._inspectFont=r}createNativeFontFace(){var t;if(!this.data||this.disableFontFace)return null;let e;if(!this.cssFontInfo)e=new FontFace(this.loadedName,this.data,{});else{const n={weight:this.cssFontInfo.fontWeight};this.cssFontInfo.italicAngle&&(n.style=`oblique ${this.cssFontInfo.italicAngle}deg`),e=new FontFace(this.cssFontInfo.fontFamily,this.data,n)}return(t=this._inspectFont)==null||t.call(this,this),e}createFontFaceRule(){var n;if(!this.data||this.disableFontFace)return null;const e=`url(data:${this.mimetype};base64,${mL(this.data)});`;let t;if(!this.cssFontInfo)t=`@font-face {font-family:"${this.loadedName}";src:${e}}`;else{let r=`font-weight: ${this.cssFontInfo.fontWeight};`;this.cssFontInfo.italicAngle&&(r+=`font-style: oblique ${this.cssFontInfo.italicAngle}deg;`),t=`@font-face {font-family:"${this.cssFontInfo.fontFamily}";${r}src:${e}}`}return(n=this._inspectFont)==null||n.call(this,this,e),t}getPathGenerator(e,t){if(this.compiledGlyphs[t]!==void 0)return this.compiledGlyphs[t];const n=this.loadedName+"_path_"+t;let r;try{r=e.get(n)}catch(a){it(`getPathGenerator - ignoring character: "${a}".`)}const s=new Path2D(r||"");return this.fontExtraProperties||e.delete(n),this.compiledGlyphs[t]=s}}const Sg={DATA:1,ERROR:2},hn={CANCEL:1,CANCEL_COMPLETE:2,CLOSE:3,ENQUEUE:4,ERROR:5,PULL:6,PULL_COMPLETE:7,START_COMPLETE:8};function _E(){}function Ai(i){if(i instanceof Fo||i instanceof Nb||i instanceof ld||i instanceof vE||i instanceof Zm||i instanceof l0)return i;switch(i instanceof Error||typeof i=="object"&&i!==null||Nt('wrapReason: Expected "reason" to be a (possibly cloned) Error.'),i.name){case"AbortException":return new Fo(i.message);case"InvalidPDFException":return new Nb(i.message);case"MissingPDFException":return new ld(i.message);case"PasswordException":return new vE(i.message,i.code);case"UnexpectedResponseException":return new Zm(i.message,i.status);case"UnknownErrorException":return new l0(i.message,i.details)}return new l0(i.message,i.toString())}var Rc,Ar,JC,eT,tT,em;class yf{constructor(e,t,n){L(this,Ar);L(this,Rc,new AbortController);this.sourceName=e,this.targetName=t,this.comObj=n,this.callbackId=1,this.streamId=1,this.streamSinks=Object.create(null),this.streamControllers=Object.create(null),this.callbackCapabilities=Object.create(null),this.actionHandler=Object.create(null),n.addEventListener("message",M(this,Ar,JC).bind(this),{signal:p(this,Rc).signal})}on(e,t){const n=this.actionHandler;if(n[e])throw new Error(`There is already an actionName called "${e}"`);n[e]=t}send(e,t,n){this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,data:t},n)}sendWithPromise(e,t,n){const r=this.callbackId++,s=Promise.withResolvers();this.callbackCapabilities[r]=s;try{this.comObj.postMessage({sourceName:this.sourceName,targetName:this.targetName,action:e,callbackId:r,data:t},n)}catch(a){s.reject(a)}return s.promise}sendWithStream(e,t,n,r){const s=this.streamId++,a=this.sourceName,o=this.targetName,l=this.comObj;return new ReadableStream({start:u=>{const c=Promise.withResolvers();return this.streamControllers[s]={controller:u,startCall:c,pullCall:null,cancelCall:null,isClosed:!1},l.postMessage({sourceName:a,targetName:o,action:e,streamId:s,data:t,desiredSize:u.desiredSize},r),c.promise},pull:u=>{const c=Promise.withResolvers();return this.streamControllers[s].pullCall=c,l.postMessage({sourceName:a,targetName:o,stream:hn.PULL,streamId:s,desiredSize:u.desiredSize}),c.promise},cancel:u=>{dn(u instanceof Error,"cancel must have a valid reason");const c=Promise.withResolvers();return this.streamControllers[s].cancelCall=c,this.streamControllers[s].isClosed=!0,l.postMessage({sourceName:a,targetName:o,stream:hn.CANCEL,streamId:s,reason:Ai(u)}),c.promise}},n)}destroy(){var e;(e=p(this,Rc))==null||e.abort(),N(this,Rc,null)}}Rc=new WeakMap,Ar=new WeakSet,JC=function({data:e}){if(e.targetName!==this.sourceName)return;if(e.stream){M(this,Ar,tT).call(this,e);return}if(e.callback){const n=e.callbackId,r=this.callbackCapabilities[n];if(!r)throw new Error(`Cannot resolve callback ${n}`);if(delete this.callbackCapabilities[n],e.callback===Sg.DATA)r.resolve(e.data);else if(e.callback===Sg.ERROR)r.reject(Ai(e.reason));else throw new Error("Unexpected callback case");return}const t=this.actionHandler[e.action];if(!t)throw new Error(`Unknown action from worker: ${e.action}`);if(e.callbackId){const n=this.sourceName,r=e.sourceName,s=this.comObj;Promise.try(t,e.data).then(function(a){s.postMessage({sourceName:n,targetName:r,callback:Sg.DATA,callbackId:e.callbackId,data:a})},function(a){s.postMessage({sourceName:n,targetName:r,callback:Sg.ERROR,callbackId:e.callbackId,reason:Ai(a)})});return}if(e.streamId){M(this,Ar,eT).call(this,e);return}t(e.data)},eT=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this,o=this.actionHandler[e.action],l={enqueue(u,c=1,h){if(this.isCancelled)return;const f=this.desiredSize;this.desiredSize-=c,f>0&&this.desiredSize<=0&&(this.sinkCapability=Promise.withResolvers(),this.ready=this.sinkCapability.promise),s.postMessage({sourceName:n,targetName:r,stream:hn.ENQUEUE,streamId:t,chunk:u},h)},close(){this.isCancelled||(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:hn.CLOSE,streamId:t}),delete a.streamSinks[t])},error(u){dn(u instanceof Error,"error must have a valid reason"),!this.isCancelled&&(this.isCancelled=!0,s.postMessage({sourceName:n,targetName:r,stream:hn.ERROR,streamId:t,reason:Ai(u)}))},sinkCapability:Promise.withResolvers(),onPull:null,onCancel:null,isCancelled:!1,desiredSize:e.desiredSize,ready:null};l.sinkCapability.resolve(),l.ready=l.sinkCapability.promise,this.streamSinks[t]=l,Promise.try(o,e.data,l).then(function(){s.postMessage({sourceName:n,targetName:r,stream:hn.START_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:r,stream:hn.START_COMPLETE,streamId:t,reason:Ai(u)})})},tT=function(e){const t=e.streamId,n=this.sourceName,r=e.sourceName,s=this.comObj,a=this.streamControllers[t],o=this.streamSinks[t];switch(e.stream){case hn.START_COMPLETE:e.success?a.startCall.resolve():a.startCall.reject(Ai(e.reason));break;case hn.PULL_COMPLETE:e.success?a.pullCall.resolve():a.pullCall.reject(Ai(e.reason));break;case hn.PULL:if(!o){s.postMessage({sourceName:n,targetName:r,stream:hn.PULL_COMPLETE,streamId:t,success:!0});break}o.desiredSize<=0&&e.desiredSize>0&&o.sinkCapability.resolve(),o.desiredSize=e.desiredSize,Promise.try(o.onPull||_E).then(function(){s.postMessage({sourceName:n,targetName:r,stream:hn.PULL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:r,stream:hn.PULL_COMPLETE,streamId:t,reason:Ai(u)})});break;case hn.ENQUEUE:if(dn(a,"enqueue should have stream controller"),a.isClosed)break;a.controller.enqueue(e.chunk);break;case hn.CLOSE:if(dn(a,"close should have stream controller"),a.isClosed)break;a.isClosed=!0,a.controller.close(),M(this,Ar,em).call(this,a,t);break;case hn.ERROR:dn(a,"error should have stream controller"),a.controller.error(Ai(e.reason)),M(this,Ar,em).call(this,a,t);break;case hn.CANCEL_COMPLETE:e.success?a.cancelCall.resolve():a.cancelCall.reject(Ai(e.reason)),M(this,Ar,em).call(this,a,t);break;case hn.CANCEL:if(!o)break;const l=Ai(e.reason);Promise.try(o.onCancel||_E,l).then(function(){s.postMessage({sourceName:n,targetName:r,stream:hn.CANCEL_COMPLETE,streamId:t,success:!0})},function(u){s.postMessage({sourceName:n,targetName:r,stream:hn.CANCEL_COMPLETE,streamId:t,reason:Ai(u)})}),o.sinkCapability.reject(l),o.isCancelled=!0,delete this.streamSinks[t];break;default:throw new Error("Unexpected stream case")}},em=async function(e,t){var n,r,s;await Promise.allSettled([(n=e.startCall)==null?void 0:n.promise,(r=e.pullCall)==null?void 0:r.promise,(s=e.cancelCall)==null?void 0:s.promise]),delete this.streamControllers[t]};var Wd;class nT{constructor({enableHWA:e=!1}){L(this,Wd,!1);N(this,Wd,e)}create(e,t){if(e<=0||t<=0)throw new Error("Invalid canvas size");const n=this._createCanvas(e,t);return{canvas:n,context:n.getContext("2d",{willReadFrequently:!p(this,Wd)})}}reset(e,t,n){if(!e.canvas)throw new Error("Canvas is not specified");if(t<=0||n<=0)throw new Error("Invalid canvas size");e.canvas.width=t,e.canvas.height=n}destroy(e){if(!e.canvas)throw new Error("Canvas is not specified");e.canvas.width=0,e.canvas.height=0,e.canvas=null,e.context=null}_createCanvas(e,t){Nt("Abstract method `_createCanvas` called.")}}Wd=new WeakMap;class TL extends nT{constructor({ownerDocument:e=globalThis.document,enableHWA:t=!1}){super({enableHWA:t}),this._document=e}_createCanvas(e,t){const n=this._document.createElement("canvas");return n.width=e,n.height=t,n}}class iT{constructor({baseUrl:e=null,isCompressed:t=!0}){this.baseUrl=e,this.isCompressed=t}async fetch({name:e}){if(!this.baseUrl)throw new Error("Ensure that the `cMapUrl` and `cMapPacked` API parameters are provided.");if(!e)throw new Error("CMap name must be specified.");const t=this.baseUrl+e+(this.isCompressed?".bcmap":"");return this._fetch(t).then(n=>({cMapData:n,isCompressed:this.isCompressed})).catch(n=>{throw new Error(`Unable to load ${this.isCompressed?"binary ":""}CMap at: ${t}`)})}async _fetch(e){Nt("Abstract method `_fetch` called.")}}class rT extends iT{async _fetch(e){const t=await cy(e,this.isCompressed?"arraybuffer":"text");return t instanceof ArrayBuffer?new Uint8Array(t):uy(t)}}class sT{addFilter(e){return"none"}addHCMFilter(e,t){return"none"}addAlphaFilter(e){return"none"}addLuminosityFilter(e){return"none"}addHighlightHCMFilter(e,t,n,r,s){return"none"}destroy(e=!1){}}var Sl,Pc,Zs,Qs,Jn,Cl,Tl,Fe,Yn,bf,Fu,tm,Bu,aT,Jb,ju,wf,_f,e1,Ef;class kL extends sT{constructor({docId:t,ownerDocument:n=globalThis.document}){super();L(this,Fe);L(this,Sl);L(this,Pc);L(this,Zs);L(this,Qs);L(this,Jn);L(this,Cl);L(this,Tl,0);N(this,Qs,t),N(this,Jn,n)}addFilter(t){if(!t)return"none";let n=p(this,Fe,Yn).get(t);if(n)return n;const[r,s,a]=M(this,Fe,tm).call(this,t),o=t.length===1?r:`${r}${s}${a}`;if(n=p(this,Fe,Yn).get(o),n)return p(this,Fe,Yn).set(t,n),n;const l=`g_${p(this,Qs)}_transfer_map_${oi(this,Tl)._++}`,u=M(this,Fe,Bu).call(this,l);p(this,Fe,Yn).set(t,u),p(this,Fe,Yn).set(o,u);const c=M(this,Fe,ju).call(this,l);return M(this,Fe,_f).call(this,r,s,a,c),u}addHCMFilter(t,n){var y;const r=`${t}-${n}`,s="base";let a=p(this,Fe,bf).get(s);if((a==null?void 0:a.key)===r||(a?((y=a.filter)==null||y.remove(),a.key=r,a.url="none",a.filter=null):(a={key:r,url:"none",filter:null},p(this,Fe,bf).set(s,a)),!t||!n))return a.url;const o=M(this,Fe,Ef).call(this,t);t=$e.makeHexColor(...o);const l=M(this,Fe,Ef).call(this,n);if(n=$e.makeHexColor(...l),p(this,Fe,Fu).style.color="",t==="#000000"&&n==="#ffffff"||t===n)return a.url;const u=new Array(256);for(let b=0;b<=255;b++){const v=b/255;u[b]=v<=.03928?v/12.92:((v+.055)/1.055)**2.4}const c=u.join(","),h=`g_${p(this,Qs)}_hcm_filter`,f=a.filter=M(this,Fe,ju).call(this,h);M(this,Fe,_f).call(this,c,c,c,f),M(this,Fe,Jb).call(this,f);const d=(b,v)=>{const g=o[b]/255,m=l[b]/255,w=new Array(v+1);for(let _=0;_<=v;_++)w[_]=g+_/v*(m-g);return w.join(",")};return M(this,Fe,_f).call(this,d(0,5),d(1,5),d(2,5),f),a.url=M(this,Fe,Bu).call(this,h),a.url}addAlphaFilter(t){let n=p(this,Fe,Yn).get(t);if(n)return n;const[r]=M(this,Fe,tm).call(this,[t]),s=`alpha_${r}`;if(n=p(this,Fe,Yn).get(s),n)return p(this,Fe,Yn).set(t,n),n;const a=`g_${p(this,Qs)}_alpha_map_${oi(this,Tl)._++}`,o=M(this,Fe,Bu).call(this,a);p(this,Fe,Yn).set(t,o),p(this,Fe,Yn).set(s,o);const l=M(this,Fe,ju).call(this,a);return M(this,Fe,e1).call(this,r,l),o}addLuminosityFilter(t){let n=p(this,Fe,Yn).get(t||"luminosity");if(n)return n;let r,s;if(t?([r]=M(this,Fe,tm).call(this,[t]),s=`luminosity_${r}`):s="luminosity",n=p(this,Fe,Yn).get(s),n)return p(this,Fe,Yn).set(t,n),n;const a=`g_${p(this,Qs)}_luminosity_map_${oi(this,Tl)._++}`,o=M(this,Fe,Bu).call(this,a);p(this,Fe,Yn).set(t,o),p(this,Fe,Yn).set(s,o);const l=M(this,Fe,ju).call(this,a);return M(this,Fe,aT).call(this,l),t&&M(this,Fe,e1).call(this,r,l),o}addHighlightHCMFilter(t,n,r,s,a){var m;const o=`${n}-${r}-${s}-${a}`;let l=p(this,Fe,bf).get(t);if((l==null?void 0:l.key)===o||(l?((m=l.filter)==null||m.remove(),l.key=o,l.url="none",l.filter=null):(l={key:o,url:"none",filter:null},p(this,Fe,bf).set(t,l)),!n||!r))return l.url;const[u,c]=[n,r].map(M(this,Fe,Ef).bind(this));let h=Math.round(.2126*u[0]+.7152*u[1]+.0722*u[2]),f=Math.round(.2126*c[0]+.7152*c[1]+.0722*c[2]),[d,y]=[s,a].map(M(this,Fe,Ef).bind(this));f<h&&([h,f,d,y]=[f,h,y,d]),p(this,Fe,Fu).style.color="";const b=(w,_,E)=>{const x=new Array(256),A=(f-h)/E,S=w/255,O=(_-w)/(255*E);let C=0;for(let k=0;k<=E;k++){const D=Math.round(h+k*A),R=S+k*O;for(let F=C;F<=D;F++)x[F]=R;C=D+1}for(let k=C;k<256;k++)x[k]=x[C-1];return x.join(",")},v=`g_${p(this,Qs)}_hcm_${t}_filter`,g=l.filter=M(this,Fe,ju).call(this,v);return M(this,Fe,Jb).call(this,g),M(this,Fe,_f).call(this,b(d[0],y[0],5),b(d[1],y[1],5),b(d[2],y[2],5),g),l.url=M(this,Fe,Bu).call(this,v),l.url}destroy(t=!1){var n,r,s,a;t&&((n=p(this,Cl))!=null&&n.size)||((r=p(this,Zs))==null||r.parentNode.parentNode.remove(),N(this,Zs,null),(s=p(this,Pc))==null||s.clear(),N(this,Pc,null),(a=p(this,Cl))==null||a.clear(),N(this,Cl,null),N(this,Tl,0))}}Sl=new WeakMap,Pc=new WeakMap,Zs=new WeakMap,Qs=new WeakMap,Jn=new WeakMap,Cl=new WeakMap,Tl=new WeakMap,Fe=new WeakSet,Yn=function(){return p(this,Pc)||N(this,Pc,new Map)},bf=function(){return p(this,Cl)||N(this,Cl,new Map)},Fu=function(){if(!p(this,Zs)){const t=p(this,Jn).createElement("div"),{style:n}=t;n.visibility="hidden",n.contain="strict",n.width=n.height=0,n.position="absolute",n.top=n.left=0,n.zIndex=-1;const r=p(this,Jn).createElementNS(Fs,"svg");r.setAttribute("width",0),r.setAttribute("height",0),N(this,Zs,p(this,Jn).createElementNS(Fs,"defs")),t.append(r),r.append(p(this,Zs)),p(this,Jn).body.append(t)}return p(this,Zs)},tm=function(t){if(t.length===1){const u=t[0],c=new Array(256);for(let f=0;f<256;f++)c[f]=u[f]/255;const h=c.join(",");return[h,h,h]}const[n,r,s]=t,a=new Array(256),o=new Array(256),l=new Array(256);for(let u=0;u<256;u++)a[u]=n[u]/255,o[u]=r[u]/255,l[u]=s[u]/255;return[a.join(","),o.join(","),l.join(",")]},Bu=function(t){if(p(this,Sl)===void 0){N(this,Sl,"");const n=p(this,Jn).URL;n!==p(this,Jn).baseURI&&(hy(n)?it('#createUrl: ignore "data:"-URL for performance reasons.'):N(this,Sl,n.split("#",1)[0]))}return`url(${p(this,Sl)}#${t})`},aT=function(t){const n=p(this,Jn).createElementNS(Fs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.3 0.59 0.11 0 0"),t.append(n)},Jb=function(t){const n=p(this,Jn).createElementNS(Fs,"feColorMatrix");n.setAttribute("type","matrix"),n.setAttribute("values","0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0.2126 0.7152 0.0722 0 0 0 0 0 1 0"),t.append(n)},ju=function(t){const n=p(this,Jn).createElementNS(Fs,"filter");return n.setAttribute("color-interpolation-filters","sRGB"),n.setAttribute("id",t),p(this,Fe,Fu).append(n),n},wf=function(t,n,r){const s=p(this,Jn).createElementNS(Fs,n);s.setAttribute("type","discrete"),s.setAttribute("tableValues",r),t.append(s)},_f=function(t,n,r,s){const a=p(this,Jn).createElementNS(Fs,"feComponentTransfer");s.append(a),M(this,Fe,wf).call(this,a,"feFuncR",t),M(this,Fe,wf).call(this,a,"feFuncG",n),M(this,Fe,wf).call(this,a,"feFuncB",r)},e1=function(t,n){const r=p(this,Jn).createElementNS(Fs,"feComponentTransfer");n.append(r),M(this,Fe,wf).call(this,r,"feFuncA",t)},Ef=function(t){return p(this,Fe,Fu).style.color=t,u_(getComputedStyle(p(this,Fe,Fu)).getPropertyValue("color"))};class oT{constructor({baseUrl:e=null}){this.baseUrl=e}async fetch({filename:e}){if(!this.baseUrl)throw new Error("Ensure that the `standardFontDataUrl` API parameter is provided.");if(!e)throw new Error("Font filename must be specified.");const t=`${this.baseUrl}${e}`;return this._fetch(t).catch(n=>{throw new Error(`Unable to load font data at: ${t}`)})}async _fetch(e){Nt("Abstract method `_fetch` called.")}}class lT extends oT{async _fetch(e){const t=await cy(e,"arraybuffer");return new Uint8Array(t)}}ri&&it("Please use the `legacy` build in Node.js environments.");async function uT(i){const t=await process.getBuiltinModule("fs").promises.readFile(i);return new Uint8Array(t)}class DL extends sT{}class OL extends nT{_createCanvas(e,t){return process.getBuiltinModule("module").createRequire(import.meta.url)("@napi-rs/canvas").createCanvas(e,t)}}class NL extends iT{async _fetch(e){return uT(e)}}class RL extends oT{async _fetch(e){return uT(e)}}const ni={FILL:"Fill",STROKE:"Stroke",SHADING:"Shading"};function t1(i,e){if(!e)return;const t=e[2]-e[0],n=e[3]-e[1],r=new Path2D;r.rect(e[0],e[1],t,n),i.clip(r)}class h_{getPattern(){Nt("Abstract method `getPattern` called.")}}class PL extends h_{constructor(e){super(),this._type=e[1],this._bbox=e[2],this._colorStops=e[3],this._p0=e[4],this._p1=e[5],this._r0=e[6],this._r1=e[7],this.matrix=null}_createGradient(e){let t;this._type==="axial"?t=e.createLinearGradient(this._p0[0],this._p0[1],this._p1[0],this._p1[1]):this._type==="radial"&&(t=e.createRadialGradient(this._p0[0],this._p0[1],this._r0,this._p1[0],this._p1[1],this._r1));for(const n of this._colorStops)t.addColorStop(n[0],n[1]);return t}getPattern(e,t,n,r){let s;if(r===ni.STROKE||r===ni.FILL){const a=t.current.getClippedPathBoundingBox(r,qt(e))||[0,0,0,0],o=Math.ceil(a[2]-a[0])||1,l=Math.ceil(a[3]-a[1])||1,u=t.cachedCanvases.getCanvas("pattern",o,l),c=u.context;c.clearRect(0,0,c.canvas.width,c.canvas.height),c.beginPath(),c.rect(0,0,c.canvas.width,c.canvas.height),c.translate(-a[0],-a[1]),n=$e.transform(n,[1,0,0,1,a[0],a[1]]),c.transform(...t.baseTransform),this.matrix&&c.transform(...this.matrix),t1(c,this._bbox),c.fillStyle=this._createGradient(c),c.fill(),s=e.createPattern(u.canvas,"no-repeat");const h=new DOMMatrix(n);s.setTransform(h)}else t1(e,this._bbox),s=this._createGradient(e);return s}}function h0(i,e,t,n,r,s,a,o){const l=e.coords,u=e.colors,c=i.data,h=i.width*4;let f;l[t+1]>l[n+1]&&(f=t,t=n,n=f,f=s,s=a,a=f),l[n+1]>l[r+1]&&(f=n,n=r,r=f,f=a,a=o,o=f),l[t+1]>l[n+1]&&(f=t,t=n,n=f,f=s,s=a,a=f);const d=(l[t]+e.offsetX)*e.scaleX,y=(l[t+1]+e.offsetY)*e.scaleY,b=(l[n]+e.offsetX)*e.scaleX,v=(l[n+1]+e.offsetY)*e.scaleY,g=(l[r]+e.offsetX)*e.scaleX,m=(l[r+1]+e.offsetY)*e.scaleY;if(y>=m)return;const w=u[s],_=u[s+1],E=u[s+2],x=u[a],A=u[a+1],S=u[a+2],O=u[o],C=u[o+1],k=u[o+2],D=Math.round(y),R=Math.round(m);let F,H,$,G,Z,K,q,P;for(let B=D;B<=R;B++){if(B<v){const Y=B<y?0:(y-B)/(y-v);F=d-(d-b)*Y,H=w-(w-x)*Y,$=_-(_-A)*Y,G=E-(E-S)*Y}else{let Y;B>m?Y=1:v===m?Y=0:Y=(v-B)/(v-m),F=b-(b-g)*Y,H=x-(x-O)*Y,$=A-(A-C)*Y,G=S-(S-k)*Y}let V;B<y?V=0:B>m?V=1:V=(y-B)/(y-m),Z=d-(d-g)*V,K=w-(w-O)*V,q=_-(_-C)*V,P=E-(E-k)*V;const J=Math.round(Math.min(F,Z)),te=Math.round(Math.max(F,Z));let U=h*B+J*4;for(let Y=J;Y<=te;Y++)V=(F-Y)/(F-Z),V<0?V=0:V>1&&(V=1),c[U++]=H-(H-K)*V|0,c[U++]=$-($-q)*V|0,c[U++]=G-(G-P)*V|0,c[U++]=255}}function LL(i,e,t){const n=e.coords,r=e.colors;let s,a;switch(e.type){case"lattice":const o=e.verticesPerRow,l=Math.floor(n.length/o)-1,u=o-1;for(s=0;s<l;s++){let c=s*o;for(let h=0;h<u;h++,c++)h0(i,t,n[c],n[c+1],n[c+o],r[c],r[c+1],r[c+o]),h0(i,t,n[c+o+1],n[c+1],n[c+o],r[c+o+1],r[c+1],r[c+o])}break;case"triangles":for(s=0,a=n.length;s<a;s+=3)h0(i,t,n[s],n[s+1],n[s+2],r[s],r[s+1],r[s+2]);break;default:throw new Error("illegal figure")}}class IL extends h_{constructor(e){super(),this._coords=e[2],this._colors=e[3],this._figures=e[4],this._bounds=e[5],this._bbox=e[7],this._background=e[8],this.matrix=null}_createMeshCanvas(e,t,n){const o=Math.floor(this._bounds[0]),l=Math.floor(this._bounds[1]),u=Math.ceil(this._bounds[2])-o,c=Math.ceil(this._bounds[3])-l,h=Math.min(Math.ceil(Math.abs(u*e[0]*1.1)),3e3),f=Math.min(Math.ceil(Math.abs(c*e[1]*1.1)),3e3),d=u/h,y=c/f,b={coords:this._coords,colors:this._colors,offsetX:-o,offsetY:-l,scaleX:1/d,scaleY:1/y},v=h+2*2,g=f+2*2,m=n.getCanvas("mesh",v,g),w=m.context,_=w.createImageData(h,f);if(t){const x=_.data;for(let A=0,S=x.length;A<S;A+=4)x[A]=t[0],x[A+1]=t[1],x[A+2]=t[2],x[A+3]=255}for(const x of this._figures)LL(_,x,b);return w.putImageData(_,2,2),{canvas:m.canvas,offsetX:o-2*d,offsetY:l-2*y,scaleX:d,scaleY:y}}getPattern(e,t,n,r){t1(e,this._bbox);let s;if(r===ni.SHADING)s=$e.singularValueDecompose2dScale(qt(e));else if(s=$e.singularValueDecompose2dScale(t.baseTransform),this.matrix){const o=$e.singularValueDecompose2dScale(this.matrix);s=[s[0]*o[0],s[1]*o[1]]}const a=this._createMeshCanvas(s,r===ni.SHADING?null:this._background,t.cachedCanvases);return r!==ni.SHADING&&(e.setTransform(...t.baseTransform),this.matrix&&e.transform(...this.matrix)),e.translate(a.offsetX,a.offsetY),e.scale(a.scaleX,a.scaleY),e.createPattern(a.canvas,"no-repeat")}}class ML extends h_{getPattern(){return"hotpink"}}function FL(i){switch(i[0]){case"RadialAxial":return new PL(i);case"Mesh":return new IL(i);case"Dummy":return new ML}throw new Error(`Unknown IR type: ${i[0]}`)}const EE={COLORED:1,UNCOLORED:2},Dv=class Dv{constructor(e,t,n,r,s){this.operatorList=e[2],this.matrix=e[3],this.bbox=e[4],this.xstep=e[5],this.ystep=e[6],this.paintType=e[7],this.tilingType=e[8],this.color=t,this.ctx=n,this.canvasGraphicsFactory=r,this.baseTransform=s}createPatternCanvas(e){const{bbox:t,operatorList:n,paintType:r,tilingType:s,color:a,canvasGraphicsFactory:o}=this;let{xstep:l,ystep:u}=this;l=Math.abs(l),u=Math.abs(u),ly("TilingType: "+s);const c=t[0],h=t[1],f=t[2],d=t[3],y=f-c,b=d-h,v=$e.singularValueDecompose2dScale(this.matrix),g=$e.singularValueDecompose2dScale(this.baseTransform),m=v[0]*g[0],w=v[1]*g[1];let _=y,E=b,x=!1,A=!1;const S=Math.ceil(l*m),O=Math.ceil(u*w),C=Math.ceil(y*m),k=Math.ceil(b*w);S>=C?_=l:x=!0,O>=k?E=u:A=!0;const D=this.getSizeAndScale(_,this.ctx.canvas.width,m),R=this.getSizeAndScale(E,this.ctx.canvas.height,w),F=e.cachedCanvases.getCanvas("pattern",D.size,R.size),H=F.context,$=o.createCanvasGraphics(H);if($.groupLevel=e.groupLevel,this.setFillAndStrokeStyleToContext($,r,a),H.translate(-D.scale*c,-R.scale*h),$.transform(D.scale,0,0,R.scale,0,0),H.save(),this.clipBbox($,c,h,f,d),$.baseTransform=qt($.ctx),$.executeOperatorList(n),$.endDrawing(),H.restore(),x||A){const G=F.canvas;x&&(_=l),A&&(E=u);const Z=this.getSizeAndScale(_,this.ctx.canvas.width,m),K=this.getSizeAndScale(E,this.ctx.canvas.height,w),q=Z.size,P=K.size,B=e.cachedCanvases.getCanvas("pattern-workaround",q,P),V=B.context,J=x?Math.floor(y/l):0,te=A?Math.floor(b/u):0;for(let U=0;U<=J;U++)for(let Y=0;Y<=te;Y++)V.drawImage(G,q*U,P*Y,q,P,0,0,q,P);return{canvas:B.canvas,scaleX:Z.scale,scaleY:K.scale,offsetX:c,offsetY:h}}return{canvas:F.canvas,scaleX:D.scale,scaleY:R.scale,offsetX:c,offsetY:h}}getSizeAndScale(e,t,n){const r=Math.max(Dv.MAX_PATTERN_SIZE,t);let s=Math.ceil(e*n);return s>=r?s=r:n=s/e,{scale:n,size:s}}clipBbox(e,t,n,r,s){const a=r-t,o=s-n;e.ctx.rect(t,n,a,o),e.current.updateRectMinMax(qt(e.ctx),[t,n,r,s]),e.clip(),e.endPath()}setFillAndStrokeStyleToContext(e,t,n){const r=e.ctx,s=e.current;switch(t){case EE.COLORED:const a=this.ctx;r.fillStyle=a.fillStyle,r.strokeStyle=a.strokeStyle,s.fillColor=a.fillStyle,s.strokeColor=a.strokeStyle;break;case EE.UNCOLORED:const o=$e.makeHexColor(n[0],n[1],n[2]);r.fillStyle=o,r.strokeStyle=o,s.fillColor=o,s.strokeColor=o;break;default:throw new uL(`Unsupported paint type: ${t}`)}}getPattern(e,t,n,r){let s=n;r!==ni.SHADING&&(s=$e.transform(s,t.baseTransform),this.matrix&&(s=$e.transform(s,this.matrix)));const a=this.createPatternCanvas(t);let o=new DOMMatrix(s);o=o.translate(a.offsetX,a.offsetY),o=o.scale(1/a.scaleX,1/a.scaleY);const l=e.createPattern(a.canvas,"repeat");return l.setTransform(o),l}};Ze(Dv,"MAX_PATTERN_SIZE",3e3);let n1=Dv;function BL({src:i,srcPos:e=0,dest:t,width:n,height:r,nonBlackColor:s=4294967295,inverseDecode:a=!1}){const o=gi.isLittleEndian?4278190080:255,[l,u]=a?[s,o]:[o,s],c=n>>3,h=n&7,f=i.length;t=new Uint32Array(t.buffer);let d=0;for(let y=0;y<r;y++){for(const v=e+c;e<v;e++){const g=e<f?i[e]:255;t[d++]=g&128?u:l,t[d++]=g&64?u:l,t[d++]=g&32?u:l,t[d++]=g&16?u:l,t[d++]=g&8?u:l,t[d++]=g&4?u:l,t[d++]=g&2?u:l,t[d++]=g&1?u:l}if(h===0)continue;const b=e<f?i[e++]:255;for(let v=0;v<h;v++)t[d++]=b&1<<7-v?u:l}return{srcPos:e,destPos:d}}const AE=16,xE=100,jL=15,SE=10,CE=1e3,ki=16;function zL(i,e){if(i._removeMirroring)throw new Error("Context is already forwarding operations.");i.__originalSave=i.save,i.__originalRestore=i.restore,i.__originalRotate=i.rotate,i.__originalScale=i.scale,i.__originalTranslate=i.translate,i.__originalTransform=i.transform,i.__originalSetTransform=i.setTransform,i.__originalResetTransform=i.resetTransform,i.__originalClip=i.clip,i.__originalMoveTo=i.moveTo,i.__originalLineTo=i.lineTo,i.__originalBezierCurveTo=i.bezierCurveTo,i.__originalRect=i.rect,i.__originalClosePath=i.closePath,i.__originalBeginPath=i.beginPath,i._removeMirroring=()=>{i.save=i.__originalSave,i.restore=i.__originalRestore,i.rotate=i.__originalRotate,i.scale=i.__originalScale,i.translate=i.__originalTranslate,i.transform=i.__originalTransform,i.setTransform=i.__originalSetTransform,i.resetTransform=i.__originalResetTransform,i.clip=i.__originalClip,i.moveTo=i.__originalMoveTo,i.lineTo=i.__originalLineTo,i.bezierCurveTo=i.__originalBezierCurveTo,i.rect=i.__originalRect,i.closePath=i.__originalClosePath,i.beginPath=i.__originalBeginPath,delete i._removeMirroring},i.save=function(){e.save(),this.__originalSave()},i.restore=function(){e.restore(),this.__originalRestore()},i.translate=function(n,r){e.translate(n,r),this.__originalTranslate(n,r)},i.scale=function(n,r){e.scale(n,r),this.__originalScale(n,r)},i.transform=function(n,r,s,a,o,l){e.transform(n,r,s,a,o,l),this.__originalTransform(n,r,s,a,o,l)},i.setTransform=function(n,r,s,a,o,l){e.setTransform(n,r,s,a,o,l),this.__originalSetTransform(n,r,s,a,o,l)},i.resetTransform=function(){e.resetTransform(),this.__originalResetTransform()},i.rotate=function(n){e.rotate(n),this.__originalRotate(n)},i.clip=function(n){e.clip(n),this.__originalClip(n)},i.moveTo=function(t,n){e.moveTo(t,n),this.__originalMoveTo(t,n)},i.lineTo=function(t,n){e.lineTo(t,n),this.__originalLineTo(t,n)},i.bezierCurveTo=function(t,n,r,s,a,o){e.bezierCurveTo(t,n,r,s,a,o),this.__originalBezierCurveTo(t,n,r,s,a,o)},i.rect=function(t,n,r,s){e.rect(t,n,r,s),this.__originalRect(t,n,r,s)},i.closePath=function(){e.closePath(),this.__originalClosePath()},i.beginPath=function(){e.beginPath(),this.__originalBeginPath()}}class UL{constructor(e){this.canvasFactory=e,this.cache=Object.create(null)}getCanvas(e,t,n){let r;return this.cache[e]!==void 0?(r=this.cache[e],this.canvasFactory.reset(r,t,n)):(r=this.canvasFactory.create(t,n),this.cache[e]=r),r}delete(e){delete this.cache[e]}clear(){for(const e in this.cache){const t=this.cache[e];this.canvasFactory.destroy(t),delete this.cache[e]}}}function Cg(i,e,t,n,r,s,a,o,l,u){const[c,h,f,d,y,b]=qt(i);if(h===0&&f===0){const m=a*c+y,w=Math.round(m),_=o*d+b,E=Math.round(_),x=(a+l)*c+y,A=Math.abs(Math.round(x)-w)||1,S=(o+u)*d+b,O=Math.abs(Math.round(S)-E)||1;return i.setTransform(Math.sign(c),0,0,Math.sign(d),w,E),i.drawImage(e,t,n,r,s,0,0,A,O),i.setTransform(c,h,f,d,y,b),[A,O]}if(c===0&&d===0){const m=o*f+y,w=Math.round(m),_=a*h+b,E=Math.round(_),x=(o+u)*f+y,A=Math.abs(Math.round(x)-w)||1,S=(a+l)*h+b,O=Math.abs(Math.round(S)-E)||1;return i.setTransform(0,Math.sign(h),Math.sign(f),0,w,E),i.drawImage(e,t,n,r,s,0,0,O,A),i.setTransform(c,h,f,d,y,b),[O,A]}i.drawImage(e,t,n,r,s,a,o,l,u);const v=Math.hypot(c,h),g=Math.hypot(f,d);return[v*l,g*u]}function qL(i){const{width:e,height:t}=i;if(e>CE||t>CE)return null;const n=1e3,r=new Uint8Array([0,2,4,0,1,0,5,4,8,10,0,8,0,2,1,0]),s=e+1;let a=new Uint8Array(s*(t+1)),o,l,u;const c=e+7&-8;let h=new Uint8Array(c*t),f=0;for(const g of i.data){let m=128;for(;m>0;)h[f++]=g&m?0:255,m>>=1}let d=0;for(f=0,h[f]!==0&&(a[0]=1,++d),l=1;l<e;l++)h[f]!==h[f+1]&&(a[l]=h[f]?2:1,++d),f++;for(h[f]!==0&&(a[l]=2,++d),o=1;o<t;o++){f=o*c,u=o*s,h[f-c]!==h[f]&&(a[u]=h[f]?1:8,++d);let g=(h[f]?4:0)+(h[f-c]?8:0);for(l=1;l<e;l++)g=(g>>2)+(h[f+1]?4:0)+(h[f-c+1]?8:0),r[g]&&(a[u+l]=r[g],++d),f++;if(h[f-c]!==h[f]&&(a[u+l]=h[f]?2:4,++d),d>n)return null}for(f=c*(t-1),u=o*s,h[f]!==0&&(a[u]=8,++d),l=1;l<e;l++)h[f]!==h[f+1]&&(a[u+l]=h[f]?4:8,++d),f++;if(h[f]!==0&&(a[u+l]=4,++d),d>n)return null;const y=new Int32Array([0,s,-1,0,-s,0,0,0,1]),b=new Path2D;for(o=0;d&&o<=t;o++){let g=o*s;const m=g+e;for(;g<m&&!a[g];)g++;if(g===m)continue;b.moveTo(g%s,o);const w=g;let _=a[g];do{const E=y[_];do g+=E;while(!a[g]);const x=a[g];x!==5&&x!==10?(_=x,a[g]=0):(_=x&51*_>>4,a[g]&=_>>2|_<<2),b.lineTo(g%s,g/s|0),a[g]||--d}while(w!==g);--o}return h=null,a=null,function(g){g.save(),g.scale(1/e,-1/t),g.translate(0,-t),g.fill(b),g.beginPath(),g.restore()}}class TE{constructor(e,t){this.alphaIsShape=!1,this.fontSize=0,this.fontSizeScale=1,this.textMatrix=bC,this.textMatrixScale=1,this.fontMatrix=Ob,this.leading=0,this.x=0,this.y=0,this.lineX=0,this.lineY=0,this.charSpacing=0,this.wordSpacing=0,this.textHScale=1,this.textRenderingMode=Kn.FILL,this.textRise=0,this.fillColor="#000000",this.strokeColor="#000000",this.patternFill=!1,this.patternStroke=!1,this.fillAlpha=1,this.strokeAlpha=1,this.lineWidth=1,this.activeSMask=null,this.transferMaps="none",this.startNewPathAndClipBox([0,0,e,t])}clone(){const e=Object.create(this);return e.clipBox=this.clipBox.slice(),e}setCurrentPoint(e,t){this.x=e,this.y=t}updatePathMinMax(e,t,n){[t,n]=$e.applyTransform([t,n],e),this.minX=Math.min(this.minX,t),this.minY=Math.min(this.minY,n),this.maxX=Math.max(this.maxX,t),this.maxY=Math.max(this.maxY,n)}updateRectMinMax(e,t){const n=$e.applyTransform(t,e),r=$e.applyTransform(t.slice(2),e),s=$e.applyTransform([t[0],t[3]],e),a=$e.applyTransform([t[2],t[1]],e);this.minX=Math.min(this.minX,n[0],r[0],s[0],a[0]),this.minY=Math.min(this.minY,n[1],r[1],s[1],a[1]),this.maxX=Math.max(this.maxX,n[0],r[0],s[0],a[0]),this.maxY=Math.max(this.maxY,n[1],r[1],s[1],a[1])}updateScalingPathMinMax(e,t){$e.scaleMinMax(e,t),this.minX=Math.min(this.minX,t[0]),this.minY=Math.min(this.minY,t[1]),this.maxX=Math.max(this.maxX,t[2]),this.maxY=Math.max(this.maxY,t[3])}updateCurvePathMinMax(e,t,n,r,s,a,o,l,u,c){const h=$e.bezierBoundingBox(t,n,r,s,a,o,l,u,c);c||this.updateRectMinMax(e,h)}getPathBoundingBox(e=ni.FILL,t=null){const n=[this.minX,this.minY,this.maxX,this.maxY];if(e===ni.STROKE){t||Nt("Stroke bounding box must include transform.");const r=$e.singularValueDecompose2dScale(t),s=r[0]*this.lineWidth/2,a=r[1]*this.lineWidth/2;n[0]-=s,n[1]-=a,n[2]+=s,n[3]+=a}return n}updateClipFromPath(){const e=$e.intersect(this.clipBox,this.getPathBoundingBox());this.startNewPathAndClipBox(e||[0,0,0,0])}isEmptyClip(){return this.minX===1/0}startNewPathAndClipBox(e){this.clipBox=e,this.minX=1/0,this.minY=1/0,this.maxX=0,this.maxY=0}getClippedPathBoundingBox(e=ni.FILL,t=null){return $e.intersect(this.clipBox,this.getPathBoundingBox(e,t))}}function kE(i,e){if(e instanceof ImageData){i.putImageData(e,0,0);return}const t=e.height,n=e.width,r=t%ki,s=(t-r)/ki,a=r===0?s:s+1,o=i.createImageData(n,ki);let l=0,u;const c=e.data,h=o.data;let f,d,y,b;if(e.kind===$g.GRAYSCALE_1BPP){const v=c.byteLength,g=new Uint32Array(h.buffer,0,h.byteLength>>2),m=g.length,w=n+7>>3,_=4294967295,E=gi.isLittleEndian?4278190080:255;for(f=0;f<a;f++){for(y=f<s?ki:r,u=0,d=0;d<y;d++){const x=v-l;let A=0;const S=x>w?n:x*8-7,O=S&-8;let C=0,k=0;for(;A<O;A+=8)k=c[l++],g[u++]=k&128?_:E,g[u++]=k&64?_:E,g[u++]=k&32?_:E,g[u++]=k&16?_:E,g[u++]=k&8?_:E,g[u++]=k&4?_:E,g[u++]=k&2?_:E,g[u++]=k&1?_:E;for(;A<S;A++)C===0&&(k=c[l++],C=128),g[u++]=k&C?_:E,C>>=1}for(;u<m;)g[u++]=0;i.putImageData(o,0,f*ki)}}else if(e.kind===$g.RGBA_32BPP){for(d=0,b=n*ki*4,f=0;f<s;f++)h.set(c.subarray(l,l+b)),l+=b,i.putImageData(o,0,d),d+=ki;f<a&&(b=n*r*4,h.set(c.subarray(l,l+b)),i.putImageData(o,0,d))}else if(e.kind===$g.RGB_24BPP)for(y=ki,b=n*y,f=0;f<a;f++){for(f>=s&&(y=r,b=n*y),u=0,d=b;d--;)h[u++]=c[l++],h[u++]=c[l++],h[u++]=c[l++],h[u++]=255;i.putImageData(o,0,f*ki)}else throw new Error(`bad image kind: ${e.kind}`)}function DE(i,e){if(e.bitmap){i.drawImage(e.bitmap,0,0);return}const t=e.height,n=e.width,r=t%ki,s=(t-r)/ki,a=r===0?s:s+1,o=i.createImageData(n,ki);let l=0;const u=e.data,c=o.data;for(let h=0;h<a;h++){const f=h<s?ki:r;({srcPos:l}=BL({src:u,srcPos:l,dest:c,width:n,height:f,nonBlackColor:0})),i.putImageData(o,0,h*ki)}}function ef(i,e){const t=["strokeStyle","fillStyle","fillRule","globalAlpha","lineWidth","lineCap","lineJoin","miterLimit","globalCompositeOperation","font","filter"];for(const n of t)i[n]!==void 0&&(e[n]=i[n]);i.setLineDash!==void 0&&(e.setLineDash(i.getLineDash()),e.lineDashOffset=i.lineDashOffset)}function Tg(i){if(i.strokeStyle=i.fillStyle="#000000",i.fillRule="nonzero",i.globalAlpha=1,i.lineWidth=1,i.lineCap="butt",i.lineJoin="miter",i.miterLimit=10,i.globalCompositeOperation="source-over",i.font="10px sans-serif",i.setLineDash!==void 0&&(i.setLineDash([]),i.lineDashOffset=0),!ri){const{filter:e}=i;e!=="none"&&e!==""&&(i.filter="none")}}function OE(i,e){if(e)return!0;const t=$e.singularValueDecompose2dScale(i);t[0]=Math.fround(t[0]),t[1]=Math.fround(t[1]);const n=Math.fround((globalThis.devicePixelRatio||1)*Bo.PDF_TO_CSS_UNITS);return t[0]<=n&&t[1]<=n}const HL=["butt","round","square"],WL=["miter","round","bevel"],$L={},NE={};var is,i1,r1,s1;const j_=class j_{constructor(e,t,n,r,s,{optionalContentConfig:a,markedContentStack:o=null},l,u){L(this,is);this.ctx=e,this.current=new TE(this.ctx.canvas.width,this.ctx.canvas.height),this.stateStack=[],this.pendingClip=null,this.pendingEOFill=!1,this.res=null,this.xobjs=null,this.commonObjs=t,this.objs=n,this.canvasFactory=r,this.filterFactory=s,this.groupStack=[],this.processingType3=null,this.baseTransform=null,this.baseTransformStack=[],this.groupLevel=0,this.smaskStack=[],this.smaskCounter=0,this.tempSMask=null,this.suspendedCtx=null,this.contentVisible=!0,this.markedContentStack=o||[],this.optionalContentConfig=a,this.cachedCanvases=new UL(this.canvasFactory),this.cachedPatterns=new Map,this.annotationCanvasMap=l,this.viewportScale=1,this.outputScaleX=1,this.outputScaleY=1,this.pageColors=u,this._cachedScaleForStroking=[-1,0],this._cachedGetSinglePixelWidth=null,this._cachedBitmapsMap=new Map}getObject(e,t=null){return typeof e=="string"?e.startsWith("g_")?this.commonObjs.get(e):this.objs.get(e):t}beginDrawing({transform:e,viewport:t,transparency:n=!1,background:r=null}){const s=this.ctx.canvas.width,a=this.ctx.canvas.height,o=this.ctx.fillStyle;if(this.ctx.fillStyle=r||"#ffffff",this.ctx.fillRect(0,0,s,a),this.ctx.fillStyle=o,n){const l=this.cachedCanvases.getCanvas("transparent",s,a);this.compositeCtx=this.ctx,this.transparentCanvas=l.canvas,this.ctx=l.context,this.ctx.save(),this.ctx.transform(...qt(this.compositeCtx))}this.ctx.save(),Tg(this.ctx),e&&(this.ctx.transform(...e),this.outputScaleX=e[0],this.outputScaleY=e[0]),this.ctx.transform(...t.transform),this.viewportScale=t.scale,this.baseTransform=qt(this.ctx)}executeOperatorList(e,t,n,r){const s=e.argsArray,a=e.fnArray;let o=t||0;const l=s.length;if(l===o)return o;const u=l-o>SE&&typeof n=="function",c=u?Date.now()+jL:0;let h=0;const f=this.commonObjs,d=this.objs;let y;for(;;){if(r!==void 0&&o===r.nextBreakPoint)return r.breakIt(o,n),o;if(y=a[o],y!==Lr.dependency)this[y].apply(this,s[o]);else for(const b of s[o]){const v=b.startsWith("g_")?f:d;if(!v.has(b))return v.get(b,n),o}if(o++,o===l)return o;if(u&&++h>SE){if(Date.now()>c)return n(),o;h=0}}}endDrawing(){M(this,is,i1).call(this),this.cachedCanvases.clear(),this.cachedPatterns.clear();for(const e of this._cachedBitmapsMap.values()){for(const t of e.values())typeof HTMLCanvasElement<"u"&&t instanceof HTMLCanvasElement&&(t.width=t.height=0);e.clear()}this._cachedBitmapsMap.clear(),M(this,is,r1).call(this)}_scaleImage(e,t){const n=e.width??e.displayWidth,r=e.height??e.displayHeight;let s=Math.max(Math.hypot(t[0],t[1]),1),a=Math.max(Math.hypot(t[2],t[3]),1),o=n,l=r,u="prescale1",c,h;for(;s>2&&o>1||a>2&&l>1;){let f=o,d=l;s>2&&o>1&&(f=o>=16384?Math.floor(o/2)-1||1:Math.ceil(o/2),s/=o/f),a>2&&l>1&&(d=l>=16384?Math.floor(l/2)-1||1:Math.ceil(l)/2,a/=l/d),c=this.cachedCanvases.getCanvas(u,f,d),h=c.context,h.clearRect(0,0,f,d),h.drawImage(e,0,0,o,l,0,0,f,d),e=c.canvas,o=f,l=d,u=u==="prescale1"?"prescale2":"prescale1"}return{img:e,paintWidth:o,paintHeight:l}}_createMaskCanvas(e){const t=this.ctx,{width:n,height:r}=e,s=this.current.fillColor,a=this.current.patternFill,o=qt(t);let l,u,c,h;if((e.bitmap||e.data)&&e.count>1){const S=e.bitmap||e.data.buffer;u=JSON.stringify(a?o:[o.slice(0,4),s]),l=this._cachedBitmapsMap.get(S),l||(l=new Map,this._cachedBitmapsMap.set(S,l));const O=l.get(u);if(O&&!a){const C=Math.round(Math.min(o[0],o[2])+o[4]),k=Math.round(Math.min(o[1],o[3])+o[5]);return{canvas:O,offsetX:C,offsetY:k}}c=O}c||(h=this.cachedCanvases.getCanvas("maskCanvas",n,r),DE(h.context,e));let f=$e.transform(o,[1/n,0,0,-1/r,0,0]);f=$e.transform(f,[1,0,0,1,0,-r]);const[d,y,b,v]=$e.getAxialAlignedBoundingBox([0,0,n,r],f),g=Math.round(b-d)||1,m=Math.round(v-y)||1,w=this.cachedCanvases.getCanvas("fillCanvas",g,m),_=w.context,E=d,x=y;_.translate(-E,-x),_.transform(...f),c||(c=this._scaleImage(h.canvas,ss(_)),c=c.img,l&&a&&l.set(u,c)),_.imageSmoothingEnabled=OE(qt(_),e.interpolate),Cg(_,c,0,0,c.width,c.height,0,0,n,r),_.globalCompositeOperation="source-in";const A=$e.transform(ss(_),[1,0,0,1,-E,-x]);return _.fillStyle=a?s.getPattern(t,this,A,ni.FILL):s,_.fillRect(0,0,n,r),l&&!a&&(this.cachedCanvases.delete("fillCanvas"),l.set(u,w.canvas)),{canvas:w.canvas,offsetX:Math.round(E),offsetY:Math.round(x)}}setLineWidth(e){e!==this.current.lineWidth&&(this._cachedScaleForStroking[0]=-1),this.current.lineWidth=e,this.ctx.lineWidth=e}setLineCap(e){this.ctx.lineCap=HL[e]}setLineJoin(e){this.ctx.lineJoin=WL[e]}setMiterLimit(e){this.ctx.miterLimit=e}setDash(e,t){const n=this.ctx;n.setLineDash!==void 0&&(n.setLineDash(e),n.lineDashOffset=t)}setRenderingIntent(e){}setFlatness(e){}setGState(e){for(const[t,n]of e)switch(t){case"LW":this.setLineWidth(n);break;case"LC":this.setLineCap(n);break;case"LJ":this.setLineJoin(n);break;case"ML":this.setMiterLimit(n);break;case"D":this.setDash(n[0],n[1]);break;case"RI":this.setRenderingIntent(n);break;case"FL":this.setFlatness(n);break;case"Font":this.setFont(n[0],n[1]);break;case"CA":this.current.strokeAlpha=n;break;case"ca":this.current.fillAlpha=n,this.ctx.globalAlpha=n;break;case"BM":this.ctx.globalCompositeOperation=n;break;case"SMask":this.current.activeSMask=n?this.tempSMask:null,this.tempSMask=null,this.checkSMaskState();break;case"TR":this.ctx.filter=this.current.transferMaps=this.filterFactory.addFilter(n);break}}get inSMaskMode(){return!!this.suspendedCtx}checkSMaskState(){const e=this.inSMaskMode;this.current.activeSMask&&!e?this.beginSMaskMode():!this.current.activeSMask&&e&&this.endSMaskMode()}beginSMaskMode(){if(this.inSMaskMode)throw new Error("beginSMaskMode called while already in smask mode");const e=this.ctx.canvas.width,t=this.ctx.canvas.height,n="smaskGroupAt"+this.groupLevel,r=this.cachedCanvases.getCanvas(n,e,t);this.suspendedCtx=this.ctx,this.ctx=r.context;const s=this.ctx;s.setTransform(...qt(this.suspendedCtx)),ef(this.suspendedCtx,s),zL(s,this.suspendedCtx),this.setGState([["BM","source-over"],["ca",1],["CA",1]])}endSMaskMode(){if(!this.inSMaskMode)throw new Error("endSMaskMode called while not in smask mode");this.ctx._removeMirroring(),ef(this.ctx,this.suspendedCtx),this.ctx=this.suspendedCtx,this.suspendedCtx=null}compose(e){if(!this.current.activeSMask)return;e?(e[0]=Math.floor(e[0]),e[1]=Math.floor(e[1]),e[2]=Math.ceil(e[2]),e[3]=Math.ceil(e[3])):e=[0,0,this.ctx.canvas.width,this.ctx.canvas.height];const t=this.current.activeSMask,n=this.suspendedCtx;this.composeSMask(n,t,this.ctx,e),this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.clearRect(0,0,this.ctx.canvas.width,this.ctx.canvas.height),this.ctx.restore()}composeSMask(e,t,n,r){const s=r[0],a=r[1],o=r[2]-s,l=r[3]-a;o===0||l===0||(this.genericComposeSMask(t.context,n,o,l,t.subtype,t.backdrop,t.transferMap,s,a,t.offsetX,t.offsetY),e.save(),e.globalAlpha=1,e.globalCompositeOperation="source-over",e.setTransform(1,0,0,1,0,0),e.drawImage(n.canvas,0,0),e.restore())}genericComposeSMask(e,t,n,r,s,a,o,l,u,c,h){let f=e.canvas,d=l-c,y=u-h;if(a){const v=$e.makeHexColor(...a);if(d<0||y<0||d+n>f.width||y+r>f.height){const g=this.cachedCanvases.getCanvas("maskExtension",n,r),m=g.context;m.drawImage(f,-d,-y),m.globalCompositeOperation="destination-atop",m.fillStyle=v,m.fillRect(0,0,n,r),m.globalCompositeOperation="source-over",f=g.canvas,d=y=0}else{e.save(),e.globalAlpha=1,e.setTransform(1,0,0,1,0,0);const g=new Path2D;g.rect(d,y,n,r),e.clip(g),e.globalCompositeOperation="destination-atop",e.fillStyle=v,e.fillRect(d,y,n,r),e.restore()}}t.save(),t.globalAlpha=1,t.setTransform(1,0,0,1,0,0),s==="Alpha"&&o?t.filter=this.filterFactory.addAlphaFilter(o):s==="Luminosity"&&(t.filter=this.filterFactory.addLuminosityFilter(o));const b=new Path2D;b.rect(l,u,n,r),t.clip(b),t.globalCompositeOperation="destination-in",t.drawImage(f,d,y,n,r,l,u,n,r),t.restore()}save(){this.inSMaskMode?(ef(this.ctx,this.suspendedCtx),this.suspendedCtx.save()):this.ctx.save();const e=this.current;this.stateStack.push(e),this.current=e.clone()}restore(){this.stateStack.length===0&&this.inSMaskMode&&this.endSMaskMode(),this.stateStack.length!==0&&(this.current=this.stateStack.pop(),this.inSMaskMode?(this.suspendedCtx.restore(),ef(this.suspendedCtx,this.ctx)):this.ctx.restore(),this.checkSMaskState(),this.pendingClip=null,this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null)}transform(e,t,n,r,s,a){this.ctx.transform(e,t,n,r,s,a),this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null}constructPath(e,t,n){const r=this.ctx,s=this.current;let a=s.x,o=s.y,l,u;const c=qt(r),h=c[0]===0&&c[3]===0||c[1]===0&&c[2]===0,f=h?n.slice(0):null;for(let d=0,y=0,b=e.length;d<b;d++)switch(e[d]|0){case Lr.rectangle:a=t[y++],o=t[y++];const v=t[y++],g=t[y++],m=a+v,w=o+g;r.moveTo(a,o),v===0||g===0?r.lineTo(m,w):(r.lineTo(m,o),r.lineTo(m,w),r.lineTo(a,w)),h||s.updateRectMinMax(c,[a,o,m,w]),r.closePath();break;case Lr.moveTo:a=t[y++],o=t[y++],r.moveTo(a,o),h||s.updatePathMinMax(c,a,o);break;case Lr.lineTo:a=t[y++],o=t[y++],r.lineTo(a,o),h||s.updatePathMinMax(c,a,o);break;case Lr.curveTo:l=a,u=o,a=t[y+4],o=t[y+5],r.bezierCurveTo(t[y],t[y+1],t[y+2],t[y+3],a,o),s.updateCurvePathMinMax(c,l,u,t[y],t[y+1],t[y+2],t[y+3],a,o,f),y+=6;break;case Lr.curveTo2:l=a,u=o,r.bezierCurveTo(a,o,t[y],t[y+1],t[y+2],t[y+3]),s.updateCurvePathMinMax(c,l,u,a,o,t[y],t[y+1],t[y+2],t[y+3],f),a=t[y+2],o=t[y+3],y+=4;break;case Lr.curveTo3:l=a,u=o,a=t[y+2],o=t[y+3],r.bezierCurveTo(t[y],t[y+1],a,o,a,o),s.updateCurvePathMinMax(c,l,u,t[y],t[y+1],a,o,a,o,f),y+=4;break;case Lr.closePath:r.closePath();break}h&&s.updateScalingPathMinMax(c,f),s.setCurrentPoint(a,o)}closePath(){this.ctx.closePath()}stroke(e=!0){const t=this.ctx,n=this.current.strokeColor;t.globalAlpha=this.current.strokeAlpha,this.contentVisible&&(typeof n=="object"&&(n!=null&&n.getPattern)?(t.save(),t.strokeStyle=n.getPattern(t,this,ss(t),ni.STROKE),this.rescaleAndStroke(!1),t.restore()):this.rescaleAndStroke(!0)),e&&this.consumePath(this.current.getClippedPathBoundingBox()),t.globalAlpha=this.current.fillAlpha}closeStroke(){this.closePath(),this.stroke()}fill(e=!0){const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;let s=!1;r&&(t.save(),t.fillStyle=n.getPattern(t,this,ss(t),ni.FILL),s=!0);const a=this.current.getClippedPathBoundingBox();this.contentVisible&&a!==null&&(this.pendingEOFill?(t.fill("evenodd"),this.pendingEOFill=!1):t.fill()),s&&t.restore(),e&&this.consumePath(a)}eoFill(){this.pendingEOFill=!0,this.fill()}fillStroke(){this.fill(!1),this.stroke(!1),this.consumePath()}eoFillStroke(){this.pendingEOFill=!0,this.fillStroke()}closeFillStroke(){this.closePath(),this.fillStroke()}closeEOFillStroke(){this.pendingEOFill=!0,this.closePath(),this.fillStroke()}endPath(){this.consumePath()}clip(){this.pendingClip=$L}eoClip(){this.pendingClip=NE}beginText(){this.current.textMatrix=bC,this.current.textMatrixScale=1,this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}endText(){const e=this.pendingTextPaths,t=this.ctx;if(e===void 0){t.beginPath();return}const n=new Path2D,r=t.getTransform().invertSelf();for(const{transform:s,x:a,y:o,fontSize:l,path:u}of e)n.addPath(u,new DOMMatrix(s).preMultiplySelf(r).translate(a,o).scale(l,-l));t.clip(n),t.beginPath(),delete this.pendingTextPaths}setCharSpacing(e){this.current.charSpacing=e}setWordSpacing(e){this.current.wordSpacing=e}setHScale(e){this.current.textHScale=e/100}setLeading(e){this.current.leading=-e}setFont(e,t){var c;const n=this.commonObjs.get(e),r=this.current;if(!n)throw new Error(`Can't find font for ${e}`);if(r.fontMatrix=n.fontMatrix||Ob,(r.fontMatrix[0]===0||r.fontMatrix[3]===0)&&it("Invalid font matrix for font "+e),t<0?(t=-t,r.fontDirection=-1):r.fontDirection=1,this.current.font=n,this.current.fontSize=t,n.isType3Font)return;const s=n.loadedName||"sans-serif",a=((c=n.systemFontInfo)==null?void 0:c.css)||`"${s}", ${n.fallbackName}`;let o="normal";n.black?o="900":n.bold&&(o="bold");const l=n.italic?"italic":"normal";let u=t;t<AE?u=AE:t>xE&&(u=xE),this.current.fontSizeScale=t/u,this.ctx.font=`${l} ${o} ${u}px ${a}`}setTextRenderingMode(e){this.current.textRenderingMode=e}setTextRise(e){this.current.textRise=e}moveText(e,t){this.current.x=this.current.lineX+=e,this.current.y=this.current.lineY+=t}setLeadingMoveText(e,t){this.setLeading(-t),this.moveText(e,t)}setTextMatrix(e,t,n,r,s,a){this.current.textMatrix=[e,t,n,r,s,a],this.current.textMatrixScale=Math.hypot(e,t),this.current.x=this.current.lineX=0,this.current.y=this.current.lineY=0}nextLine(){this.moveText(0,this.current.leading)}paintChar(e,t,n,r,s){const a=this.ctx,o=this.current,l=o.font,u=o.textRenderingMode,c=o.fontSize/o.fontSizeScale,h=u&Kn.FILL_STROKE_MASK,f=!!(u&Kn.ADD_TO_PATH_FLAG),d=o.patternFill&&!l.missingFile,y=o.patternStroke&&!l.missingFile;let b;if((l.disableFontFace||f||d||y)&&(b=l.getPathGenerator(this.commonObjs,e)),l.disableFontFace||d||y){if(a.save(),a.translate(t,n),a.scale(c,-c),h===Kn.FILL||h===Kn.FILL_STROKE)if(r){const v=a.getTransform();a.setTransform(...r),a.fill(M(this,is,s1).call(this,b,v,r))}else a.fill(b);if(h===Kn.STROKE||h===Kn.FILL_STROKE)if(s){const v=a.getTransform();a.setTransform(...s),a.stroke(M(this,is,s1).call(this,b,v,s))}else a.lineWidth/=c,a.stroke(b);a.restore()}else(h===Kn.FILL||h===Kn.FILL_STROKE)&&a.fillText(e,t,n),(h===Kn.STROKE||h===Kn.FILL_STROKE)&&a.strokeText(e,t,n);f&&(this.pendingTextPaths||(this.pendingTextPaths=[])).push({transform:qt(a),x:t,y:n,fontSize:c,path:b})}get isFontSubpixelAAEnabled(){const{context:e}=this.cachedCanvases.getCanvas("isFontSubpixelAAEnabled",10,10);e.scale(1.5,1),e.fillText("I",0,10);const t=e.getImageData(0,0,10,10).data;let n=!1;for(let r=3;r<t.length;r+=4)if(t[r]>0&&t[r]<255){n=!0;break}return ot(this,"isFontSubpixelAAEnabled",n)}showText(e){const t=this.current,n=t.font;if(n.isType3Font)return this.showType3Text(e);const r=t.fontSize;if(r===0)return;const s=this.ctx,a=t.fontSizeScale,o=t.charSpacing,l=t.wordSpacing,u=t.fontDirection,c=t.textHScale*u,h=e.length,f=n.vertical,d=f?1:-1,y=n.defaultVMetrics,b=r*t.fontMatrix[0],v=t.textRenderingMode===Kn.FILL&&!n.disableFontFace&&!t.patternFill;s.save(),s.transform(...t.textMatrix),s.translate(t.x,t.y+t.textRise),u>0?s.scale(c,-1):s.scale(c,1);let g,m;if(t.patternFill){s.save();const A=t.fillColor.getPattern(s,this,ss(s),ni.FILL);g=qt(s),s.restore(),s.fillStyle=A}if(t.patternStroke){s.save();const A=t.strokeColor.getPattern(s,this,ss(s),ni.STROKE);m=qt(s),s.restore(),s.strokeStyle=A}let w=t.lineWidth;const _=t.textMatrixScale;if(_===0||w===0){const A=t.textRenderingMode&Kn.FILL_STROKE_MASK;(A===Kn.STROKE||A===Kn.FILL_STROKE)&&(w=this.getSinglePixelWidth())}else w/=_;if(a!==1&&(s.scale(a,a),w/=a),s.lineWidth=w,n.isInvalidPDFjsFont){const A=[];let S=0;for(const O of e)A.push(O.unicode),S+=O.width;s.fillText(A.join(""),0,0),t.x+=S*b*c,s.restore(),this.compose();return}let E=0,x;for(x=0;x<h;++x){const A=e[x];if(typeof A=="number"){E+=d*A*r/1e3;continue}let S=!1;const O=(A.isSpace?l:0)+o,C=A.fontChar,k=A.accent;let D,R,F=A.width;if(f){const $=A.vmetric||y,G=-(A.vmetric?$[1]:F*.5)*b,Z=$[2]*b;F=$?-$[0]:F,D=G/a,R=(E+Z)/a}else D=E/a,R=0;if(n.remeasure&&F>0){const $=s.measureText(C).width*1e3/r*a;if(F<$&&this.isFontSubpixelAAEnabled){const G=F/$;S=!0,s.save(),s.scale(G,1),D/=G}else F!==$&&(D+=(F-$)/2e3*r/a)}if(this.contentVisible&&(A.isInFont||n.missingFile)){if(v&&!k)s.fillText(C,D,R);else if(this.paintChar(C,D,R,g,m),k){const $=D+r*k.offset.x/a,G=R-r*k.offset.y/a;this.paintChar(k.fontChar,$,G,g,m)}}const H=f?F*b-O*u:F*b+O*u;E+=H,S&&s.restore()}f?t.y-=E:t.x+=E*c,s.restore(),this.compose()}showType3Text(e){const t=this.ctx,n=this.current,r=n.font,s=n.fontSize,a=n.fontDirection,o=r.vertical?1:-1,l=n.charSpacing,u=n.wordSpacing,c=n.textHScale*a,h=n.fontMatrix||Ob,f=e.length,d=n.textRenderingMode===Kn.INVISIBLE;let y,b,v,g;if(!(d||s===0)){for(this._cachedScaleForStroking[0]=-1,this._cachedGetSinglePixelWidth=null,t.save(),t.transform(...n.textMatrix),t.translate(n.x,n.y),t.scale(c,a),y=0;y<f;++y){if(b=e[y],typeof b=="number"){g=o*b*s/1e3,this.ctx.translate(g,0),n.x+=g*c;continue}const m=(b.isSpace?u:0)+l,w=r.charProcOperatorList[b.operatorListId];if(!w){it(`Type3 character "${b.operatorListId}" is not available.`);continue}this.contentVisible&&(this.processingType3=b,this.save(),t.scale(s,s),t.transform(...h),this.executeOperatorList(w),this.restore()),v=$e.applyTransform([b.width,0],h)[0]*s+m,t.translate(v,0),n.x+=v*c}t.restore(),this.processingType3=null}}setCharWidth(e,t){}setCharWidthAndBounds(e,t,n,r,s,a){this.ctx.rect(n,r,s-n,a-r),this.ctx.clip(),this.endPath()}getColorN_Pattern(e){let t;if(e[0]==="TilingPattern"){const n=e[1],r=this.baseTransform||qt(this.ctx),s={createCanvasGraphics:a=>new j_(a,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:this.optionalContentConfig,markedContentStack:this.markedContentStack})};t=new n1(e,n,this.ctx,s,r)}else t=this._getPattern(e[1],e[2]);return t}setStrokeColorN(){this.current.strokeColor=this.getColorN_Pattern(arguments),this.current.patternStroke=!0}setFillColorN(){this.current.fillColor=this.getColorN_Pattern(arguments),this.current.patternFill=!0}setStrokeRGBColor(e,t,n){this.ctx.strokeStyle=this.current.strokeColor=$e.makeHexColor(e,t,n),this.current.patternStroke=!1}setStrokeTransparent(){this.ctx.strokeStyle=this.current.strokeColor="transparent",this.current.patternStroke=!1}setFillRGBColor(e,t,n){this.ctx.fillStyle=this.current.fillColor=$e.makeHexColor(e,t,n),this.current.patternFill=!1}setFillTransparent(){this.ctx.fillStyle=this.current.fillColor="transparent",this.current.patternFill=!1}_getPattern(e,t=null){let n;return this.cachedPatterns.has(e)?n=this.cachedPatterns.get(e):(n=FL(this.getObject(e)),this.cachedPatterns.set(e,n)),t&&(n.matrix=t),n}shadingFill(e){if(!this.contentVisible)return;const t=this.ctx;this.save();const n=this._getPattern(e);t.fillStyle=n.getPattern(t,this,ss(t),ni.SHADING);const r=ss(t);if(r){const{width:s,height:a}=t.canvas,[o,l,u,c]=$e.getAxialAlignedBoundingBox([0,0,s,a],r);this.ctx.fillRect(o,l,u-o,c-l)}else this.ctx.fillRect(-1e10,-1e10,2e10,2e10);this.compose(this.current.getClippedPathBoundingBox()),this.restore()}beginInlineImage(){Nt("Should not call beginInlineImage")}beginImageData(){Nt("Should not call beginImageData")}paintFormXObjectBegin(e,t){if(this.contentVisible&&(this.save(),this.baseTransformStack.push(this.baseTransform),e&&this.transform(...e),this.baseTransform=qt(this.ctx),t)){const n=t[2]-t[0],r=t[3]-t[1];this.ctx.rect(t[0],t[1],n,r),this.current.updateRectMinMax(qt(this.ctx),t),this.clip(),this.endPath()}}paintFormXObjectEnd(){this.contentVisible&&(this.restore(),this.baseTransform=this.baseTransformStack.pop())}beginGroup(e){if(!this.contentVisible)return;this.save(),this.inSMaskMode&&(this.endSMaskMode(),this.current.activeSMask=null);const t=this.ctx;e.isolated||ly("TODO: Support non-isolated groups."),e.knockout&&it("Knockout groups not supported.");const n=qt(t);if(e.matrix&&t.transform(...e.matrix),!e.bbox)throw new Error("Bounding box is required.");let r=$e.getAxialAlignedBoundingBox(e.bbox,qt(t));const s=[0,0,t.canvas.width,t.canvas.height];r=$e.intersect(r,s)||[0,0,0,0];const a=Math.floor(r[0]),o=Math.floor(r[1]),l=Math.max(Math.ceil(r[2])-a,1),u=Math.max(Math.ceil(r[3])-o,1);this.current.startNewPathAndClipBox([0,0,l,u]);let c="groupAt"+this.groupLevel;e.smask&&(c+="_smask_"+this.smaskCounter++%2);const h=this.cachedCanvases.getCanvas(c,l,u),f=h.context;f.translate(-a,-o),f.transform(...n),e.smask?this.smaskStack.push({canvas:h.canvas,context:f,offsetX:a,offsetY:o,subtype:e.smask.subtype,backdrop:e.smask.backdrop,transferMap:e.smask.transferMap||null,startTransformInverse:null}):(t.setTransform(1,0,0,1,0,0),t.translate(a,o),t.save()),ef(t,f),this.ctx=f,this.setGState([["BM","source-over"],["ca",1],["CA",1]]),this.groupStack.push(t),this.groupLevel++}endGroup(e){if(!this.contentVisible)return;this.groupLevel--;const t=this.ctx,n=this.groupStack.pop();if(this.ctx=n,this.ctx.imageSmoothingEnabled=!1,e.smask)this.tempSMask=this.smaskStack.pop(),this.restore();else{this.ctx.restore();const r=qt(this.ctx);this.restore(),this.ctx.save(),this.ctx.setTransform(...r);const s=$e.getAxialAlignedBoundingBox([0,0,t.canvas.width,t.canvas.height],r);this.ctx.drawImage(t.canvas,0,0),this.ctx.restore(),this.compose(s)}}beginAnnotation(e,t,n,r,s){if(M(this,is,i1).call(this),Tg(this.ctx),this.ctx.save(),this.save(),this.baseTransform&&this.ctx.setTransform(...this.baseTransform),t){const a=t[2]-t[0],o=t[3]-t[1];if(s&&this.annotationCanvasMap){n=n.slice(),n[4]-=t[0],n[5]-=t[1],t=t.slice(),t[0]=t[1]=0,t[2]=a,t[3]=o;const[l,u]=$e.singularValueDecompose2dScale(qt(this.ctx)),{viewportScale:c}=this,h=Math.ceil(a*this.outputScaleX*c),f=Math.ceil(o*this.outputScaleY*c);this.annotationCanvas=this.canvasFactory.create(h,f);const{canvas:d,context:y}=this.annotationCanvas;this.annotationCanvasMap.set(e,d),this.annotationCanvas.savedCtx=this.ctx,this.ctx=y,this.ctx.save(),this.ctx.setTransform(l,0,0,-u,0,o*u),Tg(this.ctx)}else Tg(this.ctx),this.endPath(),this.ctx.rect(t[0],t[1],a,o),this.ctx.clip(),this.ctx.beginPath()}this.current=new TE(this.ctx.canvas.width,this.ctx.canvas.height),this.transform(...n),this.transform(...r)}endAnnotation(){this.annotationCanvas&&(this.ctx.restore(),M(this,is,r1).call(this),this.ctx=this.annotationCanvas.savedCtx,delete this.annotationCanvas.savedCtx,delete this.annotationCanvas)}paintImageMaskXObject(e){if(!this.contentVisible)return;const t=e.count;e=this.getObject(e.data,e),e.count=t;const n=this.ctx,r=this.processingType3;if(r&&(r.compiled===void 0&&(r.compiled=qL(e)),r.compiled)){r.compiled(n);return}const s=this._createMaskCanvas(e),a=s.canvas;n.save(),n.setTransform(1,0,0,1,0,0),n.drawImage(a,s.offsetX,s.offsetY),n.restore(),this.compose()}paintImageMaskXObjectRepeat(e,t,n=0,r=0,s,a){if(!this.contentVisible)return;e=this.getObject(e.data,e);const o=this.ctx;o.save();const l=qt(o);o.transform(t,n,r,s,0,0);const u=this._createMaskCanvas(e);o.setTransform(1,0,0,1,u.offsetX-l[4],u.offsetY-l[5]);for(let c=0,h=a.length;c<h;c+=2){const f=$e.transform(l,[t,n,r,s,a[c],a[c+1]]),[d,y]=$e.applyTransform([0,0],f);o.drawImage(u.canvas,d,y)}o.restore(),this.compose()}paintImageMaskXObjectGroup(e){if(!this.contentVisible)return;const t=this.ctx,n=this.current.fillColor,r=this.current.patternFill;for(const s of e){const{data:a,width:o,height:l,transform:u}=s,c=this.cachedCanvases.getCanvas("maskCanvas",o,l),h=c.context;h.save();const f=this.getObject(a,s);DE(h,f),h.globalCompositeOperation="source-in",h.fillStyle=r?n.getPattern(h,this,ss(t),ni.FILL):n,h.fillRect(0,0,o,l),h.restore(),t.save(),t.transform(...u),t.scale(1,-1),Cg(t,c.canvas,0,0,o,l,0,-1,1,1),t.restore()}this.compose()}paintImageXObject(e){if(!this.contentVisible)return;const t=this.getObject(e);if(!t){it("Dependent image isn't ready yet");return}this.paintInlineImageXObject(t)}paintImageXObjectRepeat(e,t,n,r){if(!this.contentVisible)return;const s=this.getObject(e);if(!s){it("Dependent image isn't ready yet");return}const a=s.width,o=s.height,l=[];for(let u=0,c=r.length;u<c;u+=2)l.push({transform:[t,0,0,n,r[u],r[u+1]],x:0,y:0,w:a,h:o});this.paintInlineImageXObjectGroup(s,l)}applyTransferMapsToCanvas(e){return this.current.transferMaps!=="none"&&(e.filter=this.current.transferMaps,e.drawImage(e.canvas,0,0),e.filter="none"),e.canvas}applyTransferMapsToBitmap(e){if(this.current.transferMaps==="none")return e.bitmap;const{bitmap:t,width:n,height:r}=e,s=this.cachedCanvases.getCanvas("inlineImage",n,r),a=s.context;return a.filter=this.current.transferMaps,a.drawImage(t,0,0),a.filter="none",s.canvas}paintInlineImageXObject(e){if(!this.contentVisible)return;const t=e.width,n=e.height,r=this.ctx;if(this.save(),!ri){const{filter:o}=r;o!=="none"&&o!==""&&(r.filter="none")}r.scale(1/t,-1/n);let s;if(e.bitmap)s=this.applyTransferMapsToBitmap(e);else if(typeof HTMLElement=="function"&&e instanceof HTMLElement||!e.data)s=e;else{const l=this.cachedCanvases.getCanvas("inlineImage",t,n).context;kE(l,e),s=this.applyTransferMapsToCanvas(l)}const a=this._scaleImage(s,ss(r));r.imageSmoothingEnabled=OE(qt(r),e.interpolate),Cg(r,a.img,0,0,a.paintWidth,a.paintHeight,0,-n,t,n),this.compose(),this.restore()}paintInlineImageXObjectGroup(e,t){if(!this.contentVisible)return;const n=this.ctx;let r;if(e.bitmap)r=e.bitmap;else{const s=e.width,a=e.height,l=this.cachedCanvases.getCanvas("inlineImage",s,a).context;kE(l,e),r=this.applyTransferMapsToCanvas(l)}for(const s of t)n.save(),n.transform(...s.transform),n.scale(1,-1),Cg(n,r,s.x,s.y,s.w,s.h,0,-1,1,1),n.restore();this.compose()}paintSolidColorImageMask(){this.contentVisible&&(this.ctx.fillRect(0,0,1,1),this.compose())}markPoint(e){}markPointProps(e,t){}beginMarkedContent(e){this.markedContentStack.push({visible:!0})}beginMarkedContentProps(e,t){e==="OC"?this.markedContentStack.push({visible:this.optionalContentConfig.isVisible(t)}):this.markedContentStack.push({visible:!0}),this.contentVisible=this.isContentVisible()}endMarkedContent(){this.markedContentStack.pop(),this.contentVisible=this.isContentVisible()}beginCompat(){}endCompat(){}consumePath(e){const t=this.current.isEmptyClip();this.pendingClip&&this.current.updateClipFromPath(),this.pendingClip||this.compose(e);const n=this.ctx;this.pendingClip&&(t||(this.pendingClip===NE?n.clip("evenodd"):n.clip()),this.pendingClip=null),this.current.startNewPathAndClipBox(this.current.clipBox),n.beginPath()}getSinglePixelWidth(){if(!this._cachedGetSinglePixelWidth){const e=qt(this.ctx);if(e[1]===0&&e[2]===0)this._cachedGetSinglePixelWidth=1/Math.min(Math.abs(e[0]),Math.abs(e[3]));else{const t=Math.abs(e[0]*e[3]-e[2]*e[1]),n=Math.hypot(e[0],e[2]),r=Math.hypot(e[1],e[3]);this._cachedGetSinglePixelWidth=Math.max(n,r)/t}}return this._cachedGetSinglePixelWidth}getScaleForStroking(){if(this._cachedScaleForStroking[0]===-1){const{lineWidth:e}=this.current,{a:t,b:n,c:r,d:s}=this.ctx.getTransform();let a,o;if(n===0&&r===0){const l=Math.abs(t),u=Math.abs(s);if(l===u)if(e===0)a=o=1/l;else{const c=l*e;a=o=c<1?1/c:1}else if(e===0)a=1/l,o=1/u;else{const c=l*e,h=u*e;a=c<1?1/c:1,o=h<1?1/h:1}}else{const l=Math.abs(t*s-n*r),u=Math.hypot(t,n),c=Math.hypot(r,s);if(e===0)a=c/l,o=u/l;else{const h=e*l;a=c>h?c/h:1,o=u>h?u/h:1}}this._cachedScaleForStroking[0]=a,this._cachedScaleForStroking[1]=o}return this._cachedScaleForStroking}rescaleAndStroke(e){const{ctx:t}=this,{lineWidth:n}=this.current,[r,s]=this.getScaleForStroking();if(t.lineWidth=n||1,r===1&&s===1){t.stroke();return}const a=t.getLineDash();if(e&&t.save(),t.scale(r,s),a.length>0){const o=Math.max(r,s);t.setLineDash(a.map(l=>l/o)),t.lineDashOffset/=o}t.stroke(),e&&t.restore()}isContentVisible(){for(let e=this.markedContentStack.length-1;e>=0;e--)if(!this.markedContentStack[e].visible)return!1;return!0}};is=new WeakSet,i1=function(){for(;this.stateStack.length||this.inSMaskMode;)this.restore();this.current.activeSMask=null,this.ctx.restore(),this.transparentCanvas&&(this.ctx=this.compositeCtx,this.ctx.save(),this.ctx.setTransform(1,0,0,1,0,0),this.ctx.drawImage(this.transparentCanvas,0,0),this.ctx.restore(),this.transparentCanvas=null)},r1=function(){if(this.pageColors){const e=this.filterFactory.addHCMFilter(this.pageColors.foreground,this.pageColors.background);if(e!=="none"){const t=this.ctx.filter;this.ctx.filter=e,this.ctx.drawImage(this.ctx.canvas,0,0),this.ctx.filter=t}}},s1=function(e,t,n){const r=new Path2D;return r.addPath(e,new DOMMatrix(n).invertSelf().multiplySelf(t)),r};let pc=j_;for(const i in Lr)pc.prototype[i]!==void 0&&(pc.prototype[Lr[i]]=pc.prototype[i]);var $d,Vd;class ga{static get workerPort(){return p(this,$d)}static set workerPort(e){if(!(typeof Worker<"u"&&e instanceof Worker)&&e!==null)throw new Error("Invalid `workerPort` type.");N(this,$d,e)}static get workerSrc(){return p(this,Vd)}static set workerSrc(e){if(typeof e!="string")throw new Error("Invalid `workerSrc` type.");N(this,Vd,e)}}$d=new WeakMap,Vd=new WeakMap,L(ga,$d,null),L(ga,Vd,"");var kl,Gd;class VL{constructor({parsedData:e,rawData:t}){L(this,kl);L(this,Gd);N(this,kl,e),N(this,Gd,t)}getRaw(){return p(this,Gd)}get(e){return p(this,kl).get(e)??null}getAll(){return r_(p(this,kl))}has(e){return p(this,kl).has(e)}}kl=new WeakMap,Gd=new WeakMap;const zu=Symbol("INTERNAL");var Xd,Kd,Yd,Lc;class GL{constructor(e,{name:t,intent:n,usage:r,rbGroups:s}){L(this,Xd,!1);L(this,Kd,!1);L(this,Yd,!1);L(this,Lc,!0);N(this,Xd,!!(e&Yi.DISPLAY)),N(this,Kd,!!(e&Yi.PRINT)),this.name=t,this.intent=n,this.usage=r,this.rbGroups=s}get visible(){if(p(this,Yd))return p(this,Lc);if(!p(this,Lc))return!1;const{print:e,view:t}=this.usage;return p(this,Xd)?(t==null?void 0:t.viewState)!=="OFF":p(this,Kd)?(e==null?void 0:e.printState)!=="OFF":!0}_setVisible(e,t,n=!1){e!==zu&&Nt("Internal method `_setVisible` called."),N(this,Yd,n),N(this,Lc,t)}}Xd=new WeakMap,Kd=new WeakMap,Yd=new WeakMap,Lc=new WeakMap;var to,St,Ic,Mc,Zd,a1;class XL{constructor(e,t=Yi.DISPLAY){L(this,Zd);L(this,to,null);L(this,St,new Map);L(this,Ic,null);L(this,Mc,null);if(this.renderingIntent=t,this.name=null,this.creator=null,e!==null){this.name=e.name,this.creator=e.creator,N(this,Mc,e.order);for(const n of e.groups)p(this,St).set(n.id,new GL(t,n));if(e.baseState==="OFF")for(const n of p(this,St).values())n._setVisible(zu,!1);for(const n of e.on)p(this,St).get(n)._setVisible(zu,!0);for(const n of e.off)p(this,St).get(n)._setVisible(zu,!1);N(this,Ic,this.getHash())}}isVisible(e){if(p(this,St).size===0)return!0;if(!e)return ly("Optional content group not defined."),!0;if(e.type==="OCG")return p(this,St).has(e.id)?p(this,St).get(e.id).visible:(it(`Optional content group not found: ${e.id}`),!0);if(e.type==="OCMD"){if(e.expression)return M(this,Zd,a1).call(this,e.expression);if(!e.policy||e.policy==="AnyOn"){for(const t of e.ids){if(!p(this,St).has(t))return it(`Optional content group not found: ${t}`),!0;if(p(this,St).get(t).visible)return!0}return!1}else if(e.policy==="AllOn"){for(const t of e.ids){if(!p(this,St).has(t))return it(`Optional content group not found: ${t}`),!0;if(!p(this,St).get(t).visible)return!1}return!0}else if(e.policy==="AnyOff"){for(const t of e.ids){if(!p(this,St).has(t))return it(`Optional content group not found: ${t}`),!0;if(!p(this,St).get(t).visible)return!0}return!1}else if(e.policy==="AllOff"){for(const t of e.ids){if(!p(this,St).has(t))return it(`Optional content group not found: ${t}`),!0;if(p(this,St).get(t).visible)return!1}return!0}return it(`Unknown optional content policy ${e.policy}.`),!0}return it(`Unknown group type ${e.type}.`),!0}setVisibility(e,t=!0,n=!0){var s;const r=p(this,St).get(e);if(!r){it(`Optional content group not found: ${e}`);return}if(n&&t&&r.rbGroups.length)for(const a of r.rbGroups)for(const o of a)o!==e&&((s=p(this,St).get(o))==null||s._setVisible(zu,!1,!0));r._setVisible(zu,!!t,!0),N(this,to,null)}setOCGState({state:e,preserveRB:t}){let n;for(const r of e){switch(r){case"ON":case"OFF":case"Toggle":n=r;continue}const s=p(this,St).get(r);if(s)switch(n){case"ON":this.setVisibility(r,!0,t);break;case"OFF":this.setVisibility(r,!1,t);break;case"Toggle":this.setVisibility(r,!s.visible,t);break}}N(this,to,null)}get hasInitialVisibility(){return p(this,Ic)===null||this.getHash()===p(this,Ic)}getOrder(){return p(this,St).size?p(this,Mc)?p(this,Mc).slice():[...p(this,St).keys()]:null}getGroups(){return p(this,St).size>0?r_(p(this,St)):null}getGroup(e){return p(this,St).get(e)||null}getHash(){if(p(this,to)!==null)return p(this,to);const e=new YC;for(const[t,n]of p(this,St))e.update(`${t}:${n.visible}`);return N(this,to,e.hexdigest())}}to=new WeakMap,St=new WeakMap,Ic=new WeakMap,Mc=new WeakMap,Zd=new WeakSet,a1=function(e){const t=e.length;if(t<2)return!0;const n=e[0];for(let r=1;r<t;r++){const s=e[r];let a;if(Array.isArray(s))a=M(this,Zd,a1).call(this,s);else if(p(this,St).has(s))a=p(this,St).get(s).visible;else return it(`Optional content group not found: ${s}`),!0;switch(n){case"And":if(!a)return!1;break;case"Or":if(a)return!0;break;case"Not":return!a;default:return!0}}return n==="And"};class KL{constructor(e,{disableRange:t=!1,disableStream:n=!1}){dn(e,'PDFDataTransportStream - missing required "pdfDataRangeTransport" argument.');const{length:r,initialData:s,progressiveDone:a,contentDispositionFilename:o}=e;if(this._queuedChunks=[],this._progressiveDone=a,this._contentDispositionFilename=o,(s==null?void 0:s.length)>0){const l=s instanceof Uint8Array&&s.byteLength===s.buffer.byteLength?s.buffer:new Uint8Array(s).buffer;this._queuedChunks.push(l)}this._pdfDataRangeTransport=e,this._isStreamingSupported=!n,this._isRangeSupported=!t,this._contentLength=r,this._fullRequestReader=null,this._rangeReaders=[],e.addRangeListener((l,u)=>{this._onReceiveData({begin:l,chunk:u})}),e.addProgressListener((l,u)=>{this._onProgress({loaded:l,total:u})}),e.addProgressiveReadListener(l=>{this._onReceiveData({chunk:l})}),e.addProgressiveDoneListener(()=>{this._onProgressiveDone()}),e.transportReady()}_onReceiveData({begin:e,chunk:t}){const n=t instanceof Uint8Array&&t.byteLength===t.buffer.byteLength?t.buffer:new Uint8Array(t).buffer;if(e===void 0)this._fullRequestReader?this._fullRequestReader._enqueue(n):this._queuedChunks.push(n);else{const r=this._rangeReaders.some(function(s){return s._begin!==e?!1:(s._enqueue(n),!0)});dn(r,"_onReceiveData - no `PDFDataTransportStreamRangeReader` instance found.")}}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}_onProgress(e){var t,n,r,s;e.total===void 0?(n=(t=this._rangeReaders[0])==null?void 0:t.onProgress)==null||n.call(t,{loaded:e.loaded}):(s=(r=this._fullRequestReader)==null?void 0:r.onProgress)==null||s.call(r,{loaded:e.loaded,total:e.total})}_onProgressiveDone(){var e;(e=this._fullRequestReader)==null||e.progressiveDone(),this._progressiveDone=!0}_removeRangeReader(e){const t=this._rangeReaders.indexOf(e);t>=0&&this._rangeReaders.splice(t,1)}getFullReader(){dn(!this._fullRequestReader,"PDFDataTransportStream.getFullReader can only be called once.");const e=this._queuedChunks;return this._queuedChunks=null,new YL(this,e,this._progressiveDone,this._contentDispositionFilename)}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new ZL(this,e,t);return this._pdfDataRangeTransport.requestDataRange(e,t),this._rangeReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeReaders.slice(0))n.cancel(e);this._pdfDataRangeTransport.abort()}}class YL{constructor(e,t,n=!1,r=null){this._stream=e,this._done=n||!1,this._filename=o_(r)?r:null,this._queuedChunks=t||[],this._loaded=0;for(const s of this._queuedChunks)this._loaded+=s.byteLength;this._requests=[],this._headersReady=Promise.resolve(),e._fullRequestReader=this,this.onProgress=null}_enqueue(e){this._done||(this._requests.length>0?this._requests.shift().resolve({value:e,done:!1}):this._queuedChunks.push(e),this._loaded+=e.byteLength)}get headersReady(){return this._headersReady}get filename(){return this._filename}get isRangeSupported(){return this._stream._isRangeSupported}get isStreamingSupported(){return this._stream._isStreamingSupported}get contentLength(){return this._stream._contentLength}async read(){if(this._queuedChunks.length>0)return{value:this._queuedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}progressiveDone(){this._done||(this._done=!0)}}class ZL{constructor(e,t,n){this._stream=e,this._begin=t,this._end=n,this._queuedChunk=null,this._requests=[],this._done=!1,this.onProgress=null}_enqueue(e){if(!this._done){if(this._requests.length===0)this._queuedChunk=e;else{this._requests.shift().resolve({value:e,done:!1});for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0}this._done=!0,this._stream._removeRangeReader(this)}}get isStreamingSupported(){return!1}async read(){if(this._queuedChunk){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._stream._removeRangeReader(this)}}function QL(i){let e=!0,t=n("filename\\*","i").exec(i);if(t){t=t[1];let c=o(t);return c=unescape(c),c=l(c),c=u(c),s(c)}if(t=a(i),t){const c=u(t);return s(c)}if(t=n("filename","i").exec(i),t){t=t[1];let c=o(t);return c=u(c),s(c)}function n(c,h){return new RegExp("(?:^|;)\\s*"+c+'\\s*=\\s*([^";\\s][^;\\s]*|"(?:[^"\\\\]|\\\\"?)+"?)',h)}function r(c,h){if(c){if(!/^[\x00-\xFF]+$/.test(h))return h;try{const f=new TextDecoder(c,{fatal:!0}),d=uy(h);h=f.decode(d),e=!1}catch{}}return h}function s(c){return e&&/[\x80-\xff]/.test(c)&&(c=r("utf-8",c),e&&(c=r("iso-8859-1",c))),c}function a(c){const h=[];let f;const d=n("filename\\*((?!0\\d)\\d+)(\\*?)","ig");for(;(f=d.exec(c))!==null;){let[,b,v,g]=f;if(b=parseInt(b,10),b in h){if(b===0)break;continue}h[b]=[v,g]}const y=[];for(let b=0;b<h.length&&b in h;++b){let[v,g]=h[b];g=o(g),v&&(g=unescape(g),b===0&&(g=l(g))),y.push(g)}return y.join("")}function o(c){if(c.startsWith('"')){const h=c.slice(1).split('\\"');for(let f=0;f<h.length;++f){const d=h[f].indexOf('"');d!==-1&&(h[f]=h[f].slice(0,d),h.length=f+1),h[f]=h[f].replaceAll(/\\(.)/g,"$1")}c=h.join('"')}return c}function l(c){const h=c.indexOf("'");if(h===-1)return c;const f=c.slice(0,h),y=c.slice(h+1).replace(/^[^']*'/,"");return r(f,y)}function u(c){return!c.startsWith("=?")||/[\x00-\x19\x80-\xff]/.test(c)?c:c.replaceAll(/=\?([\w-]*)\?([QqBb])\?((?:[^?]|\?(?!=))*)\?=/g,function(h,f,d,y){if(d==="q"||d==="Q")return y=y.replaceAll("_"," "),y=y.replaceAll(/=([0-9a-fA-F]{2})/g,function(b,v){return String.fromCharCode(parseInt(v,16))}),r(f,y);try{y=atob(y)}catch{}return r(f,y)})}return""}function cT(i,e){const t=new Headers;if(!i||!e||typeof e!="object")return t;for(const n in e){const r=e[n];r!==void 0&&t.append(n,r)}return t}function fy(i){try{return new URL(i).origin}catch{}return null}function hT({responseHeaders:i,isHttp:e,rangeChunkSize:t,disableRange:n}){const r={allowRangeRequests:!1,suggestedLength:void 0},s=parseInt(i.get("Content-Length"),10);return!Number.isInteger(s)||(r.suggestedLength=s,s<=2*t)||n||!e||i.get("Accept-Ranges")!=="bytes"||(i.get("Content-Encoding")||"identity")!=="identity"||(r.allowRangeRequests=!0),r}function fT(i){const e=i.get("Content-Disposition");if(e){let t=QL(e);if(t.includes("%"))try{t=decodeURIComponent(t)}catch{}if(o_(t))return t}return null}function dy(i,e){return i===404||i===0&&e.startsWith("file:")?new ld('Missing PDF "'+e+'".'):new Zm(`Unexpected server response (${i}) while retrieving PDF "${e}".`,i)}function dT(i){return i===200||i===206}function pT(i,e,t){return{method:"GET",headers:i,signal:t.signal,mode:"cors",credentials:e?"include":"same-origin",redirect:"follow"}}function gT(i){return i instanceof Uint8Array?i.buffer:i instanceof ArrayBuffer?i:(it(`getArrayBuffer - unexpected data format: ${i}`),new Uint8Array(i).buffer)}class RE{constructor(e){Ze(this,"_responseOrigin",null);this.source=e,this.isHttp=/^https?:/i.test(e.url),this.headers=cT(this.isHttp,e.httpHeaders),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return dn(!this._fullRequestReader,"PDFFetchStream.getFullReader can only be called once."),this._fullRequestReader=new JL(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new eI(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class JL{constructor(e){this._stream=e,this._reader=null,this._loaded=0,this._filename=null;const t=e.source;this._withCredentials=t.withCredentials||!1,this._contentLength=t.length,this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._abortController=new AbortController,this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange;const n=new Headers(e.headers),r=t.url;fetch(r,pT(n,this._withCredentials,this._abortController)).then(s=>{if(e._responseOrigin=fy(s.url),!dT(s.status))throw dy(s.status,r);this._reader=s.body.getReader(),this._headersCapability.resolve();const a=s.headers,{allowRangeRequests:o,suggestedLength:l}=hT({responseHeaders:a,isHttp:e.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});this._isRangeSupported=o,this._contentLength=l||this._contentLength,this._filename=fT(a),!this._isStreamingSupported&&this._isRangeSupported&&this.cancel(new Fo("Streaming is disabled."))}).catch(this._headersCapability.reject),this.onProgress=null}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._headersCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:gT(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}class eI{constructor(e,t,n){this._stream=e,this._reader=null,this._loaded=0;const r=e.source;this._withCredentials=r.withCredentials||!1,this._readCapability=Promise.withResolvers(),this._isStreamingSupported=!r.disableStream,this._abortController=new AbortController;const s=new Headers(e.headers);s.append("Range",`bytes=${t}-${n-1}`);const a=r.url;fetch(a,pT(s,this._withCredentials,this._abortController)).then(o=>{const l=fy(o.url);if(l!==e._responseOrigin)throw new Error(`Expected range response-origin "${l}" to match "${e._responseOrigin}".`);if(!dT(o.status))throw dy(o.status,a);this._readCapability.resolve(),this._reader=o.body.getReader()}).catch(this._readCapability.reject),this.onProgress=null}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;await this._readCapability.promise;const{value:e,done:t}=await this._reader.read();return t?{value:e,done:t}:(this._loaded+=e.byteLength,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:gT(e),done:!1})}cancel(e){var t;(t=this._reader)==null||t.cancel(e),this._abortController.abort()}}const f0=200,d0=206;function tI(i){const e=i.response;return typeof e!="string"?e:uy(e).buffer}class nI{constructor({url:e,httpHeaders:t,withCredentials:n}){Ze(this,"_responseOrigin",null);this.url=e,this.isHttp=/^https?:/i.test(e),this.headers=cT(this.isHttp,t),this.withCredentials=n||!1,this.currXhrId=0,this.pendingRequests=Object.create(null)}request(e){const t=new XMLHttpRequest,n=this.currXhrId++,r=this.pendingRequests[n]={xhr:t};t.open("GET",this.url),t.withCredentials=this.withCredentials;for(const[s,a]of this.headers)t.setRequestHeader(s,a);return this.isHttp&&"begin"in e&&"end"in e?(t.setRequestHeader("Range",`bytes=${e.begin}-${e.end-1}`),r.expectedStatus=d0):r.expectedStatus=f0,t.responseType="arraybuffer",dn(e.onError,"Expected `onError` callback to be provided."),t.onerror=()=>{e.onError(t.status)},t.onreadystatechange=this.onStateChange.bind(this,n),t.onprogress=this.onProgress.bind(this,n),r.onHeadersReceived=e.onHeadersReceived,r.onDone=e.onDone,r.onError=e.onError,r.onProgress=e.onProgress,t.send(null),n}onProgress(e,t){var r;const n=this.pendingRequests[e];n&&((r=n.onProgress)==null||r.call(n,t))}onStateChange(e,t){const n=this.pendingRequests[e];if(!n)return;const r=n.xhr;if(r.readyState>=2&&n.onHeadersReceived&&(n.onHeadersReceived(),delete n.onHeadersReceived),r.readyState!==4||!(e in this.pendingRequests))return;if(delete this.pendingRequests[e],r.status===0&&this.isHttp){n.onError(r.status);return}const s=r.status||f0;if(!(s===f0&&n.expectedStatus===d0)&&s!==n.expectedStatus){n.onError(r.status);return}const o=tI(r);if(s===d0){const l=r.getResponseHeader("Content-Range"),u=/bytes (\d+)-(\d+)\/(\d+)/.exec(l);u?n.onDone({begin:parseInt(u[1],10),chunk:o}):(it('Missing or invalid "Content-Range" header.'),n.onError(0))}else o?n.onDone({begin:0,chunk:o}):n.onError(r.status)}getRequestXhr(e){return this.pendingRequests[e].xhr}isPendingRequest(e){return e in this.pendingRequests}abortRequest(e){const t=this.pendingRequests[e].xhr;delete this.pendingRequests[e],t.abort()}}class iI{constructor(e){this._source=e,this._manager=new nI(e),this._rangeChunkSize=e.rangeChunkSize,this._fullRequestReader=null,this._rangeRequestReaders=[]}_onRangeRequestReaderClosed(e){const t=this._rangeRequestReaders.indexOf(e);t>=0&&this._rangeRequestReaders.splice(t,1)}getFullReader(){return dn(!this._fullRequestReader,"PDFNetworkStream.getFullReader can only be called once."),this._fullRequestReader=new rI(this._manager,this._source),this._fullRequestReader}getRangeReader(e,t){const n=new sI(this._manager,e,t);return n.onClosed=this._onRangeRequestReaderClosed.bind(this),this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class rI{constructor(e,t){this._manager=e,this._url=t.url,this._fullRequestId=e.request({onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._headersCapability=Promise.withResolvers(),this._disableRange=t.disableRange||!1,this._contentLength=t.length,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!1,this._isRangeSupported=!1,this._cachedChunks=[],this._requests=[],this._done=!1,this._storedError=void 0,this._filename=null,this.onProgress=null}_onHeadersReceived(){const e=this._fullRequestId,t=this._manager.getRequestXhr(e);this._manager._responseOrigin=fy(t.responseURL);const n=t.getAllResponseHeaders(),r=new Headers(n?n.trimStart().replace(/[^\S ]+$/,"").split(/[\r\n]+/).map(o=>{const[l,...u]=o.split(": ");return[l,u.join(": ")]}):[]),{allowRangeRequests:s,suggestedLength:a}=hT({responseHeaders:r,isHttp:this._manager.isHttp,rangeChunkSize:this._rangeChunkSize,disableRange:this._disableRange});s&&(this._isRangeSupported=!0),this._contentLength=a||this._contentLength,this._filename=fT(r),this._isRangeSupported&&this._manager.abortRequest(e),this._headersCapability.resolve()}_onDone(e){if(e&&(this._requests.length>0?this._requests.shift().resolve({value:e.chunk,done:!1}):this._cachedChunks.push(e.chunk)),this._done=!0,!(this._cachedChunks.length>0)){for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0}}_onError(e){this._storedError=dy(e,this._url),this._headersCapability.reject(this._storedError);for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._cachedChunks.length=0}_onProgress(e){var t;(t=this.onProgress)==null||t.call(this,{loaded:e.loaded,total:e.lengthComputable?e.total:this._contentLength})}get filename(){return this._filename}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}get contentLength(){return this._contentLength}get headersReady(){return this._headersCapability.promise}async read(){if(await this._headersCapability.promise,this._storedError)throw this._storedError;if(this._cachedChunks.length>0)return{value:this._cachedChunks.shift(),done:!1};if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0,this._headersCapability.reject(e);for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._fullRequestId)&&this._manager.abortRequest(this._fullRequestId),this._fullRequestReader=null}}class sI{constructor(e,t,n){this._manager=e,this._url=e.url,this._requestId=e.request({begin:t,end:n,onHeadersReceived:this._onHeadersReceived.bind(this),onDone:this._onDone.bind(this),onError:this._onError.bind(this),onProgress:this._onProgress.bind(this)}),this._requests=[],this._queuedChunk=null,this._done=!1,this._storedError=void 0,this.onProgress=null,this.onClosed=null}_onHeadersReceived(){var t;const e=fy((t=this._manager.getRequestXhr(this._requestId))==null?void 0:t.responseURL);e!==this._manager._responseOrigin&&(this._storedError=new Error(`Expected range response-origin "${e}" to match "${this._manager._responseOrigin}".`),this._onError(0))}_close(){var e;(e=this.onClosed)==null||e.call(this,this)}_onDone(e){const t=e.chunk;this._requests.length>0?this._requests.shift().resolve({value:t,done:!1}):this._queuedChunk=t,this._done=!0;for(const n of this._requests)n.resolve({value:void 0,done:!0});this._requests.length=0,this._close()}_onError(e){this._storedError??(this._storedError=dy(e,this._url));for(const t of this._requests)t.reject(this._storedError);this._requests.length=0,this._queuedChunk=null}_onProgress(e){var t;this.isStreamingSupported||(t=this.onProgress)==null||t.call(this,{loaded:e.loaded})}get isStreamingSupported(){return!1}async read(){if(this._storedError)throw this._storedError;if(this._queuedChunk!==null){const t=this._queuedChunk;return this._queuedChunk=null,{value:t,done:!1}}if(this._done)return{value:void 0,done:!0};const e=Promise.withResolvers();return this._requests.push(e),e.promise}cancel(e){this._done=!0;for(const t of this._requests)t.resolve({value:void 0,done:!0});this._requests.length=0,this._manager.isPendingRequest(this._requestId)&&this._manager.abortRequest(this._requestId),this._close()}}const aI=/^[a-z][a-z0-9\-+.]+:/i;function oI(i){if(aI.test(i))return new URL(i);const e=process.getBuiltinModule("url");return new URL(e.pathToFileURL(i))}class lI{constructor(e){this.source=e,this.url=oI(e.url),dn(this.url.protocol==="file:","PDFNodeStream only supports file:// URLs."),this._fullRequestReader=null,this._rangeRequestReaders=[]}get _progressiveDataLength(){var e;return((e=this._fullRequestReader)==null?void 0:e._loaded)??0}getFullReader(){return dn(!this._fullRequestReader,"PDFNodeStream.getFullReader can only be called once."),this._fullRequestReader=new uI(this),this._fullRequestReader}getRangeReader(e,t){if(t<=this._progressiveDataLength)return null;const n=new cI(this,e,t);return this._rangeRequestReaders.push(n),n}cancelAllRequests(e){var t;(t=this._fullRequestReader)==null||t.cancel(e);for(const n of this._rangeRequestReaders.slice(0))n.cancel(e)}}class uI{constructor(e){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null;const t=e.source;this._contentLength=t.length,this._loaded=0,this._filename=null,this._disableRange=t.disableRange||!1,this._rangeChunkSize=t.rangeChunkSize,!this._rangeChunkSize&&!this._disableRange&&(this._disableRange=!0),this._isStreamingSupported=!t.disableStream,this._isRangeSupported=!t.disableRange,this._readableStream=null,this._readCapability=Promise.withResolvers(),this._headersCapability=Promise.withResolvers();const n=process.getBuiltinModule("fs");n.promises.lstat(this._url).then(r=>{this._contentLength=r.size,this._setReadableStream(n.createReadStream(this._url)),this._headersCapability.resolve()},r=>{r.code==="ENOENT"&&(r=new ld(`Missing PDF "${this._url}".`)),this._storedError=r,this._headersCapability.reject(r)})}get headersReady(){return this._headersCapability.promise}get filename(){return this._filename}get contentLength(){return this._contentLength}get isRangeSupported(){return this._isRangeSupported}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded,total:this._contentLength}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),!this._isStreamingSupported&&this._isRangeSupported&&this._error(new Fo("streaming is disabled")),this._storedError&&this._readableStream.destroy(this._storedError)}}class cI{constructor(e,t,n){this._url=e.url,this._done=!1,this._storedError=null,this.onProgress=null,this._loaded=0,this._readableStream=null,this._readCapability=Promise.withResolvers();const r=e.source;this._isStreamingSupported=!r.disableStream;const s=process.getBuiltinModule("fs");this._setReadableStream(s.createReadStream(this._url,{start:t,end:n-1}))}get isStreamingSupported(){return this._isStreamingSupported}async read(){var n;if(await this._readCapability.promise,this._done)return{value:void 0,done:!0};if(this._storedError)throw this._storedError;const e=this._readableStream.read();return e===null?(this._readCapability=Promise.withResolvers(),this.read()):(this._loaded+=e.length,(n=this.onProgress)==null||n.call(this,{loaded:this._loaded}),{value:new Uint8Array(e).buffer,done:!1})}cancel(e){if(!this._readableStream){this._error(e);return}this._readableStream.destroy(e)}_error(e){this._storedError=e,this._readCapability.resolve()}_setReadableStream(e){this._readableStream=e,e.on("readable",()=>{this._readCapability.resolve()}),e.on("end",()=>{e.destroy(),this._done=!0,this._readCapability.resolve()}),e.on("error",t=>{this._error(t)}),this._storedError&&this._readableStream.destroy(this._storedError)}}const hI=1e5,Ei=30,fI=.8;var UA,no,Ci,Qd,Jd,Dl,Js,ep,tp,Ol,Fc,Bc,io,jc,np,zc,Nl,ip,rp,Rl,Pl,sp,ro,Uc,Ra,mT,vT,o1,nr,nm,l1,yT,bT;const bn=class bn{constructor({textContentSource:e,container:t,viewport:n}){L(this,Ra);L(this,no,Promise.withResolvers());L(this,Ci,null);L(this,Qd,!1);L(this,Jd,!!((UA=globalThis.FontInspector)!=null&&UA.enabled));L(this,Dl,null);L(this,Js,null);L(this,ep,0);L(this,tp,0);L(this,Ol,null);L(this,Fc,null);L(this,Bc,0);L(this,io,0);L(this,jc,Object.create(null));L(this,np,[]);L(this,zc,null);L(this,Nl,[]);L(this,ip,new WeakMap);L(this,rp,null);var l;if(e instanceof ReadableStream)N(this,zc,e);else if(typeof e=="object")N(this,zc,new ReadableStream({start(u){u.enqueue(e),u.close()}}));else throw new Error('No "textContentSource" parameter specified.');N(this,Ci,N(this,Fc,t)),N(this,io,n.scale*(globalThis.devicePixelRatio||1)),N(this,Bc,n.rotation),N(this,Js,{div:null,properties:null,ctx:null});const{pageWidth:r,pageHeight:s,pageX:a,pageY:o}=n.rawDims;N(this,rp,[1,0,0,-1,-a,o+s]),N(this,tp,r),N(this,ep,s),M(l=bn,nr,yT).call(l),yu(t,n),p(this,no).promise.finally(()=>{p(bn,Uc).delete(this),N(this,Js,null),N(this,jc,null)}).catch(()=>{})}static get fontFamilyMap(){const{isWindows:e,isFirefox:t}=gi.platform;return ot(this,"fontFamilyMap",new Map([["sans-serif",`${e&&t?"Calibri, ":""}sans-serif`],["monospace",`${e&&t?"Lucida Console, ":""}monospace`]]))}render(){const e=()=>{p(this,Ol).read().then(({value:t,done:n})=>{if(n){p(this,no).resolve();return}p(this,Dl)??N(this,Dl,t.lang),Object.assign(p(this,jc),t.styles),M(this,Ra,mT).call(this,t.items),e()},p(this,no).reject)};return N(this,Ol,p(this,zc).getReader()),p(bn,Uc).add(this),e(),p(this,no).promise}update({viewport:e,onBefore:t=null}){var s;const n=e.scale*(globalThis.devicePixelRatio||1),r=e.rotation;if(r!==p(this,Bc)&&(t==null||t(),N(this,Bc,r),yu(p(this,Fc),{rotation:r})),n!==p(this,io)){t==null||t(),N(this,io,n);const a={div:null,properties:null,ctx:M(s=bn,nr,nm).call(s,p(this,Dl))};for(const o of p(this,Nl))a.properties=p(this,ip).get(o),a.div=o,M(this,Ra,o1).call(this,a)}}cancel(){var t;const e=new Fo("TextLayer task cancelled.");(t=p(this,Ol))==null||t.cancel(e).catch(()=>{}),N(this,Ol,null),p(this,no).reject(e)}get textDivs(){return p(this,Nl)}get textContentItemsStr(){return p(this,np)}static cleanup(){if(!(p(this,Uc).size>0)){p(this,Rl).clear();for(const{canvas:e}of p(this,Pl).values())e.remove();p(this,Pl).clear()}}};no=new WeakMap,Ci=new WeakMap,Qd=new WeakMap,Jd=new WeakMap,Dl=new WeakMap,Js=new WeakMap,ep=new WeakMap,tp=new WeakMap,Ol=new WeakMap,Fc=new WeakMap,Bc=new WeakMap,io=new WeakMap,jc=new WeakMap,np=new WeakMap,zc=new WeakMap,Nl=new WeakMap,ip=new WeakMap,rp=new WeakMap,Rl=new WeakMap,Pl=new WeakMap,sp=new WeakMap,ro=new WeakMap,Uc=new WeakMap,Ra=new WeakSet,mT=function(e){var r,s;if(p(this,Qd))return;(s=p(this,Js)).ctx??(s.ctx=M(r=bn,nr,nm).call(r,p(this,Dl)));const t=p(this,Nl),n=p(this,np);for(const a of e){if(t.length>hI){it("Ignoring additional textDivs for performance reasons."),N(this,Qd,!0);return}if(a.str===void 0){if(a.type==="beginMarkedContentProps"||a.type==="beginMarkedContent"){const o=p(this,Ci);N(this,Ci,document.createElement("span")),p(this,Ci).classList.add("markedContent"),a.id!==null&&p(this,Ci).setAttribute("id",`${a.id}`),o.append(p(this,Ci))}else a.type==="endMarkedContent"&&N(this,Ci,p(this,Ci).parentNode);continue}n.push(a.str),M(this,Ra,vT).call(this,a)}},vT=function(e){var b;const t=document.createElement("span"),n={angle:0,canvasWidth:0,hasText:e.str!=="",hasEOL:e.hasEOL,fontSize:0};p(this,Nl).push(t);const r=$e.transform(p(this,rp),e.transform);let s=Math.atan2(r[1],r[0]);const a=p(this,jc)[e.fontName];a.vertical&&(s+=Math.PI/2);let o=p(this,Jd)&&a.fontSubstitution||a.fontFamily;o=bn.fontFamilyMap.get(o)||o;const l=Math.hypot(r[2],r[3]),u=l*M(b=bn,nr,bT).call(b,o,p(this,Dl));let c,h;s===0?(c=r[4],h=r[5]-u):(c=r[4]+u*Math.sin(s),h=r[5]-u*Math.cos(s));const f="calc(var(--scale-factor)*",d=t.style;p(this,Ci)===p(this,Fc)?(d.left=`${(100*c/p(this,tp)).toFixed(2)}%`,d.top=`${(100*h/p(this,ep)).toFixed(2)}%`):(d.left=`${f}${c.toFixed(2)}px)`,d.top=`${f}${h.toFixed(2)}px)`),d.fontSize=`${f}${(p(bn,ro)*l).toFixed(2)}px)`,d.fontFamily=o,n.fontSize=l,t.setAttribute("role","presentation"),t.textContent=e.str,t.dir=e.dir,p(this,Jd)&&(t.dataset.fontName=a.fontSubstitutionLoadedName||e.fontName),s!==0&&(n.angle=s*(180/Math.PI));let y=!1;if(e.str.length>1)y=!0;else if(e.str!==" "&&e.transform[0]!==e.transform[3]){const v=Math.abs(e.transform[0]),g=Math.abs(e.transform[3]);v!==g&&Math.max(v,g)/Math.min(v,g)>1.5&&(y=!0)}if(y&&(n.canvasWidth=a.vertical?e.height:e.width),p(this,ip).set(t,n),p(this,Js).div=t,p(this,Js).properties=n,M(this,Ra,o1).call(this,p(this,Js)),n.hasText&&p(this,Ci).append(t),n.hasEOL){const v=document.createElement("br");v.setAttribute("role","presentation"),p(this,Ci).append(v)}},o1=function(e){var o;const{div:t,properties:n,ctx:r}=e,{style:s}=t;let a="";if(p(bn,ro)>1&&(a=`scale(${1/p(bn,ro)})`),n.canvasWidth!==0&&n.hasText){const{fontFamily:l}=s,{canvasWidth:u,fontSize:c}=n;M(o=bn,nr,l1).call(o,r,c*p(this,io),l);const{width:h}=r.measureText(t.textContent);h>0&&(a=`scaleX(${u*p(this,io)/h}) ${a}`)}n.angle!==0&&(a=`rotate(${n.angle}deg) ${a}`),a.length>0&&(s.transform=a)},nr=new WeakSet,nm=function(e=null){let t=p(this,Pl).get(e||(e=""));if(!t){const n=document.createElement("canvas");n.className="hiddenCanvasElement",n.lang=e,document.body.append(n),t=n.getContext("2d",{alpha:!1,willReadFrequently:!0}),p(this,Pl).set(e,t),p(this,sp).set(t,{size:0,family:""})}return t},l1=function(e,t,n){const r=p(this,sp).get(e);t===r.size&&n===r.family||(e.font=`${t}px ${n}`,r.size=t,r.family=n)},yT=function(){if(p(this,ro)!==null)return;const e=document.createElement("div");e.style.opacity=0,e.style.lineHeight=1,e.style.fontSize="1px",e.style.position="absolute",e.textContent="X",document.body.append(e),N(this,ro,e.getBoundingClientRect().height),e.remove()},bT=function(e,t){const n=p(this,Rl).get(e);if(n)return n;const r=M(this,nr,nm).call(this,t);r.canvas.width=r.canvas.height=Ei,M(this,nr,l1).call(this,r,Ei,e);const s=r.measureText("");let a=s.fontBoundingBoxAscent,o=Math.abs(s.fontBoundingBoxDescent);if(a){const c=a/(a+o);return p(this,Rl).set(e,c),r.canvas.width=r.canvas.height=0,c}r.strokeStyle="red",r.clearRect(0,0,Ei,Ei),r.strokeText("g",0,0);let l=r.getImageData(0,0,Ei,Ei).data;o=0;for(let c=l.length-1-3;c>=0;c-=4)if(l[c]>0){o=Math.ceil(c/4/Ei);break}r.clearRect(0,0,Ei,Ei),r.strokeText("A",0,Ei),l=r.getImageData(0,0,Ei,Ei).data,a=0;for(let c=0,h=l.length;c<h;c+=4)if(l[c]>0){a=Ei-Math.floor(c/4/Ei);break}r.canvas.width=r.canvas.height=0;const u=a?a/(a+o):fI;return p(this,Rl).set(e,u),u},L(bn,nr),L(bn,Rl,new Map),L(bn,Pl,new Map),L(bn,sp,new WeakMap),L(bn,ro,null),L(bn,Uc,new Set);let ud=bn;class cd{static textContent(e){const t=[],n={items:t,styles:Object.create(null)};function r(s){var l;if(!s)return;let a=null;const o=s.name;if(o==="#text")a=s.value;else if(cd.shouldBuildText(o))(l=s==null?void 0:s.attributes)!=null&&l.textContent?a=s.attributes.textContent:s.value&&(a=s.value);else return;if(a!==null&&t.push({str:a}),!!s.children)for(const u of s.children)r(u)}return r(e),n}static shouldBuildText(e){return!(e==="textarea"||e==="input"||e==="option"||e==="select")}}const dI=65536,pI=100,gI=5e3,mI=ri?OL:TL,vI=ri?NL:rT,yI=ri?DL:kL,bI=ri?RL:lT;function wI(i={}){typeof i=="string"||i instanceof URL?i={url:i}:(i instanceof ArrayBuffer||ArrayBuffer.isView(i))&&(i={data:i});const e=new u1,{docId:t}=e,n=i.url?_I(i.url):null,r=i.data?EI(i.data):null,s=i.httpHeaders||null,a=i.withCredentials===!0,o=i.password??null,l=i.range instanceof wT?i.range:null,u=Number.isInteger(i.rangeChunkSize)&&i.rangeChunkSize>0?i.rangeChunkSize:dI;let c=i.worker instanceof gc?i.worker:null;const h=i.verbosity,f=typeof i.docBaseUrl=="string"&&!hy(i.docBaseUrl)?i.docBaseUrl:null,d=typeof i.cMapUrl=="string"?i.cMapUrl:null,y=i.cMapPacked!==!1,b=i.CMapReaderFactory||vI,v=typeof i.standardFontDataUrl=="string"?i.standardFontDataUrl:null,g=i.StandardFontDataFactory||bI,m=i.stopAtErrors!==!0,w=Number.isInteger(i.maxImageSize)&&i.maxImageSize>-1?i.maxImageSize:-1,_=i.isEvalSupported!==!1,E=typeof i.isOffscreenCanvasSupported=="boolean"?i.isOffscreenCanvasSupported:!ri,x=typeof i.isImageDecoderSupported=="boolean"?i.isImageDecoderSupported:!ri&&(gi.platform.isFirefox||!globalThis.chrome),A=Number.isInteger(i.canvasMaxAreaInBytes)?i.canvasMaxAreaInBytes:-1,S=typeof i.disableFontFace=="boolean"?i.disableFontFace:ri,O=i.fontExtraProperties===!0,C=i.enableXfa===!0,k=i.ownerDocument||globalThis.document,D=i.disableRange===!0,R=i.disableStream===!0,F=i.disableAutoFetch===!0,H=i.pdfBug===!0,$=i.CanvasFactory||mI,G=i.FilterFactory||yI,Z=i.enableHWA===!0,K=l?l.length:i.length??NaN,q=typeof i.useSystemFonts=="boolean"?i.useSystemFonts:!ri&&!S,P=typeof i.useWorkerFetch=="boolean"?i.useWorkerFetch:b===rT&&g===lT&&d&&v&&pf(d,document.baseURI)&&pf(v,document.baseURI),B=null;sL(h);const V={canvasFactory:new $({ownerDocument:k,enableHWA:Z}),filterFactory:new G({docId:t,ownerDocument:k}),cMapReaderFactory:P?null:new b({baseUrl:d,isCompressed:y}),standardFontDataFactory:P?null:new g({baseUrl:v})};if(!c){const U={verbosity:h,port:ga.workerPort};c=U.port?gc.fromPort(U):new gc(U),e._worker=c}const J={docId:t,apiVersion:"4.10.38",data:r,password:o,disableAutoFetch:F,rangeChunkSize:u,length:K,docBaseUrl:f,enableXfa:C,evaluatorOptions:{maxImageSize:w,disableFontFace:S,ignoreErrors:m,isEvalSupported:_,isOffscreenCanvasSupported:E,isImageDecoderSupported:x,canvasMaxAreaInBytes:A,fontExtraProperties:O,useSystemFonts:q,cMapUrl:P?d:null,standardFontDataUrl:P?v:null}},te={disableFontFace:S,fontExtraProperties:O,ownerDocument:k,pdfBug:H,styleElement:B,loadingParams:{disableAutoFetch:F,enableXfa:C}};return c.promise.then(function(){if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const U=c.messageHandler.sendWithPromise("GetDocRequest",J,r?[r.buffer]:null);let Y;if(l)Y=new KL(l,{disableRange:D,disableStream:R});else if(!r){if(!n)throw new Error("getDocument - no `url` parameter provided.");let re;if(ri)if(pf(n)){if(typeof fetch>"u"||typeof Response>"u"||!("body"in Response.prototype))throw new Error("getDocument - the Fetch API was disabled in Node.js, see `--no-experimental-fetch`.");re=RE}else re=lI;else re=pf(n)?RE:iI;Y=new re({url:n,length:K,httpHeaders:s,withCredentials:a,rangeChunkSize:u,disableRange:D,disableStream:R})}return U.then(re=>{if(e.destroyed)throw new Error("Loading aborted");if(c.destroyed)throw new Error("Worker was destroyed");const oe=new yf(t,re,c.port),de=new CI(oe,e,Y,te,V);e._transport=de,oe.send("Ready",null)})}).catch(e._capability.reject),e}function _I(i){if(i instanceof URL)return i.href;try{return new URL(i,window.location).href}catch{if(ri&&typeof i=="string")return i}throw new Error("Invalid PDF url data: either string or URL-object is expected in the url property.")}function EI(i){if(ri&&typeof Buffer<"u"&&i instanceof Buffer)throw new Error("Please provide binary data as `Uint8Array`, rather than `Buffer`.");if(i instanceof Uint8Array&&i.byteLength===i.buffer.byteLength)return i;if(typeof i=="string")return uy(i);if(i instanceof ArrayBuffer||ArrayBuffer.isView(i)||typeof i=="object"&&!isNaN(i==null?void 0:i.length))return new Uint8Array(i);throw new Error("Invalid PDF binary data: either TypedArray, string, or array-like object is expected in the data property.")}function PE(i){return typeof i=="object"&&Number.isInteger(i==null?void 0:i.num)&&i.num>=0&&Number.isInteger(i==null?void 0:i.gen)&&i.gen>=0}var Ov;const Nv=class Nv{constructor(){this._capability=Promise.withResolvers(),this._transport=null,this._worker=null,this.docId=`d${oi(Nv,Ov)._++}`,this.destroyed=!1,this.onPassword=null,this.onProgress=null}get promise(){return this._capability.promise}async destroy(){var e,t,n,r;this.destroyed=!0;try{(e=this._worker)!=null&&e.port&&(this._worker._pendingDestroy=!0),await((t=this._transport)==null?void 0:t.destroy())}catch(s){throw(n=this._worker)!=null&&n.port&&delete this._worker._pendingDestroy,s}this._transport=null,(r=this._worker)==null||r.destroy(),this._worker=null}};Ov=new WeakMap,L(Nv,Ov,0);let u1=Nv;class wT{constructor(e,t,n=!1,r=null){this.length=e,this.initialData=t,this.progressiveDone=n,this.contentDispositionFilename=r,this._rangeListeners=[],this._progressListeners=[],this._progressiveReadListeners=[],this._progressiveDoneListeners=[],this._readyCapability=Promise.withResolvers()}addRangeListener(e){this._rangeListeners.push(e)}addProgressListener(e){this._progressListeners.push(e)}addProgressiveReadListener(e){this._progressiveReadListeners.push(e)}addProgressiveDoneListener(e){this._progressiveDoneListeners.push(e)}onDataRange(e,t){for(const n of this._rangeListeners)n(e,t)}onDataProgress(e,t){this._readyCapability.promise.then(()=>{for(const n of this._progressListeners)n(e,t)})}onDataProgressiveRead(e){this._readyCapability.promise.then(()=>{for(const t of this._progressiveReadListeners)t(e)})}onDataProgressiveDone(){this._readyCapability.promise.then(()=>{for(const e of this._progressiveDoneListeners)e()})}transportReady(){this._readyCapability.resolve()}requestDataRange(e,t){Nt("Abstract method PDFDataRangeTransport.requestDataRange")}abort(){}}class AI{constructor(e,t){this._pdfInfo=e,this._transport=t}get annotationStorage(){return this._transport.annotationStorage}get canvasFactory(){return this._transport.canvasFactory}get filterFactory(){return this._transport.filterFactory}get numPages(){return this._pdfInfo.numPages}get fingerprints(){return this._pdfInfo.fingerprints}get isPureXfa(){return ot(this,"isPureXfa",!!this._transport._htmlForXfa)}get allXfaHtml(){return this._transport._htmlForXfa}getPage(e){return this._transport.getPage(e)}getPageIndex(e){return this._transport.getPageIndex(e)}getDestinations(){return this._transport.getDestinations()}getDestination(e){return this._transport.getDestination(e)}getPageLabels(){return this._transport.getPageLabels()}getPageLayout(){return this._transport.getPageLayout()}getPageMode(){return this._transport.getPageMode()}getViewerPreferences(){return this._transport.getViewerPreferences()}getOpenAction(){return this._transport.getOpenAction()}getAttachments(){return this._transport.getAttachments()}getJSActions(){return this._transport.getDocJSActions()}getOutline(){return this._transport.getOutline()}getOptionalContentConfig({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getOptionalContentConfig(t)}getPermissions(){return this._transport.getPermissions()}getMetadata(){return this._transport.getMetadata()}getMarkInfo(){return this._transport.getMarkInfo()}getData(){return this._transport.getData()}saveDocument(){return this._transport.saveDocument()}getDownloadInfo(){return this._transport.downloadInfoCapability.promise}cleanup(e=!1){return this._transport.startCleanup(e||this.isPureXfa)}destroy(){return this.loadingTask.destroy()}cachedPageNumber(e){return this._transport.cachedPageNumber(e)}get loadingParams(){return this._transport.loadingParams}get loadingTask(){return this._transport.loadingTask}getFieldObjects(){return this._transport.getFieldObjects()}hasJSActions(){return this._transport.hasJSActions()}getCalculationOrderIds(){return this._transport.getCalculationOrderIds()}}var so,ea,br,Uu,im;class xI{constructor(e,t,n,r=!1){L(this,br);L(this,so,null);L(this,ea,!1);this._pageIndex=e,this._pageInfo=t,this._transport=n,this._stats=r?new bE:null,this._pdfBug=r,this.commonObjs=n.commonObjs,this.objs=new _T,this._maybeCleanupAfterRender=!1,this._intentStates=new Map,this.destroyed=!1}get pageNumber(){return this._pageIndex+1}get rotate(){return this._pageInfo.rotate}get ref(){return this._pageInfo.ref}get userUnit(){return this._pageInfo.userUnit}get view(){return this._pageInfo.view}getViewport({scale:e,rotation:t=this.rotate,offsetX:n=0,offsetY:r=0,dontFlip:s=!1}={}){return new Xp({viewBox:this.view,userUnit:this.userUnit,scale:e,rotation:t,offsetX:n,offsetY:r,dontFlip:s})}getAnnotations({intent:e="display"}={}){const{renderingIntent:t}=this._transport.getRenderingIntent(e);return this._transport.getAnnotations(this._pageIndex,t)}getJSActions(){return this._transport.getPageJSActions(this._pageIndex)}get filterFactory(){return this._transport.filterFactory}get isPureXfa(){return ot(this,"isPureXfa",!!this._transport._htmlForXfa)}async getXfa(){var e;return((e=this._transport._htmlForXfa)==null?void 0:e.children[this._pageIndex])||null}render({canvasContext:e,viewport:t,intent:n="display",annotationMode:r=qa.ENABLE,transform:s=null,background:a=null,optionalContentConfigPromise:o=null,annotationCanvasMap:l=null,pageColors:u=null,printAnnotationStorage:c=null,isEditing:h=!1}){var _,E;(_=this._stats)==null||_.time("Overall");const f=this._transport.getRenderingIntent(n,r,c,h),{renderingIntent:d,cacheKey:y}=f;N(this,ea,!1),M(this,br,im).call(this),o||(o=this._transport.getOptionalContentConfig(d));let b=this._intentStates.get(y);b||(b=Object.create(null),this._intentStates.set(y,b)),b.streamReaderCancelTimeout&&(clearTimeout(b.streamReaderCancelTimeout),b.streamReaderCancelTimeout=null);const v=!!(d&Yi.PRINT);b.displayReadyCapability||(b.displayReadyCapability=Promise.withResolvers(),b.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(E=this._stats)==null||E.time("Page Request"),this._pumpOperatorList(f));const g=x=>{var A;b.renderTasks.delete(m),(this._maybeCleanupAfterRender||v)&&N(this,ea,!0),M(this,br,Uu).call(this,!v),x?(m.capability.reject(x),this._abortOperatorList({intentState:b,reason:x instanceof Error?x:new Error(x)})):m.capability.resolve(),this._stats&&(this._stats.timeEnd("Rendering"),this._stats.timeEnd("Overall"),(A=globalThis.Stats)!=null&&A.enabled&&globalThis.Stats.add(this.pageNumber,this._stats))},m=new h1({callback:g,params:{canvasContext:e,viewport:t,transform:s,background:a},objs:this.objs,commonObjs:this.commonObjs,annotationCanvasMap:l,operatorList:b.operatorList,pageIndex:this._pageIndex,canvasFactory:this._transport.canvasFactory,filterFactory:this._transport.filterFactory,useRequestAnimationFrame:!v,pdfBug:this._pdfBug,pageColors:u});(b.renderTasks||(b.renderTasks=new Set)).add(m);const w=m.task;return Promise.all([b.displayReadyCapability.promise,o]).then(([x,A])=>{var S;if(this.destroyed){g();return}if((S=this._stats)==null||S.time("Rendering"),!(A.renderingIntent&d))throw new Error("Must use the same `intent`-argument when calling the `PDFPageProxy.render` and `PDFDocumentProxy.getOptionalContentConfig` methods.");m.initializeGraphics({transparency:x,optionalContentConfig:A}),m.operatorListChanged()}).catch(g),w}getOperatorList({intent:e="display",annotationMode:t=qa.ENABLE,printAnnotationStorage:n=null,isEditing:r=!1}={}){var u;function s(){o.operatorList.lastChunk&&(o.opListReadCapability.resolve(o.operatorList),o.renderTasks.delete(l))}const a=this._transport.getRenderingIntent(e,t,n,r,!0);let o=this._intentStates.get(a.cacheKey);o||(o=Object.create(null),this._intentStates.set(a.cacheKey,o));let l;return o.opListReadCapability||(l=Object.create(null),l.operatorListChanged=s,o.opListReadCapability=Promise.withResolvers(),(o.renderTasks||(o.renderTasks=new Set)).add(l),o.operatorList={fnArray:[],argsArray:[],lastChunk:!1,separateAnnots:null},(u=this._stats)==null||u.time("Page Request"),this._pumpOperatorList(a)),o.opListReadCapability.promise}streamTextContent({includeMarkedContent:e=!1,disableNormalization:t=!1}={}){return this._transport.messageHandler.sendWithStream("GetTextContent",{pageIndex:this._pageIndex,includeMarkedContent:e===!0,disableNormalization:t===!0},{highWaterMark:100,size(r){return r.items.length}})}getTextContent(e={}){if(this._transport._htmlForXfa)return this.getXfa().then(n=>cd.textContent(n));const t=this.streamTextContent(e);return new Promise(function(n,r){function s(){a.read().then(function({value:l,done:u}){if(u){n(o);return}o.lang??(o.lang=l.lang),Object.assign(o.styles,l.styles),o.items.push(...l.items),s()},r)}const a=t.getReader(),o={items:[],styles:Object.create(null),lang:null};s()})}getStructTree(){return this._transport.getStructTree(this._pageIndex)}_destroy(){this.destroyed=!0;const e=[];for(const t of this._intentStates.values())if(this._abortOperatorList({intentState:t,reason:new Error("Page was destroyed."),force:!0}),!t.opListReadCapability)for(const n of t.renderTasks)e.push(n.completed),n.cancel();return this.objs.clear(),N(this,ea,!1),M(this,br,im).call(this),Promise.all(e)}cleanup(e=!1){N(this,ea,!0);const t=M(this,br,Uu).call(this,!1);return e&&t&&this._stats&&(this._stats=new bE),t}_startRenderPage(e,t){var r,s;const n=this._intentStates.get(t);n&&((r=this._stats)==null||r.timeEnd("Page Request"),(s=n.displayReadyCapability)==null||s.resolve(e))}_renderPageChunk(e,t){for(let n=0,r=e.length;n<r;n++)t.operatorList.fnArray.push(e.fnArray[n]),t.operatorList.argsArray.push(e.argsArray[n]);t.operatorList.lastChunk=e.lastChunk,t.operatorList.separateAnnots=e.separateAnnots;for(const n of t.renderTasks)n.operatorListChanged();e.lastChunk&&M(this,br,Uu).call(this,!0)}_pumpOperatorList({renderingIntent:e,cacheKey:t,annotationStorageSerializable:n,modifiedIds:r}){const{map:s,transfer:a}=n,l=this._transport.messageHandler.sendWithStream("GetOperatorList",{pageIndex:this._pageIndex,intent:e,cacheKey:t,annotationStorage:s,modifiedIds:r},a).getReader(),u=this._intentStates.get(t);u.streamReader=l;const c=()=>{l.read().then(({value:h,done:f})=>{if(f){u.streamReader=null;return}this._transport.destroyed||(this._renderPageChunk(h,u),c())},h=>{if(u.streamReader=null,!this._transport.destroyed){if(u.operatorList){u.operatorList.lastChunk=!0;for(const f of u.renderTasks)f.operatorListChanged();M(this,br,Uu).call(this,!0)}if(u.displayReadyCapability)u.displayReadyCapability.reject(h);else if(u.opListReadCapability)u.opListReadCapability.reject(h);else throw h}})};c()}_abortOperatorList({intentState:e,reason:t,force:n=!1}){if(e.streamReader){if(e.streamReaderCancelTimeout&&(clearTimeout(e.streamReaderCancelTimeout),e.streamReaderCancelTimeout=null),!n){if(e.renderTasks.size>0)return;if(t instanceof a_){let r=pI;t.extraDelay>0&&t.extraDelay<1e3&&(r+=t.extraDelay),e.streamReaderCancelTimeout=setTimeout(()=>{e.streamReaderCancelTimeout=null,this._abortOperatorList({intentState:e,reason:t,force:!0})},r);return}}if(e.streamReader.cancel(new Fo(t.message)).catch(()=>{}),e.streamReader=null,!this._transport.destroyed){for(const[r,s]of this._intentStates)if(s===e){this._intentStates.delete(r);break}this.cleanup()}}}get stats(){return this._stats}}so=new WeakMap,ea=new WeakMap,br=new WeakSet,Uu=function(e=!1){if(M(this,br,im).call(this),!p(this,ea)||this.destroyed)return!1;if(e)return N(this,so,setTimeout(()=>{N(this,so,null),M(this,br,Uu).call(this,!1)},gI)),!1;for(const{renderTasks:t,operatorList:n}of this._intentStates.values())if(t.size>0||!n.lastChunk)return!1;return this._intentStates.clear(),this.objs.clear(),N(this,ea,!1),!0},im=function(){p(this,so)&&(clearTimeout(p(this,so)),N(this,so,null))};var ta,Rv;class SI{constructor(){L(this,ta,new Map);L(this,Rv,Promise.resolve())}postMessage(e,t){const n={data:structuredClone(e,t?{transfer:t}:null)};p(this,Rv).then(()=>{for(const[r]of p(this,ta))r.call(this,n)})}addEventListener(e,t,n=null){let r=null;if((n==null?void 0:n.signal)instanceof AbortSignal){const{signal:s}=n;if(s.aborted){it("LoopbackPort - cannot use an `aborted` signal.");return}const a=()=>this.removeEventListener(e,t);r=()=>s.removeEventListener("abort",a),s.addEventListener("abort",a)}p(this,ta).set(t,r)}removeEventListener(e,t){const n=p(this,ta).get(t);n==null||n(),p(this,ta).delete(t)}terminate(){for(const[,e]of p(this,ta))e==null||e();p(this,ta).clear()}}ta=new WeakMap,Rv=new WeakMap;var Pv,Ll,Il,qc,rm,Hc,sm;const Ut=class Ut{constructor({name:e=null,port:t=null,verbosity:n=aL()}={}){L(this,qc);var r;if(this.name=e,this.destroyed=!1,this.verbosity=n,this._readyCapability=Promise.withResolvers(),this._port=null,this._webWorker=null,this._messageHandler=null,t){if((r=p(Ut,Il))!=null&&r.has(t))throw new Error("Cannot use more than one PDFWorker per port.");(p(Ut,Il)||N(Ut,Il,new WeakMap)).set(t,this),this._initializeFromPort(t);return}this._initialize()}get promise(){return this._readyCapability.promise}get port(){return this._port}get messageHandler(){return this._messageHandler}_initializeFromPort(e){this._port=e,this._messageHandler=new yf("main","worker",e),this._messageHandler.on("ready",function(){}),M(this,qc,rm).call(this)}_initialize(){if(p(Ut,Ll)||p(Ut,Hc,sm)){this._setupFakeWorker();return}let{workerSrc:e}=Ut;try{Ut._isSameOrigin(window.location.href,e)||(e=Ut._createCDNWrapper(new URL(e,window.location).href));const t=new Worker(e,{type:"module"}),n=new yf("main","worker",t),r=()=>{s.abort(),n.destroy(),t.terminate(),this.destroyed?this._readyCapability.reject(new Error("Worker was destroyed")):this._setupFakeWorker()},s=new AbortController;t.addEventListener("error",()=>{this._webWorker||r()},{signal:s.signal}),n.on("test",o=>{if(s.abort(),this.destroyed||!o){r();return}this._messageHandler=n,this._port=t,this._webWorker=t,M(this,qc,rm).call(this)}),n.on("ready",o=>{if(s.abort(),this.destroyed){r();return}try{a()}catch{this._setupFakeWorker()}});const a=()=>{const o=new Uint8Array;n.send("test",o,[o.buffer])};a();return}catch{ly("The worker has been disabled.")}this._setupFakeWorker()}_setupFakeWorker(){p(Ut,Ll)||(it("Setting up fake worker."),N(Ut,Ll,!0)),Ut._setupFakeWorkerGlobal.then(e=>{if(this.destroyed){this._readyCapability.reject(new Error("Worker was destroyed"));return}const t=new SI;this._port=t;const n=`fake${oi(Ut,Pv)._++}`,r=new yf(n+"_worker",n,t);e.setup(r,t),this._messageHandler=new yf(n,n+"_worker",t),M(this,qc,rm).call(this)}).catch(e=>{this._readyCapability.reject(new Error(`Setting up fake worker failed: "${e.message}".`))})}destroy(){var e,t,n;this.destroyed=!0,(e=this._webWorker)==null||e.terminate(),this._webWorker=null,(t=p(Ut,Il))==null||t.delete(this._port),this._port=null,(n=this._messageHandler)==null||n.destroy(),this._messageHandler=null}static fromPort(e){var n;if(!(e!=null&&e.port))throw new Error("PDFWorker.fromPort - invalid method signature.");const t=(n=p(this,Il))==null?void 0:n.get(e.port);if(t){if(t._pendingDestroy)throw new Error("PDFWorker.fromPort - the worker is being destroyed.\nPlease remember to await `PDFDocumentLoadingTask.destroy()`-calls.");return t}return new Ut(e)}static get workerSrc(){if(ga.workerSrc)return ga.workerSrc;throw new Error('No "GlobalWorkerOptions.workerSrc" specified.')}static get _setupFakeWorkerGlobal(){return ot(this,"_setupFakeWorkerGlobal",(async()=>p(this,Hc,sm)?p(this,Hc,sm):(await import(this.workerSrc)).WorkerMessageHandler)())}};Pv=new WeakMap,Ll=new WeakMap,Il=new WeakMap,qc=new WeakSet,rm=function(){this._readyCapability.resolve(),this._messageHandler.send("configure",{verbosity:this.verbosity})},Hc=new WeakSet,sm=function(){var e;try{return((e=globalThis.pdfjsWorker)==null?void 0:e.WorkerMessageHandler)||null}catch{return null}},L(Ut,Hc),L(Ut,Pv,0),L(Ut,Ll,!1),L(Ut,Il),ri&&(N(Ut,Ll,!0),ga.workerSrc||(ga.workerSrc="./pdf.worker.mjs")),Ut._isSameOrigin=(e,t)=>{let n;try{if(n=new URL(e),!n.origin||n.origin==="null")return!1}catch{return!1}const r=new URL(t,n);return n.origin===r.origin},Ut._createCDNWrapper=e=>{const t=`await import("${e}");`;return URL.createObjectURL(new Blob([t],{type:"text/javascript"}))};let gc=Ut;var na,ws,Wc,$c,ia,Ml,Af;class CI{constructor(e,t,n,r,s){L(this,Ml);L(this,na,new Map);L(this,ws,new Map);L(this,Wc,new Map);L(this,$c,new Map);L(this,ia,null);this.messageHandler=e,this.loadingTask=t,this.commonObjs=new _T,this.fontLoader=new SL({ownerDocument:r.ownerDocument,styleElement:r.styleElement}),this.loadingParams=r.loadingParams,this._params=r,this.canvasFactory=s.canvasFactory,this.filterFactory=s.filterFactory,this.cMapReaderFactory=s.cMapReaderFactory,this.standardFontDataFactory=s.standardFontDataFactory,this.destroyed=!1,this.destroyCapability=null,this._networkStream=n,this._fullReader=null,this._lastProgress=null,this.downloadInfoCapability=Promise.withResolvers(),this.setupMessageHandler()}get annotationStorage(){return ot(this,"annotationStorage",new c_)}getRenderingIntent(e,t=qa.ENABLE,n=null,r=!1,s=!1){let a=Yi.DISPLAY,o=Qb;switch(e){case"any":a=Yi.ANY;break;case"display":break;case"print":a=Yi.PRINT;break;default:it(`getRenderingIntent - invalid intent: ${e}`)}const l=a&Yi.PRINT&&n instanceof QC?n:this.annotationStorage;switch(t){case qa.DISABLE:a+=Yi.ANNOTATIONS_DISABLE;break;case qa.ENABLE:break;case qa.ENABLE_FORMS:a+=Yi.ANNOTATIONS_FORMS;break;case qa.ENABLE_STORAGE:a+=Yi.ANNOTATIONS_STORAGE,o=l.serializable;break;default:it(`getRenderingIntent - invalid annotationMode: ${t}`)}r&&(a+=Yi.IS_EDITING),s&&(a+=Yi.OPLIST);const{ids:u,hash:c}=l.modifiedIds,h=[a,o.hash,c];return{renderingIntent:a,cacheKey:h.join("_"),annotationStorageSerializable:o,modifiedIds:u}}destroy(){var n;if(this.destroyCapability)return this.destroyCapability.promise;this.destroyed=!0,this.destroyCapability=Promise.withResolvers(),(n=p(this,ia))==null||n.reject(new Error("Worker was destroyed during onPassword callback"));const e=[];for(const r of p(this,ws).values())e.push(r._destroy());p(this,ws).clear(),p(this,Wc).clear(),p(this,$c).clear(),this.hasOwnProperty("annotationStorage")&&this.annotationStorage.resetModified();const t=this.messageHandler.sendWithPromise("Terminate",null);return e.push(t),Promise.all(e).then(()=>{var r,s;this.commonObjs.clear(),this.fontLoader.clear(),p(this,na).clear(),this.filterFactory.destroy(),ud.cleanup(),(r=this._networkStream)==null||r.cancelAllRequests(new Fo("Worker was terminated.")),(s=this.messageHandler)==null||s.destroy(),this.messageHandler=null,this.destroyCapability.resolve()},this.destroyCapability.reject),this.destroyCapability.promise}setupMessageHandler(){const{messageHandler:e,loadingTask:t}=this;e.on("GetReader",(n,r)=>{dn(this._networkStream,"GetReader - no `IPDFStream` instance available."),this._fullReader=this._networkStream.getFullReader(),this._fullReader.onProgress=s=>{this._lastProgress={loaded:s.loaded,total:s.total}},r.onPull=()=>{this._fullReader.read().then(function({value:s,done:a}){if(a){r.close();return}dn(s instanceof ArrayBuffer,"GetReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(s),1,[s])}).catch(s=>{r.error(s)})},r.onCancel=s=>{this._fullReader.cancel(s),r.ready.catch(a=>{if(!this.destroyed)throw a})}}),e.on("ReaderHeadersReady",async n=>{var o;await this._fullReader.headersReady;const{isStreamingSupported:r,isRangeSupported:s,contentLength:a}=this._fullReader;return(!r||!s)&&(this._lastProgress&&((o=t.onProgress)==null||o.call(t,this._lastProgress)),this._fullReader.onProgress=l=>{var u;(u=t.onProgress)==null||u.call(t,{loaded:l.loaded,total:l.total})}),{isStreamingSupported:r,isRangeSupported:s,contentLength:a}}),e.on("GetRangeReader",(n,r)=>{dn(this._networkStream,"GetRangeReader - no `IPDFStream` instance available.");const s=this._networkStream.getRangeReader(n.begin,n.end);if(!s){r.close();return}r.onPull=()=>{s.read().then(function({value:a,done:o}){if(o){r.close();return}dn(a instanceof ArrayBuffer,"GetRangeReader - expected an ArrayBuffer."),r.enqueue(new Uint8Array(a),1,[a])}).catch(a=>{r.error(a)})},r.onCancel=a=>{s.cancel(a),r.ready.catch(o=>{if(!this.destroyed)throw o})}}),e.on("GetDoc",({pdfInfo:n})=>{this._numPages=n.numPages,this._htmlForXfa=n.htmlForXfa,delete n.htmlForXfa,t._capability.resolve(new AI(n,this))}),e.on("DocException",n=>{t._capability.reject(Ai(n))}),e.on("PasswordRequest",n=>{N(this,ia,Promise.withResolvers());try{if(!t.onPassword)throw Ai(n);const r=s=>{s instanceof Error?p(this,ia).reject(s):p(this,ia).resolve({password:s})};t.onPassword(r,n.code)}catch(r){p(this,ia).reject(r)}return p(this,ia).promise}),e.on("DataLoaded",n=>{var r;(r=t.onProgress)==null||r.call(t,{loaded:n.length,total:n.length}),this.downloadInfoCapability.resolve(n)}),e.on("StartRenderPage",n=>{if(this.destroyed)return;p(this,ws).get(n.pageIndex)._startRenderPage(n.transparency,n.cacheKey)}),e.on("commonobj",([n,r,s])=>{var a;if(this.destroyed||this.commonObjs.has(n))return null;switch(r){case"Font":const{disableFontFace:o,fontExtraProperties:l,pdfBug:u}=this._params;if("error"in s){const d=s.error;it(`Error during font loading: ${d}`),this.commonObjs.resolve(n,d);break}const c=u&&((a=globalThis.FontInspector)!=null&&a.enabled)?(d,y)=>globalThis.FontInspector.fontAdded(d,y):null,h=new CL(s,{disableFontFace:o,fontExtraProperties:l,inspectFont:c});this.fontLoader.bind(h).catch(()=>e.sendWithPromise("FontFallback",{id:n})).finally(()=>{!l&&h.data&&(h.data=null),this.commonObjs.resolve(n,h)});break;case"CopyLocalImage":const{imageRef:f}=s;dn(f,"The imageRef must be defined.");for(const d of p(this,ws).values())for(const[,y]of d.objs)if((y==null?void 0:y.ref)===f)return y.dataLen?(this.commonObjs.resolve(n,structuredClone(y)),y.dataLen):null;break;case"FontPath":case"Image":case"Pattern":this.commonObjs.resolve(n,s);break;default:throw new Error(`Got unknown common object type ${r}`)}return null}),e.on("obj",([n,r,s,a])=>{var l;if(this.destroyed)return;const o=p(this,ws).get(r);if(!o.objs.has(n)){if(o._intentStates.size===0){(l=a==null?void 0:a.bitmap)==null||l.close();return}switch(s){case"Image":o.objs.resolve(n,a),(a==null?void 0:a.dataLen)>tL&&(o._maybeCleanupAfterRender=!0);break;case"Pattern":o.objs.resolve(n,a);break;default:throw new Error(`Got unknown object type ${s}`)}}}),e.on("DocProgress",n=>{var r;this.destroyed||(r=t.onProgress)==null||r.call(t,{loaded:n.loaded,total:n.total})}),e.on("FetchBuiltInCMap",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.cMapReaderFactory)throw new Error("CMapReaderFactory not initialized, see the `useWorkerFetch` parameter.");return this.cMapReaderFactory.fetch(n)}),e.on("FetchStandardFontData",async n=>{if(this.destroyed)throw new Error("Worker was destroyed.");if(!this.standardFontDataFactory)throw new Error("StandardFontDataFactory not initialized, see the `useWorkerFetch` parameter.");return this.standardFontDataFactory.fetch(n)})}getData(){return this.messageHandler.sendWithPromise("GetData",null)}saveDocument(){var n;this.annotationStorage.size<=0&&it("saveDocument called while `annotationStorage` is empty, please use the getData-method instead.");const{map:e,transfer:t}=this.annotationStorage.serializable;return this.messageHandler.sendWithPromise("SaveDocument",{isPureXfa:!!this._htmlForXfa,numPages:this._numPages,annotationStorage:e,filename:((n=this._fullReader)==null?void 0:n.filename)??null},t).finally(()=>{this.annotationStorage.resetModified()})}getPage(e){if(!Number.isInteger(e)||e<=0||e>this._numPages)return Promise.reject(new Error("Invalid page request."));const t=e-1,n=p(this,Wc).get(t);if(n)return n;const r=this.messageHandler.sendWithPromise("GetPage",{pageIndex:t}).then(s=>{if(this.destroyed)throw new Error("Transport destroyed");s.refStr&&p(this,$c).set(s.refStr,e);const a=new xI(t,s,this,this._params.pdfBug);return p(this,ws).set(t,a),a});return p(this,Wc).set(t,r),r}getPageIndex(e){return PE(e)?this.messageHandler.sendWithPromise("GetPageIndex",{num:e.num,gen:e.gen}):Promise.reject(new Error("Invalid pageIndex request."))}getAnnotations(e,t){return this.messageHandler.sendWithPromise("GetAnnotations",{pageIndex:e,intent:t})}getFieldObjects(){return M(this,Ml,Af).call(this,"GetFieldObjects")}hasJSActions(){return M(this,Ml,Af).call(this,"HasJSActions")}getCalculationOrderIds(){return this.messageHandler.sendWithPromise("GetCalculationOrderIds",null)}getDestinations(){return this.messageHandler.sendWithPromise("GetDestinations",null)}getDestination(e){return typeof e!="string"?Promise.reject(new Error("Invalid destination request.")):this.messageHandler.sendWithPromise("GetDestination",{id:e})}getPageLabels(){return this.messageHandler.sendWithPromise("GetPageLabels",null)}getPageLayout(){return this.messageHandler.sendWithPromise("GetPageLayout",null)}getPageMode(){return this.messageHandler.sendWithPromise("GetPageMode",null)}getViewerPreferences(){return this.messageHandler.sendWithPromise("GetViewerPreferences",null)}getOpenAction(){return this.messageHandler.sendWithPromise("GetOpenAction",null)}getAttachments(){return this.messageHandler.sendWithPromise("GetAttachments",null)}getDocJSActions(){return M(this,Ml,Af).call(this,"GetDocJSActions")}getPageJSActions(e){return this.messageHandler.sendWithPromise("GetPageJSActions",{pageIndex:e})}getStructTree(e){return this.messageHandler.sendWithPromise("GetStructTree",{pageIndex:e})}getOutline(){return this.messageHandler.sendWithPromise("GetOutline",null)}getOptionalContentConfig(e){return M(this,Ml,Af).call(this,"GetOptionalContentConfig").then(t=>new XL(t,e))}getPermissions(){return this.messageHandler.sendWithPromise("GetPermissions",null)}getMetadata(){const e="GetMetadata",t=p(this,na).get(e);if(t)return t;const n=this.messageHandler.sendWithPromise(e,null).then(r=>{var s,a;return{info:r[0],metadata:r[1]?new VL(r[1]):null,contentDispositionFilename:((s=this._fullReader)==null?void 0:s.filename)??null,contentLength:((a=this._fullReader)==null?void 0:a.contentLength)??null}});return p(this,na).set(e,n),n}getMarkInfo(){return this.messageHandler.sendWithPromise("GetMarkInfo",null)}async startCleanup(e=!1){if(!this.destroyed){await this.messageHandler.sendWithPromise("Cleanup",null);for(const t of p(this,ws).values())if(!t.cleanup())throw new Error(`startCleanup: Page ${t.pageNumber} is currently rendering.`);this.commonObjs.clear(),e||this.fontLoader.clear(),p(this,na).clear(),this.filterFactory.destroy(!0),ud.cleanup()}}cachedPageNumber(e){if(!PE(e))return null;const t=e.gen===0?`${e.num}R`:`${e.num}R${e.gen}`;return p(this,$c).get(t)??null}}na=new WeakMap,ws=new WeakMap,Wc=new WeakMap,$c=new WeakMap,ia=new WeakMap,Ml=new WeakSet,Af=function(e,t=null){const n=p(this,na).get(e);if(n)return n;const r=this.messageHandler.sendWithPromise(e,t);return p(this,na).set(e,r),r};const tf=Symbol("INITIAL_DATA");var Ui,ap,c1;class _T{constructor(){L(this,ap);L(this,Ui,Object.create(null))}get(e,t=null){if(t){const r=M(this,ap,c1).call(this,e);return r.promise.then(()=>t(r.data)),null}const n=p(this,Ui)[e];if(!n||n.data===tf)throw new Error(`Requesting object that isn't resolved yet ${e}.`);return n.data}has(e){const t=p(this,Ui)[e];return!!t&&t.data!==tf}delete(e){const t=p(this,Ui)[e];return!t||t.data===tf?!1:(delete p(this,Ui)[e],!0)}resolve(e,t=null){const n=M(this,ap,c1).call(this,e);n.data=t,n.resolve()}clear(){var e;for(const t in p(this,Ui)){const{data:n}=p(this,Ui)[t];(e=n==null?void 0:n.bitmap)==null||e.close()}N(this,Ui,Object.create(null))}*[Symbol.iterator](){for(const e in p(this,Ui)){const{data:t}=p(this,Ui)[e];t!==tf&&(yield[e,t])}}}Ui=new WeakMap,ap=new WeakSet,c1=function(e){var t;return(t=p(this,Ui))[e]||(t[e]={...Promise.withResolvers(),data:tf})};var ao;class TI{constructor(e){L(this,ao,null);N(this,ao,e),this.onContinue=null}get promise(){return p(this,ao).capability.promise}cancel(e=0){p(this,ao).cancel(null,e)}get separateAnnots(){const{separateAnnots:e}=p(this,ao).operatorList;if(!e)return!1;const{annotationCanvasMap:t}=p(this,ao);return e.form||e.canvas&&(t==null?void 0:t.size)>0}}ao=new WeakMap;var oo,Fl;const tl=class tl{constructor({callback:e,params:t,objs:n,commonObjs:r,annotationCanvasMap:s,operatorList:a,pageIndex:o,canvasFactory:l,filterFactory:u,useRequestAnimationFrame:c=!1,pdfBug:h=!1,pageColors:f=null}){L(this,oo,null);this.callback=e,this.params=t,this.objs=n,this.commonObjs=r,this.annotationCanvasMap=s,this.operatorListIdx=null,this.operatorList=a,this._pageIndex=o,this.canvasFactory=l,this.filterFactory=u,this._pdfBug=h,this.pageColors=f,this.running=!1,this.graphicsReadyCallback=null,this.graphicsReady=!1,this._useRequestAnimationFrame=c===!0&&typeof window<"u",this.cancelled=!1,this.capability=Promise.withResolvers(),this.task=new TI(this),this._cancelBound=this.cancel.bind(this),this._continueBound=this._continue.bind(this),this._scheduleNextBound=this._scheduleNext.bind(this),this._nextBound=this._next.bind(this),this._canvas=t.canvasContext.canvas}get completed(){return this.capability.promise.catch(function(){})}initializeGraphics({transparency:e=!1,optionalContentConfig:t}){var o,l;if(this.cancelled)return;if(this._canvas){if(p(tl,Fl).has(this._canvas))throw new Error("Cannot use the same canvas during multiple render() operations. Use different canvas or ensure previous operations were cancelled or completed.");p(tl,Fl).add(this._canvas)}this._pdfBug&&((o=globalThis.StepperManager)!=null&&o.enabled)&&(this.stepper=globalThis.StepperManager.create(this._pageIndex),this.stepper.init(this.operatorList),this.stepper.nextBreakPoint=this.stepper.getNextBreakPoint());const{canvasContext:n,viewport:r,transform:s,background:a}=this.params;this.gfx=new pc(n,this.commonObjs,this.objs,this.canvasFactory,this.filterFactory,{optionalContentConfig:t},this.annotationCanvasMap,this.pageColors),this.gfx.beginDrawing({transform:s,viewport:r,transparency:e,background:a}),this.operatorListIdx=0,this.graphicsReady=!0,(l=this.graphicsReadyCallback)==null||l.call(this)}cancel(e=null,t=0){var n;this.running=!1,this.cancelled=!0,(n=this.gfx)==null||n.endDrawing(),p(this,oo)&&(window.cancelAnimationFrame(p(this,oo)),N(this,oo,null)),p(tl,Fl).delete(this._canvas),this.callback(e||new a_(`Rendering cancelled, page ${this._pageIndex+1}`,t))}operatorListChanged(){var e;if(!this.graphicsReady){this.graphicsReadyCallback||(this.graphicsReadyCallback=this._continueBound);return}(e=this.stepper)==null||e.updateOperatorList(this.operatorList),!this.running&&this._continue()}_continue(){this.running=!0,!this.cancelled&&(this.task.onContinue?this.task.onContinue(this._scheduleNextBound):this._scheduleNext())}_scheduleNext(){this._useRequestAnimationFrame?N(this,oo,window.requestAnimationFrame(()=>{N(this,oo,null),this._nextBound().catch(this._cancelBound)})):Promise.resolve().then(this._nextBound).catch(this._cancelBound)}async _next(){this.cancelled||(this.operatorListIdx=this.gfx.executeOperatorList(this.operatorList,this.operatorListIdx,this._continueBound,this.stepper),this.operatorListIdx===this.operatorList.argsArray.length&&(this.running=!1,this.operatorList.lastChunk&&(this.gfx.endDrawing(),p(tl,Fl).delete(this._canvas),this.callback())))}};oo=new WeakMap,Fl=new WeakMap,L(tl,Fl,new WeakSet);let h1=tl;const kI="4.10.38",DI="f9bea397f";function LE(i){return Math.floor(Math.max(0,Math.min(1,i))*255).toString(16).padStart(2,"0")}function nf(i){return Math.max(0,Math.min(255,255*i))}class IE{static CMYK_G([e,t,n,r]){return["G",1-Math.min(1,.3*e+.59*n+.11*t+r)]}static G_CMYK([e]){return["CMYK",0,0,0,1-e]}static G_RGB([e]){return["RGB",e,e,e]}static G_rgb([e]){return e=nf(e),[e,e,e]}static G_HTML([e]){const t=LE(e);return`#${t}${t}${t}`}static RGB_G([e,t,n]){return["G",.3*e+.59*t+.11*n]}static RGB_rgb(e){return e.map(nf)}static RGB_HTML(e){return`#${e.map(LE).join("")}`}static T_HTML(){return"#00000000"}static T_rgb(){return[null]}static CMYK_RGB([e,t,n,r]){return["RGB",1-Math.min(1,e+r),1-Math.min(1,n+r),1-Math.min(1,t+r)]}static CMYK_rgb([e,t,n,r]){return[nf(1-Math.min(1,e+r)),nf(1-Math.min(1,n+r)),nf(1-Math.min(1,t+r))]}static CMYK_HTML(e){const t=this.CMYK_RGB(e).slice(1);return this.RGB_HTML(t)}static RGB_CMYK([e,t,n]){const r=1-e,s=1-t,a=1-n,o=Math.min(r,s,a);return["CMYK",r,s,a,o]}}class OI{create(e,t,n=!1){if(e<=0||t<=0)throw new Error("Invalid SVG dimensions");const r=this._createSVG("svg:svg");return r.setAttribute("version","1.1"),n||(r.setAttribute("width",`${e}px`),r.setAttribute("height",`${t}px`)),r.setAttribute("preserveAspectRatio","none"),r.setAttribute("viewBox",`0 0 ${e} ${t}`),r}createElement(e){if(typeof e!="string")throw new Error("Invalid SVG element type");return this._createSVG(e)}_createSVG(e){Nt("Abstract method `_createSVG` called.")}}class f_ extends OI{_createSVG(e){return document.createElementNS(Fs,e)}}class ET{static setupStorage(e,t,n,r,s){const a=r.getValue(t,{value:null});switch(n.name){case"textarea":if(a.value!==null&&(e.textContent=a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})});break;case"input":if(n.attributes.type==="radio"||n.attributes.type==="checkbox"){if(a.value===n.attributes.xfaOn?e.setAttribute("checked",!0):a.value===n.attributes.xfaOff&&e.removeAttribute("checked"),s==="print")break;e.addEventListener("change",o=>{r.setValue(t,{value:o.target.checked?o.target.getAttribute("xfaOn"):o.target.getAttribute("xfaOff")})})}else{if(a.value!==null&&e.setAttribute("value",a.value),s==="print")break;e.addEventListener("input",o=>{r.setValue(t,{value:o.target.value})})}break;case"select":if(a.value!==null){e.setAttribute("value",a.value);for(const o of n.children)o.attributes.value===a.value?o.attributes.selected=!0:o.attributes.hasOwnProperty("selected")&&delete o.attributes.selected}e.addEventListener("input",o=>{const l=o.target.options,u=l.selectedIndex===-1?"":l[l.selectedIndex].value;r.setValue(t,{value:u})});break}}static setAttributes({html:e,element:t,storage:n=null,intent:r,linkService:s}){const{attributes:a}=t,o=e instanceof HTMLAnchorElement;a.type==="radio"&&(a.name=`${a.name}-${r}`);for(const[l,u]of Object.entries(a))if(u!=null)switch(l){case"class":u.length&&e.setAttribute(l,u.join(" "));break;case"dataId":break;case"id":e.setAttribute("data-element-id",u);break;case"style":Object.assign(e.style,u);break;case"textContent":e.textContent=u;break;default:(!o||l!=="href"&&l!=="newWindow")&&e.setAttribute(l,u)}o&&s.addLinkAttributes(e,a.href,a.newWindow),n&&a.dataId&&this.setupStorage(e,a.dataId,t,n)}static render(e){var h,f;const t=e.annotationStorage,n=e.linkService,r=e.xfaHtml,s=e.intent||"display",a=document.createElement(r.name);r.attributes&&this.setAttributes({html:a,element:r,intent:s,linkService:n});const o=s!=="richText",l=e.div;if(l.append(a),e.viewport){const d=`matrix(${e.viewport.transform.join(",")})`;l.style.transform=d}o&&l.setAttribute("class","xfaLayer xfaFont");const u=[];if(r.children.length===0){if(r.value){const d=document.createTextNode(r.value);a.append(d),o&&cd.shouldBuildText(r.name)&&u.push(d)}return{textDivs:u}}const c=[[r,-1,a]];for(;c.length>0;){const[d,y,b]=c.at(-1);if(y+1===d.children.length){c.pop();continue}const v=d.children[++c.at(-1)[1]];if(v===null)continue;const{name:g}=v;if(g==="#text"){const w=document.createTextNode(v.value);u.push(w),b.append(w);continue}const m=(h=v==null?void 0:v.attributes)!=null&&h.xmlns?document.createElementNS(v.attributes.xmlns,g):document.createElement(g);if(b.append(m),v.attributes&&this.setAttributes({html:m,element:v,storage:t,intent:s,linkService:n}),((f=v.children)==null?void 0:f.length)>0)c.push([v,-1,m]);else if(v.value){const w=document.createTextNode(v.value);o&&cd.shouldBuildText(g)&&u.push(w),m.append(w)}}for(const d of l.querySelectorAll(".xfaNonInteractive input, .xfaNonInteractive textarea"))d.setAttribute("readOnly",!0);return{textDivs:u}}static update(e){const t=`matrix(${e.viewport.transform.join(",")})`;e.div.style.transform=t,e.div.hidden=!1}}const Yp=1e3,NI=9,wu=new WeakSet;function Lo(i){return{width:i[2]-i[0],height:i[3]-i[1]}}class RI{static create(e){switch(e.data.annotationType){case yn.LINK:return new AT(e);case yn.TEXT:return new PI(e);case yn.WIDGET:switch(e.data.fieldType){case"Tx":return new LI(e);case"Btn":return e.data.radioButton?new CT(e):e.data.checkBox?new MI(e):new FI(e);case"Ch":return new BI(e);case"Sig":return new II(e)}return new Cu(e);case yn.POPUP:return new d1(e);case yn.FREETEXT:return new NT(e);case yn.LINE:return new zI(e);case yn.SQUARE:return new UI(e);case yn.CIRCLE:return new qI(e);case yn.POLYLINE:return new RT(e);case yn.CARET:return new WI(e);case yn.INK:return new d_(e);case yn.POLYGON:return new HI(e);case yn.HIGHLIGHT:return new PT(e);case yn.UNDERLINE:return new $I(e);case yn.SQUIGGLY:return new VI(e);case yn.STRIKEOUT:return new GI(e);case yn.STAMP:return new LT(e);case yn.FILEATTACHMENT:return new XI(e);default:return new un(e)}}}var Bl,Vc,Gc,op,f1;const z_=class z_{constructor(e,{isRenderable:t=!1,ignoreBorder:n=!1,createQuadrilaterals:r=!1}={}){L(this,op);L(this,Bl,null);L(this,Vc,!1);L(this,Gc,null);this.isRenderable=t,this.data=e.data,this.layer=e.layer,this.linkService=e.linkService,this.downloadManager=e.downloadManager,this.imageResourcesPath=e.imageResourcesPath,this.renderForms=e.renderForms,this.svgFactory=e.svgFactory,this.annotationStorage=e.annotationStorage,this.enableScripting=e.enableScripting,this.hasJSActions=e.hasJSActions,this._fieldObjects=e.fieldObjects,this.parent=e.parent,t&&(this.container=this._createContainer(n)),r&&this._createQuadrilaterals()}static _hasPopupData({titleObj:e,contentsObj:t,richText:n}){return!!(e!=null&&e.str||t!=null&&t.str||n!=null&&n.str)}get _isEditable(){return this.data.isEditable}get hasPopupData(){return z_._hasPopupData(this.data)}updateEdited(e){var n;if(!this.container)return;p(this,Bl)||N(this,Bl,{rect:this.data.rect.slice(0)});const{rect:t}=e;t&&M(this,op,f1).call(this,t),(n=p(this,Gc))==null||n.popup.updateEdited(e)}resetEdited(){var e;p(this,Bl)&&(M(this,op,f1).call(this,p(this,Bl).rect),(e=p(this,Gc))==null||e.popup.resetEdited(),N(this,Bl,null))}_createContainer(e){const{data:t,parent:{page:n,viewport:r}}=this,s=document.createElement("section");s.setAttribute("data-annotation-id",t.id),this instanceof Cu||(s.tabIndex=Yp);const{style:a}=s;if(a.zIndex=this.parent.zIndex++,t.alternativeText&&(s.title=t.alternativeText),t.noRotate&&s.classList.add("norotate"),!t.rect||this instanceof d1){const{rotation:b}=t;return!t.hasOwnCanvas&&b!==0&&this.setRotation(b,s),s}const{width:o,height:l}=Lo(t.rect);if(!e&&t.borderStyle.width>0){a.borderWidth=`${t.borderStyle.width}px`;const b=t.borderStyle.horizontalCornerRadius,v=t.borderStyle.verticalCornerRadius;if(b>0||v>0){const m=`calc(${b}px * var(--scale-factor)) / calc(${v}px * var(--scale-factor))`;a.borderRadius=m}else if(this instanceof CT){const m=`calc(${o}px * var(--scale-factor)) / calc(${l}px * var(--scale-factor))`;a.borderRadius=m}switch(t.borderStyle.style){case Jh.SOLID:a.borderStyle="solid";break;case Jh.DASHED:a.borderStyle="dashed";break;case Jh.BEVELED:it("Unimplemented border style: beveled");break;case Jh.INSET:it("Unimplemented border style: inset");break;case Jh.UNDERLINE:a.borderBottomStyle="solid";break}const g=t.borderColor||null;g?(N(this,Vc,!0),a.borderColor=$e.makeHexColor(g[0]|0,g[1]|0,g[2]|0)):a.borderWidth=0}const u=$e.normalizeRect([t.rect[0],n.view[3]-t.rect[1]+n.view[1],t.rect[2],n.view[3]-t.rect[3]+n.view[1]]),{pageWidth:c,pageHeight:h,pageX:f,pageY:d}=r.rawDims;a.left=`${100*(u[0]-f)/c}%`,a.top=`${100*(u[1]-d)/h}%`;const{rotation:y}=t;return t.hasOwnCanvas||y===0?(a.width=`${100*o/c}%`,a.height=`${100*l/h}%`):this.setRotation(y,s),s}setRotation(e,t=this.container){if(!this.data.rect)return;const{pageWidth:n,pageHeight:r}=this.parent.viewport.rawDims,{width:s,height:a}=Lo(this.data.rect);let o,l;e%180===0?(o=100*s/n,l=100*a/r):(o=100*a/n,l=100*s/r),t.style.width=`${o}%`,t.style.height=`${l}%`,t.setAttribute("data-main-rotation",(360-e)%360)}get _commonActions(){const e=(t,n,r)=>{const s=r.detail[t],a=s[0],o=s.slice(1);r.target.style[n]=IE[`${a}_HTML`](o),this.annotationStorage.setValue(this.data.id,{[n]:IE[`${a}_rgb`](o)})};return ot(this,"_commonActions",{display:t=>{const{display:n}=t.detail,r=n%2===1;this.container.style.visibility=r?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noView:r,noPrint:n===1||n===2})},print:t=>{this.annotationStorage.setValue(this.data.id,{noPrint:!t.detail.print})},hidden:t=>{const{hidden:n}=t.detail;this.container.style.visibility=n?"hidden":"visible",this.annotationStorage.setValue(this.data.id,{noPrint:n,noView:n})},focus:t=>{setTimeout(()=>t.target.focus({preventScroll:!1}),0)},userName:t=>{t.target.title=t.detail.userName},readonly:t=>{t.target.disabled=t.detail.readonly},required:t=>{this._setRequired(t.target,t.detail.required)},bgColor:t=>{e("bgColor","backgroundColor",t)},fillColor:t=>{e("fillColor","backgroundColor",t)},fgColor:t=>{e("fgColor","color",t)},textColor:t=>{e("textColor","color",t)},borderColor:t=>{e("borderColor","borderColor",t)},strokeColor:t=>{e("strokeColor","borderColor",t)},rotation:t=>{const n=t.detail.rotation;this.setRotation(n),this.annotationStorage.setValue(this.data.id,{rotation:n})}})}_dispatchEventFromSandbox(e,t){const n=this._commonActions;for(const r of Object.keys(t.detail)){const s=e[r]||n[r];s==null||s(t)}}_setDefaultPropertiesFromJS(e){if(!this.enableScripting)return;const t=this.annotationStorage.getRawValue(this.data.id);if(!t)return;const n=this._commonActions;for(const[r,s]of Object.entries(t)){const a=n[r];if(a){const o={detail:{[r]:s},target:e};a(o),delete t[r]}}}_createQuadrilaterals(){if(!this.container)return;const{quadPoints:e}=this.data;if(!e)return;const[t,n,r,s]=this.data.rect.map(b=>Math.fround(b));if(e.length===8){const[b,v,g,m]=e.subarray(2,6);if(r===b&&s===v&&t===g&&n===m)return}const{style:a}=this.container;let o;if(p(this,Vc)){const{borderColor:b,borderWidth:v}=a;a.borderWidth=0,o=["url('data:image/svg+xml;utf8,",'<svg xmlns="http://www.w3.org/2000/svg"',' preserveAspectRatio="none" viewBox="0 0 1 1">',`<g fill="transparent" stroke="${b}" stroke-width="${v}">`],this.container.classList.add("hasBorder")}const l=r-t,u=s-n,{svgFactory:c}=this,h=c.createElement("svg");h.classList.add("quadrilateralsContainer"),h.setAttribute("width",0),h.setAttribute("height",0);const f=c.createElement("defs");h.append(f);const d=c.createElement("clipPath"),y=`clippath_${this.data.id}`;d.setAttribute("id",y),d.setAttribute("clipPathUnits","objectBoundingBox"),f.append(d);for(let b=2,v=e.length;b<v;b+=8){const g=e[b],m=e[b+1],w=e[b+2],_=e[b+3],E=c.createElement("rect"),x=(w-t)/l,A=(s-m)/u,S=(g-w)/l,O=(m-_)/u;E.setAttribute("x",x),E.setAttribute("y",A),E.setAttribute("width",S),E.setAttribute("height",O),d.append(E),o==null||o.push(`<rect vector-effect="non-scaling-stroke" x="${x}" y="${A}" width="${S}" height="${O}"/>`)}p(this,Vc)&&(o.push("</g></svg>')"),a.backgroundImage=o.join("")),this.container.append(h),this.container.style.clipPath=`url(#${y})`}_createPopup(){const{data:e}=this,t=N(this,Gc,new d1({data:{color:e.color,titleObj:e.titleObj,modificationDate:e.modificationDate,contentsObj:e.contentsObj,richText:e.richText,parentRect:e.rect,borderStyle:0,id:`popup_${e.id}`,rotation:e.rotation},parent:this.parent,elements:[this]}));this.parent.div.append(t.render())}render(){Nt("Abstract method `AnnotationElement.render` called")}_getElementsByName(e,t=null){const n=[];if(this._fieldObjects){const r=this._fieldObjects[e];if(r)for(const{page:s,id:a,exportValues:o}of r){if(s===-1||a===t)continue;const l=typeof o=="string"?o:null,u=document.querySelector(`[data-element-id="${a}"]`);if(u&&!wu.has(u)){it(`_getElementsByName - element not allowed: ${a}`);continue}n.push({id:a,exportValue:l,domElement:u})}return n}for(const r of document.getElementsByName(e)){const{exportValue:s}=r,a=r.getAttribute("data-element-id");a!==t&&wu.has(r)&&n.push({id:a,exportValue:s,domElement:r})}return n}show(){var e;this.container&&(this.container.hidden=!1),(e=this.popup)==null||e.maybeShow()}hide(){var e;this.container&&(this.container.hidden=!0),(e=this.popup)==null||e.forceHide()}getElementsToTriggerPopup(){return this.container}addHighlightArea(){const e=this.getElementsToTriggerPopup();if(Array.isArray(e))for(const t of e)t.classList.add("highlightArea");else e.classList.add("highlightArea")}_editOnDoubleClick(){if(!this._isEditable)return;const{annotationEditorType:e,data:{id:t}}=this;this.container.addEventListener("dblclick",()=>{var n;(n=this.linkService.eventBus)==null||n.dispatch("switchannotationeditormode",{source:this,mode:e,editId:t})})}};Bl=new WeakMap,Vc=new WeakMap,Gc=new WeakMap,op=new WeakSet,f1=function(e){const{container:{style:t},data:{rect:n,rotation:r},parent:{viewport:{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}}}=this;n==null||n.splice(0,4,...e);const{width:u,height:c}=Lo(e);t.left=`${100*(e[0]-o)/s}%`,t.top=`${100*(a-e[3]+l)/a}%`,r===0?(t.width=`${100*u/s}%`,t.height=`${100*c/a}%`):this.setRotation(r)};let un=z_;var Qi,Yo,xT,ST;class AT extends un{constructor(t,n=null){super(t,{isRenderable:!0,ignoreBorder:!!(n!=null&&n.ignoreBorder),createQuadrilaterals:!0});L(this,Qi);this.isTooltipOnly=t.data.isTooltipOnly}render(){const{data:t,linkService:n}=this,r=document.createElement("a");r.setAttribute("data-element-id",t.id);let s=!1;return t.url?(n.addLinkAttributes(r,t.url,t.newWindow),s=!0):t.action?(this._bindNamedAction(r,t.action),s=!0):t.attachment?(M(this,Qi,xT).call(this,r,t.attachment,t.attachmentDest),s=!0):t.setOCGState?(M(this,Qi,ST).call(this,r,t.setOCGState),s=!0):t.dest?(this._bindLink(r,t.dest),s=!0):(t.actions&&(t.actions.Action||t.actions["Mouse Up"]||t.actions["Mouse Down"])&&this.enableScripting&&this.hasJSActions&&(this._bindJSAction(r,t),s=!0),t.resetForm?(this._bindResetFormAction(r,t.resetForm),s=!0):this.isTooltipOnly&&!s&&(this._bindLink(r,""),s=!0)),this.container.classList.add("linkAnnotation"),s&&this.container.append(r),this.container}_bindLink(t,n){t.href=this.linkService.getDestinationHash(n),t.onclick=()=>(n&&this.linkService.goToDestination(n),!1),(n||n==="")&&M(this,Qi,Yo).call(this)}_bindNamedAction(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeNamedAction(n),!1),M(this,Qi,Yo).call(this)}_bindJSAction(t,n){t.href=this.linkService.getAnchorUrl("");const r=new Map([["Action","onclick"],["Mouse Up","onmouseup"],["Mouse Down","onmousedown"]]);for(const s of Object.keys(n.actions)){const a=r.get(s);a&&(t[a]=()=>{var o;return(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:n.id,name:s}}),!1})}t.onclick||(t.onclick=()=>!1),M(this,Qi,Yo).call(this)}_bindResetFormAction(t,n){const r=t.onclick;if(r||(t.href=this.linkService.getAnchorUrl("")),M(this,Qi,Yo).call(this),!this._fieldObjects){it('_bindResetFormAction - "resetForm" action not supported, ensure that the `fieldObjects` parameter is provided.'),r||(t.onclick=()=>!1);return}t.onclick=()=>{var h;r==null||r();const{fields:s,refs:a,include:o}=n,l=[];if(s.length!==0||a.length!==0){const f=new Set(a);for(const d of s){const y=this._fieldObjects[d]||[];for(const{id:b}of y)f.add(b)}for(const d of Object.values(this._fieldObjects))for(const y of d)f.has(y.id)===o&&l.push(y)}else for(const f of Object.values(this._fieldObjects))l.push(...f);const u=this.annotationStorage,c=[];for(const f of l){const{id:d}=f;switch(c.push(d),f.type){case"text":{const b=f.defaultValue||"";u.setValue(d,{value:b});break}case"checkbox":case"radiobutton":{const b=f.defaultValue===f.exportValues;u.setValue(d,{value:b});break}case"combobox":case"listbox":{const b=f.defaultValue||"";u.setValue(d,{value:b});break}default:continue}const y=document.querySelector(`[data-element-id="${d}"]`);if(y){if(!wu.has(y)){it(`_bindResetFormAction - element not allowed: ${d}`);continue}}else continue;y.dispatchEvent(new Event("resetform"))}return this.enableScripting&&((h=this.linkService.eventBus)==null||h.dispatch("dispatcheventinsandbox",{source:this,detail:{id:"app",ids:c,name:"ResetForm"}})),!1}}}Qi=new WeakSet,Yo=function(){this.container.setAttribute("data-internal-link","")},xT=function(t,n,r=null){t.href=this.linkService.getAnchorUrl(""),n.description&&(t.title=n.description),t.onclick=()=>{var s;return(s=this.downloadManager)==null||s.openOrDownloadData(n.content,n.filename,r),!1},M(this,Qi,Yo).call(this)},ST=function(t,n){t.href=this.linkService.getAnchorUrl(""),t.onclick=()=>(this.linkService.executeSetOCGState(n),!1),M(this,Qi,Yo).call(this)};class PI extends un{constructor(e){super(e,{isRenderable:!0})}render(){this.container.classList.add("textAnnotation");const e=document.createElement("img");return e.src=this.imageResourcesPath+"annotation-"+this.data.name.toLowerCase()+".svg",e.setAttribute("data-l10n-id","pdfjs-text-annotation-type"),e.setAttribute("data-l10n-args",JSON.stringify({type:this.data.name})),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.append(e),this.container}}class Cu extends un{render(){return this.container}showElementAndHideCanvas(e){var t;this.data.hasOwnCanvas&&(((t=e.previousSibling)==null?void 0:t.nodeName)==="CANVAS"&&(e.previousSibling.hidden=!0),e.hidden=!1)}_getKeyModifier(e){return gi.platform.isMac?e.metaKey:e.ctrlKey}_setEventListener(e,t,n,r,s){n.includes("mouse")?e.addEventListener(n,a=>{var o;(o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a),shift:a.shiftKey,modifier:this._getKeyModifier(a)}})}):e.addEventListener(n,a=>{var o;if(n==="blur"){if(!t.focused||!a.relatedTarget)return;t.focused=!1}else if(n==="focus"){if(t.focused)return;t.focused=!0}s&&((o=this.linkService.eventBus)==null||o.dispatch("dispatcheventinsandbox",{source:this,detail:{id:this.data.id,name:r,value:s(a)}}))})}_setEventListeners(e,t,n,r){var s,a,o;for(const[l,u]of n)(u==="Action"||(s=this.data.actions)!=null&&s[u])&&((u==="Focus"||u==="Blur")&&(t||(t={focused:!1})),this._setEventListener(e,t,l,u,r),u==="Focus"&&!((a=this.data.actions)!=null&&a.Blur)?this._setEventListener(e,t,"blur","Blur",null):u==="Blur"&&!((o=this.data.actions)!=null&&o.Focus)&&this._setEventListener(e,t,"focus","Focus",null))}_setBackgroundColor(e){const t=this.data.backgroundColor||null;e.style.backgroundColor=t===null?"transparent":$e.makeHexColor(t[0],t[1],t[2])}_setTextStyle(e){const t=["left","center","right"],{fontColor:n}=this.data.defaultAppearanceData,r=this.data.defaultAppearanceData.fontSize||NI,s=e.style;let a;const o=2,l=u=>Math.round(10*u)/10;if(this.data.multiLine){const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o),c=Math.round(u/(o0*r))||1,h=u/c;a=Math.min(r,l(h/o0))}else{const u=Math.abs(this.data.rect[3]-this.data.rect[1]-o);a=Math.min(r,l(u/o0))}s.fontSize=`calc(${a}px * var(--scale-factor))`,s.color=$e.makeHexColor(n[0],n[1],n[2]),this.data.textAlignment!==null&&(s.textAlign=t[this.data.textAlignment])}_setRequired(e,t){t?e.setAttribute("required",!0):e.removeAttribute("required"),e.setAttribute("aria-required",t)}}class LI extends Cu{constructor(e){const t=e.renderForms||e.data.hasOwnCanvas||!e.data.hasAppearance&&!!e.data.fieldValue;super(e,{isRenderable:t})}setPropertyOnSiblings(e,t,n,r){const s=this.annotationStorage;for(const a of this._getElementsByName(e.name,e.id))a.domElement&&(a.domElement[t]=n),s.setValue(a.id,{[r]:n})}render(){var r,s;const e=this.annotationStorage,t=this.data.id;this.container.classList.add("textWidgetAnnotation");let n=null;if(this.renderForms){const a=e.getValue(t,{value:this.data.fieldValue});let o=a.value||"";const l=e.getValue(t,{charLimit:this.data.maxLen}).charLimit;l&&o.length>l&&(o=o.slice(0,l));let u=a.formattedValue||((r=this.data.textContent)==null?void 0:r.join(`
`))||null;u&&this.data.comb&&(u=u.replaceAll(/\s+/g,""));const c={userValue:o,formattedValue:u,lastCommittedValue:null,commitKey:1,focused:!1};this.data.multiLine?(n=document.createElement("textarea"),n.textContent=u??o,this.data.doNotScroll&&(n.style.overflowY="hidden")):(n=document.createElement("input"),n.type="text",n.setAttribute("value",u??o),this.data.doNotScroll&&(n.style.overflowX="hidden")),this.data.hasOwnCanvas&&(n.hidden=!0),wu.add(n),n.setAttribute("data-element-id",t),n.disabled=this.data.readOnly,n.name=this.data.fieldName,n.tabIndex=Yp,this._setRequired(n,this.data.required),l&&(n.maxLength=l),n.addEventListener("input",f=>{e.setValue(t,{value:f.target.value}),this.setPropertyOnSiblings(n,"value",f.target.value,"value"),c.formattedValue=null}),n.addEventListener("resetform",f=>{const d=this.data.defaultFieldValue??"";n.value=c.userValue=d,c.formattedValue=null});let h=f=>{const{formattedValue:d}=c;d!=null&&(f.target.value=d),f.target.scrollLeft=0};if(this.enableScripting&&this.hasJSActions){n.addEventListener("focus",d=>{var b;if(c.focused)return;const{target:y}=d;c.userValue&&(y.value=c.userValue),c.lastCommittedValue=y.value,c.commitKey=1,(b=this.data.actions)!=null&&b.Focus||(c.focused=!0)}),n.addEventListener("updatefromsandbox",d=>{this.showElementAndHideCanvas(d.target);const y={value(b){c.userValue=b.detail.value??"",e.setValue(t,{value:c.userValue.toString()}),b.target.value=c.userValue},formattedValue(b){const{formattedValue:v}=b.detail;c.formattedValue=v,v!=null&&b.target!==document.activeElement&&(b.target.value=v),e.setValue(t,{formattedValue:v})},selRange(b){b.target.setSelectionRange(...b.detail.selRange)},charLimit:b=>{var w;const{charLimit:v}=b.detail,{target:g}=b;if(v===0){g.removeAttribute("maxLength");return}g.setAttribute("maxLength",v);let m=c.userValue;!m||m.length<=v||(m=m.slice(0,v),g.value=c.userValue=m,e.setValue(t,{value:m}),(w=this.linkService.eventBus)==null||w.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:m,willCommit:!0,commitKey:1,selStart:g.selectionStart,selEnd:g.selectionEnd}}))}};this._dispatchEventFromSandbox(y,d)}),n.addEventListener("keydown",d=>{var v;c.commitKey=1;let y=-1;if(d.key==="Escape"?y=0:d.key==="Enter"&&!this.data.multiLine?y=2:d.key==="Tab"&&(c.commitKey=3),y===-1)return;const{value:b}=d.target;c.lastCommittedValue!==b&&(c.lastCommittedValue=b,c.userValue=b,(v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:b,willCommit:!0,commitKey:y,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}}))});const f=h;h=null,n.addEventListener("blur",d=>{var b,v;if(!c.focused||!d.relatedTarget)return;(b=this.data.actions)!=null&&b.Blur||(c.focused=!1);const{value:y}=d.target;c.userValue=y,c.lastCommittedValue!==y&&((v=this.linkService.eventBus)==null||v.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:y,willCommit:!0,commitKey:c.commitKey,selStart:d.target.selectionStart,selEnd:d.target.selectionEnd}})),f(d)}),(s=this.data.actions)!=null&&s.Keystroke&&n.addEventListener("beforeinput",d=>{var E;c.lastCommittedValue=null;const{data:y,target:b}=d,{value:v,selectionStart:g,selectionEnd:m}=b;let w=g,_=m;switch(d.inputType){case"deleteWordBackward":{const x=v.substring(0,g).match(/\w*[^\w]*$/);x&&(w-=x[0].length);break}case"deleteWordForward":{const x=v.substring(g).match(/^[^\w]*\w*/);x&&(_+=x[0].length);break}case"deleteContentBackward":g===m&&(w-=1);break;case"deleteContentForward":g===m&&(_+=1);break}d.preventDefault(),(E=this.linkService.eventBus)==null||E.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:v,change:y||"",willCommit:!1,selStart:w,selEnd:_}})}),this._setEventListeners(n,c,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],d=>d.target.value)}if(h&&n.addEventListener("blur",h),this.data.comb){const d=(this.data.rect[2]-this.data.rect[0])/l;n.classList.add("comb"),n.style.letterSpacing=`calc(${d}px * var(--scale-factor) - 1ch)`}}else n=document.createElement("div"),n.textContent=this.data.fieldValue,n.style.verticalAlign="middle",n.style.display="table-cell",this.data.hasOwnCanvas&&(n.hidden=!0);return this._setTextStyle(n),this._setBackgroundColor(n),this._setDefaultPropertiesFromJS(n),this.container.append(n),this.container}}class II extends Cu{constructor(e){super(e,{isRenderable:!!e.data.hasOwnCanvas})}}class MI extends Cu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.exportValue===t.fieldValue}).value;typeof r=="string"&&(r=r!=="Off",e.setValue(n,{value:r})),this.container.classList.add("buttonWidgetAnnotation","checkBox");const s=document.createElement("input");return wu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="checkbox",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.setAttribute("exportValue",t.exportValue),s.tabIndex=Yp,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n)){const c=l&&u.exportValue===t.exportValue;u.domElement&&(u.domElement.checked=c),e.setValue(u.id,{value:c})}e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue||"Off";a.target.checked=o===t.exportValue}),this.enableScripting&&this.hasJSActions&&(s.addEventListener("updatefromsandbox",a=>{const o={value(l){l.target.checked=l.detail.value!=="Off",e.setValue(n,{value:l.target.checked})}};this._dispatchEventFromSandbox(o,a)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],a=>a.target.checked)),this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class CT extends Cu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("buttonWidgetAnnotation","radioButton");const e=this.annotationStorage,t=this.data,n=t.id;let r=e.getValue(n,{value:t.fieldValue===t.buttonValue}).value;if(typeof r=="string"&&(r=r!==t.buttonValue,e.setValue(n,{value:r})),r)for(const a of this._getElementsByName(t.fieldName,n))e.setValue(a.id,{value:!1});const s=document.createElement("input");if(wu.add(s),s.setAttribute("data-element-id",n),s.disabled=t.readOnly,this._setRequired(s,this.data.required),s.type="radio",s.name=t.fieldName,r&&s.setAttribute("checked",!0),s.tabIndex=Yp,s.addEventListener("change",a=>{const{name:o,checked:l}=a.target;for(const u of this._getElementsByName(o,n))e.setValue(u.id,{value:!1});e.setValue(n,{value:l})}),s.addEventListener("resetform",a=>{const o=t.defaultFieldValue;a.target.checked=o!=null&&o===t.buttonValue}),this.enableScripting&&this.hasJSActions){const a=t.buttonValue;s.addEventListener("updatefromsandbox",o=>{const l={value:u=>{const c=a===u.detail.value;for(const h of this._getElementsByName(u.target.name)){const f=c&&h.id===n;h.domElement&&(h.domElement.checked=f),e.setValue(h.id,{value:f})}}};this._dispatchEventFromSandbox(l,o)}),this._setEventListeners(s,null,[["change","Validate"],["change","Action"],["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"]],o=>o.target.checked)}return this._setBackgroundColor(s),this._setDefaultPropertiesFromJS(s),this.container.append(s),this.container}}class FI extends AT{constructor(e){super(e,{ignoreBorder:e.data.hasAppearance})}render(){const e=super.render();e.classList.add("buttonWidgetAnnotation","pushButton");const t=e.lastChild;return this.enableScripting&&this.hasJSActions&&t&&(this._setDefaultPropertiesFromJS(t),t.addEventListener("updatefromsandbox",n=>{this._dispatchEventFromSandbox({},n)})),e}}class BI extends Cu{constructor(e){super(e,{isRenderable:e.renderForms})}render(){this.container.classList.add("choiceWidgetAnnotation");const e=this.annotationStorage,t=this.data.id,n=e.getValue(t,{value:this.data.fieldValue}),r=document.createElement("select");wu.add(r),r.setAttribute("data-element-id",t),r.disabled=this.data.readOnly,this._setRequired(r,this.data.required),r.name=this.data.fieldName,r.tabIndex=Yp;let s=this.data.combo&&this.data.options.length>0;this.data.combo||(r.size=this.data.options.length,this.data.multiSelect&&(r.multiple=!0)),r.addEventListener("resetform",c=>{const h=this.data.defaultFieldValue;for(const f of r.options)f.selected=f.value===h});for(const c of this.data.options){const h=document.createElement("option");h.textContent=c.displayValue,h.value=c.exportValue,n.value.includes(c.exportValue)&&(h.setAttribute("selected",!0),s=!1),r.append(h)}let a=null;if(s){const c=document.createElement("option");c.value=" ",c.setAttribute("hidden",!0),c.setAttribute("selected",!0),r.prepend(c),a=()=>{c.remove(),r.removeEventListener("input",a),a=null},r.addEventListener("input",a)}const o=c=>{const h=c?"value":"textContent",{options:f,multiple:d}=r;return d?Array.prototype.filter.call(f,y=>y.selected).map(y=>y[h]):f.selectedIndex===-1?null:f[f.selectedIndex][h]};let l=o(!1);const u=c=>{const h=c.target.options;return Array.prototype.map.call(h,f=>({displayValue:f.textContent,exportValue:f.value}))};return this.enableScripting&&this.hasJSActions?(r.addEventListener("updatefromsandbox",c=>{const h={value(f){a==null||a();const d=f.detail.value,y=new Set(Array.isArray(d)?d:[d]);for(const b of r.options)b.selected=y.has(b.value);e.setValue(t,{value:o(!0)}),l=o(!1)},multipleSelection(f){r.multiple=!0},remove(f){const d=r.options,y=f.detail.remove;d[y].selected=!1,r.remove(y),d.length>0&&Array.prototype.findIndex.call(d,v=>v.selected)===-1&&(d[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},clear(f){for(;r.length!==0;)r.remove(0);e.setValue(t,{value:null,items:[]}),l=o(!1)},insert(f){const{index:d,displayValue:y,exportValue:b}=f.detail.insert,v=r.children[d],g=document.createElement("option");g.textContent=y,g.value=b,v?v.before(g):r.append(g),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},items(f){const{items:d}=f.detail;for(;r.length!==0;)r.remove(0);for(const y of d){const{displayValue:b,exportValue:v}=y,g=document.createElement("option");g.textContent=b,g.value=v,r.append(g)}r.options.length>0&&(r.options[0].selected=!0),e.setValue(t,{value:o(!0),items:u(f)}),l=o(!1)},indices(f){const d=new Set(f.detail.indices);for(const y of f.target.options)y.selected=d.has(y.index);e.setValue(t,{value:o(!0)}),l=o(!1)},editable(f){f.target.disabled=!f.detail.editable}};this._dispatchEventFromSandbox(h,c)}),r.addEventListener("input",c=>{var d;const h=o(!0),f=o(!1);e.setValue(t,{value:h}),c.preventDefault(),(d=this.linkService.eventBus)==null||d.dispatch("dispatcheventinsandbox",{source:this,detail:{id:t,name:"Keystroke",value:l,change:f,changeEx:h,willCommit:!1,commitKey:1,keyDown:!1}})}),this._setEventListeners(r,null,[["focus","Focus"],["blur","Blur"],["mousedown","Mouse Down"],["mouseenter","Mouse Enter"],["mouseleave","Mouse Exit"],["mouseup","Mouse Up"],["input","Action"],["input","Validate"]],c=>c.target.value)):r.addEventListener("input",function(c){e.setValue(t,{value:o(!0)})}),this.data.combo&&this._setTextStyle(r),this._setBackgroundColor(r),this._setDefaultPropertiesFromJS(r),this.container.append(r),this.container}}class d1 extends un{constructor(e){const{data:t,elements:n}=e;super(e,{isRenderable:un._hasPopupData(t)}),this.elements=n,this.popup=null}render(){this.container.classList.add("popupAnnotation");const e=this.popup=new jI({container:this.container,color:this.data.color,titleObj:this.data.titleObj,modificationDate:this.data.modificationDate,contentsObj:this.data.contentsObj,richText:this.data.richText,rect:this.data.rect,parentRect:this.data.parentRect||null,parent:this.parent,elements:this.elements,open:this.data.open}),t=[];for(const n of this.elements)n.popup=e,n.container.ariaHasPopup="dialog",t.push(n.data.id),n.addHighlightArea();return this.container.setAttribute("aria-controls",t.map(n=>`${s_}${n}`).join(",")),this.container}}var Xc,Lv,Iv,Kc,jl,Qt,ra,Yc,lp,up,Zc,sa,zr,aa,cp,oa,hp,zl,Ul,Dt,am,p1,TT,kT,DT,OT,om,lm,g1;class jI{constructor({container:e,color:t,elements:n,titleObj:r,modificationDate:s,contentsObj:a,richText:o,parent:l,rect:u,parentRect:c,open:h}){L(this,Dt);L(this,Xc,M(this,Dt,DT).bind(this));L(this,Lv,M(this,Dt,g1).bind(this));L(this,Iv,M(this,Dt,lm).bind(this));L(this,Kc,M(this,Dt,om).bind(this));L(this,jl,null);L(this,Qt,null);L(this,ra,null);L(this,Yc,null);L(this,lp,null);L(this,up,null);L(this,Zc,null);L(this,sa,!1);L(this,zr,null);L(this,aa,null);L(this,cp,null);L(this,oa,null);L(this,hp,null);L(this,zl,null);L(this,Ul,!1);var f;N(this,Qt,e),N(this,hp,r),N(this,ra,a),N(this,oa,o),N(this,up,l),N(this,jl,t),N(this,cp,u),N(this,Zc,c),N(this,lp,n),N(this,Yc,l_.toDateObject(s)),this.trigger=n.flatMap(d=>d.getElementsToTriggerPopup());for(const d of this.trigger)d.addEventListener("click",p(this,Kc)),d.addEventListener("mouseenter",p(this,Iv)),d.addEventListener("mouseleave",p(this,Lv)),d.classList.add("popupTriggerArea");for(const d of n)(f=d.container)==null||f.addEventListener("keydown",p(this,Xc));p(this,Qt).hidden=!0,h&&M(this,Dt,om).call(this)}render(){if(p(this,zr))return;const e=N(this,zr,document.createElement("div"));if(e.className="popup",p(this,jl)){const s=e.style.outlineColor=$e.makeHexColor(...p(this,jl));CSS.supports("background-color","color-mix(in srgb, red 30%, white)")?e.style.backgroundColor=`color-mix(in srgb, ${s} 30%, white)`:e.style.backgroundColor=$e.makeHexColor(...p(this,jl).map(o=>Math.floor(.7*(255-o)+o)))}const t=document.createElement("span");t.className="header";const n=document.createElement("h1");if(t.append(n),{dir:n.dir,str:n.textContent}=p(this,hp),e.append(t),p(this,Yc)){const s=document.createElement("span");s.classList.add("popupDate"),s.setAttribute("data-l10n-id","pdfjs-annotation-date-time-string"),s.setAttribute("data-l10n-args",JSON.stringify({dateObj:p(this,Yc).valueOf()})),t.append(s)}const r=p(this,Dt,am);if(r)ET.render({xfaHtml:r,intent:"richText",div:e}),e.lastChild.classList.add("richText","popupContent");else{const s=this._formatContents(p(this,ra));e.append(s)}p(this,Qt).append(e)}_formatContents({str:e,dir:t}){const n=document.createElement("p");n.classList.add("popupContent"),n.dir=t;const r=e.split(/(?:\r\n?|\n)/);for(let s=0,a=r.length;s<a;++s){const o=r[s];n.append(document.createTextNode(o)),s<a-1&&n.append(document.createElement("br"))}return n}updateEdited({rect:e,popupContent:t}){var n;p(this,zl)||N(this,zl,{contentsObj:p(this,ra),richText:p(this,oa)}),e&&N(this,aa,null),t&&(N(this,oa,M(this,Dt,kT).call(this,t)),N(this,ra,null)),(n=p(this,zr))==null||n.remove(),N(this,zr,null)}resetEdited(){var e;p(this,zl)&&({contentsObj:oi(this,ra)._,richText:oi(this,oa)._}=p(this,zl),N(this,zl,null),(e=p(this,zr))==null||e.remove(),N(this,zr,null),N(this,aa,null))}forceHide(){N(this,Ul,this.isVisible),p(this,Ul)&&(p(this,Qt).hidden=!0)}maybeShow(){p(this,Ul)&&(p(this,zr)||M(this,Dt,lm).call(this),N(this,Ul,!1),p(this,Qt).hidden=!1)}get isVisible(){return p(this,Qt).hidden===!1}}Xc=new WeakMap,Lv=new WeakMap,Iv=new WeakMap,Kc=new WeakMap,jl=new WeakMap,Qt=new WeakMap,ra=new WeakMap,Yc=new WeakMap,lp=new WeakMap,up=new WeakMap,Zc=new WeakMap,sa=new WeakMap,zr=new WeakMap,aa=new WeakMap,cp=new WeakMap,oa=new WeakMap,hp=new WeakMap,zl=new WeakMap,Ul=new WeakMap,Dt=new WeakSet,am=function(){const e=p(this,oa),t=p(this,ra);return e!=null&&e.str&&(!(t!=null&&t.str)||t.str===e.str)&&p(this,oa).html||null},p1=function(){var e,t,n;return((n=(t=(e=p(this,Dt,am))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.fontSize)||0},TT=function(){var e,t,n;return((n=(t=(e=p(this,Dt,am))==null?void 0:e.attributes)==null?void 0:t.style)==null?void 0:n.color)||null},kT=function(e){const t=[],n={str:e,html:{name:"div",attributes:{dir:"auto"},children:[{name:"p",children:t}]}},r={style:{color:p(this,Dt,TT),fontSize:p(this,Dt,p1)?`calc(${p(this,Dt,p1)}px * var(--scale-factor))`:""}};for(const s of e.split(`
`))t.push({name:"span",value:s,attributes:r});return n},DT=function(e){e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||(e.key==="Enter"||e.key==="Escape"&&p(this,sa))&&M(this,Dt,om).call(this)},OT=function(){if(p(this,aa)!==null)return;const{page:{view:e},viewport:{rawDims:{pageWidth:t,pageHeight:n,pageX:r,pageY:s}}}=p(this,up);let a=!!p(this,Zc),o=a?p(this,Zc):p(this,cp);for(const y of p(this,lp))if(!o||$e.intersect(y.data.rect,o)!==null){o=y.data.rect,a=!0;break}const l=$e.normalizeRect([o[0],e[3]-o[1]+e[1],o[2],e[3]-o[3]+e[1]]),c=a?o[2]-o[0]+5:0,h=l[0]+c,f=l[1];N(this,aa,[100*(h-r)/t,100*(f-s)/n]);const{style:d}=p(this,Qt);d.left=`${p(this,aa)[0]}%`,d.top=`${p(this,aa)[1]}%`},om=function(){N(this,sa,!p(this,sa)),p(this,sa)?(M(this,Dt,lm).call(this),p(this,Qt).addEventListener("click",p(this,Kc)),p(this,Qt).addEventListener("keydown",p(this,Xc))):(M(this,Dt,g1).call(this),p(this,Qt).removeEventListener("click",p(this,Kc)),p(this,Qt).removeEventListener("keydown",p(this,Xc)))},lm=function(){p(this,zr)||this.render(),this.isVisible?p(this,sa)&&p(this,Qt).classList.add("focused"):(M(this,Dt,OT).call(this),p(this,Qt).hidden=!1,p(this,Qt).style.zIndex=parseInt(p(this,Qt).style.zIndex)+1e3)},g1=function(){p(this,Qt).classList.remove("focused"),!(p(this,sa)||!this.isVisible)&&(p(this,Qt).hidden=!0,p(this,Qt).style.zIndex=parseInt(p(this,Qt).style.zIndex)-1e3)};class NT extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.textContent=e.data.textContent,this.textPosition=e.data.textPosition,this.annotationEditorType=nt.FREETEXT}render(){if(this.container.classList.add("freeTextAnnotation"),this.textContent){const e=document.createElement("div");e.classList.add("annotationTextContent"),e.setAttribute("role","comment");for(const t of this.textContent){const n=document.createElement("span");n.textContent=t,e.append(n)}this.container.append(e)}return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var fp;class zI extends un{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,fp,null)}render(){this.container.classList.add("lineAnnotation");const t=this.data,{width:n,height:r}=Lo(t.rect),s=this.svgFactory.create(n,r,!0),a=N(this,fp,this.svgFactory.createElement("svg:line"));return a.setAttribute("x1",t.rect[2]-t.lineCoordinates[0]),a.setAttribute("y1",t.rect[3]-t.lineCoordinates[1]),a.setAttribute("x2",t.rect[2]-t.lineCoordinates[2]),a.setAttribute("y2",t.rect[3]-t.lineCoordinates[3]),a.setAttribute("stroke-width",t.borderStyle.width||1),a.setAttribute("stroke","transparent"),a.setAttribute("fill","transparent"),s.append(a),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,fp)}addHighlightArea(){this.container.classList.add("highlightArea")}}fp=new WeakMap;var dp;class UI extends un{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,dp,null)}render(){this.container.classList.add("squareAnnotation");const t=this.data,{width:n,height:r}=Lo(t.rect),s=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,o=N(this,dp,this.svgFactory.createElement("svg:rect"));return o.setAttribute("x",a/2),o.setAttribute("y",a/2),o.setAttribute("width",n-a),o.setAttribute("height",r-a),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,dp)}addHighlightArea(){this.container.classList.add("highlightArea")}}dp=new WeakMap;var pp;class qI extends un{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,pp,null)}render(){this.container.classList.add("circleAnnotation");const t=this.data,{width:n,height:r}=Lo(t.rect),s=this.svgFactory.create(n,r,!0),a=t.borderStyle.width,o=N(this,pp,this.svgFactory.createElement("svg:ellipse"));return o.setAttribute("cx",n/2),o.setAttribute("cy",r/2),o.setAttribute("rx",n/2-a/2),o.setAttribute("ry",r/2-a/2),o.setAttribute("stroke-width",a||1),o.setAttribute("stroke","transparent"),o.setAttribute("fill","transparent"),s.append(o),this.container.append(s),!t.popupRef&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,pp)}addHighlightArea(){this.container.classList.add("highlightArea")}}pp=new WeakMap;var gp;class RT extends un{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,gp,null);this.containerClassName="polylineAnnotation",this.svgElementName="svg:polyline"}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,vertices:n,borderStyle:r,popupRef:s}}=this;if(!n)return this.container;const{width:a,height:o}=Lo(t),l=this.svgFactory.create(a,o,!0);let u=[];for(let h=0,f=n.length;h<f;h+=2){const d=n[h]-t[0],y=t[3]-n[h+1];u.push(`${d},${y}`)}u=u.join(" ");const c=N(this,gp,this.svgFactory.createElement(this.svgElementName));return c.setAttribute("points",u),c.setAttribute("stroke-width",r.width||1),c.setAttribute("stroke","transparent"),c.setAttribute("fill","transparent"),l.append(c),this.container.append(l),!s&&this.hasPopupData&&this._createPopup(),this.container}getElementsToTriggerPopup(){return p(this,gp)}addHighlightArea(){this.container.classList.add("highlightArea")}}gp=new WeakMap;class HI extends RT{constructor(e){super(e),this.containerClassName="polygonAnnotation",this.svgElementName="svg:polygon"}}class WI extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0})}render(){return this.container.classList.add("caretAnnotation"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container}}var mp,ql,vp,m1;class d_ extends un{constructor(t){super(t,{isRenderable:!0,ignoreBorder:!0});L(this,vp);L(this,mp,null);L(this,ql,[]);this.containerClassName="inkAnnotation",this.svgElementName="svg:polyline",this.annotationEditorType=this.data.it==="InkHighlight"?nt.HIGHLIGHT:nt.INK}render(){this.container.classList.add(this.containerClassName);const{data:{rect:t,rotation:n,inkLists:r,borderStyle:s,popupRef:a}}=this,{transform:o,width:l,height:u}=M(this,vp,m1).call(this,n,t),c=this.svgFactory.create(l,u,!0),h=N(this,mp,this.svgFactory.createElement("svg:g"));c.append(h),h.setAttribute("stroke-width",s.width||1),h.setAttribute("stroke-linecap","round"),h.setAttribute("stroke-linejoin","round"),h.setAttribute("stroke-miterlimit",10),h.setAttribute("stroke","transparent"),h.setAttribute("fill","transparent"),h.setAttribute("transform",o);for(let f=0,d=r.length;f<d;f++){const y=this.svgFactory.createElement(this.svgElementName);p(this,ql).push(y),y.setAttribute("points",r[f].join(",")),h.append(y)}return!a&&this.hasPopupData&&this._createPopup(),this.container.append(c),this._editOnDoubleClick(),this.container}updateEdited(t){super.updateEdited(t);const{thickness:n,points:r,rect:s}=t,a=p(this,mp);if(n>=0&&a.setAttribute("stroke-width",n||1),r)for(let o=0,l=p(this,ql).length;o<l;o++)p(this,ql)[o].setAttribute("points",r[o].join(","));if(s){const{transform:o,width:l,height:u}=M(this,vp,m1).call(this,this.data.rotation,s);a.parentElement.setAttribute("viewBox",`0 0 ${l} ${u}`),a.setAttribute("transform",o)}}getElementsToTriggerPopup(){return p(this,ql)}addHighlightArea(){this.container.classList.add("highlightArea")}}mp=new WeakMap,ql=new WeakMap,vp=new WeakSet,m1=function(t,n){switch(t){case 90:return{transform:`rotate(90) translate(${-n[0]},${n[1]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};case 180:return{transform:`rotate(180) translate(${-n[2]},${n[1]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]};case 270:return{transform:`rotate(270) translate(${-n[2]},${n[3]}) scale(1,-1)`,width:n[3]-n[1],height:n[2]-n[0]};default:return{transform:`translate(${-n[0]},${n[3]}) scale(1,-1)`,width:n[2]-n[0],height:n[3]-n[1]}}};class PT extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0}),this.annotationEditorType=nt.HIGHLIGHT}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("highlightAnnotation"),this._editOnDoubleClick(),this.container}}class $I extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("underlineAnnotation"),this.container}}class VI extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("squigglyAnnotation"),this.container}}class GI extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0,createQuadrilaterals:!0})}render(){return!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this.container.classList.add("strikeoutAnnotation"),this.container}}class LT extends un{constructor(e){super(e,{isRenderable:!0,ignoreBorder:!0}),this.annotationEditorType=nt.STAMP}render(){return this.container.classList.add("stampAnnotation"),this.container.setAttribute("role","img"),!this.data.popupRef&&this.hasPopupData&&this._createPopup(),this._editOnDoubleClick(),this.container}}var yp,bp,v1;class XI extends un{constructor(t){var r;super(t,{isRenderable:!0});L(this,bp);L(this,yp,null);const{file:n}=this.data;this.filename=n.filename,this.content=n.content,(r=this.linkService.eventBus)==null||r.dispatch("fileattachmentannotation",{source:this,...n})}render(){this.container.classList.add("fileAttachmentAnnotation");const{container:t,data:n}=this;let r;n.hasAppearance||n.fillAlpha===0?r=document.createElement("div"):(r=document.createElement("img"),r.src=`${this.imageResourcesPath}annotation-${/paperclip/i.test(n.name)?"paperclip":"pushpin"}.svg`,n.fillAlpha&&n.fillAlpha<1&&(r.style=`filter: opacity(${Math.round(n.fillAlpha*100)}%);`)),r.addEventListener("dblclick",M(this,bp,v1).bind(this)),N(this,yp,r);const{isMac:s}=gi.platform;return t.addEventListener("keydown",a=>{a.key==="Enter"&&(s?a.metaKey:a.ctrlKey)&&M(this,bp,v1).call(this)}),!n.popupRef&&this.hasPopupData?this._createPopup():r.classList.add("popupTriggerArea"),t.append(r),t}getElementsToTriggerPopup(){return p(this,yp)}addHighlightArea(){this.container.classList.add("highlightArea")}}yp=new WeakMap,bp=new WeakSet,v1=function(){var t;(t=this.downloadManager)==null||t.openOrDownloadData(this.content,this.filename)};var wp,Hl,Wl,_p,Eu,IT,y1;class KI{constructor({div:e,accessibilityManager:t,annotationCanvasMap:n,annotationEditorUIManager:r,page:s,viewport:a,structTreeLayer:o}){L(this,Eu);L(this,wp,null);L(this,Hl,null);L(this,Wl,new Map);L(this,_p,null);this.div=e,N(this,wp,t),N(this,Hl,n),N(this,_p,o||null),this.page=s,this.viewport=a,this.zIndex=0,this._annotationEditorUIManager=r}hasEditableAnnotations(){return p(this,Wl).size>0}async render(e){var a;const{annotations:t}=e,n=this.div;yu(n,this.viewport);const r=new Map,s={data:null,layer:n,linkService:e.linkService,downloadManager:e.downloadManager,imageResourcesPath:e.imageResourcesPath||"",renderForms:e.renderForms!==!1,svgFactory:new f_,annotationStorage:e.annotationStorage||new c_,enableScripting:e.enableScripting===!0,hasJSActions:e.hasJSActions,fieldObjects:e.fieldObjects,parent:this,elements:null};for(const o of t){if(o.noHTML)continue;const l=o.annotationType===yn.POPUP;if(l){const h=r.get(o.id);if(!h)continue;s.elements=h}else{const{width:h,height:f}=Lo(o.rect);if(h<=0||f<=0)continue}s.data=o;const u=RI.create(s);if(!u.isRenderable)continue;if(!l&&o.popupRef){const h=r.get(o.popupRef);h?h.push(u):r.set(o.popupRef,[u])}const c=u.render();o.hidden&&(c.style.visibility="hidden"),await M(this,Eu,IT).call(this,c,o.id),u._isEditable&&(p(this,Wl).set(u.data.id,u),(a=this._annotationEditorUIManager)==null||a.renderAnnotationElement(u))}M(this,Eu,y1).call(this)}update({viewport:e}){const t=this.div;this.viewport=e,yu(t,{rotation:e.rotation}),M(this,Eu,y1).call(this),t.hidden=!1}getEditableAnnotations(){return Array.from(p(this,Wl).values())}getEditableAnnotation(e){return p(this,Wl).get(e)}}wp=new WeakMap,Hl=new WeakMap,Wl=new WeakMap,_p=new WeakMap,Eu=new WeakSet,IT=async function(e,t){var a,o;const n=e.firstChild||e,r=n.id=`${s_}${t}`,s=await((a=p(this,_p))==null?void 0:a.getAriaAttributes(r));if(s)for(const[l,u]of s)n.setAttribute(l,u);this.div.append(e),(o=p(this,wp))==null||o.moveElementInDOM(this.div,e,n,!1)},y1=function(){if(!p(this,Hl))return;const e=this.div;for(const[t,n]of p(this,Hl)){const r=e.querySelector(`[data-annotation-id="${t}"]`);if(!r)continue;n.className="annotationContent";const{firstChild:s}=r;s?s.nodeName==="CANVAS"?s.replaceWith(n):s.classList.contains("annotationContent")?s.after(n):s.before(n):r.append(n)}p(this,Hl).clear()};const kg=/\r\n?|\n/g;var Ur,qi,Ep,$l,Hi,gn,MT,FT,BT,um,Ea,cm,hm,jT,w1,zT;const Rt=class Rt extends Xt{constructor(t){super({...t,name:"freeTextEditor"});L(this,gn);L(this,Ur);L(this,qi,"");L(this,Ep,`${this.id}-editor`);L(this,$l,null);L(this,Hi);N(this,Ur,t.color||Rt._defaultColor||Xt._defaultLineColor),N(this,Hi,t.fontSize||Rt._defaultFontSize)}static get _keyboardManager(){const t=Rt.prototype,n=a=>a.isEmpty(),r=bu.TRANSLATE_SMALL,s=bu.TRANSLATE_BIG;return ot(this,"_keyboardManager",new Kp([[["ctrl+s","mac+meta+s","ctrl+p","mac+meta+p"],t.commitOrRemove,{bubbles:!0}],[["ctrl+Enter","mac+meta+Enter","Escape","mac+Escape"],t.commitOrRemove],[["ArrowLeft","mac+ArrowLeft"],t._translateEmpty,{args:[-r,0],checker:n}],[["ctrl+ArrowLeft","mac+shift+ArrowLeft"],t._translateEmpty,{args:[-s,0],checker:n}],[["ArrowRight","mac+ArrowRight"],t._translateEmpty,{args:[r,0],checker:n}],[["ctrl+ArrowRight","mac+shift+ArrowRight"],t._translateEmpty,{args:[s,0],checker:n}],[["ArrowUp","mac+ArrowUp"],t._translateEmpty,{args:[0,-r],checker:n}],[["ctrl+ArrowUp","mac+shift+ArrowUp"],t._translateEmpty,{args:[0,-s],checker:n}],[["ArrowDown","mac+ArrowDown"],t._translateEmpty,{args:[0,r],checker:n}],[["ctrl+ArrowDown","mac+shift+ArrowDown"],t._translateEmpty,{args:[0,s],checker:n}]]))}static initialize(t,n){Xt.initialize(t,n);const r=getComputedStyle(document.documentElement);this._internalPadding=parseFloat(r.getPropertyValue("--freetext-padding"))}static updateDefaultParams(t,n){switch(t){case ft.FREETEXT_SIZE:Rt._defaultFontSize=n;break;case ft.FREETEXT_COLOR:Rt._defaultColor=n;break}}updateParams(t,n){switch(t){case ft.FREETEXT_SIZE:M(this,gn,MT).call(this,n);break;case ft.FREETEXT_COLOR:M(this,gn,FT).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ft.FREETEXT_SIZE,Rt._defaultFontSize],[ft.FREETEXT_COLOR,Rt._defaultColor||Xt._defaultLineColor]]}get propertiesToUpdate(){return[[ft.FREETEXT_SIZE,p(this,Hi)],[ft.FREETEXT_COLOR,p(this,Ur)]]}_translateEmpty(t,n){this._uiManager.translateSelectedEditors(t,n,!0)}getInitialTranslation(){const t=this.parentScale;return[-Rt._internalPadding*t,-(Rt._internalPadding+p(this,Hi))*t]}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(this.isAttachedToDOM||this.parent.add(this)))}enableEditMode(){if(this.isInEditMode())return;this.parent.setEditingState(!1),this.parent.updateToolbar(nt.FREETEXT),super.enableEditMode(),this.overlayDiv.classList.remove("enabled"),this.editorDiv.contentEditable=!0,this._isDraggable=!1,this.div.removeAttribute("aria-activedescendant"),N(this,$l,new AbortController);const t=this._uiManager.combinedSignal(p(this,$l));this.editorDiv.addEventListener("keydown",this.editorDivKeydown.bind(this),{signal:t}),this.editorDiv.addEventListener("focus",this.editorDivFocus.bind(this),{signal:t}),this.editorDiv.addEventListener("blur",this.editorDivBlur.bind(this),{signal:t}),this.editorDiv.addEventListener("input",this.editorDivInput.bind(this),{signal:t}),this.editorDiv.addEventListener("paste",this.editorDivPaste.bind(this),{signal:t})}disableEditMode(){var t;this.isInEditMode()&&(this.parent.setEditingState(!0),super.disableEditMode(),this.overlayDiv.classList.add("enabled"),this.editorDiv.contentEditable=!1,this.div.setAttribute("aria-activedescendant",p(this,Ep)),this._isDraggable=!0,(t=p(this,$l))==null||t.abort(),N(this,$l,null),this.div.focus({preventScroll:!0}),this.isEditing=!1,this.parent.div.classList.add("freetextEditing"))}focusin(t){this._focusEventsAllowed&&(super.focusin(t),t.target!==this.editorDiv&&this.editorDiv.focus())}onceAdded(t){var n;this.width||(this.enableEditMode(),t&&this.editorDiv.focus(),(n=this._initialOptions)!=null&&n.isCentered&&this.center(),this._initialOptions=null)}isEmpty(){return!this.editorDiv||this.editorDiv.innerText.trim()===""}remove(){this.isEditing=!1,this.parent&&(this.parent.setEditingState(!0),this.parent.div.classList.add("freetextEditing")),super.remove()}commit(){if(!this.isInEditMode())return;super.commit(),this.disableEditMode();const t=p(this,qi),n=N(this,qi,M(this,gn,BT).call(this).trimEnd());if(t===n)return;const r=s=>{if(N(this,qi,s),!s){this.remove();return}M(this,gn,hm).call(this),this._uiManager.rebuild(this),M(this,gn,um).call(this)};this.addCommands({cmd:()=>{r(n)},undo:()=>{r(t)},mustExec:!1}),M(this,gn,um).call(this)}shouldGetKeyboardEvents(){return this.isInEditMode()}enterInEditMode(){this.enableEditMode(),this.editorDiv.focus()}dblclick(t){this.enterInEditMode()}keydown(t){t.target===this.div&&t.key==="Enter"&&(this.enterInEditMode(),t.preventDefault())}editorDivKeydown(t){Rt._keyboardManager.exec(this,t)}editorDivFocus(t){this.isEditing=!0}editorDivBlur(t){this.isEditing=!1}editorDivInput(t){this.parent.div.classList.toggle("freetextEditing",this.isEmpty())}disableEditing(){this.editorDiv.setAttribute("role","comment"),this.editorDiv.removeAttribute("aria-multiline")}enableEditing(){this.editorDiv.setAttribute("role","textbox"),this.editorDiv.setAttribute("aria-multiline",!0)}render(){if(this.div)return this.div;let t,n;this.width&&(t=this.x,n=this.y),super.render(),this.editorDiv=document.createElement("div"),this.editorDiv.className="internal",this.editorDiv.setAttribute("id",p(this,Ep)),this.editorDiv.setAttribute("data-l10n-id","pdfjs-free-text2"),this.editorDiv.setAttribute("data-l10n-attrs","default-content"),this.enableEditing(),this.editorDiv.contentEditable=!0;const{style:r}=this.editorDiv;if(r.fontSize=`calc(${p(this,Hi)}px * var(--scale-factor))`,r.color=p(this,Ur),this.div.append(this.editorDiv),this.overlayDiv=document.createElement("div"),this.overlayDiv.classList.add("overlay","enabled"),this.div.append(this.overlayDiv),Qm(this,this.div,["dblclick","keydown"]),this.width){const[s,a]=this.parentDimensions;if(this.annotationElementId){const{position:o}=this._initialData;let[l,u]=this.getInitialTranslation();[l,u]=this.pageTranslationToScreen(l,u);const[c,h]=this.pageDimensions,[f,d]=this.pageTranslation;let y,b;switch(this.rotation){case 0:y=t+(o[0]-f)/c,b=n+this.height-(o[1]-d)/h;break;case 90:y=t+(o[0]-f)/c,b=n-(o[1]-d)/h,[l,u]=[u,-l];break;case 180:y=t-this.width+(o[0]-f)/c,b=n-(o[1]-d)/h,[l,u]=[-l,-u];break;case 270:y=t+(o[0]-f-this.height*h)/c,b=n+(o[1]-d-this.width*c)/h,[l,u]=[-u,l];break}this.setAt(y*s,b*a,l,u)}else this.setAt(t*s,n*a,this.width*s,this.height*a);M(this,gn,hm).call(this),this._isDraggable=!0,this.editorDiv.contentEditable=!1}else this._isDraggable=!1,this.editorDiv.contentEditable=!0;return this.div}editorDivPaste(t){var y,b,v;const n=t.clipboardData||window.clipboardData,{types:r}=n;if(r.length===1&&r[0]==="text/plain")return;t.preventDefault();const s=M(y=Rt,Ea,w1).call(y,n.getData("text")||"").replaceAll(kg,`
`);if(!s)return;const a=window.getSelection();if(!a.rangeCount)return;this.editorDiv.normalize(),a.deleteFromDocument();const o=a.getRangeAt(0);if(!s.includes(`
`)){o.insertNode(document.createTextNode(s)),this.editorDiv.normalize(),a.collapseToStart();return}const{startContainer:l,startOffset:u}=o,c=[],h=[];if(l.nodeType===Node.TEXT_NODE){const g=l.parentElement;if(h.push(l.nodeValue.slice(u).replaceAll(kg,"")),g!==this.editorDiv){let m=c;for(const w of this.editorDiv.childNodes){if(w===g){m=h;continue}m.push(M(b=Rt,Ea,cm).call(b,w))}}c.push(l.nodeValue.slice(0,u).replaceAll(kg,""))}else if(l===this.editorDiv){let g=c,m=0;for(const w of this.editorDiv.childNodes)m++===u&&(g=h),g.push(M(v=Rt,Ea,cm).call(v,w))}N(this,qi,`${c.join(`
`)}${s}${h.join(`
`)}`),M(this,gn,hm).call(this);const f=new Range;let d=c.reduce((g,m)=>g+m.length,0);for(const{firstChild:g}of this.editorDiv.childNodes)if(g.nodeType===Node.TEXT_NODE){const m=g.nodeValue.length;if(d<=m){f.setStart(g,d),f.setEnd(g,d);break}d-=m}a.removeAllRanges(),a.addRange(f)}get contentDiv(){return this.editorDiv}static async deserialize(t,n,r){var o;let s=null;if(t instanceof NT){const{data:{defaultAppearanceData:{fontSize:l,fontColor:u},rect:c,rotation:h,id:f,popupRef:d},textContent:y,textPosition:b,parent:{page:{pageNumber:v}}}=t;if(!y||y.length===0)return null;s=t={annotationType:nt.FREETEXT,color:Array.from(u),fontSize:l,value:y.join(`
`),position:b,pageIndex:v-1,rect:c.slice(0),rotation:h,id:f,deleted:!1,popupRef:d}}const a=await super.deserialize(t,n,r);return N(a,Hi,t.fontSize),N(a,Ur,$e.makeHexColor(...t.color)),N(a,qi,M(o=Rt,Ea,w1).call(o,t.value)),a.annotationElementId=t.id||null,a._initialData=s,a}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const n=Rt._internalPadding*this.parentScale,r=this.getRect(n,n),s=Xt._colorManager.convert(this.isAttachedToDOM?getComputedStyle(this.editorDiv).color:p(this,Ur)),a={annotationType:nt.FREETEXT,color:s,fontSize:p(this,Hi),value:M(this,gn,jT).call(this),pageIndex:this.pageIndex,rect:r,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?a:this.annotationElementId&&!M(this,gn,zT).call(this,a)?null:(a.id=this.annotationElementId,a)}renderAnnotationElement(t){const n=super.renderAnnotationElement(t);if(this.deleted)return n;const{style:r}=n;r.fontSize=`calc(${p(this,Hi)}px * var(--scale-factor))`,r.color=p(this,Ur),n.replaceChildren();for(const a of p(this,qi).split(`
`)){const o=document.createElement("div");o.append(a?document.createTextNode(a):document.createElement("br")),n.append(o)}const s=Rt._internalPadding*this.parentScale;return t.updateEdited({rect:this.getRect(s,s),popupContent:p(this,qi)}),n}resetAnnotationElement(t){super.resetAnnotationElement(t),t.resetEdited()}};Ur=new WeakMap,qi=new WeakMap,Ep=new WeakMap,$l=new WeakMap,Hi=new WeakMap,gn=new WeakSet,MT=function(t){const n=s=>{this.editorDiv.style.fontSize=`calc(${s}px * var(--scale-factor))`,this.translate(0,-(s-p(this,Hi))*this.parentScale),N(this,Hi,s),M(this,gn,um).call(this)},r=p(this,Hi);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.FREETEXT_SIZE,overwriteIfSameType:!0,keepUndo:!0})},FT=function(t){const n=s=>{N(this,Ur,this.editorDiv.style.color=s)},r=p(this,Ur);this.addCommands({cmd:n.bind(this,t),undo:n.bind(this,r),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.FREETEXT_COLOR,overwriteIfSameType:!0,keepUndo:!0})},BT=function(){var r;const t=[];this.editorDiv.normalize();let n=null;for(const s of this.editorDiv.childNodes)(n==null?void 0:n.nodeType)===Node.TEXT_NODE&&s.nodeName==="BR"||(t.push(M(r=Rt,Ea,cm).call(r,s)),n=s);return t.join(`
`)},um=function(){const[t,n]=this.parentDimensions;let r;if(this.isAttachedToDOM)r=this.div.getBoundingClientRect();else{const{currentLayer:s,div:a}=this,o=a.style.display,l=a.classList.contains("hidden");a.classList.remove("hidden"),a.style.display="hidden",s.div.append(this.div),r=a.getBoundingClientRect(),a.remove(),a.style.display=o,a.classList.toggle("hidden",l)}this.rotation%180===this.parentRotation%180?(this.width=r.width/t,this.height=r.height/n):(this.width=r.height/t,this.height=r.width/n),this.fixAndSetPosition()},Ea=new WeakSet,cm=function(t){return(t.nodeType===Node.TEXT_NODE?t.nodeValue:t.innerText).replaceAll(kg,"")},hm=function(){if(this.editorDiv.replaceChildren(),!!p(this,qi))for(const t of p(this,qi).split(`
`)){const n=document.createElement("div");n.append(t?document.createTextNode(t):document.createElement("br")),this.editorDiv.append(n)}},jT=function(){return p(this,qi).replaceAll(""," ")},w1=function(t){return t.replaceAll(" ","")},zT=function(t){const{value:n,fontSize:r,color:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||t.value!==n||t.fontSize!==r||t.color.some((o,l)=>o!==s[l])||t.pageIndex!==a},L(Rt,Ea),Ze(Rt,"_freeTextDefaultContent",""),Ze(Rt,"_internalPadding",0),Ze(Rt,"_defaultColor",null),Ze(Rt,"_defaultFontSize",10),Ze(Rt,"_type","freetext"),Ze(Rt,"_editorType",nt.FREETEXT);let b1=Rt;class Be{toSVGPath(){Nt("Abstract method `toSVGPath` must be implemented.")}get box(){Nt("Abstract getter `box` must be implemented.")}serialize(e,t){Nt("Abstract method `serialize` must be implemented.")}static _rescale(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o]*r,a[o+1]=n+e[o+1]*s;return a}static _rescaleAndSwap(e,t,n,r,s,a){a||(a=new Float32Array(e.length));for(let o=0,l=e.length;o<l;o+=2)a[o]=t+e[o+1]*r,a[o+1]=n+e[o]*s;return a}static _translate(e,t,n,r){r||(r=new Float32Array(e.length));for(let s=0,a=e.length;s<a;s+=2)r[s]=t+e[s],r[s+1]=n+e[s+1];return r}static svgRound(e){return Math.round(e*1e4)}static _normalizePoint(e,t,n,r,s){switch(s){case 90:return[1-t/n,e/r];case 180:return[1-e/n,1-t/r];case 270:return[t/n,1-e/r];default:return[e/n,t/r]}}static _normalizePagePoint(e,t,n){switch(n){case 90:return[1-t,e];case 180:return[1-e,1-t];case 270:return[t,1-e];default:return[e,t]}}static createBezierPoints(e,t,n,r,s,a){return[(e+5*n)/6,(t+5*r)/6,(5*n+s)/6,(5*r+a)/6,(n+s)/2,(r+a)/2]}}Ze(Be,"PRECISION",1e-4);var Wi,qr,Qc,Jc,_s,at,Vl,Gl,Ap,xp,eh,th,lo,Sp,Mv,Fv,xn,xf,UT,qT,HT,WT,$T,VT;const qs=class qs{constructor({x:e,y:t},n,r,s,a,o=0){L(this,xn);L(this,Wi);L(this,qr,[]);L(this,Qc);L(this,Jc);L(this,_s,[]);L(this,at,new Float32Array(18));L(this,Vl);L(this,Gl);L(this,Ap);L(this,xp);L(this,eh);L(this,th);L(this,lo,[]);N(this,Wi,n),N(this,th,s*r),N(this,Jc,a),p(this,at).set([NaN,NaN,NaN,NaN,e,t],6),N(this,Qc,o),N(this,xp,p(qs,Sp)*r),N(this,Ap,p(qs,Fv)*r),N(this,eh,r),p(this,lo).push(e,t)}isEmpty(){return isNaN(p(this,at)[8])}add({x:e,y:t}){var O;N(this,Vl,e),N(this,Gl,t);const[n,r,s,a]=p(this,Wi);let[o,l,u,c]=p(this,at).subarray(8,12);const h=e-u,f=t-c,d=Math.hypot(h,f);if(d<p(this,Ap))return!1;const y=d-p(this,xp),b=y/d,v=b*h,g=b*f;let m=o,w=l;o=u,l=c,u+=v,c+=g,(O=p(this,lo))==null||O.push(e,t);const _=-g/y,E=v/y,x=_*p(this,th),A=E*p(this,th);return p(this,at).set(p(this,at).subarray(2,8),0),p(this,at).set([u+x,c+A],4),p(this,at).set(p(this,at).subarray(14,18),12),p(this,at).set([u-x,c-A],16),isNaN(p(this,at)[6])?(p(this,_s).length===0&&(p(this,at).set([o+x,l+A],2),p(this,_s).push(NaN,NaN,NaN,NaN,(o+x-n)/s,(l+A-r)/a),p(this,at).set([o-x,l-A],14),p(this,qr).push(NaN,NaN,NaN,NaN,(o-x-n)/s,(l-A-r)/a)),p(this,at).set([m,w,o,l,u,c],6),!this.isEmpty()):(p(this,at).set([m,w,o,l,u,c],6),Math.abs(Math.atan2(w-l,m-o)-Math.atan2(g,v))<Math.PI/2?([o,l,u,c]=p(this,at).subarray(2,6),p(this,_s).push(NaN,NaN,NaN,NaN,((o+u)/2-n)/s,((l+c)/2-r)/a),[o,l,m,w]=p(this,at).subarray(14,18),p(this,qr).push(NaN,NaN,NaN,NaN,((m+o)/2-n)/s,((w+l)/2-r)/a),!0):([m,w,o,l,u,c]=p(this,at).subarray(0,6),p(this,_s).push(((m+5*o)/6-n)/s,((w+5*l)/6-r)/a,((5*o+u)/6-n)/s,((5*l+c)/6-r)/a,((o+u)/2-n)/s,((l+c)/2-r)/a),[u,c,o,l,m,w]=p(this,at).subarray(12,18),p(this,qr).push(((m+5*o)/6-n)/s,((w+5*l)/6-r)/a,((5*o+u)/6-n)/s,((5*l+c)/6-r)/a,((o+u)/2-n)/s,((l+c)/2-r)/a),!0))}toSVGPath(){if(this.isEmpty())return"";const e=p(this,_s),t=p(this,qr);if(isNaN(p(this,at)[6])&&!this.isEmpty())return M(this,xn,UT).call(this);const n=[];n.push(`M${e[4]} ${e[5]}`);for(let r=6;r<e.length;r+=6)isNaN(e[r])?n.push(`L${e[r+4]} ${e[r+5]}`):n.push(`C${e[r]} ${e[r+1]} ${e[r+2]} ${e[r+3]} ${e[r+4]} ${e[r+5]}`);M(this,xn,HT).call(this,n);for(let r=t.length-6;r>=6;r-=6)isNaN(t[r])?n.push(`L${t[r+4]} ${t[r+5]}`):n.push(`C${t[r]} ${t[r+1]} ${t[r+2]} ${t[r+3]} ${t[r+4]} ${t[r+5]}`);return M(this,xn,qT).call(this,n),n.join(" ")}newFreeDrawOutline(e,t,n,r,s,a){return new GT(e,t,n,r,s,a)}getOutlines(){var h;const e=p(this,_s),t=p(this,qr),n=p(this,at),[r,s,a,o]=p(this,Wi),l=new Float32Array((((h=p(this,lo))==null?void 0:h.length)??0)+2);for(let f=0,d=l.length-2;f<d;f+=2)l[f]=(p(this,lo)[f]-r)/a,l[f+1]=(p(this,lo)[f+1]-s)/o;if(l[l.length-2]=(p(this,Vl)-r)/a,l[l.length-1]=(p(this,Gl)-s)/o,isNaN(n[6])&&!this.isEmpty())return M(this,xn,WT).call(this,l);const u=new Float32Array(p(this,_s).length+24+p(this,qr).length);let c=e.length;for(let f=0;f<c;f+=2){if(isNaN(e[f])){u[f]=u[f+1]=NaN;continue}u[f]=e[f],u[f+1]=e[f+1]}c=M(this,xn,VT).call(this,u,c);for(let f=t.length-6;f>=6;f-=6)for(let d=0;d<6;d+=2){if(isNaN(t[f+d])){u[c]=u[c+1]=NaN,c+=2;continue}u[c]=t[f+d],u[c+1]=t[f+d+1],c+=2}return M(this,xn,$T).call(this,u,c),this.newFreeDrawOutline(u,l,p(this,Wi),p(this,eh),p(this,Qc),p(this,Jc))}};Wi=new WeakMap,qr=new WeakMap,Qc=new WeakMap,Jc=new WeakMap,_s=new WeakMap,at=new WeakMap,Vl=new WeakMap,Gl=new WeakMap,Ap=new WeakMap,xp=new WeakMap,eh=new WeakMap,th=new WeakMap,lo=new WeakMap,Sp=new WeakMap,Mv=new WeakMap,Fv=new WeakMap,xn=new WeakSet,xf=function(){const e=p(this,at).subarray(4,6),t=p(this,at).subarray(16,18),[n,r,s,a]=p(this,Wi);return[(p(this,Vl)+(e[0]-t[0])/2-n)/s,(p(this,Gl)+(e[1]-t[1])/2-r)/a,(p(this,Vl)+(t[0]-e[0])/2-n)/s,(p(this,Gl)+(t[1]-e[1])/2-r)/a]},UT=function(){const[e,t,n,r]=p(this,Wi),[s,a,o,l]=M(this,xn,xf).call(this);return`M${(p(this,at)[2]-e)/n} ${(p(this,at)[3]-t)/r} L${(p(this,at)[4]-e)/n} ${(p(this,at)[5]-t)/r} L${s} ${a} L${o} ${l} L${(p(this,at)[16]-e)/n} ${(p(this,at)[17]-t)/r} L${(p(this,at)[14]-e)/n} ${(p(this,at)[15]-t)/r} Z`},qT=function(e){const t=p(this,qr);e.push(`L${t[4]} ${t[5]} Z`)},HT=function(e){const[t,n,r,s]=p(this,Wi),a=p(this,at).subarray(4,6),o=p(this,at).subarray(16,18),[l,u,c,h]=M(this,xn,xf).call(this);e.push(`L${(a[0]-t)/r} ${(a[1]-n)/s} L${l} ${u} L${c} ${h} L${(o[0]-t)/r} ${(o[1]-n)/s}`)},WT=function(e){const t=p(this,at),[n,r,s,a]=p(this,Wi),[o,l,u,c]=M(this,xn,xf).call(this),h=new Float32Array(36);return h.set([NaN,NaN,NaN,NaN,(t[2]-n)/s,(t[3]-r)/a,NaN,NaN,NaN,NaN,(t[4]-n)/s,(t[5]-r)/a,NaN,NaN,NaN,NaN,o,l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,(t[16]-n)/s,(t[17]-r)/a,NaN,NaN,NaN,NaN,(t[14]-n)/s,(t[15]-r)/a],0),this.newFreeDrawOutline(h,e,p(this,Wi),p(this,eh),p(this,Qc),p(this,Jc))},$T=function(e,t){const n=p(this,qr);return e.set([NaN,NaN,NaN,NaN,n[4],n[5]],t),t+=6},VT=function(e,t){const n=p(this,at).subarray(4,6),r=p(this,at).subarray(16,18),[s,a,o,l]=p(this,Wi),[u,c,h,f]=M(this,xn,xf).call(this);return e.set([NaN,NaN,NaN,NaN,(n[0]-s)/o,(n[1]-a)/l,NaN,NaN,NaN,NaN,u,c,NaN,NaN,NaN,NaN,h,f,NaN,NaN,NaN,NaN,(r[0]-s)/o,(r[1]-a)/l],t),t+=24},L(qs,Sp,8),L(qs,Mv,2),L(qs,Fv,p(qs,Sp)+p(qs,Mv));let tv=qs;var nh,Xl,la,Cp,$i,Tp,sn,Bv,XT;class GT extends Be{constructor(t,n,r,s,a,o){super();L(this,Bv);L(this,nh);L(this,Xl,new Float32Array(4));L(this,la);L(this,Cp);L(this,$i);L(this,Tp);L(this,sn);N(this,sn,t),N(this,$i,n),N(this,nh,r),N(this,Tp,s),N(this,la,a),N(this,Cp,o),this.lastPoint=[NaN,NaN],M(this,Bv,XT).call(this,o);const[l,u,c,h]=p(this,Xl);for(let f=0,d=t.length;f<d;f+=2)t[f]=(t[f]-l)/c,t[f+1]=(t[f+1]-u)/h;for(let f=0,d=n.length;f<d;f+=2)n[f]=(n[f]-l)/c,n[f+1]=(n[f+1]-u)/h}toSVGPath(){const t=[`M${p(this,sn)[4]} ${p(this,sn)[5]}`];for(let n=6,r=p(this,sn).length;n<r;n+=6){if(isNaN(p(this,sn)[n])){t.push(`L${p(this,sn)[n+4]} ${p(this,sn)[n+5]}`);continue}t.push(`C${p(this,sn)[n]} ${p(this,sn)[n+1]} ${p(this,sn)[n+2]} ${p(this,sn)[n+3]} ${p(this,sn)[n+4]} ${p(this,sn)[n+5]}`)}return t.push("Z"),t.join(" ")}serialize([t,n,r,s],a){const o=r-t,l=s-n;let u,c;switch(a){case 0:u=Be._rescale(p(this,sn),t,s,o,-l),c=Be._rescale(p(this,$i),t,s,o,-l);break;case 90:u=Be._rescaleAndSwap(p(this,sn),t,n,o,l),c=Be._rescaleAndSwap(p(this,$i),t,n,o,l);break;case 180:u=Be._rescale(p(this,sn),r,n,-o,l),c=Be._rescale(p(this,$i),r,n,-o,l);break;case 270:u=Be._rescaleAndSwap(p(this,sn),r,s,-o,-l),c=Be._rescaleAndSwap(p(this,$i),r,s,-o,-l);break}return{outline:Array.from(u),points:[Array.from(c)]}}get box(){return p(this,Xl)}newOutliner(t,n,r,s,a,o=0){return new tv(t,n,r,s,a,o)}getNewOutline(t,n){const[r,s,a,o]=p(this,Xl),[l,u,c,h]=p(this,nh),f=a*c,d=o*h,y=r*c+l,b=s*h+u,v=this.newOutliner({x:p(this,$i)[0]*f+y,y:p(this,$i)[1]*d+b},p(this,nh),p(this,Tp),t,p(this,Cp),n??p(this,la));for(let g=2;g<p(this,$i).length;g+=2)v.add({x:p(this,$i)[g]*f+y,y:p(this,$i)[g+1]*d+b});return v.getOutlines()}}nh=new WeakMap,Xl=new WeakMap,la=new WeakMap,Cp=new WeakMap,$i=new WeakMap,Tp=new WeakMap,sn=new WeakMap,Bv=new WeakSet,XT=function(t){const n=p(this,sn);let r=n[4],s=n[5],a=r,o=s,l=r,u=s,c=r,h=s;const f=t?Math.max:Math.min;for(let y=6,b=n.length;y<b;y+=6){if(isNaN(n[y]))a=Math.min(a,n[y+4]),o=Math.min(o,n[y+5]),l=Math.max(l,n[y+4]),u=Math.max(u,n[y+5]),h<n[y+5]?(c=n[y+4],h=n[y+5]):h===n[y+5]&&(c=f(c,n[y+4]));else{const v=$e.bezierBoundingBox(r,s,...n.slice(y,y+6));a=Math.min(a,v[0]),o=Math.min(o,v[1]),l=Math.max(l,v[2]),u=Math.max(u,v[3]),h<v[3]?(c=v[2],h=v[3]):h===v[3]&&(c=f(c,v[2]))}r=n[y+4],s=n[y+5]}const d=p(this,Xl);d[0]=a-p(this,la),d[1]=o-p(this,la),d[2]=l-a+2*p(this,la),d[3]=u-o+2*p(this,la),this.lastPoint=[c,h]};var kp,Dp,uo,Hr,vi,KT,fm,YT,ZT,E1;class _1{constructor(e,t=0,n=0,r=!0){L(this,vi);L(this,kp);L(this,Dp);L(this,uo,[]);L(this,Hr,[]);let s=1/0,a=-1/0,o=1/0,l=-1/0;const u=10**-4;for(const{x:v,y:g,width:m,height:w}of e){const _=Math.floor((v-t)/u)*u,E=Math.ceil((v+m+t)/u)*u,x=Math.floor((g-t)/u)*u,A=Math.ceil((g+w+t)/u)*u,S=[_,x,A,!0],O=[E,x,A,!1];p(this,uo).push(S,O),s=Math.min(s,_),a=Math.max(a,E),o=Math.min(o,x),l=Math.max(l,A)}const c=a-s+2*n,h=l-o+2*n,f=s-n,d=o-n,y=p(this,uo).at(r?-1:-2),b=[y[0],y[2]];for(const v of p(this,uo)){const[g,m,w]=v;v[0]=(g-f)/c,v[1]=(m-d)/h,v[2]=(w-d)/h}N(this,kp,new Float32Array([f,d,c,h])),N(this,Dp,b)}getOutlines(){p(this,uo).sort((t,n)=>t[0]-n[0]||t[1]-n[1]||t[2]-n[2]);const e=[];for(const t of p(this,uo))t[3]?(e.push(...M(this,vi,E1).call(this,t)),M(this,vi,YT).call(this,t)):(M(this,vi,ZT).call(this,t),e.push(...M(this,vi,E1).call(this,t)));return M(this,vi,KT).call(this,e)}}kp=new WeakMap,Dp=new WeakMap,uo=new WeakMap,Hr=new WeakMap,vi=new WeakSet,KT=function(e){const t=[],n=new Set;for(const a of e){const[o,l,u]=a;t.push([o,l,a],[o,u,a])}t.sort((a,o)=>a[1]-o[1]||a[0]-o[0]);for(let a=0,o=t.length;a<o;a+=2){const l=t[a][2],u=t[a+1][2];l.push(u),u.push(l),n.add(l),n.add(u)}const r=[];let s;for(;n.size>0;){const a=n.values().next().value;let[o,l,u,c,h]=a;n.delete(a);let f=o,d=l;for(s=[o,u],r.push(s);;){let y;if(n.has(c))y=c;else if(n.has(h))y=h;else break;n.delete(y),[o,l,u,c,h]=y,f!==o&&(s.push(f,d,o,d===l?l:u),f=o),d=d===l?u:l}s.push(f,d)}return new YI(r,p(this,kp),p(this,Dp))},fm=function(e){const t=p(this,Hr);let n=0,r=t.length-1;for(;n<=r;){const s=n+r>>1,a=t[s][0];if(a===e)return s;a<e?n=s+1:r=s-1}return r+1},YT=function([,e,t]){const n=M(this,vi,fm).call(this,e);p(this,Hr).splice(n,0,[e,t])},ZT=function([,e,t]){const n=M(this,vi,fm).call(this,e);for(let r=n;r<p(this,Hr).length;r++){const[s,a]=p(this,Hr)[r];if(s!==e)break;if(s===e&&a===t){p(this,Hr).splice(r,1);return}}for(let r=n-1;r>=0;r--){const[s,a]=p(this,Hr)[r];if(s!==e)break;if(s===e&&a===t){p(this,Hr).splice(r,1);return}}},E1=function(e){const[t,n,r]=e,s=[[t,n,r]],a=M(this,vi,fm).call(this,r);for(let o=0;o<a;o++){const[l,u]=p(this,Hr)[o];for(let c=0,h=s.length;c<h;c++){const[,f,d]=s[c];if(!(u<=f||d<=l)){if(f>=l){if(d>u)s[c][1]=u;else{if(h===1)return[];s.splice(c,1),c--,h--}continue}s[c][2]=l,d>u&&s.push([t,u,d])}}}return s};var Op,ih;class YI extends Be{constructor(t,n,r){super();L(this,Op);L(this,ih);N(this,ih,t),N(this,Op,n),this.lastPoint=r}toSVGPath(){const t=[];for(const n of p(this,ih)){let[r,s]=n;t.push(`M${r} ${s}`);for(let a=2;a<n.length;a+=2){const o=n[a],l=n[a+1];o===r?(t.push(`V${l}`),s=l):l===s&&(t.push(`H${o}`),r=o)}t.push("Z")}return t.join(" ")}serialize([t,n,r,s],a){const o=[],l=r-t,u=s-n;for(const c of p(this,ih)){const h=new Array(c.length);for(let f=0;f<c.length;f+=2)h[f]=t+c[f]*l,h[f+1]=s-c[f+1]*u;o.push(h)}return o}get box(){return p(this,Op)}get classNamesForOutlining(){return["highlightOutline"]}}Op=new WeakMap,ih=new WeakMap;class A1 extends tv{newFreeDrawOutline(e,t,n,r,s,a){return new ZI(e,t,n,r,s,a)}}class ZI extends GT{newOutliner(e,t,n,r,s,a=0){return new A1(e,t,n,r,s,a)}}var Wr,Kl,rh,_n,Np,sh,Rp,Pp,co,$r,ah,Lp,kt,x1,S1,C1,Zo,QT,Fa;const xi=class xi{constructor({editor:e=null,uiManager:t=null}){L(this,kt);L(this,Wr,null);L(this,Kl,null);L(this,rh);L(this,_n,null);L(this,Np,!1);L(this,sh,!1);L(this,Rp,null);L(this,Pp);L(this,co,null);L(this,$r,null);L(this,ah);var n;e?(N(this,sh,!1),N(this,ah,ft.HIGHLIGHT_COLOR),N(this,Rp,e)):(N(this,sh,!0),N(this,ah,ft.HIGHLIGHT_DEFAULT_COLOR)),N(this,$r,(e==null?void 0:e._uiManager)||t),N(this,Pp,p(this,$r)._eventBus),N(this,rh,(e==null?void 0:e.color)||((n=p(this,$r))==null?void 0:n.highlightColors.values().next().value)||"#FFFF98"),p(xi,Lp)||N(xi,Lp,Object.freeze({blue:"pdfjs-editor-colorpicker-blue",green:"pdfjs-editor-colorpicker-green",pink:"pdfjs-editor-colorpicker-pink",red:"pdfjs-editor-colorpicker-red",yellow:"pdfjs-editor-colorpicker-yellow"}))}static get _keyboardManager(){return ot(this,"_keyboardManager",new Kp([[["Escape","mac+Escape"],xi.prototype._hideDropdownFromKeyboard],[[" ","mac+ "],xi.prototype._colorSelectFromKeyboard],[["ArrowDown","ArrowRight","mac+ArrowDown","mac+ArrowRight"],xi.prototype._moveToNext],[["ArrowUp","ArrowLeft","mac+ArrowUp","mac+ArrowLeft"],xi.prototype._moveToPrevious],[["Home","mac+Home"],xi.prototype._moveToBeginning],[["End","mac+End"],xi.prototype._moveToEnd]]))}renderButton(){const e=N(this,Wr,document.createElement("button"));e.className="colorPicker",e.tabIndex="0",e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-button"),e.setAttribute("aria-haspopup",!0);const t=p(this,$r)._signal;e.addEventListener("click",M(this,kt,Zo).bind(this),{signal:t}),e.addEventListener("keydown",M(this,kt,C1).bind(this),{signal:t});const n=N(this,Kl,document.createElement("span"));return n.className="swatch",n.setAttribute("aria-hidden",!0),n.style.backgroundColor=p(this,rh),e.append(n),e}renderMainDropdown(){const e=N(this,_n,M(this,kt,x1).call(this));return e.setAttribute("aria-orientation","horizontal"),e.setAttribute("aria-labelledby","highlightColorPickerLabel"),e}_colorSelectFromKeyboard(e){if(e.target===p(this,Wr)){M(this,kt,Zo).call(this,e);return}const t=e.target.getAttribute("data-color");t&&M(this,kt,S1).call(this,t,e)}_moveToNext(e){var t,n;if(!p(this,kt,Fa)){M(this,kt,Zo).call(this,e);return}if(e.target===p(this,Wr)){(t=p(this,_n).firstChild)==null||t.focus();return}(n=e.target.nextSibling)==null||n.focus()}_moveToPrevious(e){var t,n;if(e.target===((t=p(this,_n))==null?void 0:t.firstChild)||e.target===p(this,Wr)){p(this,kt,Fa)&&this._hideDropdownFromKeyboard();return}p(this,kt,Fa)||M(this,kt,Zo).call(this,e),(n=e.target.previousSibling)==null||n.focus()}_moveToBeginning(e){var t;if(!p(this,kt,Fa)){M(this,kt,Zo).call(this,e);return}(t=p(this,_n).firstChild)==null||t.focus()}_moveToEnd(e){var t;if(!p(this,kt,Fa)){M(this,kt,Zo).call(this,e);return}(t=p(this,_n).lastChild)==null||t.focus()}hideDropdown(){var e,t;(e=p(this,_n))==null||e.classList.add("hidden"),(t=p(this,co))==null||t.abort(),N(this,co,null)}_hideDropdownFromKeyboard(){var e;if(!p(this,sh)){if(!p(this,kt,Fa)){(e=p(this,Rp))==null||e.unselect();return}this.hideDropdown(),p(this,Wr).focus({preventScroll:!0,focusVisible:p(this,Np)})}}updateColor(e){if(p(this,Kl)&&(p(this,Kl).style.backgroundColor=e),!p(this,_n))return;const t=p(this,$r).highlightColors.values();for(const n of p(this,_n).children)n.setAttribute("aria-selected",t.next().value===e)}destroy(){var e,t;(e=p(this,Wr))==null||e.remove(),N(this,Wr,null),N(this,Kl,null),(t=p(this,_n))==null||t.remove(),N(this,_n,null)}};Wr=new WeakMap,Kl=new WeakMap,rh=new WeakMap,_n=new WeakMap,Np=new WeakMap,sh=new WeakMap,Rp=new WeakMap,Pp=new WeakMap,co=new WeakMap,$r=new WeakMap,ah=new WeakMap,Lp=new WeakMap,kt=new WeakSet,x1=function(){const e=document.createElement("div"),t=p(this,$r)._signal;e.addEventListener("contextmenu",ns,{signal:t}),e.className="dropdown",e.role="listbox",e.setAttribute("aria-multiselectable",!1),e.setAttribute("aria-orientation","vertical"),e.setAttribute("data-l10n-id","pdfjs-editor-colorpicker-dropdown");for(const[n,r]of p(this,$r).highlightColors){const s=document.createElement("button");s.tabIndex="0",s.role="option",s.setAttribute("data-color",r),s.title=n,s.setAttribute("data-l10n-id",p(xi,Lp)[n]);const a=document.createElement("span");s.append(a),a.className="swatch",a.style.backgroundColor=r,s.setAttribute("aria-selected",r===p(this,rh)),s.addEventListener("click",M(this,kt,S1).bind(this,r),{signal:t}),e.append(s)}return e.addEventListener("keydown",M(this,kt,C1).bind(this),{signal:t}),e},S1=function(e,t){t.stopPropagation(),p(this,Pp).dispatch("switchannotationeditorparams",{source:this,type:p(this,ah),value:e})},C1=function(e){xi._keyboardManager.exec(this,e)},Zo=function(e){if(p(this,kt,Fa)){this.hideDropdown();return}if(N(this,Np,e.detail===0),p(this,co)||(N(this,co,new AbortController),window.addEventListener("pointerdown",M(this,kt,QT).bind(this),{signal:p(this,$r).combinedSignal(p(this,co))})),p(this,_n)){p(this,_n).classList.remove("hidden");return}const t=N(this,_n,M(this,kt,x1).call(this));p(this,Wr).append(t)},QT=function(e){var t;(t=p(this,_n))!=null&&t.contains(e.target)||this.hideDropdown()},Fa=function(){return p(this,_n)&&!p(this,_n).classList.contains("hidden")},L(xi,Lp,null);let nv=xi;var oh,Ip,ua,Yl,lh,Ti,Mp,Fp,Zl,dr,Vi,Bn,uh,ca,ei,ch,pr,Bp,tt,T1,dm,JT,ek,tk,k1,Qo,wr,qu,nk,pm,Sf,ik,rk,sk,ak,ok;const wt=class wt extends Xt{constructor(t){super({...t,name:"highlightEditor"});L(this,tt);L(this,oh,null);L(this,Ip,0);L(this,ua);L(this,Yl,null);L(this,lh,null);L(this,Ti,null);L(this,Mp,null);L(this,Fp,0);L(this,Zl,null);L(this,dr,null);L(this,Vi,null);L(this,Bn,!1);L(this,uh,null);L(this,ca);L(this,ei,null);L(this,ch,"");L(this,pr);L(this,Bp,"");this.color=t.color||wt._defaultColor,N(this,pr,t.thickness||wt._defaultThickness),N(this,ca,t.opacity||wt._defaultOpacity),N(this,ua,t.boxes||null),N(this,Bp,t.methodOfCreation||""),N(this,ch,t.text||""),this._isDraggable=!1,t.highlightId>-1?(N(this,Bn,!0),M(this,tt,dm).call(this,t),M(this,tt,Qo).call(this)):p(this,ua)&&(N(this,oh,t.anchorNode),N(this,Ip,t.anchorOffset),N(this,Mp,t.focusNode),N(this,Fp,t.focusOffset),M(this,tt,T1).call(this),M(this,tt,Qo).call(this),this.rotate(this.rotation))}static get _keyboardManager(){const t=wt.prototype;return ot(this,"_keyboardManager",new Kp([[["ArrowLeft","mac+ArrowLeft"],t._moveCaret,{args:[0]}],[["ArrowRight","mac+ArrowRight"],t._moveCaret,{args:[1]}],[["ArrowUp","mac+ArrowUp"],t._moveCaret,{args:[2]}],[["ArrowDown","mac+ArrowDown"],t._moveCaret,{args:[3]}]]))}get telemetryInitialData(){return{action:"added",type:p(this,Bn)?"free_highlight":"highlight",color:this._uiManager.highlightColorNames.get(this.color),thickness:p(this,pr),methodOfCreation:p(this,Bp)}}get telemetryFinalData(){return{type:"highlight",color:this._uiManager.highlightColorNames.get(this.color)}}static computeTelemetryFinalData(t){return{numberOfColors:t.get("color").size}}static initialize(t,n){var r;Xt.initialize(t,n),wt._defaultColor||(wt._defaultColor=((r=n.highlightColors)==null?void 0:r.values().next().value)||"#fff066")}static updateDefaultParams(t,n){switch(t){case ft.HIGHLIGHT_DEFAULT_COLOR:wt._defaultColor=n;break;case ft.HIGHLIGHT_THICKNESS:wt._defaultThickness=n;break}}translateInPage(t,n){}get toolbarPosition(){return p(this,uh)}updateParams(t,n){switch(t){case ft.HIGHLIGHT_COLOR:M(this,tt,JT).call(this,n);break;case ft.HIGHLIGHT_THICKNESS:M(this,tt,ek).call(this,n);break}}static get defaultPropertiesToUpdate(){return[[ft.HIGHLIGHT_DEFAULT_COLOR,wt._defaultColor],[ft.HIGHLIGHT_THICKNESS,wt._defaultThickness]]}get propertiesToUpdate(){return[[ft.HIGHLIGHT_COLOR,this.color||wt._defaultColor],[ft.HIGHLIGHT_THICKNESS,p(this,pr)||wt._defaultThickness],[ft.HIGHLIGHT_FREE,p(this,Bn)]]}async addEditToolbar(){const t=await super.addEditToolbar();return t?(this._uiManager.highlightColors&&(N(this,lh,new nv({editor:this})),t.addColorPicker(p(this,lh))),t):null}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}fixAndSetPosition(){return super.fixAndSetPosition(M(this,tt,Sf).call(this))}getBaseTranslation(){return[0,0]}getRect(t,n){return super.getRect(t,n,M(this,tt,Sf).call(this))}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),t&&this.div.focus()}remove(){M(this,tt,k1).call(this),this._reportTelemetry({action:"deleted"}),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,tt,Qo).call(this),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?M(this,tt,k1).call(this):t&&(M(this,tt,Qo).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),this.show(this._isVisible),n&&this.select()}rotate(t){var s,a,o;const{drawLayer:n}=this.parent;let r;p(this,Bn)?(t=(t-this.rotation+360)%360,r=M(s=wt,wr,qu).call(s,p(this,dr).box,t)):r=M(a=wt,wr,qu).call(a,[this.x,this.y,this.width,this.height],t),n.updateProperties(p(this,Vi),{bbox:r,root:{"data-main-rotation":t}}),n.updateProperties(p(this,ei),{bbox:M(o=wt,wr,qu).call(o,p(this,Ti).box,t),root:{"data-main-rotation":t}})}render(){if(this.div)return this.div;const t=super.render();p(this,ch)&&(t.setAttribute("aria-label",p(this,ch)),t.setAttribute("role","mark")),p(this,Bn)?t.classList.add("free"):this.div.addEventListener("keydown",M(this,tt,nk).bind(this),{signal:this._uiManager._signal});const n=N(this,Zl,document.createElement("div"));t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal",n.style.clipPath=p(this,Yl);const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),Qm(this,p(this,Zl),["pointerover","pointerleave"]),this.enableEditing(),t}pointerover(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(p(this,ei),{rootClass:{hovered:!0}})}pointerleave(){var t;this.isSelected||(t=this.parent)==null||t.drawLayer.updateProperties(p(this,ei),{rootClass:{hovered:!1}})}_moveCaret(t){switch(this.parent.unselect(this),t){case 0:case 2:M(this,tt,pm).call(this,!0);break;case 1:case 3:M(this,tt,pm).call(this,!1);break}}select(){var t;super.select(),p(this,ei)&&((t=this.parent)==null||t.drawLayer.updateProperties(p(this,ei),{rootClass:{hovered:!1,selected:!0}}))}unselect(){var t;super.unselect(),p(this,ei)&&((t=this.parent)==null||t.drawLayer.updateProperties(p(this,ei),{rootClass:{selected:!1}}),p(this,Bn)||M(this,tt,pm).call(this,!1))}get _mustFixPosition(){return!p(this,Bn)}show(t=this._isVisible){super.show(t),this.parent&&(this.parent.drawLayer.updateProperties(p(this,Vi),{rootClass:{hidden:!t}}),this.parent.drawLayer.updateProperties(p(this,ei),{rootClass:{hidden:!t}}))}static startHighlighting(t,n,{target:r,x:s,y:a}){const{x:o,y:l,width:u,height:c}=r.getBoundingClientRect(),h=new AbortController,f=t.combinedSignal(h),d=y=>{h.abort(),M(this,wr,ak).call(this,t,y)};window.addEventListener("blur",d,{signal:f}),window.addEventListener("pointerup",d,{signal:f}),window.addEventListener("pointerdown",Ji,{capture:!0,passive:!1,signal:f}),window.addEventListener("contextmenu",ns,{signal:f}),r.addEventListener("pointermove",M(this,wr,sk).bind(this,t),{signal:f}),this._freeHighlight=new A1({x:s,y:a},[o,l,u,c],t.scale,this._defaultThickness/2,n,.001),{id:this._freeHighlightId,clipPathId:this._freeHighlightClipId}=t.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:this._defaultColor,"fill-opacity":this._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:this._freeHighlight.toSVGPath()}},!0,!0)}static async deserialize(t,n,r){var b,v,g,m;let s=null;if(t instanceof PT){const{data:{quadPoints:w,rect:_,rotation:E,id:x,color:A,opacity:S,popupRef:O},parent:{page:{pageNumber:C}}}=t;s=t={annotationType:nt.HIGHLIGHT,color:Array.from(A),opacity:S,quadPoints:w,boxes:null,pageIndex:C-1,rect:_.slice(0),rotation:E,id:x,deleted:!1,popupRef:O}}else if(t instanceof d_){const{data:{inkLists:w,rect:_,rotation:E,id:x,color:A,borderStyle:{rawWidth:S},popupRef:O},parent:{page:{pageNumber:C}}}=t;s=t={annotationType:nt.HIGHLIGHT,color:Array.from(A),thickness:S,inkLists:w,boxes:null,pageIndex:C-1,rect:_.slice(0),rotation:E,id:x,deleted:!1,popupRef:O}}const{color:a,quadPoints:o,inkLists:l,opacity:u}=t,c=await super.deserialize(t,n,r);c.color=$e.makeHexColor(...a),N(c,ca,u||1),l&&N(c,pr,t.thickness),c.annotationElementId=t.id||null,c._initialData=s;const[h,f]=c.pageDimensions,[d,y]=c.pageTranslation;if(o){const w=N(c,ua,[]);for(let _=0;_<o.length;_+=8)w.push({x:(o[_]-d)/h,y:1-(o[_+1]-y)/f,width:(o[_+2]-o[_])/h,height:(o[_+1]-o[_+5])/f});M(b=c,tt,T1).call(b),M(v=c,tt,Qo).call(v),c.rotate(c.rotation)}else if(l){N(c,Bn,!0);const w=l[0],_={x:w[0]-d,y:f-(w[1]-y)},E=new A1(_,[0,0,h,f],1,p(c,pr)/2,!0,.001);for(let S=0,O=w.length;S<O;S+=2)_.x=w[S]-d,_.y=f-(w[S+1]-y),E.add(_);const{id:x,clipPathId:A}=n.drawLayer.draw({bbox:[0,0,1,1],root:{viewBox:"0 0 1 1",fill:c.color,"fill-opacity":c._defaultOpacity},rootClass:{highlight:!0,free:!0},path:{d:E.toSVGPath()}},!0,!0);M(g=c,tt,dm).call(g,{highlightOutlines:E.getOutlines(),highlightId:x,clipPathId:A}),M(m=c,tt,Qo).call(m)}return c}serialize(t=!1){if(this.isEmpty()||t)return null;if(this.deleted)return this.serializeDeleted();const n=this.getRect(0,0),r=Xt._colorManager.convert(this.color),s={annotationType:nt.HIGHLIGHT,color:r,opacity:p(this,ca),thickness:p(this,pr),quadPoints:M(this,tt,ik).call(this),outlines:M(this,tt,rk).call(this,n),pageIndex:this.pageIndex,rect:n,rotation:M(this,tt,Sf).call(this),structTreeParentId:this._structTreeParentId};return this.annotationElementId&&!M(this,tt,ok).call(this,s)?null:(s.id=this.annotationElementId,s)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};oh=new WeakMap,Ip=new WeakMap,ua=new WeakMap,Yl=new WeakMap,lh=new WeakMap,Ti=new WeakMap,Mp=new WeakMap,Fp=new WeakMap,Zl=new WeakMap,dr=new WeakMap,Vi=new WeakMap,Bn=new WeakMap,uh=new WeakMap,ca=new WeakMap,ei=new WeakMap,ch=new WeakMap,pr=new WeakMap,Bp=new WeakMap,tt=new WeakSet,T1=function(){const t=new _1(p(this,ua),.001);N(this,dr,t.getOutlines()),[this.x,this.y,this.width,this.height]=p(this,dr).box;const n=new _1(p(this,ua),.0025,.001,this._uiManager.direction==="ltr");N(this,Ti,n.getOutlines());const{lastPoint:r}=p(this,Ti);N(this,uh,[(r[0]-this.x)/this.width,(r[1]-this.y)/this.height])},dm=function({highlightOutlines:t,highlightId:n,clipPathId:r}){var h,f;if(N(this,dr,t),N(this,Ti,t.getNewOutline(p(this,pr)/2+1.5,.0025)),n>=0)N(this,Vi,n),N(this,Yl,r),this.parent.drawLayer.finalizeDraw(n,{bbox:t.box,path:{d:t.toSVGPath()}}),N(this,ei,this.parent.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:!0},bbox:p(this,Ti).box,path:{d:p(this,Ti).toSVGPath()}},!0));else if(this.parent){const d=this.parent.viewport.rotation;this.parent.drawLayer.updateProperties(p(this,Vi),{bbox:M(h=wt,wr,qu).call(h,p(this,dr).box,(d-this.rotation+360)%360),path:{d:t.toSVGPath()}}),this.parent.drawLayer.updateProperties(p(this,ei),{bbox:M(f=wt,wr,qu).call(f,p(this,Ti).box,d),path:{d:p(this,Ti).toSVGPath()}})}const[a,o,l,u]=t.box;switch(this.rotation){case 0:this.x=a,this.y=o,this.width=l,this.height=u;break;case 90:{const[d,y]=this.parentDimensions;this.x=o,this.y=1-a,this.width=l*y/d,this.height=u*d/y;break}case 180:this.x=1-a,this.y=1-o,this.width=l,this.height=u;break;case 270:{const[d,y]=this.parentDimensions;this.x=1-o,this.y=a,this.width=l*y/d,this.height=u*d/y;break}}const{lastPoint:c}=p(this,Ti);N(this,uh,[(c[0]-a)/l,(c[1]-o)/u])},JT=function(t){const n=(a,o)=>{var l,u;this.color=a,N(this,ca,o),(l=this.parent)==null||l.drawLayer.updateProperties(p(this,Vi),{root:{fill:a,"fill-opacity":o}}),(u=p(this,lh))==null||u.updateColor(a)},r=this.color,s=p(this,ca);this.addCommands({cmd:n.bind(this,t,wt._defaultOpacity),undo:n.bind(this,r,s),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.HIGHLIGHT_COLOR,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"color_changed",color:this._uiManager.highlightColorNames.get(t)},!0)},ek=function(t){const n=p(this,pr),r=s=>{N(this,pr,s),M(this,tt,tk).call(this,s)};this.addCommands({cmd:r.bind(this,t),undo:r.bind(this,n),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:ft.INK_THICKNESS,overwriteIfSameType:!0,keepUndo:!0}),this._reportTelemetry({action:"thickness_changed",thickness:t},!0)},tk=function(t){if(!p(this,Bn))return;M(this,tt,dm).call(this,{highlightOutlines:p(this,dr).getNewOutline(t/2)}),this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)},k1=function(){p(this,Vi)===null||!this.parent||(this.parent.drawLayer.remove(p(this,Vi)),N(this,Vi,null),this.parent.drawLayer.remove(p(this,ei)),N(this,ei,null))},Qo=function(t=this.parent){p(this,Vi)===null&&({id:oi(this,Vi)._,clipPathId:oi(this,Yl)._}=t.drawLayer.draw({bbox:p(this,dr).box,root:{viewBox:"0 0 1 1",fill:this.color,"fill-opacity":p(this,ca)},rootClass:{highlight:!0,free:p(this,Bn)},path:{d:p(this,dr).toSVGPath()}},!1,!0),N(this,ei,t.drawLayer.drawOutline({rootClass:{highlightOutline:!0,free:p(this,Bn)},bbox:p(this,Ti).box,path:{d:p(this,Ti).toSVGPath()}},p(this,Bn))),p(this,Zl)&&(p(this,Zl).style.clipPath=p(this,Yl)))},wr=new WeakSet,qu=function([t,n,r,s],a){switch(a){case 90:return[1-n-s,t,s,r];case 180:return[1-t-r,1-n-s,r,s];case 270:return[n,1-t-r,s,r]}return[t,n,r,s]},nk=function(t){wt._keyboardManager.exec(this,t)},pm=function(t){if(!p(this,oh))return;const n=window.getSelection();t?n.setPosition(p(this,oh),p(this,Ip)):n.setPosition(p(this,Mp),p(this,Fp))},Sf=function(){return p(this,Bn)?this.rotation:0},ik=function(){if(p(this,Bn))return null;const[t,n]=this.pageDimensions,[r,s]=this.pageTranslation,a=p(this,ua),o=new Float32Array(a.length*8);let l=0;for(const{x:u,y:c,width:h,height:f}of a){const d=u*t+r,y=(1-c)*n+s;o[l]=o[l+4]=d,o[l+1]=o[l+3]=y,o[l+2]=o[l+6]=d+h*t,o[l+5]=o[l+7]=y-f*n,l+=8}return o},rk=function(t){return p(this,dr).serialize(t,M(this,tt,Sf).call(this))},sk=function(t,n){this._freeHighlight.add(n)&&t.drawLayer.updateProperties(this._freeHighlightId,{path:{d:this._freeHighlight.toSVGPath()}})},ak=function(t,n){this._freeHighlight.isEmpty()?t.drawLayer.remove(this._freeHighlightId):t.createAndAddNewEditor(n,!1,{highlightId:this._freeHighlightId,highlightOutlines:this._freeHighlight.getOutlines(),clipPathId:this._freeHighlightClipId,methodOfCreation:"main_toolbar"}),this._freeHighlightId=-1,this._freeHighlight=null,this._freeHighlightClipId=""},ok=function(t){const{color:n}=this._initialData;return t.color.some((r,s)=>r!==n[s])},L(wt,wr),Ze(wt,"_defaultColor",null),Ze(wt,"_defaultOpacity",1),Ze(wt,"_defaultThickness",12),Ze(wt,"_type","highlight"),Ze(wt,"_editorType",nt.HIGHLIGHT),Ze(wt,"_freeHighlightId",-1),Ze(wt,"_freeHighlight",null),Ze(wt,"_freeHighlightClipId","");let iv=wt;var Ql;class QI{constructor(){L(this,Ql,Object.create(null))}updateProperty(e,t){this[e]=t,this.updateSVGProperty(e,t)}updateProperties(e){if(e)for(const[t,n]of Object.entries(e))this.updateProperty(t,n)}updateSVGProperty(e,t){p(this,Ql)[e]=t}toSVGProperties(){const e=p(this,Ql);return N(this,Ql,Object.create(null)),{root:e}}reset(){N(this,Ql,Object.create(null))}updateAll(e=this){this.updateProperties(e)}clone(){Nt("Not implemented")}}Ql=new WeakMap;var Gi,hh,On,Jl,eu,ho,fo,po,tu,yt,O1,N1,R1,Cf,lk,gm,Tf,Hu;const Ue=class Ue extends Xt{constructor(t){super(t);L(this,yt);L(this,Gi,null);L(this,hh);Ze(this,"_drawId",null);N(this,hh,t.mustBeCommitted||!1),t.drawOutlines&&(M(this,yt,O1).call(this,t),M(this,yt,Cf).call(this))}static _mergeSVGProperties(t,n){const r=new Set(Object.keys(t));for(const[s,a]of Object.entries(n))r.has(s)?Object.assign(t[s],a):t[s]=a;return t}static getDefaultDrawingOptions(t){Nt("Not implemented")}static get typesMap(){Nt("Not implemented")}static get isDrawer(){return!0}static get supportMultipleDrawings(){return!1}static updateDefaultParams(t,n){const r=this.typesMap.get(t);r&&this._defaultDrawingOptions.updateProperty(r,n),this._currentParent&&(p(Ue,On).updateProperty(r,n),this._currentParent.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}updateParams(t,n){const r=this.constructor.typesMap.get(t);r&&this._updateProperty(t,r,n)}static get defaultPropertiesToUpdate(){const t=[],n=this._defaultDrawingOptions;for(const[r,s]of this.typesMap)t.push([r,n[s]]);return t}get propertiesToUpdate(){const t=[],{_drawingOptions:n}=this;for(const[r,s]of this.constructor.typesMap)t.push([r,n[s]]);return t}_updateProperty(t,n,r){const s=this._drawingOptions,a=s[n],o=l=>{var c;s.updateProperty(n,l);const u=p(this,Gi).updateProperty(n,l);u&&M(this,yt,Tf).call(this,u),(c=this.parent)==null||c.drawLayer.updateProperties(this._drawId,s.toSVGProperties())};this.addCommands({cmd:o.bind(this,r),undo:o.bind(this,a),post:this._uiManager.updateUI.bind(this._uiManager,this),mustExec:!0,type:t,overwriteIfSameType:!0,keepUndo:!0})}_onResizing(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties(p(this,Gi).getPathResizingSVGProperties(M(this,yt,gm).call(this)),{bbox:M(this,yt,Hu).call(this)}))}_onResized(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties(p(this,Gi).getPathResizedSVGProperties(M(this,yt,gm).call(this)),{bbox:M(this,yt,Hu).call(this)}))}_onTranslating(t,n){var r;(r=this.parent)==null||r.drawLayer.updateProperties(this._drawId,{bbox:M(this,yt,Hu).call(this,t,n)})}_onTranslated(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties(p(this,Gi).getPathTranslatedSVGProperties(M(this,yt,gm).call(this),this.parentDimensions),{bbox:M(this,yt,Hu).call(this)}))}_onStartDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!0}})}_onStopDragging(){var t;(t=this.parent)==null||t.drawLayer.updateProperties(this._drawId,{rootClass:{moving:!1}})}commit(){super.commit(),this.disableEditMode(),this.disableEditing()}disableEditing(){super.disableEditing(),this.div.classList.toggle("disabled",!0)}enableEditing(){super.enableEditing(),this.div.classList.toggle("disabled",!1)}getBaseTranslation(){return[0,0]}get isResizable(){return!0}onceAdded(t){this.annotationElementId||this.parent.addUndoableEditor(this),this._isDraggable=!0,p(this,hh)&&(N(this,hh,!1),this.commit(),this.parent.setSelected(this),t&&this.isOnScreen&&this.div.focus())}remove(){M(this,yt,R1).call(this),super.remove()}rebuild(){this.parent&&(super.rebuild(),this.div!==null&&(M(this,yt,Cf).call(this),M(this,yt,Tf).call(this,p(this,Gi).box),this.isAttachedToDOM||this.parent.add(this)))}setParent(t){var r;let n=!1;this.parent&&!t?(this._uiManager.removeShouldRescale(this),M(this,yt,R1).call(this)):t&&(this._uiManager.addShouldRescale(this),M(this,yt,Cf).call(this,t),n=!this.parent&&((r=this.div)==null?void 0:r.classList.contains("selectedEditor"))),super.setParent(t),n&&this.select()}rotate(){this.parent&&this.parent.drawLayer.updateProperties(this._drawId,Ue._mergeSVGProperties({bbox:M(this,yt,Hu).call(this)},p(this,Gi).updateRotation((this.parentRotation-this.rotation+360)%360)))}onScaleChanging(){this.parent&&M(this,yt,Tf).call(this,p(this,Gi).updateParentDimensions(this.parentDimensions,this.parent.scale))}static onScaleChangingWhenDrawing(){}render(){if(this.div)return this.div;const t=super.render();t.classList.add("draw");const n=document.createElement("div");t.append(n),n.setAttribute("aria-hidden","true"),n.className="internal";const[r,s]=this.parentDimensions;return this.setDims(this.width*r,this.height*s),this._uiManager.addShouldRescale(this),this.disableEditing(),t}static createDrawerInstance(t,n,r,s,a){Nt("Not implemented")}static startDrawing(t,n,r,s){var v;const{target:a,offsetX:o,offsetY:l,pointerId:u,pointerType:c}=s;if(p(Ue,fo)&&p(Ue,fo)!==c)return;const{viewport:{rotation:h}}=t,{width:f,height:d}=a.getBoundingClientRect(),y=N(Ue,Jl,new AbortController),b=t.combinedSignal(y);if(p(Ue,ho)||N(Ue,ho,u),p(Ue,fo)??N(Ue,fo,c),window.addEventListener("pointerup",g=>{var m;p(Ue,ho)===g.pointerId?this._endDraw(g):(m=p(Ue,po))==null||m.delete(g.pointerId)},{signal:b}),window.addEventListener("pointercancel",g=>{var m;p(Ue,ho)===g.pointerId?this._currentParent.endDrawingSession():(m=p(Ue,po))==null||m.delete(g.pointerId)},{signal:b}),window.addEventListener("pointerdown",g=>{p(Ue,fo)===g.pointerType&&((p(Ue,po)||N(Ue,po,new Set)).add(g.pointerId),p(Ue,On).isCancellable()&&(p(Ue,On).removeLastElement(),p(Ue,On).isEmpty()?this._currentParent.endDrawingSession(!0):this._endDraw(null)))},{capture:!0,passive:!1,signal:b}),window.addEventListener("contextmenu",ns,{signal:b}),a.addEventListener("pointermove",this._drawMove.bind(this),{signal:b}),a.addEventListener("touchmove",g=>{g.timeStamp===p(Ue,tu)&&Ji(g)},{signal:b}),t.toggleDrawing(),(v=n._editorUndoBar)==null||v.hide(),p(Ue,On)){t.drawLayer.updateProperties(this._currentDrawId,p(Ue,On).startNew(o,l,f,d,h));return}n.updateUIForDefaultProperties(this),N(Ue,On,this.createDrawerInstance(o,l,f,d,h)),N(Ue,eu,this.getDefaultDrawingOptions()),this._currentParent=t,{id:this._currentDrawId}=t.drawLayer.draw(this._mergeSVGProperties(p(Ue,eu).toSVGProperties(),p(Ue,On).defaultSVGProperties),!0,!1)}static _drawMove(t){var a;if(N(Ue,tu,-1),!p(Ue,On))return;const{offsetX:n,offsetY:r,pointerId:s}=t;if(p(Ue,ho)===s){if(((a=p(Ue,po))==null?void 0:a.size)>=1){this._endDraw(t);return}this._currentParent.drawLayer.updateProperties(this._currentDrawId,p(Ue,On).add(n,r)),N(Ue,tu,t.timeStamp),Ji(t)}}static _cleanup(t){t&&(this._currentDrawId=-1,this._currentParent=null,N(Ue,On,null),N(Ue,eu,null),N(Ue,fo,null),N(Ue,tu,NaN)),p(Ue,Jl)&&(p(Ue,Jl).abort(),N(Ue,Jl,null),N(Ue,ho,NaN),N(Ue,po,null))}static _endDraw(t){const n=this._currentParent;if(n){if(n.toggleDrawing(!0),this._cleanup(!1),t&&n.drawLayer.updateProperties(this._currentDrawId,p(Ue,On).end(t.offsetX,t.offsetY)),this.supportMultipleDrawings){const r=p(Ue,On),s=this._currentDrawId,a=r.getLastElement();n.addCommands({cmd:()=>{n.drawLayer.updateProperties(s,r.setLastElement(a))},undo:()=>{n.drawLayer.updateProperties(s,r.removeLastElement())},mustExec:!1,type:ft.DRAW_STEP});return}this.endDrawing(!1)}}static endDrawing(t){const n=this._currentParent;if(!n)return null;if(n.toggleDrawing(!0),n.cleanUndoStack(ft.DRAW_STEP),!p(Ue,On).isEmpty()){const{pageDimensions:[r,s],scale:a}=n,o=n.createAndAddNewEditor({offsetX:0,offsetY:0},!1,{drawId:this._currentDrawId,drawOutlines:p(Ue,On).getOutlines(r*a,s*a,a,this._INNER_MARGIN),drawingOptions:p(Ue,eu),mustBeCommitted:!t});return this._cleanup(!0),o}return n.drawLayer.remove(this._currentDrawId),this._cleanup(!0),null}createDrawingOptions(t){}static deserializeDraw(t,n,r,s,a,o){Nt("Not implemented")}static async deserialize(t,n,r){var h,f;const{rawDims:{pageWidth:s,pageHeight:a,pageX:o,pageY:l}}=n.viewport,u=this.deserializeDraw(o,l,s,a,this._INNER_MARGIN,t),c=await super.deserialize(t,n,r);return c.createDrawingOptions(t),M(h=c,yt,O1).call(h,{drawOutlines:u}),M(f=c,yt,Cf).call(f),c.onScaleChanging(),c.rotate(),c}serializeDraw(t){const[n,r]=this.pageTranslation,[s,a]=this.pageDimensions;return p(this,Gi).serialize([n,r,s,a],t)}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}static canCreateNewEmptyEditor(){return!1}};Gi=new WeakMap,hh=new WeakMap,On=new WeakMap,Jl=new WeakMap,eu=new WeakMap,ho=new WeakMap,fo=new WeakMap,po=new WeakMap,tu=new WeakMap,yt=new WeakSet,O1=function({drawOutlines:t,drawId:n,drawingOptions:r}){N(this,Gi,t),this._drawingOptions||(this._drawingOptions=r),n>=0?(this._drawId=n,this.parent.drawLayer.finalizeDraw(n,t.defaultProperties)):this._drawId=M(this,yt,N1).call(this,t,this.parent),M(this,yt,Tf).call(this,t.box)},N1=function(t,n){const{id:r}=n.drawLayer.draw(Ue._mergeSVGProperties(this._drawingOptions.toSVGProperties(),t.defaultSVGProperties),!1,!1);return r},R1=function(){this._drawId===null||!this.parent||(this.parent.drawLayer.remove(this._drawId),this._drawId=null,this._drawingOptions.reset())},Cf=function(t=this.parent){if(!(this._drawId!==null&&this.parent===t)){if(this._drawId!==null){this.parent.drawLayer.updateParent(this._drawId,t.drawLayer);return}this._drawingOptions.updateAll(),this._drawId=M(this,yt,N1).call(this,p(this,Gi),t)}},lk=function([t,n,r,s]){const{parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[n,1-t,r*(o/a),s*(a/o)];case 180:return[1-t,1-n,r,s];case 270:return[1-n,t,r*(o/a),s*(a/o)];default:return[t,n,r,s]}},gm=function(){const{x:t,y:n,width:r,height:s,parentDimensions:[a,o],rotation:l}=this;switch(l){case 90:return[1-n,t,r*(a/o),s*(o/a)];case 180:return[1-t,1-n,r,s];case 270:return[n,1-t,r*(a/o),s*(o/a)];default:return[t,n,r,s]}},Tf=function(t){if([this.x,this.y,this.width,this.height]=M(this,yt,lk).call(this,t),this.div){this.fixAndSetPosition();const[n,r]=this.parentDimensions;this.setDims(this.width*n,this.height*r)}this._onResized()},Hu=function(){const{x:t,y:n,width:r,height:s,rotation:a,parentRotation:o,parentDimensions:[l,u]}=this;switch((a*4+o)/90){case 1:return[1-n-s,t,s,r];case 2:return[1-t-r,1-n-s,r,s];case 3:return[n,1-t-r,s,r];case 4:return[t,n-r*(l/u),s*(u/l),r*(l/u)];case 5:return[1-n,t,r*(l/u),s*(u/l)];case 6:return[1-t-s*(u/l),1-n,s*(u/l),r*(l/u)];case 7:return[n-r*(l/u),1-t-s*(u/l),r*(l/u),s*(u/l)];case 8:return[t-r,n-s,r,s];case 9:return[1-n,t-r,s,r];case 10:return[1-t,1-n,r,s];case 11:return[n-s,1-t,s,r];case 12:return[t-s*(u/l),n,s*(u/l),r*(l/u)];case 13:return[1-n-r*(l/u),t-s*(u/l),r*(l/u),s*(u/l)];case 14:return[1-t,1-n-r*(l/u),s*(u/l),r*(l/u)];case 15:return[n,1-t,r*(l/u),s*(u/l)];default:return[t,n,r,s]}},Ze(Ue,"_currentDrawId",-1),Ze(Ue,"_currentParent",null),L(Ue,On,null),L(Ue,Jl,null),L(Ue,eu,null),L(Ue,ho,NaN),L(Ue,fo,null),L(Ue,po,null),L(Ue,tu,NaN),Ze(Ue,"_INNER_MARGIN",3);let D1=Ue;var Es,Nn,Rn,nu,fh,ci,jn,gr,iu,ru,su,dh,mm;class JI{constructor(e,t,n,r,s,a){L(this,dh);L(this,Es,new Float64Array(6));L(this,Nn);L(this,Rn);L(this,nu);L(this,fh);L(this,ci);L(this,jn,"");L(this,gr,0);L(this,iu,new rv);L(this,ru);L(this,su);N(this,ru,n),N(this,su,r),N(this,nu,s),N(this,fh,a),[e,t]=M(this,dh,mm).call(this,e,t);const o=N(this,Nn,[NaN,NaN,NaN,NaN,e,t]);N(this,ci,[e,t]),N(this,Rn,[{line:o,points:p(this,ci)}]),p(this,Es).set(o,0)}updateProperty(e,t){e==="stroke-width"&&N(this,fh,t)}isEmpty(){return!p(this,Rn)||p(this,Rn).length===0}isCancellable(){return p(this,ci).length<=10}add(e,t){[e,t]=M(this,dh,mm).call(this,e,t);const[n,r,s,a]=p(this,Es).subarray(2,6),o=e-s,l=t-a;return Math.hypot(p(this,ru)*o,p(this,su)*l)<=2?null:(p(this,ci).push(e,t),isNaN(n)?(p(this,Es).set([s,a,e,t],2),p(this,Nn).push(NaN,NaN,NaN,NaN,e,t),{path:{d:this.toSVGPath()}}):(isNaN(p(this,Es)[0])&&p(this,Nn).splice(6,6),p(this,Es).set([n,r,s,a,e,t],0),p(this,Nn).push(...Be.createBezierPoints(n,r,s,a,e,t)),{path:{d:this.toSVGPath()}}))}end(e,t){const n=this.add(e,t);return n||(p(this,ci).length===2?{path:{d:this.toSVGPath()}}:null)}startNew(e,t,n,r,s){N(this,ru,n),N(this,su,r),N(this,nu,s),[e,t]=M(this,dh,mm).call(this,e,t);const a=N(this,Nn,[NaN,NaN,NaN,NaN,e,t]);N(this,ci,[e,t]);const o=p(this,Rn).at(-1);return o&&(o.line=new Float32Array(o.line),o.points=new Float32Array(o.points)),p(this,Rn).push({line:a,points:p(this,ci)}),p(this,Es).set(a,0),N(this,gr,0),this.toSVGPath(),null}getLastElement(){return p(this,Rn).at(-1)}setLastElement(e){return p(this,Rn)?(p(this,Rn).push(e),N(this,Nn,e.line),N(this,ci,e.points),N(this,gr,0),{path:{d:this.toSVGPath()}}):p(this,iu).setLastElement(e)}removeLastElement(){if(!p(this,Rn))return p(this,iu).removeLastElement();p(this,Rn).pop(),N(this,jn,"");for(let e=0,t=p(this,Rn).length;e<t;e++){const{line:n,points:r}=p(this,Rn)[e];N(this,Nn,n),N(this,ci,r),N(this,gr,0),this.toSVGPath()}return{path:{d:p(this,jn)}}}toSVGPath(){const e=Be.svgRound(p(this,Nn)[4]),t=Be.svgRound(p(this,Nn)[5]);if(p(this,ci).length===2)return N(this,jn,`${p(this,jn)} M ${e} ${t} Z`),p(this,jn);if(p(this,ci).length<=6){const r=p(this,jn).lastIndexOf("M");N(this,jn,`${p(this,jn).slice(0,r)} M ${e} ${t}`),N(this,gr,6)}if(p(this,ci).length===4){const r=Be.svgRound(p(this,Nn)[10]),s=Be.svgRound(p(this,Nn)[11]);return N(this,jn,`${p(this,jn)} L ${r} ${s}`),N(this,gr,12),p(this,jn)}const n=[];p(this,gr)===0&&(n.push(`M ${e} ${t}`),N(this,gr,6));for(let r=p(this,gr),s=p(this,Nn).length;r<s;r+=6){const[a,o,l,u,c,h]=p(this,Nn).slice(r,r+6).map(Be.svgRound);n.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}return N(this,jn,p(this,jn)+n.join(" ")),N(this,gr,p(this,Nn).length),p(this,jn)}getOutlines(e,t,n,r){const s=p(this,Rn).at(-1);return s.line=new Float32Array(s.line),s.points=new Float32Array(s.points),p(this,iu).build(p(this,Rn),e,t,n,p(this,nu),p(this,fh),r),N(this,Es,null),N(this,Nn,null),N(this,Rn,null),N(this,jn,null),p(this,iu)}get defaultSVGProperties(){return{root:{viewBox:"0 0 10000 10000"},rootClass:{draw:!0},bbox:[0,0,1,1]}}}Es=new WeakMap,Nn=new WeakMap,Rn=new WeakMap,nu=new WeakMap,fh=new WeakMap,ci=new WeakMap,jn=new WeakMap,gr=new WeakMap,iu=new WeakMap,ru=new WeakMap,su=new WeakMap,dh=new WeakSet,mm=function(e,t){return Be._normalizePoint(e,t,p(this,ru),p(this,su),p(this,nu))};var hi,jp,zp,Xi,As,xs,ph,gh,mh,qn,js,uk,ck,hk;const U_=class U_ extends Be{constructor(){super(...arguments);L(this,qn);L(this,hi);L(this,jp,0);L(this,zp);L(this,Xi);L(this,As);L(this,xs);L(this,ph);L(this,gh);L(this,mh)}build(t,n,r,s,a,o,l){N(this,As,n),N(this,xs,r),N(this,ph,s),N(this,gh,a),N(this,mh,o),N(this,zp,l??0),N(this,Xi,t),M(this,qn,ck).call(this)}setLastElement(t){return p(this,Xi).push(t),{path:{d:this.toSVGPath()}}}removeLastElement(){return p(this,Xi).pop(),{path:{d:this.toSVGPath()}}}toSVGPath(){const t=[];for(const{line:n}of p(this,Xi)){if(t.push(`M${Be.svgRound(n[4])} ${Be.svgRound(n[5])}`),n.length===6){t.push("Z");continue}if(n.length===12){t.push(`L${Be.svgRound(n[10])} ${Be.svgRound(n[11])}`);continue}for(let r=6,s=n.length;r<s;r+=6){const[a,o,l,u,c,h]=n.subarray(r,r+6).map(Be.svgRound);t.push(`C${a} ${o} ${l} ${u} ${c} ${h}`)}}return t.join("")}serialize([t,n,r,s],a){const o=[],l=[],[u,c,h,f]=M(this,qn,uk).call(this);let d,y,b,v,g,m,w,_,E;switch(p(this,gh)){case 0:E=Be._rescale,d=t,y=n+s,b=r,v=-s,g=t+u*r,m=n+(1-c-f)*s,w=t+(u+h)*r,_=n+(1-c)*s;break;case 90:E=Be._rescaleAndSwap,d=t,y=n,b=r,v=s,g=t+c*r,m=n+u*s,w=t+(c+f)*r,_=n+(u+h)*s;break;case 180:E=Be._rescale,d=t+r,y=n,b=-r,v=s,g=t+(1-u-h)*r,m=n+c*s,w=t+(1-u)*r,_=n+(c+f)*s;break;case 270:E=Be._rescaleAndSwap,d=t+r,y=n+s,b=-r,v=-s,g=t+(1-c-f)*r,m=n+(1-u-h)*s,w=t+(1-c)*r,_=n+(1-u)*s;break}for(const{line:x,points:A}of p(this,Xi))o.push(E(x,d,y,b,v,a?new Array(x.length):null)),l.push(E(A,d,y,b,v,a?new Array(A.length):null));return{lines:o,points:l,rect:[g,m,w,_]}}static deserialize(t,n,r,s,a,{paths:{lines:o,points:l},rotation:u,thickness:c}){const h=[];let f,d,y,b,v;switch(u){case 0:v=Be._rescale,f=-t/r,d=n/s+1,y=1/r,b=-1/s;break;case 90:v=Be._rescaleAndSwap,f=-n/s,d=-t/r,y=1/s,b=1/r;break;case 180:v=Be._rescale,f=t/r+1,d=-n/s,y=-1/r,b=1/s;break;case 270:v=Be._rescaleAndSwap,f=n/s+1,d=t/r+1,y=-1/s,b=-1/r;break}if(!o){o=[];for(const m of l){const w=m.length;if(w===2){o.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1]]));continue}if(w===4){o.push(new Float32Array([NaN,NaN,NaN,NaN,m[0],m[1],NaN,NaN,NaN,NaN,m[2],m[3]]));continue}const _=new Float32Array(3*(w-2));o.push(_);let[E,x,A,S]=m.subarray(0,4);_.set([NaN,NaN,NaN,NaN,E,x],0);for(let O=4;O<w;O+=2){const C=m[O],k=m[O+1];_.set(Be.createBezierPoints(E,x,A,S,C,k),(O-2)*3),[E,x,A,S]=[A,S,C,k]}}}for(let m=0,w=o.length;m<w;m++)h.push({line:v(o[m].map(_=>_??NaN),f,d,y,b),points:v(l[m].map(_=>_??NaN),f,d,y,b)});const g=new U_;return g.build(h,r,s,1,u,c,a),g}get box(){return p(this,hi)}updateProperty(t,n){return t==="stroke-width"?M(this,qn,hk).call(this,n):null}updateParentDimensions([t,n],r){const[s,a]=M(this,qn,js).call(this);N(this,As,t),N(this,xs,n),N(this,ph,r);const[o,l]=M(this,qn,js).call(this),u=o-s,c=l-a,h=p(this,hi);return h[0]-=u,h[1]-=c,h[2]+=2*u,h[3]+=2*c,h}updateRotation(t){return N(this,jp,t),{path:{transform:this.rotationTransform}}}get viewBox(){return p(this,hi).map(Be.svgRound).join(" ")}get defaultProperties(){const[t,n]=p(this,hi);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Be.svgRound(t)} ${Be.svgRound(n)}`}}}get rotationTransform(){const[,,t,n]=p(this,hi);let r=0,s=0,a=0,o=0,l=0,u=0;switch(p(this,jp)){case 90:s=n/t,a=-t/n,l=t;break;case 180:r=-1,o=-1,l=t,u=n;break;case 270:s=-n/t,a=t/n,u=n;break;default:return""}return`matrix(${r} ${s} ${a} ${o} ${Be.svgRound(l)} ${Be.svgRound(u)})`}getPathResizingSVGProperties([t,n,r,s]){const[a,o]=M(this,qn,js).call(this),[l,u,c,h]=p(this,hi);if(Math.abs(c-a)<=Be.PRECISION||Math.abs(h-o)<=Be.PRECISION){const v=t+r/2-(l+c/2),g=n+s/2-(u+h/2);return{path:{"transform-origin":`${Be.svgRound(t)} ${Be.svgRound(n)}`,transform:`${this.rotationTransform} translate(${v} ${g})`}}}const f=(r-2*a)/(c-2*a),d=(s-2*o)/(h-2*o),y=c/r,b=h/s;return{path:{"transform-origin":`${Be.svgRound(l)} ${Be.svgRound(u)}`,transform:`${this.rotationTransform} scale(${y} ${b}) translate(${Be.svgRound(a)} ${Be.svgRound(o)}) scale(${f} ${d}) translate(${Be.svgRound(-a)} ${Be.svgRound(-o)})`}}}getPathResizedSVGProperties([t,n,r,s]){const[a,o]=M(this,qn,js).call(this),l=p(this,hi),[u,c,h,f]=l;if(l[0]=t,l[1]=n,l[2]=r,l[3]=s,Math.abs(h-a)<=Be.PRECISION||Math.abs(f-o)<=Be.PRECISION){const g=t+r/2-(u+h/2),m=n+s/2-(c+f/2);for(const{line:w,points:_}of p(this,Xi))Be._translate(w,g,m,w),Be._translate(_,g,m,_);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Be.svgRound(t)} ${Be.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}const d=(r-2*a)/(h-2*a),y=(s-2*o)/(f-2*o),b=-d*(u+a)+t+a,v=-y*(c+o)+n+o;if(d!==1||y!==1||b!==0||v!==0)for(const{line:g,points:m}of p(this,Xi))Be._rescale(g,b,v,d,y,g),Be._rescale(m,b,v,d,y,m);return{root:{viewBox:this.viewBox},path:{"transform-origin":`${Be.svgRound(t)} ${Be.svgRound(n)}`,transform:this.rotationTransform||null,d:this.toSVGPath()}}}getPathTranslatedSVGProperties([t,n],r){const[s,a]=r,o=p(this,hi),l=t-o[0],u=n-o[1];if(p(this,As)===s&&p(this,xs)===a)for(const{line:c,points:h}of p(this,Xi))Be._translate(c,l,u,c),Be._translate(h,l,u,h);else{const c=p(this,As)/s,h=p(this,xs)/a;N(this,As,s),N(this,xs,a);for(const{line:f,points:d}of p(this,Xi))Be._rescale(f,l,u,c,h,f),Be._rescale(d,l,u,c,h,d);o[2]*=c,o[3]*=h}return o[0]=t,o[1]=n,{root:{viewBox:this.viewBox},path:{d:this.toSVGPath(),"transform-origin":`${Be.svgRound(t)} ${Be.svgRound(n)}`}}}get defaultSVGProperties(){const t=p(this,hi);return{root:{viewBox:this.viewBox},rootClass:{draw:!0},path:{d:this.toSVGPath(),"transform-origin":`${Be.svgRound(t[0])} ${Be.svgRound(t[1])}`,transform:this.rotationTransform||null},bbox:t}}};hi=new WeakMap,jp=new WeakMap,zp=new WeakMap,Xi=new WeakMap,As=new WeakMap,xs=new WeakMap,ph=new WeakMap,gh=new WeakMap,mh=new WeakMap,qn=new WeakSet,js=function(t=p(this,mh)){const n=p(this,zp)+t/2*p(this,ph);return p(this,gh)%180===0?[n/p(this,As),n/p(this,xs)]:[n/p(this,xs),n/p(this,As)]},uk=function(){const[t,n,r,s]=p(this,hi),[a,o]=M(this,qn,js).call(this,0);return[t+a,n+o,r-2*a,s-2*o]},ck=function(){const t=N(this,hi,new Float32Array([1/0,1/0,-1/0,-1/0]));for(const{line:s}of p(this,Xi)){if(s.length<=12){for(let l=4,u=s.length;l<u;l+=6){const[c,h]=s.subarray(l,l+2);t[0]=Math.min(t[0],c),t[1]=Math.min(t[1],h),t[2]=Math.max(t[2],c),t[3]=Math.max(t[3],h)}continue}let a=s[4],o=s[5];for(let l=6,u=s.length;l<u;l+=6){const[c,h,f,d,y,b]=s.subarray(l,l+6);$e.bezierBoundingBox(a,o,c,h,f,d,y,b,t),a=y,o=b}}const[n,r]=M(this,qn,js).call(this);t[0]=Math.min(1,Math.max(0,t[0]-n)),t[1]=Math.min(1,Math.max(0,t[1]-r)),t[2]=Math.min(1,Math.max(0,t[2]+n)),t[3]=Math.min(1,Math.max(0,t[3]+r)),t[2]-=t[0],t[3]-=t[1]},hk=function(t){const[n,r]=M(this,qn,js).call(this);N(this,mh,t);const[s,a]=M(this,qn,js).call(this),[o,l]=[s-n,a-r],u=p(this,hi);return u[0]-=o,u[1]-=l,u[2]+=2*o,u[3]+=2*l,u};let rv=U_;var vh;const q_=class q_ extends QI{constructor(t){super();L(this,vh);N(this,vh,t),super.updateProperties({fill:"none",stroke:Xt._defaultLineColor,"stroke-opacity":1,"stroke-width":1,"stroke-linecap":"round","stroke-linejoin":"round","stroke-miterlimit":10})}updateSVGProperty(t,n){t==="stroke-width"&&(n??(n=this["stroke-width"]),n*=p(this,vh).realScale),super.updateSVGProperty(t,n)}clone(){const t=new q_(p(this,vh));return t.updateAll(this),t}};vh=new WeakMap;let P1=q_;var jv,fk;const oc=class oc extends D1{constructor(t){super({...t,name:"inkEditor"});L(this,jv);this._willKeepAspectRatio=!0}static initialize(t,n){Xt.initialize(t,n),this._defaultDrawingOptions=new P1(n.viewParameters)}static getDefaultDrawingOptions(t){const n=this._defaultDrawingOptions.clone();return n.updateProperties(t),n}static get supportMultipleDrawings(){return!0}static get typesMap(){return ot(this,"typesMap",new Map([[ft.INK_THICKNESS,"stroke-width"],[ft.INK_COLOR,"stroke"],[ft.INK_OPACITY,"stroke-opacity"]]))}static createDrawerInstance(t,n,r,s,a){return new JI(t,n,r,s,a,this._defaultDrawingOptions["stroke-width"])}static deserializeDraw(t,n,r,s,a,o){return rv.deserialize(t,n,r,s,a,o)}static async deserialize(t,n,r){let s=null;if(t instanceof d_){const{data:{inkLists:o,rect:l,rotation:u,id:c,color:h,opacity:f,borderStyle:{rawWidth:d},popupRef:y},parent:{page:{pageNumber:b}}}=t;s=t={annotationType:nt.INK,color:Array.from(h),thickness:d,opacity:f,paths:{points:o},boxes:null,pageIndex:b-1,rect:l.slice(0),rotation:u,id:c,deleted:!1,popupRef:y}}const a=await super.deserialize(t,n,r);return a.annotationElementId=t.id||null,a._initialData=s,a}onScaleChanging(){if(!this.parent)return;super.onScaleChanging();const{_drawId:t,_drawingOptions:n,parent:r}=this;n.updateSVGProperty("stroke-width"),r.drawLayer.updateProperties(t,n.toSVGProperties())}static onScaleChangingWhenDrawing(){const t=this._currentParent;t&&(super.onScaleChangingWhenDrawing(),this._defaultDrawingOptions.updateSVGProperty("stroke-width"),t.drawLayer.updateProperties(this._currentDrawId,this._defaultDrawingOptions.toSVGProperties()))}createDrawingOptions({color:t,thickness:n,opacity:r}){this._drawingOptions=oc.getDefaultDrawingOptions({stroke:$e.makeHexColor(...t),"stroke-width":n,"stroke-opacity":r})}serialize(t=!1){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const{lines:n,points:r,rect:s}=this.serializeDraw(t),{_drawingOptions:{stroke:a,"stroke-opacity":o,"stroke-width":l}}=this,u={annotationType:nt.INK,color:Xt._colorManager.convert(a),opacity:o,thickness:l,paths:{lines:n,points:r},pageIndex:this.pageIndex,rect:s,rotation:this.rotation,structTreeParentId:this._structTreeParentId};return t?u:this.annotationElementId&&!M(this,jv,fk).call(this,u)?null:(u.id=this.annotationElementId,u)}renderAnnotationElement(t){const{points:n,rect:r}=this.serializeDraw(!1);return t.updateEdited({rect:r,thickness:this._drawingOptions["stroke-width"],points:n}),null}};jv=new WeakSet,fk=function(t){const{color:n,thickness:r,opacity:s,pageIndex:a}=this._initialData;return this._hasBeenMoved||this._hasBeenResized||t.color.some((o,l)=>o!==n[l])||t.thickness!==r||t.opacity!==s||t.pageIndex!==a},Ze(oc,"_type","ink"),Ze(oc,"_editorType",nt.INK),Ze(oc,"_defaultDrawingOptions",null);let L1=oc;var Vt,zn,go,ha,mo,yh,Ss,Cs,Ki,bh,bt,kf,Df,vm,M1,ym,F1,bm,dk;const Uf=class Uf extends Xt{constructor(t){super({...t,name:"stampEditor"});L(this,bt);L(this,Vt,null);L(this,zn,null);L(this,go,null);L(this,ha,null);L(this,mo,null);L(this,yh,"");L(this,Ss,null);L(this,Cs,null);L(this,Ki,!1);L(this,bh,!1);N(this,ha,t.bitmapUrl),N(this,mo,t.bitmapFile)}static initialize(t,n){Xt.initialize(t,n)}static get supportedTypes(){return ot(this,"supportedTypes",["apng","avif","bmp","gif","jpeg","png","svg+xml","webp","x-icon"].map(n=>`image/${n}`))}static get supportedTypesStr(){return ot(this,"supportedTypesStr",this.supportedTypes.join(","))}static isHandlingMimeForPasting(t){return this.supportedTypes.includes(t)}static paste(t,n){n.pasteEditor(nt.STAMP,{bitmapFile:t.getAsFile()})}altTextFinish(){this._uiManager.useNewAltTextFlow&&(this.div.hidden=!1),super.altTextFinish()}get telemetryFinalData(){var t;return{type:"stamp",hasAltText:!!((t=this.altTextData)!=null&&t.altText)}}static computeTelemetryFinalData(t){const n=t.get("hasAltText");return{hasAltText:n.get(!0)??0,hasNoAltText:n.get(!1)??0}}async mlGuessAltText(t=null,n=!0){if(this.hasAltTextData())return null;const{mlManager:r}=this._uiManager;if(!r)throw new Error("No ML.");if(!await r.isEnabledFor("altText"))throw new Error("ML isn't enabled for alt text.");const{data:s,width:a,height:o}=t||this.copyCanvas(null,null,!0).imageData,l=await r.guess({name:"altText",request:{data:s,width:a,height:o,channels:s.length/(a*o)}});if(!l)throw new Error("No response from the AI service.");if(l.error)throw new Error("Error from the AI service.");if(l.cancel)return null;if(!l.output)throw new Error("No valid response from the AI service.");const u=l.output;return await this.setGuessedAltText(u),n&&!this.hasAltTextData()&&(this.altTextData={alt:u,decorative:!1}),u}remove(){var t;p(this,zn)&&(N(this,Vt,null),this._uiManager.imageManager.deleteId(p(this,zn)),(t=p(this,Ss))==null||t.remove(),N(this,Ss,null),p(this,Cs)&&(clearTimeout(p(this,Cs)),N(this,Cs,null))),super.remove()}rebuild(){if(!this.parent){p(this,zn)&&M(this,bt,vm).call(this);return}super.rebuild(),this.div!==null&&(p(this,zn)&&p(this,Ss)===null&&M(this,bt,vm).call(this),this.isAttachedToDOM||this.parent.add(this))}onceAdded(t){this._isDraggable=!0,t&&this.div.focus()}isEmpty(){return!(p(this,go)||p(this,Vt)||p(this,ha)||p(this,mo)||p(this,zn))}get isResizable(){return!0}render(){if(this.div)return this.div;let t,n;if(this.width&&(t=this.x,n=this.y),super.render(),this.div.hidden=!0,this.div.setAttribute("role","figure"),this.addAltTextButton(),p(this,Vt)?M(this,bt,M1).call(this):M(this,bt,vm).call(this),this.width&&!this.annotationElementId){const[r,s]=this.parentDimensions;this.setAt(t*r,n*s,this.width*r,this.height*s)}return this._uiManager.addShouldRescale(this),this.div}_onResized(){this.onScaleChanging()}onScaleChanging(){if(!this.parent)return;p(this,Cs)!==null&&clearTimeout(p(this,Cs)),N(this,Cs,setTimeout(()=>{N(this,Cs,null),M(this,bt,F1).call(this)},200))}copyCanvas(t,n,r=!1){var d;t||(t=224);const{width:s,height:a}=p(this,Vt),o=new Pb;let l=p(this,Vt),u=s,c=a,h=null;if(n){if(s>n||a>n){const S=Math.min(n/s,n/a);u=Math.floor(s*S),c=Math.floor(a*S)}h=document.createElement("canvas");const y=h.width=Math.ceil(u*o.sx),b=h.height=Math.ceil(c*o.sy);p(this,Ki)||(l=M(this,bt,ym).call(this,y,b));const v=h.getContext("2d");v.filter=this._uiManager.hcmFilter;let g="white",m="#cfcfd8";this._uiManager.hcmFilter!=="none"?m="black":(d=window.matchMedia)!=null&&d.call(window,"(prefers-color-scheme: dark)").matches&&(g="#8f8f9d",m="#42414d");const w=15,_=w*o.sx,E=w*o.sy,x=new OffscreenCanvas(_*2,E*2),A=x.getContext("2d");A.fillStyle=g,A.fillRect(0,0,_*2,E*2),A.fillStyle=m,A.fillRect(0,0,_,E),A.fillRect(_,E,_,E),v.fillStyle=v.createPattern(x,"repeat"),v.fillRect(0,0,y,b),v.drawImage(l,0,0,l.width,l.height,0,0,y,b)}let f=null;if(r){let y,b;if(o.symmetric&&l.width<t&&l.height<t)y=l.width,b=l.height;else if(l=p(this,Vt),s>t||a>t){const m=Math.min(t/s,t/a);y=Math.floor(s*m),b=Math.floor(a*m),p(this,Ki)||(l=M(this,bt,ym).call(this,y,b))}const g=new OffscreenCanvas(y,b).getContext("2d",{willReadFrequently:!0});g.drawImage(l,0,0,l.width,l.height,0,0,y,b),f={width:y,height:b,data:g.getImageData(0,0,y,b).data}}return{canvas:h,width:u,height:c,imageData:f}}getImageForAltText(){return p(this,Ss)}static async deserialize(t,n,r){var b;let s=null;if(t instanceof LT){const{data:{rect:v,rotation:g,id:m,structParent:w,popupRef:_},container:E,parent:{page:{pageNumber:x}}}=t,A=E.querySelector("canvas"),S=r.imageManager.getFromCanvas(E.id,A);A.remove();const O=((b=await n._structTree.getAriaAttributes(`${s_}${m}`))==null?void 0:b.get("aria-label"))||"";s=t={annotationType:nt.STAMP,bitmapId:S.id,bitmap:S.bitmap,pageIndex:x-1,rect:v.slice(0),rotation:g,id:m,deleted:!1,accessibilityData:{decorative:!1,altText:O},isSvg:!1,structParent:w,popupRef:_}}const a=await super.deserialize(t,n,r),{rect:o,bitmap:l,bitmapUrl:u,bitmapId:c,isSvg:h,accessibilityData:f}=t;c&&r.imageManager.isValidId(c)?(N(a,zn,c),l&&N(a,Vt,l)):N(a,ha,u),N(a,Ki,h);const[d,y]=a.pageDimensions;return a.width=(o[2]-o[0])/d,a.height=(o[3]-o[1])/y,a.annotationElementId=t.id||null,f&&(a.altTextData=f),a._initialData=s,N(a,bh,!!s),a}serialize(t=!1,n=null){if(this.isEmpty())return null;if(this.deleted)return this.serializeDeleted();const r={annotationType:nt.STAMP,bitmapId:p(this,zn),pageIndex:this.pageIndex,rect:this.getRect(0,0),rotation:this.rotation,isSvg:p(this,Ki),structTreeParentId:this._structTreeParentId};if(t)return r.bitmapUrl=M(this,bt,bm).call(this,!0),r.accessibilityData=this.serializeAltText(!0),r;const{decorative:s,altText:a}=this.serializeAltText(!1);if(!s&&a&&(r.accessibilityData={type:"Figure",alt:a}),this.annotationElementId){const l=M(this,bt,dk).call(this,r);if(l.isSame)return null;l.isSameAltText?delete r.accessibilityData:r.accessibilityData.structParent=this._initialData.structParent??-1}if(r.id=this.annotationElementId,n===null)return r;n.stamps||(n.stamps=new Map);const o=p(this,Ki)?(r.rect[2]-r.rect[0])*(r.rect[3]-r.rect[1]):null;if(!n.stamps.has(p(this,zn)))n.stamps.set(p(this,zn),{area:o,serialized:r}),r.bitmap=M(this,bt,bm).call(this,!1);else if(p(this,Ki)){const l=n.stamps.get(p(this,zn));o>l.area&&(l.area=o,l.serialized.bitmap.close(),l.serialized.bitmap=M(this,bt,bm).call(this,!1))}return r}renderAnnotationElement(t){return t.updateEdited({rect:this.getRect(0,0)}),null}};Vt=new WeakMap,zn=new WeakMap,go=new WeakMap,ha=new WeakMap,mo=new WeakMap,yh=new WeakMap,Ss=new WeakMap,Cs=new WeakMap,Ki=new WeakMap,bh=new WeakMap,bt=new WeakSet,kf=function(t,n=!1){if(!t){this.remove();return}N(this,Vt,t.bitmap),n||(N(this,zn,t.id),N(this,Ki,t.isSvg)),t.file&&N(this,yh,t.file.name),M(this,bt,M1).call(this)},Df=function(){if(N(this,go,null),this._uiManager.enableWaiting(!1),!!p(this,Ss)){if(this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,Vt)){this._editToolbar.hide(),this._uiManager.editAltText(this,!0);return}if(!this._uiManager.useNewAltTextWhenAddingImage&&this._uiManager.useNewAltTextFlow&&p(this,Vt)){this._reportTelemetry({action:"pdfjs.image.image_added",data:{alt_text_modal:!1,alt_text_type:"empty"}});try{this.mlGuessAltText()}catch{}}this.div.focus()}},vm=function(){if(p(this,zn)){this._uiManager.enableWaiting(!0),this._uiManager.imageManager.getFromId(p(this,zn)).then(r=>M(this,bt,kf).call(this,r,!0)).finally(()=>M(this,bt,Df).call(this));return}if(p(this,ha)){const r=p(this,ha);N(this,ha,null),this._uiManager.enableWaiting(!0),N(this,go,this._uiManager.imageManager.getFromUrl(r).then(s=>M(this,bt,kf).call(this,s)).finally(()=>M(this,bt,Df).call(this)));return}if(p(this,mo)){const r=p(this,mo);N(this,mo,null),this._uiManager.enableWaiting(!0),N(this,go,this._uiManager.imageManager.getFromFile(r).then(s=>M(this,bt,kf).call(this,s)).finally(()=>M(this,bt,Df).call(this)));return}const t=document.createElement("input");t.type="file",t.accept=Uf.supportedTypesStr;const n=this._uiManager._signal;N(this,go,new Promise(r=>{t.addEventListener("change",async()=>{if(!t.files||t.files.length===0)this.remove();else{this._uiManager.enableWaiting(!0);const s=await this._uiManager.imageManager.getFromFile(t.files[0]);this._reportTelemetry({action:"pdfjs.image.image_selected",data:{alt_text_modal:this._uiManager.useNewAltTextFlow}}),M(this,bt,kf).call(this,s)}r()},{signal:n}),t.addEventListener("cancel",()=>{this.remove(),r()},{signal:n})}).finally(()=>M(this,bt,Df).call(this))),t.click()},M1=function(){var h;const{div:t}=this;let{width:n,height:r}=p(this,Vt);const[s,a]=this.pageDimensions,o=.75;if(this.width)n=this.width*s,r=this.height*a;else if(n>o*s||r>o*a){const f=Math.min(o*s/n,o*a/r);n*=f,r*=f}const[l,u]=this.parentDimensions;this.setDims(n*l/s,r*u/a),this._uiManager.enableWaiting(!1);const c=N(this,Ss,document.createElement("canvas"));c.setAttribute("role","img"),this.addContainer(c),this.width=n/s,this.height=r/a,(h=this._initialOptions)!=null&&h.isCentered?this.center():this.fixAndSetPosition(),this._initialOptions=null,(!this._uiManager.useNewAltTextWhenAddingImage||!this._uiManager.useNewAltTextFlow||this.annotationElementId)&&(t.hidden=!1),M(this,bt,F1).call(this),p(this,bh)||(this.parent.addUndoableEditor(this),N(this,bh,!0)),this._reportTelemetry({action:"inserted_image"}),p(this,yh)&&c.setAttribute("aria-label",p(this,yh))},ym=function(t,n){const{width:r,height:s}=p(this,Vt);let a=r,o=s,l=p(this,Vt);for(;a>2*t||o>2*n;){const u=a,c=o;a>2*t&&(a=a>=16384?Math.floor(a/2)-1:Math.ceil(a/2)),o>2*n&&(o=o>=16384?Math.floor(o/2)-1:Math.ceil(o/2));const h=new OffscreenCanvas(a,o);h.getContext("2d").drawImage(l,0,0,u,c,0,0,a,o),l=h.transferToImageBitmap()}return l},F1=function(){const[t,n]=this.parentDimensions,{width:r,height:s}=this,a=new Pb,o=Math.ceil(r*t*a.sx),l=Math.ceil(s*n*a.sy),u=p(this,Ss);if(!u||u.width===o&&u.height===l)return;u.width=o,u.height=l;const c=p(this,Ki)?p(this,Vt):M(this,bt,ym).call(this,o,l),h=u.getContext("2d");h.filter=this._uiManager.hcmFilter,h.drawImage(c,0,0,c.width,c.height,0,0,o,l)},bm=function(t){if(t){if(p(this,Ki)){const s=this._uiManager.imageManager.getSvgUrl(p(this,zn));if(s)return s}const n=document.createElement("canvas");return{width:n.width,height:n.height}=p(this,Vt),n.getContext("2d").drawImage(p(this,Vt),0,0),n.toDataURL()}if(p(this,Ki)){const[n,r]=this.pageDimensions,s=Math.round(this.width*n*Bo.PDF_TO_CSS_UNITS),a=Math.round(this.height*r*Bo.PDF_TO_CSS_UNITS),o=new OffscreenCanvas(s,a);return o.getContext("2d").drawImage(p(this,Vt),0,0,p(this,Vt).width,p(this,Vt).height,0,0,s,a),o.transferToImageBitmap()}return structuredClone(p(this,Vt))},dk=function(t){var o;const{pageIndex:n,accessibilityData:{altText:r}}=this._initialData,s=t.pageIndex===n,a=(((o=t.accessibilityData)==null?void 0:o.alt)||"")===r;return{isSame:!this._hasBeenMoved&&!this._hasBeenResized&&s&&a,isSameAltText:a}},Ze(Uf,"_type","stamp"),Ze(Uf,"_editorType",nt.STAMP);let I1=Uf;var au,wh,Ts,vo,fa,mr,yo,_h,ou,Vr,da,ti,pa,We,bo,Ht,pk,us,j1,z1,wm;const Rr=class Rr{constructor({uiManager:e,pageIndex:t,div:n,structTreeLayer:r,accessibilityManager:s,annotationLayer:a,drawLayer:o,textLayer:l,viewport:u,l10n:c}){L(this,Ht);L(this,au);L(this,wh,!1);L(this,Ts,null);L(this,vo,null);L(this,fa,null);L(this,mr,new Map);L(this,yo,!1);L(this,_h,!1);L(this,ou,!1);L(this,Vr,null);L(this,da,null);L(this,ti,null);L(this,pa,null);L(this,We);const h=[...p(Rr,bo).values()];if(!Rr._initialized){Rr._initialized=!0;for(const f of h)f.initialize(c,e)}e.registerEditorTypes(h),N(this,We,e),this.pageIndex=t,this.div=n,N(this,au,s),N(this,Ts,a),this.viewport=u,N(this,ti,l),this.drawLayer=o,this._structTree=r,p(this,We).addLayer(this)}get isEmpty(){return p(this,mr).size===0}get isInvisible(){return this.isEmpty&&p(this,We).getMode()===nt.NONE}updateToolbar(e){p(this,We).updateToolbar(e)}updateMode(e=p(this,We).getMode()){switch(M(this,Ht,wm).call(this),e){case nt.NONE:this.disableTextSelection(),this.togglePointerEvents(!1),this.toggleAnnotationLayerPointerEvents(!0),this.disableClick();return;case nt.INK:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick();break;case nt.HIGHLIGHT:this.enableTextSelection(),this.togglePointerEvents(!1),this.disableClick();break;default:this.disableTextSelection(),this.togglePointerEvents(!0),this.enableClick()}this.toggleAnnotationLayerPointerEvents(!1);const{classList:t}=this.div;for(const n of p(Rr,bo).values())t.toggle(`${n._type}Editing`,e===n._editorType);this.div.hidden=!1}hasTextLayer(e){var t;return e===((t=p(this,ti))==null?void 0:t.div)}setEditingState(e){p(this,We).setEditingState(e)}addCommands(e){p(this,We).addCommands(e)}cleanUndoStack(e){p(this,We).cleanUndoStack(e)}toggleDrawing(e=!1){this.div.classList.toggle("drawing",!e)}togglePointerEvents(e=!1){this.div.classList.toggle("disabled",!e)}toggleAnnotationLayerPointerEvents(e=!1){var t;(t=p(this,Ts))==null||t.div.classList.toggle("disabled",!e)}async enable(){N(this,ou,!0),this.div.tabIndex=0,this.togglePointerEvents(!0);const e=new Set;for(const n of p(this,mr).values())n.enableEditing(),n.show(!0),n.annotationElementId&&(p(this,We).removeChangedExistingAnnotation(n),e.add(n.annotationElementId));if(!p(this,Ts)){N(this,ou,!1);return}const t=p(this,Ts).getEditableAnnotations();for(const n of t){if(n.hide(),p(this,We).isDeletedAnnotationElement(n.data.id)||e.has(n.data.id))continue;const r=await this.deserialize(n);r&&(this.addOrRebuild(r),r.enableEditing())}N(this,ou,!1)}disable(){var r;N(this,_h,!0),this.div.tabIndex=-1,this.togglePointerEvents(!1);const e=new Map,t=new Map;for(const s of p(this,mr).values())if(s.disableEditing(),!!s.annotationElementId){if(s.serialize()!==null){e.set(s.annotationElementId,s);continue}else t.set(s.annotationElementId,s);(r=this.getEditableAnnotation(s.annotationElementId))==null||r.show(),s.remove()}if(p(this,Ts)){const s=p(this,Ts).getEditableAnnotations();for(const a of s){const{id:o}=a.data;if(p(this,We).isDeletedAnnotationElement(o))continue;let l=t.get(o);if(l){l.resetAnnotationElement(a),l.show(!1),a.show();continue}l=e.get(o),l&&(p(this,We).addChangedExistingAnnotation(l),l.renderAnnotationElement(a)&&l.show(!1)),a.show()}}M(this,Ht,wm).call(this),this.isEmpty&&(this.div.hidden=!0);const{classList:n}=this.div;for(const s of p(Rr,bo).values())n.remove(`${s._type}Editing`);this.disableTextSelection(),this.toggleAnnotationLayerPointerEvents(!0),N(this,_h,!1)}getEditableAnnotation(e){var t;return((t=p(this,Ts))==null?void 0:t.getEditableAnnotation(e))||null}setActiveEditor(e){p(this,We).getActive()!==e&&p(this,We).setActiveEditor(e)}enableTextSelection(){var e;if(this.div.tabIndex=-1,(e=p(this,ti))!=null&&e.div&&!p(this,pa)){N(this,pa,new AbortController);const t=p(this,We).combinedSignal(p(this,pa));p(this,ti).div.addEventListener("pointerdown",M(this,Ht,pk).bind(this),{signal:t}),p(this,ti).div.classList.add("highlighting")}}disableTextSelection(){var e;this.div.tabIndex=0,(e=p(this,ti))!=null&&e.div&&p(this,pa)&&(p(this,pa).abort(),N(this,pa,null),p(this,ti).div.classList.remove("highlighting"))}enableClick(){if(p(this,vo))return;N(this,vo,new AbortController);const e=p(this,We).combinedSignal(p(this,vo));this.div.addEventListener("pointerdown",this.pointerdown.bind(this),{signal:e});const t=this.pointerup.bind(this);this.div.addEventListener("pointerup",t,{signal:e}),this.div.addEventListener("pointercancel",t,{signal:e})}disableClick(){var e;(e=p(this,vo))==null||e.abort(),N(this,vo,null)}attach(e){p(this,mr).set(e.id,e);const{annotationElementId:t}=e;t&&p(this,We).isDeletedAnnotationElement(t)&&p(this,We).removeDeletedAnnotationElement(e)}detach(e){var t;p(this,mr).delete(e.id),(t=p(this,au))==null||t.removePointerInTextLayer(e.contentDiv),!p(this,_h)&&e.annotationElementId&&p(this,We).addDeletedAnnotationElement(e)}remove(e){this.detach(e),p(this,We).removeEditor(e),e.div.remove(),e.isAttachedToDOM=!1}changeParent(e){var t;e.parent!==this&&(e.parent&&e.annotationElementId&&(p(this,We).addDeletedAnnotationElement(e.annotationElementId),Xt.deleteAnnotationElement(e),e.annotationElementId=null),this.attach(e),(t=e.parent)==null||t.detach(e),e.setParent(this),e.div&&e.isAttachedToDOM&&(e.div.remove(),this.div.append(e.div)))}add(e){if(!(e.parent===this&&e.isAttachedToDOM)){if(this.changeParent(e),p(this,We).addEditor(e),this.attach(e),!e.isAttachedToDOM){const t=e.render();this.div.append(t),e.isAttachedToDOM=!0}e.fixAndSetPosition(),e.onceAdded(!p(this,ou)),p(this,We).addToAnnotationStorage(e),e._reportTelemetry(e.telemetryInitialData)}}moveEditorInDOM(e){var n;if(!e.isAttachedToDOM)return;const{activeElement:t}=document;e.div.contains(t)&&!p(this,fa)&&(e._focusEventsAllowed=!1,N(this,fa,setTimeout(()=>{N(this,fa,null),e.div.contains(document.activeElement)?e._focusEventsAllowed=!0:(e.div.addEventListener("focusin",()=>{e._focusEventsAllowed=!0},{once:!0,signal:p(this,We)._signal}),t.focus())},0))),e._structTreeParentId=(n=p(this,au))==null?void 0:n.moveElementInDOM(this.div,e.div,e.contentDiv,!0)}addOrRebuild(e){e.needsToBeRebuilt()?(e.parent||(e.parent=this),e.rebuild(),e.show()):this.add(e)}addUndoableEditor(e){const t=()=>e._uiManager.rebuild(e),n=()=>{e.remove()};this.addCommands({cmd:t,undo:n,mustExec:!1})}getNextId(){return p(this,We).getId()}combinedSignal(e){return p(this,We).combinedSignal(e)}canCreateNewEmptyEditor(){var e;return(e=p(this,Ht,us))==null?void 0:e.canCreateNewEmptyEditor()}pasteEditor(e,t){p(this,We).updateToolbar(e),p(this,We).updateMode(e);const{offsetX:n,offsetY:r}=M(this,Ht,z1).call(this),s=this.getNextId(),a=M(this,Ht,j1).call(this,{parent:this,id:s,x:n,y:r,uiManager:p(this,We),isCentered:!0,...t});a&&this.add(a)}async deserialize(e){var t;return await((t=p(Rr,bo).get(e.annotationType??e.annotationEditorType))==null?void 0:t.deserialize(e,this,p(this,We)))||null}createAndAddNewEditor(e,t,n={}){const r=this.getNextId(),s=M(this,Ht,j1).call(this,{parent:this,id:r,x:e.offsetX,y:e.offsetY,uiManager:p(this,We),isCentered:t,...n});return s&&this.add(s),s}addNewEditor(){this.createAndAddNewEditor(M(this,Ht,z1).call(this),!0)}setSelected(e){p(this,We).setSelected(e)}toggleSelected(e){p(this,We).toggleSelected(e)}unselect(e){p(this,We).unselect(e)}pointerup(e){var n;const{isMac:t}=gi.platform;if(!(e.button!==0||e.ctrlKey&&t)&&e.target===this.div&&p(this,yo)&&(N(this,yo,!1),!((n=p(this,Ht,us))!=null&&n.isDrawer&&p(this,Ht,us).supportMultipleDrawings))){if(!p(this,wh)){N(this,wh,!0);return}if(p(this,We).getMode()===nt.STAMP){p(this,We).unselectAll();return}this.createAndAddNewEditor(e,!1)}}pointerdown(e){var r;if(p(this,We).getMode()===nt.HIGHLIGHT&&this.enableTextSelection(),p(this,yo)){N(this,yo,!1);return}const{isMac:t}=gi.platform;if(e.button!==0||e.ctrlKey&&t||e.target!==this.div)return;if(N(this,yo,!0),(r=p(this,Ht,us))!=null&&r.isDrawer){this.startDrawingSession(e);return}const n=p(this,We).getActive();N(this,wh,!n||n.isEmpty())}startDrawingSession(e){if(this.div.focus(),p(this,Vr)){p(this,Ht,us).startDrawing(this,p(this,We),!1,e);return}p(this,We).setCurrentDrawingSession(this),N(this,Vr,new AbortController);const t=p(this,We).combinedSignal(p(this,Vr));this.div.addEventListener("blur",({relatedTarget:n})=>{n&&!this.div.contains(n)&&(N(this,da,null),this.commitOrRemove())},{signal:t}),p(this,Ht,us).startDrawing(this,p(this,We),!1,e)}pause(e){if(e){const{activeElement:t}=document;this.div.contains(t)&&N(this,da,t);return}p(this,da)&&setTimeout(()=>{var t;(t=p(this,da))==null||t.focus(),N(this,da,null)},0)}endDrawingSession(e=!1){return p(this,Vr)?(p(this,We).setCurrentDrawingSession(null),p(this,Vr).abort(),N(this,Vr,null),N(this,da,null),p(this,Ht,us).endDrawing(e)):null}findNewParent(e,t,n){const r=p(this,We).findParent(t,n);return r===null||r===this?!1:(r.changeParent(e),!0)}commitOrRemove(){return p(this,Vr)?(this.endDrawingSession(),!0):!1}onScaleChanging(){p(this,Vr)&&p(this,Ht,us).onScaleChangingWhenDrawing(this)}destroy(){var e,t;this.commitOrRemove(),((e=p(this,We).getActive())==null?void 0:e.parent)===this&&(p(this,We).commitOrRemove(),p(this,We).setActiveEditor(null)),p(this,fa)&&(clearTimeout(p(this,fa)),N(this,fa,null));for(const n of p(this,mr).values())(t=p(this,au))==null||t.removePointerInTextLayer(n.contentDiv),n.setParent(null),n.isAttachedToDOM=!1,n.div.remove();this.div=null,p(this,mr).clear(),p(this,We).removeLayer(this)}render({viewport:e}){this.viewport=e,yu(this.div,e);for(const t of p(this,We).getEditors(this.pageIndex))this.add(t),t.rebuild();this.updateMode()}update({viewport:e}){p(this,We).commitOrRemove(),M(this,Ht,wm).call(this);const t=this.viewport.rotation,n=e.rotation;if(this.viewport=e,yu(this.div,{rotation:n}),t!==n)for(const r of p(this,mr).values())r.rotate(n)}get pageDimensions(){const{pageWidth:e,pageHeight:t}=this.viewport.rawDims;return[e,t]}get scale(){return p(this,We).viewParameters.realScale}};au=new WeakMap,wh=new WeakMap,Ts=new WeakMap,vo=new WeakMap,fa=new WeakMap,mr=new WeakMap,yo=new WeakMap,_h=new WeakMap,ou=new WeakMap,Vr=new WeakMap,da=new WeakMap,ti=new WeakMap,pa=new WeakMap,We=new WeakMap,bo=new WeakMap,Ht=new WeakSet,pk=function(e){p(this,We).unselectAll();const{target:t}=e;if(t===p(this,ti).div||(t.getAttribute("role")==="img"||t.classList.contains("endOfContent"))&&p(this,ti).div.contains(t)){const{isMac:n}=gi.platform;if(e.button!==0||e.ctrlKey&&n)return;p(this,We).showAllEditors("highlight",!0,!0),p(this,ti).div.classList.add("free"),this.toggleDrawing(),iv.startHighlighting(this,p(this,We).direction==="ltr",{target:p(this,ti).div,x:e.x,y:e.y}),p(this,ti).div.addEventListener("pointerup",()=>{p(this,ti).div.classList.remove("free"),this.toggleDrawing(!0)},{once:!0,signal:p(this,We)._signal}),e.preventDefault()}},us=function(){return p(Rr,bo).get(p(this,We).getMode())},j1=function(e){const t=p(this,Ht,us);return t?new t.prototype.constructor(e):null},z1=function(){const{x:e,y:t,width:n,height:r}=this.div.getBoundingClientRect(),s=Math.max(0,e),a=Math.max(0,t),o=Math.min(window.innerWidth,e+n),l=Math.min(window.innerHeight,t+r),u=(s+o)/2-e,c=(a+l)/2-t,[h,f]=this.viewport.rotation%180===0?[u,c]:[c,u];return{offsetX:h,offsetY:f}},wm=function(){for(const e of p(this,mr).values())e.isEmpty()&&e.remove()},Ze(Rr,"_initialized",!1),L(Rr,bo,new Map([b1,L1,I1,iv].map(e=>[e._editorType,e])));let B1=Rr;var Gr,Up,fi,lu,zv,gk,Ls,q1,mk,H1;const Zn=class Zn{constructor({pageIndex:e}){L(this,Ls);L(this,Gr,null);L(this,Up,0);L(this,fi,new Map);L(this,lu,new Map);this.pageIndex=e}setParent(e){if(!p(this,Gr)){N(this,Gr,e);return}if(p(this,Gr)!==e){if(p(this,fi).size>0)for(const t of p(this,fi).values())t.remove(),e.append(t);N(this,Gr,e)}}static get _svgFactory(){return ot(this,"_svgFactory",new f_)}draw(e,t=!1,n=!1){const r=oi(this,Up)._++,s=M(this,Ls,q1).call(this),a=Zn._svgFactory.createElement("defs");s.append(a);const o=Zn._svgFactory.createElement("path");a.append(o);const l=`path_p${this.pageIndex}_${r}`;o.setAttribute("id",l),o.setAttribute("vector-effect","non-scaling-stroke"),t&&p(this,lu).set(r,o);const u=n?M(this,Ls,mk).call(this,a,l):null,c=Zn._svgFactory.createElement("use");return s.append(c),c.setAttribute("href",`#${l}`),this.updateProperties(s,e),p(this,fi).set(r,s),{id:r,clipPathId:`url(#${u})`}}drawOutline(e,t){const n=oi(this,Up)._++,r=M(this,Ls,q1).call(this),s=Zn._svgFactory.createElement("defs");r.append(s);const a=Zn._svgFactory.createElement("path");s.append(a);const o=`path_p${this.pageIndex}_${n}`;a.setAttribute("id",o),a.setAttribute("vector-effect","non-scaling-stroke");let l;if(t){const h=Zn._svgFactory.createElement("mask");s.append(h),l=`mask_p${this.pageIndex}_${n}`,h.setAttribute("id",l),h.setAttribute("maskUnits","objectBoundingBox");const f=Zn._svgFactory.createElement("rect");h.append(f),f.setAttribute("width","1"),f.setAttribute("height","1"),f.setAttribute("fill","white");const d=Zn._svgFactory.createElement("use");h.append(d),d.setAttribute("href",`#${o}`),d.setAttribute("stroke","none"),d.setAttribute("fill","black"),d.setAttribute("fill-rule","nonzero"),d.classList.add("mask")}const u=Zn._svgFactory.createElement("use");r.append(u),u.setAttribute("href",`#${o}`),l&&u.setAttribute("mask",`url(#${l})`);const c=u.cloneNode();return r.append(c),u.classList.add("mainOutline"),c.classList.add("secondaryOutline"),this.updateProperties(r,e),p(this,fi).set(n,r),n}finalizeDraw(e,t){p(this,lu).delete(e),this.updateProperties(e,t)}updateProperties(e,t){var l;if(!t)return;const{root:n,bbox:r,rootClass:s,path:a}=t,o=typeof e=="number"?p(this,fi).get(e):e;if(o){if(n&&M(this,Ls,H1).call(this,o,n),r&&M(l=Zn,zv,gk).call(l,o,r),s){const{classList:u}=o;for(const[c,h]of Object.entries(s))u.toggle(c,h)}if(a){const c=o.firstChild.firstChild;M(this,Ls,H1).call(this,c,a)}}}updateParent(e,t){if(t===this)return;const n=p(this,fi).get(e);n&&(p(t,Gr).append(n),p(this,fi).delete(e),p(t,fi).set(e,n))}remove(e){p(this,lu).delete(e),p(this,Gr)!==null&&(p(this,fi).get(e).remove(),p(this,fi).delete(e))}destroy(){N(this,Gr,null);for(const e of p(this,fi).values())e.remove();p(this,fi).clear(),p(this,lu).clear()}};Gr=new WeakMap,Up=new WeakMap,fi=new WeakMap,lu=new WeakMap,zv=new WeakSet,gk=function(e,[t,n,r,s]){const{style:a}=e;a.top=`${100*n}%`,a.left=`${100*t}%`,a.width=`${100*r}%`,a.height=`${100*s}%`},Ls=new WeakSet,q1=function(){const e=Zn._svgFactory.create(1,1,!0);return p(this,Gr).append(e),e.setAttribute("aria-hidden",!0),e},mk=function(e,t){const n=Zn._svgFactory.createElement("clipPath");e.append(n);const r=`clip_${t}`;n.setAttribute("id",r),n.setAttribute("clipPathUnits","objectBoundingBox");const s=Zn._svgFactory.createElement("use");return n.append(s),s.setAttribute("href",`#${t}`),s.classList.add("clip"),r},H1=function(e,t){for(const[n,r]of Object.entries(t))r===null?e.removeAttribute(n):e.setAttribute(n,r)},L(Zn,zv);let U1=Zn;globalThis.pdfjsTestingUtils={HighlightOutliner:_1};et.AbortException;et.AnnotationEditorLayer;et.AnnotationEditorParamsType;et.AnnotationEditorType;et.AnnotationEditorUIManager;et.AnnotationLayer;et.AnnotationMode;et.ColorPicker;et.DOMSVGFactory;et.DrawLayer;et.FeatureTest;var e3=et.GlobalWorkerOptions;et.ImageKind;et.InvalidPDFException;et.MissingPDFException;et.OPS;et.OutputScale;et.PDFDataRangeTransport;et.PDFDateString;et.PDFWorker;et.PasswordResponses;et.PermissionFlag;et.PixelsPerInch;et.RenderingCancelledException;et.TextLayer;et.TouchManager;et.UnexpectedResponseException;et.Util;et.VerbosityLevel;et.XfaLayer;et.build;et.createValidAbsoluteUrl;et.fetchData;var t3=et.getDocument;et.getFilenameFromUrl;et.getPdfFilenameFromUrl;et.getXfaPageViewport;et.isDataScheme;et.isPdfFile;et.noContextMenu;et.normalizeUnicode;et.setLayerDimensions;et.shadow;et.stopEvent;et.version;e3.workerSrc=new URL("/solonook/assets/pdf.worker-BgryrOlp.mjs",import.meta.url).toString();function n3({url:i,initialPage:e,onLocation:t}){const n=gt.useRef(null),[r,s]=gt.useState(null),[a,o]=gt.useState(Math.max(1,e||1)),[l,u]=gt.useState(0),[c,h]=gt.useState(!0);gt.useEffect(()=>{let y=!0;return(async()=>{const b=await t3(i).promise;if(!y)return;s(b),u(b.numPages);const v=Math.min(Math.max(1,a),b.numPages);o(v)})(),()=>{y=!1}},[i]),gt.useEffect(()=>{r&&(i3(r,a,n.current,c),t(a))},[r,a,c]);function f(){o(y=>Math.max(1,y-1))}function d(){o(y=>Math.min(l||1,y+1))}return ue.jsxs("div",{children:[ue.jsxs("div",{className:"row",style:{padding:12,justifyContent:"space-between"},children:[ue.jsxs("div",{className:"row",children:[ue.jsx("button",{className:"btn",onClick:f,disabled:a<=1,children:""}),ue.jsxs("div",{className:"small",children:["Page ",ue.jsx("b",{children:a})," / ",l||""]}),ue.jsx("button",{className:"btn",onClick:d,disabled:l?a>=l:!1,children:""})]}),ue.jsx("div",{className:"row",children:ue.jsx("button",{className:"btn",onClick:()=>h(y=>!y),title:"Fit width toggle",children:c?"Fit width":"Actual"})})]}),ue.jsx("div",{className:"pdfCanvasWrap",children:ue.jsx("canvas",{ref:n,style:{borderRadius:12,border:"1px solid rgba(255,255,255,0.08)"}})}),ue.jsx("div",{className:"small",style:{padding:"0 12px 12px"},children:"Tip: PDFs are fixed-layout, so font changes are limited. Use zoom + fit width + night mode (coming next)."})]})}async function i3(i,e,t,n){if(!t)return;const r=await i.getPage(e),s=t.getContext("2d");if(!s)return;const a=r.getViewport({scale:1}),o=Math.min(window.innerWidth-80,880),l=n?o/a.width:1.3,u=r.getViewport({scale:l});t.width=Math.floor(u.width),t.height=Math.floor(u.height),await r.render({canvasContext:s,viewport:u}).promise}var W1={exports:{}},vk={exports:{}},r3=void 0,yk=function(i){return i!==r3&&i!==null},s3=yk,a3={object:!0,function:!0,undefined:!0},o3=function(i){return s3(i)?hasOwnProperty.call(a3,typeof i):!1},l3=o3,u3=function(i){if(!l3(i))return!1;try{return i.constructor?i.constructor.prototype===i:!1}catch{return!1}},c3=u3,h3=function(i){if(typeof i!="function"||!hasOwnProperty.call(i,"length"))return!1;try{if(typeof i.length!="number"||typeof i.call!="function"||typeof i.apply!="function")return!1}catch{return!1}return!c3(i)},f3=h3,d3=/^\s*class[\s{/}]/,p3=Function.prototype.toString,g3=function(i){return!(!f3(i)||d3.test(p3.call(i)))},m3=function(){var i=Object.assign,e;return typeof i!="function"?!1:(e={foo:"raz"},i(e,{bar:"dwa"},{trzy:"trzy"}),e.foo+e.bar+e.trzy==="razdwatrzy")},p0,ME;function v3(){return ME||(ME=1,p0=function(){try{return Object.keys("primitive"),!0}catch{return!1}}),p0}var y3=function(){},b3=y3(),p_=function(i){return i!==b3&&i!==null},g0,FE;function w3(){if(FE)return g0;FE=1;var i=p_,e=Object.keys;return g0=function(t){return e(i(t)?Object(t):t)},g0}var m0,BE;function _3(){return BE||(BE=1,m0=v3()()?Object.keys:w3()),m0}var v0,jE;function E3(){if(jE)return v0;jE=1;var i=p_;return v0=function(e){if(!i(e))throw new TypeError("Cannot use null or undefined");return e},v0}var y0,zE;function A3(){if(zE)return y0;zE=1;var i=_3(),e=E3(),t=Math.max;return y0=function(n,r){var s,a,o=t(arguments.length,2),l;for(n=Object(e(n)),l=function(u){try{n[u]=r[u]}catch(c){s||(s=c)}},a=1;a<o;++a)r=arguments[a],i(r).forEach(l);if(s!==void 0)throw s;return n},y0}var x3=m3()?Object.assign:A3(),S3=p_,C3=Array.prototype.forEach,T3=Object.create,k3=function(i,e){var t;for(t in i)e[t]=i[t]},D3=function(i){var e=T3(null);return C3.call(arguments,function(t){S3(t)&&k3(Object(t),e)}),e},b0="razdwatrzy",O3=function(){return typeof b0.contains!="function"?!1:b0.contains("dwa")===!0&&b0.contains("foo")===!1},w0,UE;function N3(){if(UE)return w0;UE=1;var i=String.prototype.indexOf;return w0=function(e){return i.call(this,e,arguments[1])>-1},w0}var R3=O3()?String.prototype.contains:N3(),_m=yk,qE=g3,bk=x3,wk=D3,zf=R3,P3=vk.exports=function(i,e){var t,n,r,s,a;return arguments.length<2||typeof i!="string"?(s=e,e=i,i=null):s=arguments[2],_m(i)?(t=zf.call(i,"c"),n=zf.call(i,"e"),r=zf.call(i,"w")):(t=r=!0,n=!1),a={value:e,configurable:t,enumerable:n,writable:r},s?bk(wk(s),a):a};P3.gs=function(i,e,t){var n,r,s,a;return typeof i!="string"?(s=t,t=e,e=i,i=null):s=arguments[3],_m(e)?qE(e)?_m(t)?qE(t)||(s=t,t=void 0):t=void 0:(s=e,e=t=void 0):e=void 0,_m(i)?(n=zf.call(i,"c"),r=zf.call(i,"e")):(n=!0,r=!1),a={get:e,set:t,configurable:n,enumerable:r},s?bk(wk(s),a):a};var L3=vk.exports,I3=function(i){if(typeof i!="function")throw new TypeError(i+" is not a function");return i};(function(i,e){var t=L3,n=I3,r=Function.prototype.apply,s=Function.prototype.call,a=Object.create,o=Object.defineProperty,l=Object.defineProperties,u=Object.prototype.hasOwnProperty,c={configurable:!0,enumerable:!1,writable:!0},h,f,d,y,b,v,g;h=function(m,w){var _;return n(w),u.call(this,"__ee__")?_=this.__ee__:(_=c.value=a(null),o(this,"__ee__",c),c.value=null),_[m]?typeof _[m]=="object"?_[m].push(w):_[m]=[_[m],w]:_[m]=w,this},f=function(m,w){var _,E;return n(w),E=this,h.call(this,m,_=function(){d.call(E,m,_),r.call(w,this,arguments)}),_.__eeOnceListener__=w,this},d=function(m,w){var _,E,x,A;if(n(w),!u.call(this,"__ee__"))return this;if(_=this.__ee__,!_[m])return this;if(E=_[m],typeof E=="object")for(A=0;x=E[A];++A)(x===w||x.__eeOnceListener__===w)&&(E.length===2?_[m]=E[A?0:1]:E.splice(A,1));else(E===w||E.__eeOnceListener__===w)&&delete _[m];return this},y=function(m){var w,_,E,x,A;if(u.call(this,"__ee__")&&(x=this.__ee__[m],!!x))if(typeof x=="object"){for(_=arguments.length,A=new Array(_-1),w=1;w<_;++w)A[w-1]=arguments[w];for(x=x.slice(),w=0;E=x[w];++w)r.call(E,this,A)}else switch(arguments.length){case 1:s.call(x,this);break;case 2:s.call(x,this,arguments[1]);break;case 3:s.call(x,this,arguments[1],arguments[2]);break;default:for(_=arguments.length,A=new Array(_-1),w=1;w<_;++w)A[w-1]=arguments[w];r.call(x,this,A)}},b={on:h,once:f,off:d,emit:y},v={on:t(h),once:t(f),off:t(d),emit:t(y)},g=l({},v),i.exports=e=function(m){return m==null?a(g):l(Object(m),v)},e.methods=b})(W1,W1.exports);var M3=W1.exports;const Is=zo(M3);var Vo={},Go={};function F3(i,e,t){if(t===void 0&&(t=Array.prototype),i&&typeof t.find=="function")return t.find.call(i,e);for(var n=0;n<i.length;n++)if(Object.prototype.hasOwnProperty.call(i,n)){var r=i[n];if(e.call(void 0,r,n,i))return r}}function g_(i,e){return e===void 0&&(e=Object),e&&typeof e.freeze=="function"?e.freeze(i):i}var _k=g_({HTML:"text/html",isHTML:function(i){return i===_k.HTML},XML_APPLICATION:"application/xml",XML_TEXT:"text/xml",XML_XHTML_APPLICATION:"application/xhtml+xml",XML_SVG_IMAGE:"image/svg+xml"}),Ek=g_({HTML:"http://www.w3.org/1999/xhtml",isHTML:function(i){return i===Ek.HTML},SVG:"http://www.w3.org/2000/svg",XML:"http://www.w3.org/XML/1998/namespace",XMLNS:"http://www.w3.org/2000/xmlns/"});Go.find=F3;Go.freeze=g_;Go.MIME_TYPE=_k;Go.NAMESPACE=Ek;var Ak=Go,Ns=Ak.find,hd=Ak.NAMESPACE;function B3(i){return i!==""}function j3(i){return i?i.split(/[\t\n\f\r ]+/).filter(B3):[]}function z3(i,e){return i.hasOwnProperty(e)||(i[e]=!0),i}function HE(i){if(!i)return[];var e=j3(i);return Object.keys(e.reduce(z3,{}))}function U3(i){return function(e){return i&&i.indexOf(e)!==-1}}function Zp(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function Ii(i,e){var t=i.prototype;if(!(t instanceof e)){let n=function(){};n.prototype=e.prototype,n=new n,Zp(t,n),i.prototype=t=n}t.constructor!=i&&(typeof i!="function"&&console.error("unknown Class:"+i),t.constructor=i)}var Mi={},es=Mi.ELEMENT_NODE=1,Dh=Mi.ATTRIBUTE_NODE=2,sv=Mi.TEXT_NODE=3,xk=Mi.CDATA_SECTION_NODE=4,Sk=Mi.ENTITY_REFERENCE_NODE=5,q3=Mi.ENTITY_NODE=6,Ck=Mi.PROCESSING_INSTRUCTION_NODE=7,Tk=Mi.COMMENT_NODE=8,kk=Mi.DOCUMENT_NODE=9,Dk=Mi.DOCUMENT_TYPE_NODE=10,Ta=Mi.DOCUMENT_FRAGMENT_NODE=11,H3=Mi.NOTATION_NODE=12,ai={},In={};ai.INDEX_SIZE_ERR=(In[1]="Index size error",1);ai.DOMSTRING_SIZE_ERR=(In[2]="DOMString size error",2);var Oi=ai.HIERARCHY_REQUEST_ERR=(In[3]="Hierarchy request error",3);ai.WRONG_DOCUMENT_ERR=(In[4]="Wrong document",4);ai.INVALID_CHARACTER_ERR=(In[5]="Invalid character",5);ai.NO_DATA_ALLOWED_ERR=(In[6]="No data allowed",6);ai.NO_MODIFICATION_ALLOWED_ERR=(In[7]="No modification allowed",7);var Ok=ai.NOT_FOUND_ERR=(In[8]="Not found",8);ai.NOT_SUPPORTED_ERR=(In[9]="Not supported",9);var WE=ai.INUSE_ATTRIBUTE_ERR=(In[10]="Attribute in use",10);ai.INVALID_STATE_ERR=(In[11]="Invalid state",11);ai.SYNTAX_ERR=(In[12]="Syntax error",12);ai.INVALID_MODIFICATION_ERR=(In[13]="Invalid modification",13);ai.NAMESPACE_ERR=(In[14]="Invalid namespace",14);ai.INVALID_ACCESS_ERR=(In[15]="Invalid access",15);function on(i,e){if(e instanceof Error)var t=e;else t=this,Error.call(this,In[i]),this.message=In[i],Error.captureStackTrace&&Error.captureStackTrace(this,on);return t.code=i,e&&(this.message=this.message+": "+e),t}on.prototype=Error.prototype;Zp(ai,on);function wa(){}wa.prototype={length:0,item:function(i){return i>=0&&i<this.length?this[i]:null},toString:function(i,e){for(var t=[],n=0;n<this.length;n++)sc(this[n],t,i,e);return t.join("")},filter:function(i){return Array.prototype.filter.call(this,i)},indexOf:function(i){return Array.prototype.indexOf.call(this,i)}};function Oh(i,e){this._node=i,this._refresh=e,m_(this)}function m_(i){var e=i._node._inc||i._node.ownerDocument._inc;if(i._inc!==e){var t=i._refresh(i._node);if(qk(i,"length",t.length),!i.$$length||t.length<i.$$length)for(var n=t.length;n in i;n++)Object.prototype.hasOwnProperty.call(i,n)&&delete i[n];Zp(t,i),i._inc=e}}Oh.prototype.item=function(i){return m_(this),this[i]||null};Ii(Oh,wa);function av(){}function Nk(i,e){for(var t=i.length;t--;)if(i[t]===e)return t}function $E(i,e,t,n){if(n?e[Nk(e,n)]=t:e[e.length++]=t,i){t.ownerElement=i;var r=i.ownerDocument;r&&(n&&Lk(r,i,n),W3(r,i,t))}}function VE(i,e,t){var n=Nk(e,t);if(n>=0){for(var r=e.length-1;n<r;)e[n]=e[++n];if(e.length=r,i){var s=i.ownerDocument;s&&(Lk(s,i,t),t.ownerElement=null)}}else throw new on(Ok,new Error(i.tagName+"@"+t))}av.prototype={length:0,item:wa.prototype.item,getNamedItem:function(i){for(var e=this.length;e--;){var t=this[e];if(t.nodeName==i)return t}},setNamedItem:function(i){var e=i.ownerElement;if(e&&e!=this._ownerElement)throw new on(WE);var t=this.getNamedItem(i.nodeName);return $E(this._ownerElement,this,i,t),t},setNamedItemNS:function(i){var e=i.ownerElement,t;if(e&&e!=this._ownerElement)throw new on(WE);return t=this.getNamedItemNS(i.namespaceURI,i.localName),$E(this._ownerElement,this,i,t),t},removeNamedItem:function(i){var e=this.getNamedItem(i);return VE(this._ownerElement,this,e),e},removeNamedItemNS:function(i,e){var t=this.getNamedItemNS(i,e);return VE(this._ownerElement,this,t),t},getNamedItemNS:function(i,e){for(var t=this.length;t--;){var n=this[t];if(n.localName==e&&n.namespaceURI==i)return n}return null}};function Rk(){}Rk.prototype={hasFeature:function(i,e){return!0},createDocument:function(i,e,t){var n=new Qp;if(n.implementation=this,n.childNodes=new wa,n.doctype=t||null,t&&n.appendChild(t),e){var r=n.createElementNS(i,e);n.appendChild(r)}return n},createDocumentType:function(i,e,t){var n=new py;return n.name=i,n.nodeName=i,n.publicId=e||"",n.systemId=t||"",n}};function Tt(){}Tt.prototype={firstChild:null,lastChild:null,previousSibling:null,nextSibling:null,attributes:null,parentNode:null,childNodes:null,ownerDocument:null,nodeValue:null,namespaceURI:null,prefix:null,localName:null,insertBefore:function(i,e){return ov(this,i,e)},replaceChild:function(i,e){ov(this,i,e,Mk),e&&this.removeChild(e)},removeChild:function(i){return Ik(this,i)},appendChild:function(i){return this.insertBefore(i,null)},hasChildNodes:function(){return this.firstChild!=null},cloneNode:function(i){return $1(this.ownerDocument||this,this,i)},normalize:function(){for(var i=this.firstChild;i;){var e=i.nextSibling;e&&e.nodeType==sv&&i.nodeType==sv?(this.removeChild(e),i.appendData(e.data)):(i.normalize(),i=e)}},isSupported:function(i,e){return this.ownerDocument.implementation.hasFeature(i,e)},hasAttributes:function(){return this.attributes.length>0},lookupPrefix:function(i){for(var e=this;e;){var t=e._nsMap;if(t){for(var n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&t[n]===i)return n}e=e.nodeType==Dh?e.ownerDocument:e.parentNode}return null},lookupNamespaceURI:function(i){for(var e=this;e;){var t=e._nsMap;if(t&&i in t&&Object.prototype.hasOwnProperty.call(t,i))return t[i];e=e.nodeType==Dh?e.ownerDocument:e.parentNode}return null},isDefaultNamespace:function(i){var e=this.lookupPrefix(i);return e==null}};function Pk(i){return i=="<"&&"&lt;"||i==">"&&"&gt;"||i=="&"&&"&amp;"||i=='"'&&"&quot;"||"&#"+i.charCodeAt()+";"}Zp(Mi,Tt);Zp(Mi,Tt.prototype);function fd(i,e){if(e(i))return!0;if(i=i.firstChild)do if(fd(i,e))return!0;while(i=i.nextSibling)}function Qp(){this.ownerDocument=this}function W3(i,e,t){i&&i._inc++;var n=t.namespaceURI;n===hd.XMLNS&&(e._nsMap[t.prefix?t.localName:""]=t.value)}function Lk(i,e,t,n){i&&i._inc++;var r=t.namespaceURI;r===hd.XMLNS&&delete e._nsMap[t.prefix?t.localName:""]}function v_(i,e,t){if(i&&i._inc){i._inc++;var n=e.childNodes;if(t)n[n.length++]=t;else{for(var r=e.firstChild,s=0;r;)n[s++]=r,r=r.nextSibling;n.length=s,delete n[n.length]}}}function Ik(i,e){var t=e.previousSibling,n=e.nextSibling;return t?t.nextSibling=n:i.firstChild=n,n?n.previousSibling=t:i.lastChild=t,e.parentNode=null,e.previousSibling=null,e.nextSibling=null,v_(i.ownerDocument,i),e}function $3(i){return i&&(i.nodeType===Tt.DOCUMENT_NODE||i.nodeType===Tt.DOCUMENT_FRAGMENT_NODE||i.nodeType===Tt.ELEMENT_NODE)}function V3(i){return i&&(Rs(i)||y_(i)||ka(i)||i.nodeType===Tt.DOCUMENT_FRAGMENT_NODE||i.nodeType===Tt.COMMENT_NODE||i.nodeType===Tt.PROCESSING_INSTRUCTION_NODE)}function ka(i){return i&&i.nodeType===Tt.DOCUMENT_TYPE_NODE}function Rs(i){return i&&i.nodeType===Tt.ELEMENT_NODE}function y_(i){return i&&i.nodeType===Tt.TEXT_NODE}function GE(i,e){var t=i.childNodes||[];if(Ns(t,Rs)||ka(e))return!1;var n=Ns(t,ka);return!(e&&n&&t.indexOf(n)>t.indexOf(e))}function XE(i,e){var t=i.childNodes||[];function n(s){return Rs(s)&&s!==e}if(Ns(t,n))return!1;var r=Ns(t,ka);return!(e&&r&&t.indexOf(r)>t.indexOf(e))}function G3(i,e,t){if(!$3(i))throw new on(Oi,"Unexpected parent node type "+i.nodeType);if(t&&t.parentNode!==i)throw new on(Ok,"child not in parent");if(!V3(e)||ka(e)&&i.nodeType!==Tt.DOCUMENT_NODE)throw new on(Oi,"Unexpected node type "+e.nodeType+" for parent node type "+i.nodeType)}function X3(i,e,t){var n=i.childNodes||[],r=e.childNodes||[];if(e.nodeType===Tt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(Rs);if(s.length>1||Ns(r,y_))throw new on(Oi,"More than one element or text in fragment");if(s.length===1&&!GE(i,t))throw new on(Oi,"Element in fragment can not be inserted before doctype")}if(Rs(e)&&!GE(i,t))throw new on(Oi,"Only one element can be added and only after doctype");if(ka(e)){if(Ns(n,ka))throw new on(Oi,"Only one doctype is allowed");var a=Ns(n,Rs);if(t&&n.indexOf(a)<n.indexOf(t))throw new on(Oi,"Doctype can only be inserted before an element");if(!t&&a)throw new on(Oi,"Doctype can not be appended since element is present")}}function Mk(i,e,t){var n=i.childNodes||[],r=e.childNodes||[];if(e.nodeType===Tt.DOCUMENT_FRAGMENT_NODE){var s=r.filter(Rs);if(s.length>1||Ns(r,y_))throw new on(Oi,"More than one element or text in fragment");if(s.length===1&&!XE(i,t))throw new on(Oi,"Element in fragment can not be inserted before doctype")}if(Rs(e)&&!XE(i,t))throw new on(Oi,"Only one element can be added and only after doctype");if(ka(e)){if(Ns(n,function(l){return ka(l)&&l!==t}))throw new on(Oi,"Only one doctype is allowed");var a=Ns(n,Rs);if(t&&n.indexOf(a)<n.indexOf(t))throw new on(Oi,"Doctype can only be inserted before an element")}}function ov(i,e,t,n){G3(i,e,t),i.nodeType===Tt.DOCUMENT_NODE&&(n||X3)(i,e,t);var r=e.parentNode;if(r&&r.removeChild(e),e.nodeType===Ta){var s=e.firstChild;if(s==null)return e;var a=e.lastChild}else s=a=e;var o=t?t.previousSibling:i.lastChild;s.previousSibling=o,a.nextSibling=t,o?o.nextSibling=s:i.firstChild=s,t==null?i.lastChild=a:t.previousSibling=a;do s.parentNode=i;while(s!==a&&(s=s.nextSibling));return v_(i.ownerDocument||i,i),e.nodeType==Ta&&(e.firstChild=e.lastChild=null),e}function K3(i,e){return e.parentNode&&e.parentNode.removeChild(e),e.parentNode=i,e.previousSibling=i.lastChild,e.nextSibling=null,e.previousSibling?e.previousSibling.nextSibling=e:i.firstChild=e,i.lastChild=e,v_(i.ownerDocument,i,e),e}Qp.prototype={nodeName:"#document",nodeType:kk,doctype:null,documentElement:null,_inc:1,insertBefore:function(i,e){if(i.nodeType==Ta){for(var t=i.firstChild;t;){var n=t.nextSibling;this.insertBefore(t,e),t=n}return i}return ov(this,i,e),i.ownerDocument=this,this.documentElement===null&&i.nodeType===es&&(this.documentElement=i),i},removeChild:function(i){return this.documentElement==i&&(this.documentElement=null),Ik(this,i)},replaceChild:function(i,e){ov(this,i,e,Mk),i.ownerDocument=this,e&&this.removeChild(e),Rs(i)&&(this.documentElement=i)},importNode:function(i,e){return Uk(this,i,e)},getElementById:function(i){var e=null;return fd(this.documentElement,function(t){if(t.nodeType==es&&t.getAttribute("id")==i)return e=t,!0}),e},getElementsByClassName:function(i){var e=HE(i);return new Oh(this,function(t){var n=[];return e.length>0&&fd(t.documentElement,function(r){if(r!==t&&r.nodeType===es){var s=r.getAttribute("class");if(s){var a=i===s;if(!a){var o=HE(s);a=e.every(U3(o))}a&&n.push(r)}}}),n})},createElement:function(i){var e=new _u;e.ownerDocument=this,e.nodeName=i,e.tagName=i,e.localName=i,e.childNodes=new wa;var t=e.attributes=new av;return t._ownerElement=e,e},createDocumentFragment:function(){var i=new gy;return i.ownerDocument=this,i.childNodes=new wa,i},createTextNode:function(i){var e=new b_;return e.ownerDocument=this,e.appendData(i),e},createComment:function(i){var e=new w_;return e.ownerDocument=this,e.appendData(i),e},createCDATASection:function(i){var e=new __;return e.ownerDocument=this,e.appendData(i),e},createProcessingInstruction:function(i,e){var t=new A_;return t.ownerDocument=this,t.tagName=t.nodeName=t.target=i,t.nodeValue=t.data=e,t},createAttribute:function(i){var e=new lv;return e.ownerDocument=this,e.name=i,e.nodeName=i,e.localName=i,e.specified=!0,e},createEntityReference:function(i){var e=new E_;return e.ownerDocument=this,e.nodeName=i,e},createElementNS:function(i,e){var t=new _u,n=e.split(":"),r=t.attributes=new av;return t.childNodes=new wa,t.ownerDocument=this,t.nodeName=e,t.tagName=e,t.namespaceURI=i,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,r._ownerElement=t,t},createAttributeNS:function(i,e){var t=new lv,n=e.split(":");return t.ownerDocument=this,t.nodeName=e,t.name=e,t.namespaceURI=i,t.specified=!0,n.length==2?(t.prefix=n[0],t.localName=n[1]):t.localName=e,t}};Ii(Qp,Tt);function _u(){this._nsMap={}}_u.prototype={nodeType:es,hasAttribute:function(i){return this.getAttributeNode(i)!=null},getAttribute:function(i){var e=this.getAttributeNode(i);return e&&e.value||""},getAttributeNode:function(i){return this.attributes.getNamedItem(i)},setAttribute:function(i,e){var t=this.ownerDocument.createAttribute(i);t.value=t.nodeValue=""+e,this.setAttributeNode(t)},removeAttribute:function(i){var e=this.getAttributeNode(i);e&&this.removeAttributeNode(e)},appendChild:function(i){return i.nodeType===Ta?this.insertBefore(i,null):K3(this,i)},setAttributeNode:function(i){return this.attributes.setNamedItem(i)},setAttributeNodeNS:function(i){return this.attributes.setNamedItemNS(i)},removeAttributeNode:function(i){return this.attributes.removeNamedItem(i.nodeName)},removeAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);t&&this.removeAttributeNode(t)},hasAttributeNS:function(i,e){return this.getAttributeNodeNS(i,e)!=null},getAttributeNS:function(i,e){var t=this.getAttributeNodeNS(i,e);return t&&t.value||""},setAttributeNS:function(i,e,t){var n=this.ownerDocument.createAttributeNS(i,e);n.value=n.nodeValue=""+t,this.setAttributeNode(n)},getAttributeNodeNS:function(i,e){return this.attributes.getNamedItemNS(i,e)},getElementsByTagName:function(i){return new Oh(this,function(e){var t=[];return fd(e,function(n){n!==e&&n.nodeType==es&&(i==="*"||n.tagName==i)&&t.push(n)}),t})},getElementsByTagNameNS:function(i,e){return new Oh(this,function(t){var n=[];return fd(t,function(r){r!==t&&r.nodeType===es&&(i==="*"||r.namespaceURI===i)&&(e==="*"||r.localName==e)&&n.push(r)}),n})}};Qp.prototype.getElementsByTagName=_u.prototype.getElementsByTagName;Qp.prototype.getElementsByTagNameNS=_u.prototype.getElementsByTagNameNS;Ii(_u,Tt);function lv(){}lv.prototype.nodeType=Dh;Ii(lv,Tt);function Jp(){}Jp.prototype={data:"",substringData:function(i,e){return this.data.substring(i,i+e)},appendData:function(i){i=this.data+i,this.nodeValue=this.data=i,this.length=i.length},insertData:function(i,e){this.replaceData(i,0,e)},appendChild:function(i){throw new Error(In[Oi])},deleteData:function(i,e){this.replaceData(i,e,"")},replaceData:function(i,e,t){var n=this.data.substring(0,i),r=this.data.substring(i+e);t=n+t+r,this.nodeValue=this.data=t,this.length=t.length}};Ii(Jp,Tt);function b_(){}b_.prototype={nodeName:"#text",nodeType:sv,splitText:function(i){var e=this.data,t=e.substring(i);e=e.substring(0,i),this.data=this.nodeValue=e,this.length=e.length;var n=this.ownerDocument.createTextNode(t);return this.parentNode&&this.parentNode.insertBefore(n,this.nextSibling),n}};Ii(b_,Jp);function w_(){}w_.prototype={nodeName:"#comment",nodeType:Tk};Ii(w_,Jp);function __(){}__.prototype={nodeName:"#cdata-section",nodeType:xk};Ii(__,Jp);function py(){}py.prototype.nodeType=Dk;Ii(py,Tt);function Fk(){}Fk.prototype.nodeType=H3;Ii(Fk,Tt);function Bk(){}Bk.prototype.nodeType=q3;Ii(Bk,Tt);function E_(){}E_.prototype.nodeType=Sk;Ii(E_,Tt);function gy(){}gy.prototype.nodeName="#document-fragment";gy.prototype.nodeType=Ta;Ii(gy,Tt);function A_(){}A_.prototype.nodeType=Ck;Ii(A_,Tt);function jk(){}jk.prototype.serializeToString=function(i,e,t){return zk.call(i,e,t)};Tt.prototype.toString=zk;function zk(i,e){var t=[],n=this.nodeType==9&&this.documentElement||this,r=n.prefix,s=n.namespaceURI;if(s&&r==null){var r=n.lookupPrefix(s);if(r==null)var a=[{namespace:s,prefix:null}]}return sc(this,t,i,e,a),t.join("")}function KE(i,e,t){var n=i.prefix||"",r=i.namespaceURI;if(!r||n==="xml"&&r===hd.XML||r===hd.XMLNS)return!1;for(var s=t.length;s--;){var a=t[s];if(a.prefix===n)return a.namespace!==r}return!0}function _0(i,e,t){i.push(" ",e,'="',t.replace(/[<&"]/g,Pk),'"')}function sc(i,e,t,n,r){if(r||(r=[]),n)if(i=n(i),i){if(typeof i=="string"){e.push(i);return}}else return;switch(i.nodeType){case es:var s=i.attributes,a=s.length,g=i.firstChild,o=i.tagName;t=hd.isHTML(i.namespaceURI)||t;var l=o;if(!t&&!i.prefix&&i.namespaceURI){for(var u,c=0;c<s.length;c++)if(s.item(c).name==="xmlns"){u=s.item(c).value;break}if(!u)for(var h=r.length-1;h>=0;h--){var f=r[h];if(f.prefix===""&&f.namespace===i.namespaceURI){u=f.namespace;break}}if(u!==i.namespaceURI)for(var h=r.length-1;h>=0;h--){var f=r[h];if(f.namespace===i.namespaceURI){f.prefix&&(l=f.prefix+":"+o);break}}}e.push("<",l);for(var d=0;d<a;d++){var y=s.item(d);y.prefix=="xmlns"?r.push({prefix:y.localName,namespace:y.value}):y.nodeName=="xmlns"&&r.push({prefix:"",namespace:y.value})}for(var d=0;d<a;d++){var y=s.item(d);if(KE(y,t,r)){var b=y.prefix||"",v=y.namespaceURI;_0(e,b?"xmlns:"+b:"xmlns",v),r.push({prefix:b,namespace:v})}sc(y,e,t,n,r)}if(o===l&&KE(i,t,r)){var b=i.prefix||"",v=i.namespaceURI;_0(e,b?"xmlns:"+b:"xmlns",v),r.push({prefix:b,namespace:v})}if(g||t&&!/^(?:meta|link|img|br|hr|input)$/i.test(o)){if(e.push(">"),t&&/^script$/i.test(o))for(;g;)g.data?e.push(g.data):sc(g,e,t,n,r.slice()),g=g.nextSibling;else for(;g;)sc(g,e,t,n,r.slice()),g=g.nextSibling;e.push("</",l,">")}else e.push("/>");return;case kk:case Ta:for(var g=i.firstChild;g;)sc(g,e,t,n,r.slice()),g=g.nextSibling;return;case Dh:return _0(e,i.name,i.value);case sv:return e.push(i.data.replace(/[<&]/g,Pk).replace(/]]>/g,"]]&gt;"));case xk:return e.push("<![CDATA[",i.data,"]]>");case Tk:return e.push("<!--",i.data,"-->");case Dk:var m=i.publicId,w=i.systemId;if(e.push("<!DOCTYPE ",i.name),m)e.push(" PUBLIC ",m),w&&w!="."&&e.push(" ",w),e.push(">");else if(w&&w!=".")e.push(" SYSTEM ",w,">");else{var _=i.internalSubset;_&&e.push(" [",_,"]"),e.push(">")}return;case Ck:return e.push("<?",i.target," ",i.data,"?>");case Sk:return e.push("&",i.nodeName,";");default:e.push("??",i.nodeName)}}function Uk(i,e,t){var n;switch(e.nodeType){case es:n=e.cloneNode(!1),n.ownerDocument=i;case Ta:break;case Dh:t=!0;break}if(n||(n=e.cloneNode(!1)),n.ownerDocument=i,n.parentNode=null,t)for(var r=e.firstChild;r;)n.appendChild(Uk(i,r,t)),r=r.nextSibling;return n}function $1(i,e,t){var n=new e.constructor;for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){var s=e[r];typeof s!="object"&&s!=n[r]&&(n[r]=s)}switch(e.childNodes&&(n.childNodes=new wa),n.ownerDocument=i,n.nodeType){case es:var a=e.attributes,o=n.attributes=new av,l=a.length;o._ownerElement=n;for(var u=0;u<l;u++)n.setAttributeNode($1(i,a.item(u),!0));break;case Dh:t=!0}if(t)for(var c=e.firstChild;c;)n.appendChild($1(i,c,t)),c=c.nextSibling;return n}function qk(i,e,t){i[e]=t}try{if(Object.defineProperty){let i=function(e){switch(e.nodeType){case es:case Ta:var t=[];for(e=e.firstChild;e;)e.nodeType!==7&&e.nodeType!==8&&t.push(i(e)),e=e.nextSibling;return t.join("");default:return e.nodeValue}};Object.defineProperty(Oh.prototype,"length",{get:function(){return m_(this),this.$$length}}),Object.defineProperty(Tt.prototype,"textContent",{get:function(){return i(this)},set:function(e){switch(this.nodeType){case es:case Ta:for(;this.firstChild;)this.removeChild(this.firstChild);(e||String(e))&&this.appendChild(this.ownerDocument.createTextNode(e));break;default:this.data=e,this.value=e,this.nodeValue=e}}}),qk=function(e,t,n){e["$$"+t]=n}}}catch{}Vo.DocumentType=py;Vo.DOMException=on;Vo.DOMImplementation=Rk;Vo.Element=_u;Vo.Node=Tt;Vo.NodeList=wa;Vo.XMLSerializer=jk;var eg={},Hk={};(function(i){var e=Go.freeze;i.XML_ENTITIES=e({amp:"&",apos:"'",gt:">",lt:"<",quot:'"'}),i.HTML_ENTITIES=e({Aacute:"",aacute:"",Abreve:"",abreve:"",ac:"",acd:"",acE:"",Acirc:"",acirc:"",acute:"",Acy:"",acy:"",AElig:"",aelig:"",af:"",Afr:"",afr:"",Agrave:"",agrave:"",alefsym:"",aleph:"",Alpha:"",alpha:"",Amacr:"",amacr:"",amalg:"",AMP:"&",amp:"&",And:"",and:"",andand:"",andd:"",andslope:"",andv:"",ang:"",ange:"",angle:"",angmsd:"",angmsdaa:"",angmsdab:"",angmsdac:"",angmsdad:"",angmsdae:"",angmsdaf:"",angmsdag:"",angmsdah:"",angrt:"",angrtvb:"",angrtvbd:"",angsph:"",angst:"",angzarr:"",Aogon:"",aogon:"",Aopf:"",aopf:"",ap:"",apacir:"",apE:"",ape:"",apid:"",apos:"'",ApplyFunction:"",approx:"",approxeq:"",Aring:"",aring:"",Ascr:"",ascr:"",Assign:"",ast:"*",asymp:"",asympeq:"",Atilde:"",atilde:"",Auml:"",auml:"",awconint:"",awint:"",backcong:"",backepsilon:"",backprime:"",backsim:"",backsimeq:"",Backslash:"",Barv:"",barvee:"",Barwed:"",barwed:"",barwedge:"",bbrk:"",bbrktbrk:"",bcong:"",Bcy:"",bcy:"",bdquo:"",becaus:"",Because:"",because:"",bemptyv:"",bepsi:"",bernou:"",Bernoullis:"",Beta:"",beta:"",beth:"",between:"",Bfr:"",bfr:"",bigcap:"",bigcirc:"",bigcup:"",bigodot:"",bigoplus:"",bigotimes:"",bigsqcup:"",bigstar:"",bigtriangledown:"",bigtriangleup:"",biguplus:"",bigvee:"",bigwedge:"",bkarow:"",blacklozenge:"",blacksquare:"",blacktriangle:"",blacktriangledown:"",blacktriangleleft:"",blacktriangleright:"",blank:"",blk12:"",blk14:"",blk34:"",block:"",bne:"=",bnequiv:"",bNot:"",bnot:"",Bopf:"",bopf:"",bot:"",bottom:"",bowtie:"",boxbox:"",boxDL:"",boxDl:"",boxdL:"",boxdl:"",boxDR:"",boxDr:"",boxdR:"",boxdr:"",boxH:"",boxh:"",boxHD:"",boxHd:"",boxhD:"",boxhd:"",boxHU:"",boxHu:"",boxhU:"",boxhu:"",boxminus:"",boxplus:"",boxtimes:"",boxUL:"",boxUl:"",boxuL:"",boxul:"",boxUR:"",boxUr:"",boxuR:"",boxur:"",boxV:"",boxv:"",boxVH:"",boxVh:"",boxvH:"",boxvh:"",boxVL:"",boxVl:"",boxvL:"",boxvl:"",boxVR:"",boxVr:"",boxvR:"",boxvr:"",bprime:"",Breve:"",breve:"",brvbar:"",Bscr:"",bscr:"",bsemi:"",bsim:"",bsime:"",bsol:"\\",bsolb:"",bsolhsub:"",bull:"",bullet:"",bump:"",bumpE:"",bumpe:"",Bumpeq:"",bumpeq:"",Cacute:"",cacute:"",Cap:"",cap:"",capand:"",capbrcup:"",capcap:"",capcup:"",capdot:"",CapitalDifferentialD:"",caps:"",caret:"",caron:"",Cayleys:"",ccaps:"",Ccaron:"",ccaron:"",Ccedil:"",ccedil:"",Ccirc:"",ccirc:"",Cconint:"",ccups:"",ccupssm:"",Cdot:"",cdot:"",cedil:"",Cedilla:"",cemptyv:"",cent:"",CenterDot:"",centerdot:"",Cfr:"",cfr:"",CHcy:"",chcy:"",check:"",checkmark:"",Chi:"",chi:"",cir:"",circ:"",circeq:"",circlearrowleft:"",circlearrowright:"",circledast:"",circledcirc:"",circleddash:"",CircleDot:"",circledR:"",circledS:"",CircleMinus:"",CirclePlus:"",CircleTimes:"",cirE:"",cire:"",cirfnint:"",cirmid:"",cirscir:"",ClockwiseContourIntegral:"",CloseCurlyDoubleQuote:"",CloseCurlyQuote:"",clubs:"",clubsuit:"",Colon:"",colon:":",Colone:"",colone:"",coloneq:"",comma:",",commat:"@",comp:"",compfn:"",complement:"",complexes:"",cong:"",congdot:"",Congruent:"",Conint:"",conint:"",ContourIntegral:"",Copf:"",copf:"",coprod:"",Coproduct:"",COPY:"",copy:"",copysr:"",CounterClockwiseContourIntegral:"",crarr:"",Cross:"",cross:"",Cscr:"",cscr:"",csub:"",csube:"",csup:"",csupe:"",ctdot:"",cudarrl:"",cudarrr:"",cuepr:"",cuesc:"",cularr:"",cularrp:"",Cup:"",cup:"",cupbrcap:"",CupCap:"",cupcap:"",cupcup:"",cupdot:"",cupor:"",cups:"",curarr:"",curarrm:"",curlyeqprec:"",curlyeqsucc:"",curlyvee:"",curlywedge:"",curren:"",curvearrowleft:"",curvearrowright:"",cuvee:"",cuwed:"",cwconint:"",cwint:"",cylcty:"",Dagger:"",dagger:"",daleth:"",Darr:"",dArr:"",darr:"",dash:"",Dashv:"",dashv:"",dbkarow:"",dblac:"",Dcaron:"",dcaron:"",Dcy:"",dcy:"",DD:"",dd:"",ddagger:"",ddarr:"",DDotrahd:"",ddotseq:"",deg:"",Del:"",Delta:"",delta:"",demptyv:"",dfisht:"",Dfr:"",dfr:"",dHar:"",dharl:"",dharr:"",DiacriticalAcute:"",DiacriticalDot:"",DiacriticalDoubleAcute:"",DiacriticalGrave:"`",DiacriticalTilde:"",diam:"",Diamond:"",diamond:"",diamondsuit:"",diams:"",die:"",DifferentialD:"",digamma:"",disin:"",div:"",divide:"",divideontimes:"",divonx:"",DJcy:"",djcy:"",dlcorn:"",dlcrop:"",dollar:"$",Dopf:"",dopf:"",Dot:"",dot:"",DotDot:"",doteq:"",doteqdot:"",DotEqual:"",dotminus:"",dotplus:"",dotsquare:"",doublebarwedge:"",DoubleContourIntegral:"",DoubleDot:"",DoubleDownArrow:"",DoubleLeftArrow:"",DoubleLeftRightArrow:"",DoubleLeftTee:"",DoubleLongLeftArrow:"",DoubleLongLeftRightArrow:"",DoubleLongRightArrow:"",DoubleRightArrow:"",DoubleRightTee:"",DoubleUpArrow:"",DoubleUpDownArrow:"",DoubleVerticalBar:"",DownArrow:"",Downarrow:"",downarrow:"",DownArrowBar:"",DownArrowUpArrow:"",DownBreve:"",downdownarrows:"",downharpoonleft:"",downharpoonright:"",DownLeftRightVector:"",DownLeftTeeVector:"",DownLeftVector:"",DownLeftVectorBar:"",DownRightTeeVector:"",DownRightVector:"",DownRightVectorBar:"",DownTee:"",DownTeeArrow:"",drbkarow:"",drcorn:"",drcrop:"",Dscr:"",dscr:"",DScy:"",dscy:"",dsol:"",Dstrok:"",dstrok:"",dtdot:"",dtri:"",dtrif:"",duarr:"",duhar:"",dwangle:"",DZcy:"",dzcy:"",dzigrarr:"",Eacute:"",eacute:"",easter:"",Ecaron:"",ecaron:"",ecir:"",Ecirc:"",ecirc:"",ecolon:"",Ecy:"",ecy:"",eDDot:"",Edot:"",eDot:"",edot:"",ee:"",efDot:"",Efr:"",efr:"",eg:"",Egrave:"",egrave:"",egs:"",egsdot:"",el:"",Element:"",elinters:"",ell:"",els:"",elsdot:"",Emacr:"",emacr:"",empty:"",emptyset:"",EmptySmallSquare:"",emptyv:"",EmptyVerySmallSquare:"",emsp:"",emsp13:"",emsp14:"",ENG:"",eng:"",ensp:"",Eogon:"",eogon:"",Eopf:"",eopf:"",epar:"",eparsl:"",eplus:"",epsi:"",Epsilon:"",epsilon:"",epsiv:"",eqcirc:"",eqcolon:"",eqsim:"",eqslantgtr:"",eqslantless:"",Equal:"",equals:"=",EqualTilde:"",equest:"",Equilibrium:"",equiv:"",equivDD:"",eqvparsl:"",erarr:"",erDot:"",Escr:"",escr:"",esdot:"",Esim:"",esim:"",Eta:"",eta:"",ETH:"",eth:"",Euml:"",euml:"",euro:"",excl:"!",exist:"",Exists:"",expectation:"",ExponentialE:"",exponentiale:"",fallingdotseq:"",Fcy:"",fcy:"",female:"",ffilig:"",fflig:"",ffllig:"",Ffr:"",ffr:"",filig:"",FilledSmallSquare:"",FilledVerySmallSquare:"",fjlig:"fj",flat:"",fllig:"",fltns:"",fnof:"",Fopf:"",fopf:"",ForAll:"",forall:"",fork:"",forkv:"",Fouriertrf:"",fpartint:"",frac12:"",frac13:"",frac14:"",frac15:"",frac16:"",frac18:"",frac23:"",frac25:"",frac34:"",frac35:"",frac38:"",frac45:"",frac56:"",frac58:"",frac78:"",frasl:"",frown:"",Fscr:"",fscr:"",gacute:"",Gamma:"",gamma:"",Gammad:"",gammad:"",gap:"",Gbreve:"",gbreve:"",Gcedil:"",Gcirc:"",gcirc:"",Gcy:"",gcy:"",Gdot:"",gdot:"",gE:"",ge:"",gEl:"",gel:"",geq:"",geqq:"",geqslant:"",ges:"",gescc:"",gesdot:"",gesdoto:"",gesdotol:"",gesl:"",gesles:"",Gfr:"",gfr:"",Gg:"",gg:"",ggg:"",gimel:"",GJcy:"",gjcy:"",gl:"",gla:"",glE:"",glj:"",gnap:"",gnapprox:"",gnE:"",gne:"",gneq:"",gneqq:"",gnsim:"",Gopf:"",gopf:"",grave:"`",GreaterEqual:"",GreaterEqualLess:"",GreaterFullEqual:"",GreaterGreater:"",GreaterLess:"",GreaterSlantEqual:"",GreaterTilde:"",Gscr:"",gscr:"",gsim:"",gsime:"",gsiml:"",Gt:"",GT:">",gt:">",gtcc:"",gtcir:"",gtdot:"",gtlPar:"",gtquest:"",gtrapprox:"",gtrarr:"",gtrdot:"",gtreqless:"",gtreqqless:"",gtrless:"",gtrsim:"",gvertneqq:"",gvnE:"",Hacek:"",hairsp:"",half:"",hamilt:"",HARDcy:"",hardcy:"",hArr:"",harr:"",harrcir:"",harrw:"",Hat:"^",hbar:"",Hcirc:"",hcirc:"",hearts:"",heartsuit:"",hellip:"",hercon:"",Hfr:"",hfr:"",HilbertSpace:"",hksearow:"",hkswarow:"",hoarr:"",homtht:"",hookleftarrow:"",hookrightarrow:"",Hopf:"",hopf:"",horbar:"",HorizontalLine:"",Hscr:"",hscr:"",hslash:"",Hstrok:"",hstrok:"",HumpDownHump:"",HumpEqual:"",hybull:"",hyphen:"",Iacute:"",iacute:"",ic:"",Icirc:"",icirc:"",Icy:"",icy:"",Idot:"",IEcy:"",iecy:"",iexcl:"",iff:"",Ifr:"",ifr:"",Igrave:"",igrave:"",ii:"",iiiint:"",iiint:"",iinfin:"",iiota:"",IJlig:"",ijlig:"",Im:"",Imacr:"",imacr:"",image:"",ImaginaryI:"",imagline:"",imagpart:"",imath:"",imof:"",imped:"",Implies:"",in:"",incare:"",infin:"",infintie:"",inodot:"",Int:"",int:"",intcal:"",integers:"",Integral:"",intercal:"",Intersection:"",intlarhk:"",intprod:"",InvisibleComma:"",InvisibleTimes:"",IOcy:"",iocy:"",Iogon:"",iogon:"",Iopf:"",iopf:"",Iota:"",iota:"",iprod:"",iquest:"",Iscr:"",iscr:"",isin:"",isindot:"",isinE:"",isins:"",isinsv:"",isinv:"",it:"",Itilde:"",itilde:"",Iukcy:"",iukcy:"",Iuml:"",iuml:"",Jcirc:"",jcirc:"",Jcy:"",jcy:"",Jfr:"",jfr:"",jmath:"",Jopf:"",jopf:"",Jscr:"",jscr:"",Jsercy:"",jsercy:"",Jukcy:"",jukcy:"",Kappa:"",kappa:"",kappav:"",Kcedil:"",kcedil:"",Kcy:"",kcy:"",Kfr:"",kfr:"",kgreen:"",KHcy:"",khcy:"",KJcy:"",kjcy:"",Kopf:"",kopf:"",Kscr:"",kscr:"",lAarr:"",Lacute:"",lacute:"",laemptyv:"",lagran:"",Lambda:"",lambda:"",Lang:"",lang:"",langd:"",langle:"",lap:"",Laplacetrf:"",laquo:"",Larr:"",lArr:"",larr:"",larrb:"",larrbfs:"",larrfs:"",larrhk:"",larrlp:"",larrpl:"",larrsim:"",larrtl:"",lat:"",lAtail:"",latail:"",late:"",lates:"",lBarr:"",lbarr:"",lbbrk:"",lbrace:"{",lbrack:"[",lbrke:"",lbrksld:"",lbrkslu:"",Lcaron:"",lcaron:"",Lcedil:"",lcedil:"",lceil:"",lcub:"{",Lcy:"",lcy:"",ldca:"",ldquo:"",ldquor:"",ldrdhar:"",ldrushar:"",ldsh:"",lE:"",le:"",LeftAngleBracket:"",LeftArrow:"",Leftarrow:"",leftarrow:"",LeftArrowBar:"",LeftArrowRightArrow:"",leftarrowtail:"",LeftCeiling:"",LeftDoubleBracket:"",LeftDownTeeVector:"",LeftDownVector:"",LeftDownVectorBar:"",LeftFloor:"",leftharpoondown:"",leftharpoonup:"",leftleftarrows:"",LeftRightArrow:"",Leftrightarrow:"",leftrightarrow:"",leftrightarrows:"",leftrightharpoons:"",leftrightsquigarrow:"",LeftRightVector:"",LeftTee:"",LeftTeeArrow:"",LeftTeeVector:"",leftthreetimes:"",LeftTriangle:"",LeftTriangleBar:"",LeftTriangleEqual:"",LeftUpDownVector:"",LeftUpTeeVector:"",LeftUpVector:"",LeftUpVectorBar:"",LeftVector:"",LeftVectorBar:"",lEg:"",leg:"",leq:"",leqq:"",leqslant:"",les:"",lescc:"",lesdot:"",lesdoto:"",lesdotor:"",lesg:"",lesges:"",lessapprox:"",lessdot:"",lesseqgtr:"",lesseqqgtr:"",LessEqualGreater:"",LessFullEqual:"",LessGreater:"",lessgtr:"",LessLess:"",lesssim:"",LessSlantEqual:"",LessTilde:"",lfisht:"",lfloor:"",Lfr:"",lfr:"",lg:"",lgE:"",lHar:"",lhard:"",lharu:"",lharul:"",lhblk:"",LJcy:"",ljcy:"",Ll:"",ll:"",llarr:"",llcorner:"",Lleftarrow:"",llhard:"",lltri:"",Lmidot:"",lmidot:"",lmoust:"",lmoustache:"",lnap:"",lnapprox:"",lnE:"",lne:"",lneq:"",lneqq:"",lnsim:"",loang:"",loarr:"",lobrk:"",LongLeftArrow:"",Longleftarrow:"",longleftarrow:"",LongLeftRightArrow:"",Longleftrightarrow:"",longleftrightarrow:"",longmapsto:"",LongRightArrow:"",Longrightarrow:"",longrightarrow:"",looparrowleft:"",looparrowright:"",lopar:"",Lopf:"",lopf:"",loplus:"",lotimes:"",lowast:"",lowbar:"_",LowerLeftArrow:"",LowerRightArrow:"",loz:"",lozenge:"",lozf:"",lpar:"(",lparlt:"",lrarr:"",lrcorner:"",lrhar:"",lrhard:"",lrm:"",lrtri:"",lsaquo:"",Lscr:"",lscr:"",Lsh:"",lsh:"",lsim:"",lsime:"",lsimg:"",lsqb:"[",lsquo:"",lsquor:"",Lstrok:"",lstrok:"",Lt:"",LT:"<",lt:"<",ltcc:"",ltcir:"",ltdot:"",lthree:"",ltimes:"",ltlarr:"",ltquest:"",ltri:"",ltrie:"",ltrif:"",ltrPar:"",lurdshar:"",luruhar:"",lvertneqq:"",lvnE:"",macr:"",male:"",malt:"",maltese:"",Map:"",map:"",mapsto:"",mapstodown:"",mapstoleft:"",mapstoup:"",marker:"",mcomma:"",Mcy:"",mcy:"",mdash:"",mDDot:"",measuredangle:"",MediumSpace:"",Mellintrf:"",Mfr:"",mfr:"",mho:"",micro:"",mid:"",midast:"*",midcir:"",middot:"",minus:"",minusb:"",minusd:"",minusdu:"",MinusPlus:"",mlcp:"",mldr:"",mnplus:"",models:"",Mopf:"",mopf:"",mp:"",Mscr:"",mscr:"",mstpos:"",Mu:"",mu:"",multimap:"",mumap:"",nabla:"",Nacute:"",nacute:"",nang:"",nap:"",napE:"",napid:"",napos:"",napprox:"",natur:"",natural:"",naturals:"",nbsp:"",nbump:"",nbumpe:"",ncap:"",Ncaron:"",ncaron:"",Ncedil:"",ncedil:"",ncong:"",ncongdot:"",ncup:"",Ncy:"",ncy:"",ndash:"",ne:"",nearhk:"",neArr:"",nearr:"",nearrow:"",nedot:"",NegativeMediumSpace:"",NegativeThickSpace:"",NegativeThinSpace:"",NegativeVeryThinSpace:"",nequiv:"",nesear:"",nesim:"",NestedGreaterGreater:"",NestedLessLess:"",NewLine:`
`,nexist:"",nexists:"",Nfr:"",nfr:"",ngE:"",nge:"",ngeq:"",ngeqq:"",ngeqslant:"",nges:"",nGg:"",ngsim:"",nGt:"",ngt:"",ngtr:"",nGtv:"",nhArr:"",nharr:"",nhpar:"",ni:"",nis:"",nisd:"",niv:"",NJcy:"",njcy:"",nlArr:"",nlarr:"",nldr:"",nlE:"",nle:"",nLeftarrow:"",nleftarrow:"",nLeftrightarrow:"",nleftrightarrow:"",nleq:"",nleqq:"",nleqslant:"",nles:"",nless:"",nLl:"",nlsim:"",nLt:"",nlt:"",nltri:"",nltrie:"",nLtv:"",nmid:"",NoBreak:"",NonBreakingSpace:"",Nopf:"",nopf:"",Not:"",not:"",NotCongruent:"",NotCupCap:"",NotDoubleVerticalBar:"",NotElement:"",NotEqual:"",NotEqualTilde:"",NotExists:"",NotGreater:"",NotGreaterEqual:"",NotGreaterFullEqual:"",NotGreaterGreater:"",NotGreaterLess:"",NotGreaterSlantEqual:"",NotGreaterTilde:"",NotHumpDownHump:"",NotHumpEqual:"",notin:"",notindot:"",notinE:"",notinva:"",notinvb:"",notinvc:"",NotLeftTriangle:"",NotLeftTriangleBar:"",NotLeftTriangleEqual:"",NotLess:"",NotLessEqual:"",NotLessGreater:"",NotLessLess:"",NotLessSlantEqual:"",NotLessTilde:"",NotNestedGreaterGreater:"",NotNestedLessLess:"",notni:"",notniva:"",notnivb:"",notnivc:"",NotPrecedes:"",NotPrecedesEqual:"",NotPrecedesSlantEqual:"",NotReverseElement:"",NotRightTriangle:"",NotRightTriangleBar:"",NotRightTriangleEqual:"",NotSquareSubset:"",NotSquareSubsetEqual:"",NotSquareSuperset:"",NotSquareSupersetEqual:"",NotSubset:"",NotSubsetEqual:"",NotSucceeds:"",NotSucceedsEqual:"",NotSucceedsSlantEqual:"",NotSucceedsTilde:"",NotSuperset:"",NotSupersetEqual:"",NotTilde:"",NotTildeEqual:"",NotTildeFullEqual:"",NotTildeTilde:"",NotVerticalBar:"",npar:"",nparallel:"",nparsl:"",npart:"",npolint:"",npr:"",nprcue:"",npre:"",nprec:"",npreceq:"",nrArr:"",nrarr:"",nrarrc:"",nrarrw:"",nRightarrow:"",nrightarrow:"",nrtri:"",nrtrie:"",nsc:"",nsccue:"",nsce:"",Nscr:"",nscr:"",nshortmid:"",nshortparallel:"",nsim:"",nsime:"",nsimeq:"",nsmid:"",nspar:"",nsqsube:"",nsqsupe:"",nsub:"",nsubE:"",nsube:"",nsubset:"",nsubseteq:"",nsubseteqq:"",nsucc:"",nsucceq:"",nsup:"",nsupE:"",nsupe:"",nsupset:"",nsupseteq:"",nsupseteqq:"",ntgl:"",Ntilde:"",ntilde:"",ntlg:"",ntriangleleft:"",ntrianglelefteq:"",ntriangleright:"",ntrianglerighteq:"",Nu:"",nu:"",num:"#",numero:"",numsp:"",nvap:"",nVDash:"",nVdash:"",nvDash:"",nvdash:"",nvge:"",nvgt:">",nvHarr:"",nvinfin:"",nvlArr:"",nvle:"",nvlt:"<",nvltrie:"",nvrArr:"",nvrtrie:"",nvsim:"",nwarhk:"",nwArr:"",nwarr:"",nwarrow:"",nwnear:"",Oacute:"",oacute:"",oast:"",ocir:"",Ocirc:"",ocirc:"",Ocy:"",ocy:"",odash:"",Odblac:"",odblac:"",odiv:"",odot:"",odsold:"",OElig:"",oelig:"",ofcir:"",Ofr:"",ofr:"",ogon:"",Ograve:"",ograve:"",ogt:"",ohbar:"",ohm:"",oint:"",olarr:"",olcir:"",olcross:"",oline:"",olt:"",Omacr:"",omacr:"",Omega:"",omega:"",Omicron:"",omicron:"",omid:"",ominus:"",Oopf:"",oopf:"",opar:"",OpenCurlyDoubleQuote:"",OpenCurlyQuote:"",operp:"",oplus:"",Or:"",or:"",orarr:"",ord:"",order:"",orderof:"",ordf:"",ordm:"",origof:"",oror:"",orslope:"",orv:"",oS:"",Oscr:"",oscr:"",Oslash:"",oslash:"",osol:"",Otilde:"",otilde:"",Otimes:"",otimes:"",otimesas:"",Ouml:"",ouml:"",ovbar:"",OverBar:"",OverBrace:"",OverBracket:"",OverParenthesis:"",par:"",para:"",parallel:"",parsim:"",parsl:"",part:"",PartialD:"",Pcy:"",pcy:"",percnt:"%",period:".",permil:"",perp:"",pertenk:"",Pfr:"",pfr:"",Phi:"",phi:"",phiv:"",phmmat:"",phone:"",Pi:"",pi:"",pitchfork:"",piv:"",planck:"",planckh:"",plankv:"",plus:"+",plusacir:"",plusb:"",pluscir:"",plusdo:"",plusdu:"",pluse:"",PlusMinus:"",plusmn:"",plussim:"",plustwo:"",pm:"",Poincareplane:"",pointint:"",Popf:"",popf:"",pound:"",Pr:"",pr:"",prap:"",prcue:"",prE:"",pre:"",prec:"",precapprox:"",preccurlyeq:"",Precedes:"",PrecedesEqual:"",PrecedesSlantEqual:"",PrecedesTilde:"",preceq:"",precnapprox:"",precneqq:"",precnsim:"",precsim:"",Prime:"",prime:"",primes:"",prnap:"",prnE:"",prnsim:"",prod:"",Product:"",profalar:"",profline:"",profsurf:"",prop:"",Proportion:"",Proportional:"",propto:"",prsim:"",prurel:"",Pscr:"",pscr:"",Psi:"",psi:"",puncsp:"",Qfr:"",qfr:"",qint:"",Qopf:"",qopf:"",qprime:"",Qscr:"",qscr:"",quaternions:"",quatint:"",quest:"?",questeq:"",QUOT:'"',quot:'"',rAarr:"",race:"",Racute:"",racute:"",radic:"",raemptyv:"",Rang:"",rang:"",rangd:"",range:"",rangle:"",raquo:"",Rarr:"",rArr:"",rarr:"",rarrap:"",rarrb:"",rarrbfs:"",rarrc:"",rarrfs:"",rarrhk:"",rarrlp:"",rarrpl:"",rarrsim:"",Rarrtl:"",rarrtl:"",rarrw:"",rAtail:"",ratail:"",ratio:"",rationals:"",RBarr:"",rBarr:"",rbarr:"",rbbrk:"",rbrace:"}",rbrack:"]",rbrke:"",rbrksld:"",rbrkslu:"",Rcaron:"",rcaron:"",Rcedil:"",rcedil:"",rceil:"",rcub:"}",Rcy:"",rcy:"",rdca:"",rdldhar:"",rdquo:"",rdquor:"",rdsh:"",Re:"",real:"",realine:"",realpart:"",reals:"",rect:"",REG:"",reg:"",ReverseElement:"",ReverseEquilibrium:"",ReverseUpEquilibrium:"",rfisht:"",rfloor:"",Rfr:"",rfr:"",rHar:"",rhard:"",rharu:"",rharul:"",Rho:"",rho:"",rhov:"",RightAngleBracket:"",RightArrow:"",Rightarrow:"",rightarrow:"",RightArrowBar:"",RightArrowLeftArrow:"",rightarrowtail:"",RightCeiling:"",RightDoubleBracket:"",RightDownTeeVector:"",RightDownVector:"",RightDownVectorBar:"",RightFloor:"",rightharpoondown:"",rightharpoonup:"",rightleftarrows:"",rightleftharpoons:"",rightrightarrows:"",rightsquigarrow:"",RightTee:"",RightTeeArrow:"",RightTeeVector:"",rightthreetimes:"",RightTriangle:"",RightTriangleBar:"",RightTriangleEqual:"",RightUpDownVector:"",RightUpTeeVector:"",RightUpVector:"",RightUpVectorBar:"",RightVector:"",RightVectorBar:"",ring:"",risingdotseq:"",rlarr:"",rlhar:"",rlm:"",rmoust:"",rmoustache:"",rnmid:"",roang:"",roarr:"",robrk:"",ropar:"",Ropf:"",ropf:"",roplus:"",rotimes:"",RoundImplies:"",rpar:")",rpargt:"",rppolint:"",rrarr:"",Rrightarrow:"",rsaquo:"",Rscr:"",rscr:"",Rsh:"",rsh:"",rsqb:"]",rsquo:"",rsquor:"",rthree:"",rtimes:"",rtri:"",rtrie:"",rtrif:"",rtriltri:"",RuleDelayed:"",ruluhar:"",rx:"",Sacute:"",sacute:"",sbquo:"",Sc:"",sc:"",scap:"",Scaron:"",scaron:"",sccue:"",scE:"",sce:"",Scedil:"",scedil:"",Scirc:"",scirc:"",scnap:"",scnE:"",scnsim:"",scpolint:"",scsim:"",Scy:"",scy:"",sdot:"",sdotb:"",sdote:"",searhk:"",seArr:"",searr:"",searrow:"",sect:"",semi:";",seswar:"",setminus:"",setmn:"",sext:"",Sfr:"",sfr:"",sfrown:"",sharp:"",SHCHcy:"",shchcy:"",SHcy:"",shcy:"",ShortDownArrow:"",ShortLeftArrow:"",shortmid:"",shortparallel:"",ShortRightArrow:"",ShortUpArrow:"",shy:"",Sigma:"",sigma:"",sigmaf:"",sigmav:"",sim:"",simdot:"",sime:"",simeq:"",simg:"",simgE:"",siml:"",simlE:"",simne:"",simplus:"",simrarr:"",slarr:"",SmallCircle:"",smallsetminus:"",smashp:"",smeparsl:"",smid:"",smile:"",smt:"",smte:"",smtes:"",SOFTcy:"",softcy:"",sol:"/",solb:"",solbar:"",Sopf:"",sopf:"",spades:"",spadesuit:"",spar:"",sqcap:"",sqcaps:"",sqcup:"",sqcups:"",Sqrt:"",sqsub:"",sqsube:"",sqsubset:"",sqsubseteq:"",sqsup:"",sqsupe:"",sqsupset:"",sqsupseteq:"",squ:"",Square:"",square:"",SquareIntersection:"",SquareSubset:"",SquareSubsetEqual:"",SquareSuperset:"",SquareSupersetEqual:"",SquareUnion:"",squarf:"",squf:"",srarr:"",Sscr:"",sscr:"",ssetmn:"",ssmile:"",sstarf:"",Star:"",star:"",starf:"",straightepsilon:"",straightphi:"",strns:"",Sub:"",sub:"",subdot:"",subE:"",sube:"",subedot:"",submult:"",subnE:"",subne:"",subplus:"",subrarr:"",Subset:"",subset:"",subseteq:"",subseteqq:"",SubsetEqual:"",subsetneq:"",subsetneqq:"",subsim:"",subsub:"",subsup:"",succ:"",succapprox:"",succcurlyeq:"",Succeeds:"",SucceedsEqual:"",SucceedsSlantEqual:"",SucceedsTilde:"",succeq:"",succnapprox:"",succneqq:"",succnsim:"",succsim:"",SuchThat:"",Sum:"",sum:"",sung:"",Sup:"",sup:"",sup1:"",sup2:"",sup3:"",supdot:"",supdsub:"",supE:"",supe:"",supedot:"",Superset:"",SupersetEqual:"",suphsol:"",suphsub:"",suplarr:"",supmult:"",supnE:"",supne:"",supplus:"",Supset:"",supset:"",supseteq:"",supseteqq:"",supsetneq:"",supsetneqq:"",supsim:"",supsub:"",supsup:"",swarhk:"",swArr:"",swarr:"",swarrow:"",swnwar:"",szlig:"",Tab:"	",target:"",Tau:"",tau:"",tbrk:"",Tcaron:"",tcaron:"",Tcedil:"",tcedil:"",Tcy:"",tcy:"",tdot:"",telrec:"",Tfr:"",tfr:"",there4:"",Therefore:"",therefore:"",Theta:"",theta:"",thetasym:"",thetav:"",thickapprox:"",thicksim:"",ThickSpace:"",thinsp:"",ThinSpace:"",thkap:"",thksim:"",THORN:"",thorn:"",Tilde:"",tilde:"",TildeEqual:"",TildeFullEqual:"",TildeTilde:"",times:"",timesb:"",timesbar:"",timesd:"",tint:"",toea:"",top:"",topbot:"",topcir:"",Topf:"",topf:"",topfork:"",tosa:"",tprime:"",TRADE:"",trade:"",triangle:"",triangledown:"",triangleleft:"",trianglelefteq:"",triangleq:"",triangleright:"",trianglerighteq:"",tridot:"",trie:"",triminus:"",TripleDot:"",triplus:"",trisb:"",tritime:"",trpezium:"",Tscr:"",tscr:"",TScy:"",tscy:"",TSHcy:"",tshcy:"",Tstrok:"",tstrok:"",twixt:"",twoheadleftarrow:"",twoheadrightarrow:"",Uacute:"",uacute:"",Uarr:"",uArr:"",uarr:"",Uarrocir:"",Ubrcy:"",ubrcy:"",Ubreve:"",ubreve:"",Ucirc:"",ucirc:"",Ucy:"",ucy:"",udarr:"",Udblac:"",udblac:"",udhar:"",ufisht:"",Ufr:"",ufr:"",Ugrave:"",ugrave:"",uHar:"",uharl:"",uharr:"",uhblk:"",ulcorn:"",ulcorner:"",ulcrop:"",ultri:"",Umacr:"",umacr:"",uml:"",UnderBar:"_",UnderBrace:"",UnderBracket:"",UnderParenthesis:"",Union:"",UnionPlus:"",Uogon:"",uogon:"",Uopf:"",uopf:"",UpArrow:"",Uparrow:"",uparrow:"",UpArrowBar:"",UpArrowDownArrow:"",UpDownArrow:"",Updownarrow:"",updownarrow:"",UpEquilibrium:"",upharpoonleft:"",upharpoonright:"",uplus:"",UpperLeftArrow:"",UpperRightArrow:"",Upsi:"",upsi:"",upsih:"",Upsilon:"",upsilon:"",UpTee:"",UpTeeArrow:"",upuparrows:"",urcorn:"",urcorner:"",urcrop:"",Uring:"",uring:"",urtri:"",Uscr:"",uscr:"",utdot:"",Utilde:"",utilde:"",utri:"",utrif:"",uuarr:"",Uuml:"",uuml:"",uwangle:"",vangrt:"",varepsilon:"",varkappa:"",varnothing:"",varphi:"",varpi:"",varpropto:"",vArr:"",varr:"",varrho:"",varsigma:"",varsubsetneq:"",varsubsetneqq:"",varsupsetneq:"",varsupsetneqq:"",vartheta:"",vartriangleleft:"",vartriangleright:"",Vbar:"",vBar:"",vBarv:"",Vcy:"",vcy:"",VDash:"",Vdash:"",vDash:"",vdash:"",Vdashl:"",Vee:"",vee:"",veebar:"",veeeq:"",vellip:"",Verbar:"",verbar:"|",Vert:"",vert:"|",VerticalBar:"",VerticalLine:"|",VerticalSeparator:"",VerticalTilde:"",VeryThinSpace:"",Vfr:"",vfr:"",vltri:"",vnsub:"",vnsup:"",Vopf:"",vopf:"",vprop:"",vrtri:"",Vscr:"",vscr:"",vsubnE:"",vsubne:"",vsupnE:"",vsupne:"",Vvdash:"",vzigzag:"",Wcirc:"",wcirc:"",wedbar:"",Wedge:"",wedge:"",wedgeq:"",weierp:"",Wfr:"",wfr:"",Wopf:"",wopf:"",wp:"",wr:"",wreath:"",Wscr:"",wscr:"",xcap:"",xcirc:"",xcup:"",xdtri:"",Xfr:"",xfr:"",xhArr:"",xharr:"",Xi:"",xi:"",xlArr:"",xlarr:"",xmap:"",xnis:"",xodot:"",Xopf:"",xopf:"",xoplus:"",xotime:"",xrArr:"",xrarr:"",Xscr:"",xscr:"",xsqcup:"",xuplus:"",xutri:"",xvee:"",xwedge:"",Yacute:"",yacute:"",YAcy:"",yacy:"",Ycirc:"",ycirc:"",Ycy:"",ycy:"",yen:"",Yfr:"",yfr:"",YIcy:"",yicy:"",Yopf:"",yopf:"",Yscr:"",yscr:"",YUcy:"",yucy:"",Yuml:"",yuml:"",Zacute:"",zacute:"",Zcaron:"",zcaron:"",Zcy:"",zcy:"",Zdot:"",zdot:"",zeetrf:"",ZeroWidthSpace:"",Zeta:"",zeta:"",Zfr:"",zfr:"",ZHcy:"",zhcy:"",zigrarr:"",Zopf:"",zopf:"",Zscr:"",zscr:"",zwj:"",zwnj:""}),i.entityMap=i.HTML_ENTITIES})(Hk);var x_={},dd=Go.NAMESPACE,V1=/[A-Z_a-z\xC0-\xD6\xD8-\xF6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD]/,YE=new RegExp("[\\-\\.0-9"+V1.source.slice(1,-1)+"\\u00B7\\u0300-\\u036F\\u203F-\\u2040]"),ZE=new RegExp("^"+V1.source+YE.source+"*(?::"+V1.source+YE.source+"*)?$"),rf=0,Ma=1,Ru=2,sf=3,Pu=4,Lu=5,af=6,Dg=7;function Nh(i,e){this.message=i,this.locator=e,Error.captureStackTrace&&Error.captureStackTrace(this,Nh)}Nh.prototype=new Error;Nh.prototype.name=Nh.name;function Wk(){}Wk.prototype={parse:function(i,e,t){var n=this.domBuilder;n.startDocument(),$k(e,e={}),Y3(i,e,t,n,this.errorHandler),n.endDocument()}};function Y3(i,e,t,n,r){function s($){if($>65535){$-=65536;var G=55296+($>>10),Z=56320+($&1023);return String.fromCharCode(G,Z)}else return String.fromCharCode($)}function a($){var G=$.slice(1,-1);return G in t?t[G]:G.charAt(0)==="#"?s(parseInt(G.substr(1).replace("x","0x"))):(r.error("entity not found:"+$),$)}function o($){if($>b){var G=i.substring(b,$).replace(/&#?\w+;/g,a);f&&l(b),n.characters(G,0,$-b),b=$}}function l($,G){for(;$>=c&&(G=h.exec(i));)u=G.index,c=u+G[0].length,f.lineNumber++;f.columnNumber=$-u+1}for(var u=0,c=0,h=/.*(?:\r\n?|\n)|.*$/g,f=n.locator,d=[{currentNSMap:e}],y={},b=0;;){try{var v=i.indexOf("<",b);if(v<0){if(!i.substr(b).match(/^\s*$/)){var g=n.doc,m=g.createTextNode(i.substr(b));g.appendChild(m),n.currentElement=m}return}switch(v>b&&o(v),i.charAt(v+1)){case"/":var k=i.indexOf(">",v+3),w=i.substring(v+2,k).replace(/[ \t\n\r]+$/g,""),_=d.pop();k<0?(w=i.substring(v+2).replace(/[\s<].*/,""),r.error("end tag name: "+w+" is not complete:"+_.tagName),k=v+1+w.length):w.match(/\s</)&&(w=w.replace(/[\s<].*/,""),r.error("end tag name: "+w+" maybe not complete"),k=v+1+w.length);var E=_.localNSMap,x=_.tagName==w,A=x||_.tagName&&_.tagName.toLowerCase()==w.toLowerCase();if(A){if(n.endElement(_.uri,_.localName,w),E)for(var S in E)Object.prototype.hasOwnProperty.call(E,S)&&n.endPrefixMapping(S);x||r.fatalError("end tag name: "+w+" is not match the current start tagName:"+_.tagName)}else d.push(_);k++;break;case"?":f&&l(v),k=tM(i,v,n);break;case"!":f&&l(v),k=eM(i,v,n,r);break;default:f&&l(v);var O=new Vk,C=d[d.length-1].currentNSMap,k=Z3(i,v,O,C,a,r),D=O.length;if(!O.closed&&J3(i,k,O.tagName,y)&&(O.closed=!0,t.nbsp||r.warning("unclosed xml attribute")),f&&D){for(var R=QE(f,{}),F=0;F<D;F++){var H=O[F];l(H.offset),H.locator=QE(f,{})}n.locator=R,JE(O,n,C)&&d.push(O),n.locator=f}else JE(O,n,C)&&d.push(O);dd.isHTML(O.uri)&&!O.closed?k=Q3(i,k,O.tagName,a,n):k++}}catch($){if($ instanceof Nh)throw $;r.error("element parse error: "+$),k=-1}k>b?b=k:o(Math.max(v,b)+1)}}function QE(i,e){return e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber,e}function Z3(i,e,t,n,r,s){function a(f,d,y){t.attributeNames.hasOwnProperty(f)&&s.fatalError("Attribute "+f+" redefined"),t.addValue(f,d,y)}for(var o,l,u=++e,c=rf;;){var h=i.charAt(u);switch(h){case"=":if(c===Ma)o=i.slice(e,u),c=sf;else if(c===Ru)c=sf;else throw new Error("attribute equal must after attrName");break;case"'":case'"':if(c===sf||c===Ma)if(c===Ma&&(s.warning('attribute value must after "="'),o=i.slice(e,u)),e=u+1,u=i.indexOf(h,e),u>0)l=i.slice(e,u).replace(/&#?\w+;/g,r),a(o,l,e-1),c=Lu;else throw new Error("attribute value no end '"+h+"' match");else if(c==Pu)l=i.slice(e,u).replace(/&#?\w+;/g,r),a(o,l,e),s.warning('attribute "'+o+'" missed start quot('+h+")!!"),e=u+1,c=Lu;else throw new Error('attribute value must after "="');break;case"/":switch(c){case rf:t.setTagName(i.slice(e,u));case Lu:case af:case Dg:c=Dg,t.closed=!0;case Pu:case Ma:break;case Ru:t.closed=!0;break;default:throw new Error("attribute invalid close char('/')")}break;case"":return s.error("unexpected end of input"),c==rf&&t.setTagName(i.slice(e,u)),u;case">":switch(c){case rf:t.setTagName(i.slice(e,u));case Lu:case af:case Dg:break;case Pu:case Ma:l=i.slice(e,u),l.slice(-1)==="/"&&(t.closed=!0,l=l.slice(0,-1));case Ru:c===Ru&&(l=o),c==Pu?(s.warning('attribute "'+l+'" missed quot(")!'),a(o,l.replace(/&#?\w+;/g,r),e)):((!dd.isHTML(n[""])||!l.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+l+'" missed value!! "'+l+'" instead!!'),a(l,l,e));break;case sf:throw new Error("attribute value missed!!")}return u;case"":h=" ";default:if(h<=" ")switch(c){case rf:t.setTagName(i.slice(e,u)),c=af;break;case Ma:o=i.slice(e,u),c=Ru;break;case Pu:var l=i.slice(e,u).replace(/&#?\w+;/g,r);s.warning('attribute "'+l+'" missed quot(")!!'),a(o,l,e);case Lu:c=af;break}else switch(c){case Ru:t.tagName,(!dd.isHTML(n[""])||!o.match(/^(?:disabled|checked|selected)$/i))&&s.warning('attribute "'+o+'" missed value!! "'+o+'" instead2!!'),a(o,o,e),e=u,c=Ma;break;case Lu:s.warning('attribute space is required"'+o+'"!!');case af:c=Ma,e=u;break;case sf:c=Pu,e=u;break;case Dg:throw new Error("elements closed character '/' and '>' must be connected to")}}u++}}function JE(i,e,t){for(var n=i.tagName,r=null,h=i.length;h--;){var s=i[h],a=s.qName,o=s.value,f=a.indexOf(":");if(f>0)var l=s.prefix=a.slice(0,f),u=a.slice(f+1),c=l==="xmlns"&&u;else u=a,l=null,c=a==="xmlns"&&"";s.localName=u,c!==!1&&(r==null&&(r={},$k(t,t={})),t[c]=r[c]=o,s.uri=dd.XMLNS,e.startPrefixMapping(c,o))}for(var h=i.length;h--;){s=i[h];var l=s.prefix;l&&(l==="xml"&&(s.uri=dd.XML),l!=="xmlns"&&(s.uri=t[l||""]))}var f=n.indexOf(":");f>0?(l=i.prefix=n.slice(0,f),u=i.localName=n.slice(f+1)):(l=null,u=i.localName=n);var d=i.uri=t[l||""];if(e.startElement(d,u,n,i),i.closed){if(e.endElement(d,u,n),r)for(l in r)Object.prototype.hasOwnProperty.call(r,l)&&e.endPrefixMapping(l)}else return i.currentNSMap=t,i.localNSMap=r,!0}function Q3(i,e,t,n,r){if(/^(?:script|textarea)$/i.test(t)){var s=i.indexOf("</"+t+">",e),a=i.substring(e+1,s);if(/[&<]/.test(a))return/^script$/i.test(t)?(r.characters(a,0,a.length),s):(a=a.replace(/&#?\w+;/g,n),r.characters(a,0,a.length),s)}return e+1}function J3(i,e,t,n){var r=n[t];return r==null&&(r=i.lastIndexOf("</"+t+">"),r<e&&(r=i.lastIndexOf("</"+t)),n[t]=r),r<e}function $k(i,e){for(var t in i)Object.prototype.hasOwnProperty.call(i,t)&&(e[t]=i[t])}function eM(i,e,t,n){var r=i.charAt(e+2);switch(r){case"-":if(i.charAt(e+3)==="-"){var s=i.indexOf("-->",e+4);return s>e?(t.comment(i,e+4,s-e-4),s+3):(n.error("Unclosed comment"),-1)}else return-1;default:if(i.substr(e+3,6)=="CDATA["){var s=i.indexOf("]]>",e+9);return t.startCDATA(),t.characters(i,e+9,s-e-9),t.endCDATA(),s+3}var a=nM(i,e),o=a.length;if(o>1&&/!doctype/i.test(a[0][0])){var l=a[1][0],u=!1,c=!1;o>3&&(/^public$/i.test(a[2][0])?(u=a[3][0],c=o>4&&a[4][0]):/^system$/i.test(a[2][0])&&(c=a[3][0]));var h=a[o-1];return t.startDTD(l,u,c),t.endDTD(),h.index+h[0].length}}return-1}function tM(i,e,t){var n=i.indexOf("?>",e);if(n){var r=i.substring(e,n).match(/^<\?(\S*)\s*([\s\S]*?)\s*$/);return r?(r[0].length,t.processingInstruction(r[1],r[2]),n+2):-1}return-1}function Vk(){this.attributeNames={}}Vk.prototype={setTagName:function(i){if(!ZE.test(i))throw new Error("invalid tagName:"+i);this.tagName=i},addValue:function(i,e,t){if(!ZE.test(i))throw new Error("invalid attribute:"+i);this.attributeNames[i]=this.length,this[this.length++]={qName:i,value:e,offset:t}},length:0,getLocalName:function(i){return this[i].localName},getLocator:function(i){return this[i].locator},getQName:function(i){return this[i].qName},getURI:function(i){return this[i].uri},getValue:function(i){return this[i].value}};function nM(i,e){var t,n=[],r=/'[^']+'|"[^"]+"|[^\s<>\/=]+=?|(\/?\s*>|<)/g;for(r.lastIndex=e,r.exec(i);t=r.exec(i);)if(n.push(t),t[1])return n}x_.XMLReader=Wk;x_.ParseError=Nh;var iM=Go,S_=Vo,eA=Hk,Gk=x_,rM=S_.DOMImplementation,tA=iM.NAMESPACE,sM=Gk.ParseError,aM=Gk.XMLReader;function Xk(i){this.options=i||{locator:{}}}Xk.prototype.parseFromString=function(i,e){var t=this.options,n=new aM,r=t.domBuilder||new tg,s=t.errorHandler,a=t.locator,o=t.xmlns||{},l=/\/x?html?$/.test(e),u=l?eA.HTML_ENTITIES:eA.XML_ENTITIES;return a&&r.setDocumentLocator(a),n.errorHandler=oM(s,r,a),n.domBuilder=t.domBuilder||r,l&&(o[""]=tA.HTML),o.xml=o.xml||tA.XML,i&&typeof i=="string"?n.parse(i,o,u):n.errorHandler.error("invalid doc source"),r.doc};function oM(i,e,t){if(!i){if(e instanceof tg)return e;i=e}var n={},r=i instanceof Function;t=t||{};function s(a){var o=i[a];!o&&r&&(o=i.length==2?function(l){i(a,l)}:i),n[a]=o&&function(l){o("[xmldom "+a+"]	"+l+G1(t))}||function(){}}return s("warning"),s("error"),s("fatalError"),n}function tg(){this.cdata=!1}function Iu(i,e){e.lineNumber=i.lineNumber,e.columnNumber=i.columnNumber}tg.prototype={startDocument:function(){this.doc=new rM().createDocument(null,null,null),this.locator&&(this.doc.documentURI=this.locator.systemId)},startElement:function(i,e,t,n){var r=this.doc,s=r.createElementNS(i,t||e),a=n.length;Og(this,s),this.currentElement=s,this.locator&&Iu(this.locator,s);for(var o=0;o<a;o++){var i=n.getURI(o),l=n.getValue(o),t=n.getQName(o),u=r.createAttributeNS(i,t);this.locator&&Iu(n.getLocator(o),u),u.value=u.nodeValue=l,s.setAttributeNode(u)}},endElement:function(i,e,t){var n=this.currentElement;n.tagName,this.currentElement=n.parentNode},startPrefixMapping:function(i,e){},endPrefixMapping:function(i){},processingInstruction:function(i,e){var t=this.doc.createProcessingInstruction(i,e);this.locator&&Iu(this.locator,t),Og(this,t)},ignorableWhitespace:function(i,e,t){},characters:function(i,e,t){if(i=nA.apply(this,arguments),i){if(this.cdata)var n=this.doc.createCDATASection(i);else var n=this.doc.createTextNode(i);this.currentElement?this.currentElement.appendChild(n):/^\s*$/.test(i)&&this.doc.appendChild(n),this.locator&&Iu(this.locator,n)}},skippedEntity:function(i){},endDocument:function(){this.doc.normalize()},setDocumentLocator:function(i){(this.locator=i)&&(i.lineNumber=0)},comment:function(i,e,t){i=nA.apply(this,arguments);var n=this.doc.createComment(i);this.locator&&Iu(this.locator,n),Og(this,n)},startCDATA:function(){this.cdata=!0},endCDATA:function(){this.cdata=!1},startDTD:function(i,e,t){var n=this.doc.implementation;if(n&&n.createDocumentType){var r=n.createDocumentType(i,e,t);this.locator&&Iu(this.locator,r),Og(this,r),this.doc.doctype=r}},warning:function(i){console.warn("[xmldom warning]	"+i,G1(this.locator))},error:function(i){console.error("[xmldom error]	"+i,G1(this.locator))},fatalError:function(i){throw new sM(i,this.locator)}};function G1(i){if(i)return`
@`+(i.systemId||"")+"#[line:"+i.lineNumber+",col:"+i.columnNumber+"]"}function nA(i,e,t){return typeof i=="string"?i.substr(e,t):i.length>=e+t||e?new java.lang.String(i,e,t)+"":i}"endDTD,startEntity,endEntity,attributeDecl,elementDecl,externalEntityDecl,internalEntityDecl,resolveEntity,getExternalSubset,notationDecl,unparsedEntityDecl".replace(/\w+/g,function(i){tg.prototype[i]=function(){return null}});function Og(i,e){i.currentElement?i.currentElement.appendChild(e):i.doc.appendChild(e)}eg.__DOMHandler=tg;eg.DOMParser=Xk;eg.DOMImplementation=S_.DOMImplementation;eg.XMLSerializer=S_.XMLSerializer;var Kk=eg.DOMParser;const C_=typeof window<"u"?window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame:!1,lM=1,uM=3,Yk=typeof URL<"u"?URL:typeof window<"u"?window.URL||window.webkitURL||window.mozURL:void 0;function my(){var i=new Date().getTime(),e="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n=(i+Math.random()*16)%16|0;return i=Math.floor(i/16),(t=="x"?n:n&7|8).toString(16)});return e}function cM(){return Math.max(document.documentElement.clientHeight,document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight)}function Zk(i){return!!(i&&i.nodeType==1)}function en(i){return!isNaN(parseFloat(i))&&isFinite(i)}function Qk(i){let e=parseFloat(i);return en(i)===!1?!1:typeof i=="string"&&i.indexOf(".")>-1?!0:Math.floor(e)!==e}function Wu(i){var e=["Webkit","webkit","Moz","O","ms"],t=["-webkit-","-webkit-","-moz-","-o-","-ms-"],n=i.toLowerCase(),r=e.length;if(typeof document>"u"||typeof document.body.style[n]<"u")return i;for(var s=0;s<r;s++)if(typeof document.body.style[t[s]+n]<"u")return t[s]+n;return i}function Jk(i){for(var e=1,t=arguments.length;e<t;e++){var n=arguments[e];for(var r in n)i[r]===void 0&&(i[r]=n[r])}return i}function Wn(i){var e=[].slice.call(arguments,1);return e.forEach(function(t){t&&Object.getOwnPropertyNames(t).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}),i}function hM(i,e,t){var n=Rh(i,e,t);return e.splice(n,0,i),n}function Rh(i,e,t,n,r){var s=n||0,a=r||e.length,o=parseInt(s+(a-s)/2),l;return t||(t=function(u,c){if(u>c)return 1;if(u<c)return-1;if(u==c)return 0}),a-s<=0?o:(l=t(e[o],i),a-s===1?l>=0?o:o+1:l===0?o:l===-1?Rh(i,e,t,o,a):Rh(i,e,t,s,o))}function uv(i,e,t,n,r){var s=n||0,a=r||e.length,o=parseInt(s+(a-s)/2),l;return t||(t=function(u,c){if(u>c)return 1;if(u<c)return-1;if(u==c)return 0}),a-s<=0?-1:(l=t(e[o],i),a-s===1?l===0?o:-1:l===0?o:l===-1?uv(i,e,t,o,a):uv(i,e,t,s,o))}function Em(i){var e=window.getComputedStyle(i),t=["width","paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["height","paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],r=0,s=0;return t.forEach(function(a){r+=parseFloat(e[a])||0}),n.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:r}}function cv(i){var e=window.getComputedStyle(i),t=["paddingRight","paddingLeft","marginRight","marginLeft","borderRightWidth","borderLeftWidth"],n=["paddingTop","paddingBottom","marginTop","marginBottom","borderTopWidth","borderBottomWidth"],r=0,s=0;return t.forEach(function(a){r+=parseFloat(e[a])||0}),n.forEach(function(a){s+=parseFloat(e[a])||0}),{height:s,width:r}}function X1(i){let e,t=i.ownerDocument;if(i.nodeType==Node.TEXT_NODE){let n=t.createRange();n.selectNodeContents(i),e=n.getBoundingClientRect()}else e=i.getBoundingClientRect();return e}function hv(){var i=window.innerWidth,e=window.innerHeight;return{top:0,left:0,right:i,bottom:e,width:i,height:e}}function T_(i,e){for(var t=i.parentNode,n=t.childNodes,r,s=-1,a=0;a<n.length&&(r=n[a],r.nodeType===e&&s++,r!=i);a++);return s}function fM(i){return T_(i,uM)}function eD(i){return T_(i,lM)}function pd(i){return["xml","opf","ncx"].indexOf(i)>-1}function tD(i,e){return new Blob([i],{type:e})}function fv(i,e){var t,n=tD(i,e);return t=Yk.createObjectURL(n),t}function nD(i){return Yk.revokeObjectURL(i)}function K1(i,e){var t,n;if(typeof i=="string")return t=btoa(i),n="data:"+e+";base64,"+t,n}function iD(i){return Object.prototype.toString.call(i).slice(8,-1)}function Ps(i,e,t){var n,r;return typeof DOMParser>"u"||t?r=Kk:r=DOMParser,i.charCodeAt(0)===65279&&(i=i.slice(1)),n=new r().parseFromString(i,e),n}function Ot(i,e){var t;if(!i)throw new Error("No Element Provided");if(typeof i.querySelector<"u")return i.querySelector(e);if(t=i.getElementsByTagName(e),t.length)return t[0]}function Da(i,e){return typeof i.querySelector<"u"?i.querySelectorAll(e):i.getElementsByTagName(e)}function $u(i,e,t){var n,r;if(typeof i.querySelector<"u"){e+="[";for(var s in t)e+=s+"~='"+t[s]+"'";return e+="]",i.querySelector(e)}else if(n=i.getElementsByTagName(e),r=Array.prototype.slice.call(n,0).filter(function(a){for(var o in t)if(a.getAttribute(o)===t[o])return!0;return!1}),r)return r[0]}function dv(i,e){var t=i.ownerDocument||i;typeof t.createTreeWalker<"u"?rD(i,e,NodeFilter.SHOW_TEXT):k_(i,function(n){n&&n.nodeType===3&&e(n)})}function rD(i,e,t){var n=document.createTreeWalker(i,t,null,!1);let r;for(;r=n.nextNode();)e(r)}function k_(i,e){if(e(i))return!0;if(i=i.firstChild,i)do{if(k_(i,e))return!0;i=i.nextSibling}while(i)}function sD(i){return new Promise(function(e,t){var n=new FileReader;n.readAsDataURL(i),n.onloadend=function(){e(n.result)}})}function dt(){this.resolve=null,this.reject=null,this.id=my(),this.promise=new Promise((i,e)=>{this.resolve=i,this.reject=e}),Object.freeze(this)}function pv(i,e,t){var n;if(typeof i.querySelector<"u"&&(n=i.querySelector(`${e}[*|type="${t}"]`)),!n||n.length===0){n=Da(i,e);for(var r=0;r<n.length;r++)if(n[r].getAttributeNS("http://www.idpf.org/2007/ops","type")===t||n[r].getAttribute("epub:type")===t)return n[r]}else return n}function Y1(i){for(var e=[],t=i.childNodes,n=0;n<t.length;n++){let r=t[n];r.nodeType===1&&e.push(r)}return e}function Z1(i){for(var e=[i];i;i=i.parentNode)e.unshift(i);return e}function Vu(i,e,t){for(var n=[],r=i.childNodes,s=0;s<r.length;s++){let a=r[s];if(a.nodeType===1&&a.nodeName.toLowerCase()===e){if(t)return a;n.push(a)}}if(!t)return n}function dM(i,e){let t;if(!(i===null||e===""))for(t=i.parentNode;t.nodeType===1;){if(t.tagName.toLowerCase()===e)return t;t=t.parentNode}}class aD{constructor(){this.collapsed=!1,this.commonAncestorContainer=void 0,this.endContainer=void 0,this.endOffset=void 0,this.startContainer=void 0,this.startOffset=void 0}setStart(e,t){this.startContainer=e,this.startOffset=t,this.endContainer?this.commonAncestorContainer=this._commonAncestorContainer():this.collapse(!0),this._checkCollapsed()}setEnd(e,t){this.endContainer=e,this.endOffset=t,this.startContainer?(this.collapsed=!1,this.commonAncestorContainer=this._commonAncestorContainer()):this.collapse(!1),this._checkCollapsed()}collapse(e){this.collapsed=!0,e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset,this.commonAncestorContainer=this.startContainer.parentNode):(this.startContainer=this.endContainer,this.startOffset=this.endOffset,this.commonAncestorContainer=this.endOffset.parentNode)}selectNode(e){let t=e.parentNode,n=Array.prototype.indexOf.call(t.childNodes,e);this.setStart(t,n),this.setEnd(t,n+1)}selectNodeContents(e){e.childNodes[e.childNodes-1];let t=e.nodeType===3?e.textContent.length:parent.childNodes.length;this.setStart(e,0),this.setEnd(e,t)}_commonAncestorContainer(e,t){var n=Z1(e||this.startContainer),r=Z1(t||this.endContainer);if(n[0]==r[0]){for(var s=0;s<n.length;s++)if(n[s]!=r[s])return n[s-1]}}_checkCollapsed(){this.startContainer===this.endContainer&&this.startOffset===this.endOffset?this.collapsed=!0:this.collapsed=!1}toString(){}}const pM=Object.freeze(Object.defineProperty({__proto__:null,RangeObject:aD,blob2base64:sD,borders:cv,bounds:Em,createBase64Url:K1,createBlob:tD,createBlobUrl:fv,defaults:Jk,defer:dt,documentHeight:cM,extend:Wn,filterChildren:Vu,findChildren:Y1,getParentByTagName:dM,indexOfElementNode:eD,indexOfNode:T_,indexOfSorted:uv,indexOfTextNode:fM,insert:hM,isElement:Zk,isFloat:Qk,isNumber:en,isXml:pd,locationOf:Rh,nodeBounds:X1,parents:Z1,parse:Ps,prefixed:Wu,qs:Ot,qsa:Da,qsp:$u,querySelectorByType:pv,requestAnimationFrame:C_,revokeBlobUrl:nD,sprint:dv,treeWalker:rD,type:iD,uuid:my,walk:k_,windowBounds:hv},Symbol.toStringTag,{value:"Module"}));if(!oD)var oD={cwd:function(){return"/"}};function os(i){if(typeof i!="string")throw new TypeError("Path must be a string. Received "+i)}function iA(i,e){for(var t="",n=-1,r=0,s,a=0;a<=i.length;++a){if(a<i.length)s=i.charCodeAt(a);else{if(s===47)break;s=47}if(s===47){if(!(n===a-1||r===1))if(n!==a-1&&r===2){if(t.length<2||t.charCodeAt(t.length-1)!==46||t.charCodeAt(t.length-2)!==46){if(t.length>2){for(var o=t.length-1,l=o;l>=0&&t.charCodeAt(l)!==47;--l);if(l!==o){l===-1?t="":t=t.slice(0,l),n=a,r=0;continue}}else if(t.length===2||t.length===1){t="",n=a,r=0;continue}}e&&(t.length>0?t+="/..":t="..")}else t.length>0?t+="/"+i.slice(n+1,a):t=i.slice(n+1,a);n=a,r=0}else s===46&&r!==-1?++r:r=-1}return t}function gM(i,e){var t=e.dir||e.root,n=e.base||(e.name||"")+(e.ext||"");return t?t===e.root?t+n:t+i+n:n}var Am={resolve:function(){for(var e="",t=!1,n,r=arguments.length-1;r>=-1&&!t;r--){var s;r>=0?s=arguments[r]:(n===void 0&&(n=oD.cwd()),s=n),os(s),s.length!==0&&(e=s+"/"+e,t=s.charCodeAt(0)===47)}return e=iA(e,!t),t?e.length>0?"/"+e:"/":e.length>0?e:"."},normalize:function(e){if(os(e),e.length===0)return".";var t=e.charCodeAt(0)===47,n=e.charCodeAt(e.length-1)===47;return e=iA(e,!t),e.length===0&&!t&&(e="."),e.length>0&&n&&(e+="/"),t?"/"+e:e},isAbsolute:function(e){return os(e),e.length>0&&e.charCodeAt(0)===47},join:function(){if(arguments.length===0)return".";for(var e,t=0;t<arguments.length;++t){var n=arguments[t];os(n),n.length>0&&(e===void 0?e=n:e+="/"+n)}return e===void 0?".":Am.normalize(e)},relative:function(e,t){if(os(e),os(t),e===t||(e=Am.resolve(e),t=Am.resolve(t),e===t))return"";for(var n=1;n<e.length&&e.charCodeAt(n)===47;++n);for(var r=e.length,s=r-n,a=1;a<t.length&&t.charCodeAt(a)===47;++a);for(var o=t.length,l=o-a,u=s<l?s:l,c=-1,h=0;h<=u;++h){if(h===u){if(l>u){if(t.charCodeAt(a+h)===47)return t.slice(a+h+1);if(h===0)return t.slice(a+h)}else s>u&&(e.charCodeAt(n+h)===47?c=h:h===0&&(c=0));break}var f=e.charCodeAt(n+h),d=t.charCodeAt(a+h);if(f!==d)break;f===47&&(c=h)}var y="";for(h=n+c+1;h<=r;++h)(h===r||e.charCodeAt(h)===47)&&(y.length===0?y+="..":y+="/..");return y.length>0?y+t.slice(a+c):(a+=c,t.charCodeAt(a)===47&&++a,t.slice(a))},_makeLong:function(e){return e},dirname:function(e){if(os(e),e.length===0)return".";for(var t=e.charCodeAt(0),n=t===47,r=-1,s=!0,a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!s){r=a;break}}else s=!1;return r===-1?n?"/":".":n&&r===1?"//":e.slice(0,r)},basename:function(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');os(e);var n=0,r=-1,s=!0,a;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";var o=t.length-1,l=-1;for(a=e.length-1;a>=0;--a){var u=e.charCodeAt(a);if(u===47){if(!s){n=a+1;break}}else l===-1&&(s=!1,l=a+1),o>=0&&(u===t.charCodeAt(o)?--o===-1&&(r=a):(o=-1,r=l))}return n===r?r=l:r===-1&&(r=e.length),e.slice(n,r)}else{for(a=e.length-1;a>=0;--a)if(e.charCodeAt(a)===47){if(!s){n=a+1;break}}else r===-1&&(s=!1,r=a+1);return r===-1?"":e.slice(n,r)}},extname:function(e){os(e);for(var t=-1,n=0,r=-1,s=!0,a=0,o=e.length-1;o>=0;--o){var l=e.charCodeAt(o);if(l===47){if(!s){n=o+1;break}continue}r===-1&&(s=!1,r=o+1),l===46?t===-1?t=o:a!==1&&(a=1):t!==-1&&(a=-1)}return t===-1||r===-1||a===0||a===1&&t===r-1&&t===n+1?"":e.slice(t,r)},format:function(e){if(e===null||typeof e!="object")throw new TypeError('Parameter "pathObject" must be an object, not '+typeof e);return gM("/",e)},parse:function(e){os(e);var t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;var n=e.charCodeAt(0),r=n===47,s;r?(t.root="/",s=1):s=0;for(var a=-1,o=0,l=-1,u=!0,c=e.length-1,h=0;c>=s;--c){if(n=e.charCodeAt(c),n===47){if(!u){o=c+1;break}continue}l===-1&&(u=!1,l=c+1),n===46?a===-1?a=c:h!==1&&(h=1):a!==-1&&(h=-1)}return a===-1||l===-1||h===0||h===1&&a===l-1&&a===o+1?l!==-1&&(o===0&&r?t.base=t.name=e.slice(1,l):t.base=t.name=e.slice(o,l)):(o===0&&r?(t.name=e.slice(1,a),t.base=e.slice(1,l)):(t.name=e.slice(o,a),t.base=e.slice(o,l)),t.ext=e.slice(a,l)),o>0?t.dir=e.slice(0,o-1):r&&(t.dir="/"),t},sep:"/",delimiter:":",posix:null},mM=Am;const Ao=zo(mM);class Oa{constructor(e){var t,n;t=e.indexOf("://"),t>-1&&(e=new URL(e).pathname),n=this.parse(e),this.path=e,this.isDirectory(e)?this.directory=e:this.directory=n.dir+"/",this.filename=n.base,this.extension=n.ext.slice(1)}parse(e){return Ao.parse(e)}isAbsolute(e){return Ao.isAbsolute(e||this.path)}isDirectory(e){return e.charAt(e.length-1)==="/"}resolve(e){return Ao.resolve(this.directory,e)}relative(e){var t=e&&e.indexOf("://")>-1;return t?e:Ao.relative(this.directory,e)}splitPath(e){return this.splitPathRe.exec(e).slice(1)}toString(){return this.path}}class Ir{constructor(e,t){var n=e.indexOf("://")>-1,r=e,s;if(this.Url=void 0,this.href=e,this.protocol="",this.origin="",this.hash="",this.hash="",this.search="",this.base=t,!n&&t!==!1&&typeof t!="string"&&window&&window.location&&(this.base=window.location.href),n||this.base)try{this.base?this.Url=new URL(e,this.base):this.Url=new URL(e),this.href=this.Url.href,this.protocol=this.Url.protocol,this.origin=this.Url.origin,this.hash=this.Url.hash,this.search=this.Url.search,r=this.Url.pathname+(this.Url.search?this.Url.search:"")}catch{this.Url=void 0,this.base&&(s=new Oa(this.base),r=s.resolve(r))}this.Path=new Oa(r),this.directory=this.Path.directory,this.filename=this.Path.filename,this.extension=this.Path.extension}path(){return this.Path}resolve(e){var t=e.indexOf("://")>-1,n;return t?e:(n=Ao.resolve(this.directory,e),this.origin+n)}relative(e){return Ao.relative(e,this.directory)}toString(){return this.href}}const Mu=1,ur=3,vM=9;class pt{constructor(e,t,n){var r;if(this.str="",this.base={},this.spinePos=0,this.range=!1,this.path={},this.start=null,this.end=null,!(this instanceof pt))return new pt(e,t,n);if(typeof t=="string"?this.base=this.parseComponent(t):typeof t=="object"&&t.steps&&(this.base=t),r=this.checkType(e),r==="string")return this.str=e,Wn(this,this.parse(e));if(r==="range")return Wn(this,this.fromRange(e,this.base,n));if(r==="node")return Wn(this,this.fromNode(e,this.base,n));if(r==="EpubCFI"&&e.path)return e;if(e)throw new TypeError("not a valid argument for EpubCFI");return this}checkType(e){return this.isCfiString(e)?"string":e&&typeof e=="object"&&(iD(e)==="Range"||typeof e.startContainer<"u")?"range":e&&typeof e=="object"&&typeof e.nodeType<"u"?"node":e&&typeof e=="object"&&e instanceof pt?"EpubCFI":!1}parse(e){var t={spinePos:-1,range:!1,base:{},path:{},start:null,end:null},n,r,s;return typeof e!="string"?{spinePos:-1}:(e.indexOf("epubcfi(")===0&&e[e.length-1]===")"&&(e=e.slice(8,e.length-1)),n=this.getChapterComponent(e),n?(t.base=this.parseComponent(n),r=this.getPathComponent(e),t.path=this.parseComponent(r),s=this.getRange(e),s&&(t.range=!0,t.start=this.parseComponent(s[0]),t.end=this.parseComponent(s[1])),t.spinePos=t.base.steps[1].index,t):{spinePos:-1})}parseComponent(e){var t={steps:[],terminal:{offset:null,assertion:null}},n=e.split(":"),r=n[0].split("/"),s;return n.length>1&&(s=n[1],t.terminal=this.parseTerminal(s)),r[0]===""&&r.shift(),t.steps=r.map((function(a){return this.parseStep(a)}).bind(this)),t}parseStep(e){var t,n,r,s,a;if(s=e.match(/\[(.*)\]/),s&&s[1]&&(a=s[1]),n=parseInt(e),!isNaN(n))return n%2===0?(t="element",r=n/2-1):(t="text",r=(n-1)/2),{type:t,index:r,id:a||null}}parseTerminal(e){var t,n,r=e.match(/\[(.*)\]/);return r&&r[1]?(t=parseInt(e.split("[")[0]),n=r[1]):t=parseInt(e),en(t)||(t=null),{offset:t,assertion:n}}getChapterComponent(e){var t=e.split("!");return t[0]}getPathComponent(e){var t=e.split("!");if(t[1])return t[1].split(",")[0]}getRange(e){var t=e.split(",");return t.length===3?[t[1],t[2]]:!1}getCharecterOffsetComponent(e){var t=e.split(":");return t[1]||""}joinSteps(e){return e?e.map(function(t){var n="";return t.type==="element"&&(n+=(t.index+1)*2),t.type==="text"&&(n+=1+2*t.index),t.id&&(n+="["+t.id+"]"),n}).join("/"):""}segmentString(e){var t="/";return t+=this.joinSteps(e.steps),e.terminal&&e.terminal.offset!=null&&(t+=":"+e.terminal.offset),e.terminal&&e.terminal.assertion!=null&&(t+="["+e.terminal.assertion+"]"),t}toString(){var e="epubcfi(";return e+=this.segmentString(this.base),e+="!",e+=this.segmentString(this.path),this.range&&this.start&&(e+=",",e+=this.segmentString(this.start)),this.range&&this.end&&(e+=",",e+=this.segmentString(this.end)),e+=")",e}compare(e,t){var n,r,s,a;if(typeof e=="string"&&(e=new pt(e)),typeof t=="string"&&(t=new pt(t)),e.spinePos>t.spinePos)return 1;if(e.spinePos<t.spinePos)return-1;e.range?(n=e.path.steps.concat(e.start.steps),s=e.start.terminal):(n=e.path.steps,s=e.path.terminal),t.range?(r=t.path.steps.concat(t.start.steps),a=t.start.terminal):(r=t.path.steps,a=t.path.terminal);for(var o=0;o<n.length;o++){if(!n[o])return-1;if(!r[o]||n[o].index>r[o].index)return 1;if(n[o].index<r[o].index)return-1}return n.length<r.length?-1:s.offset>a.offset?1:s.offset<a.offset?-1:0}step(e){var t=e.nodeType===ur?"text":"element";return{id:e.id,tagName:e.tagName,type:t,index:this.position(e)}}filteredStep(e,t){var n=this.filter(e,t),r;if(n)return r=n.nodeType===ur?"text":"element",{id:n.id,tagName:n.tagName,type:r,index:this.filteredPosition(n,t)}}pathTo(e,t,n){for(var r={steps:[],terminal:{offset:null,assertion:null}},s=e,a;s&&s.parentNode&&s.parentNode.nodeType!=vM;)n?a=this.filteredStep(s,n):a=this.step(s),a&&r.steps.unshift(a),s=s.parentNode;return t!=null&&t>=0&&(r.terminal.offset=t,r.steps[r.steps.length-1].type!="text"&&r.steps.push({type:"text",index:0})),r}equalStep(e,t){return!e||!t?!1:e.index===t.index&&e.id===t.id&&e.type===t.type}fromRange(e,t,n){var r={range:!1,base:{},path:{},start:null,end:null},s=e.startContainer,a=e.endContainer,o=e.startOffset,l=e.endOffset,u=!1;if(n&&(u=s.ownerDocument.querySelector("."+n)!=null),typeof t=="string"?(r.base=this.parseComponent(t),r.spinePos=r.base.steps[1].index):typeof t=="object"&&(r.base=t),e.collapsed)u&&(o=this.patchOffset(s,o,n)),r.path=this.pathTo(s,o,n);else{r.range=!0,u&&(o=this.patchOffset(s,o,n)),r.start=this.pathTo(s,o,n),u&&(l=this.patchOffset(a,l,n)),r.end=this.pathTo(a,l,n),r.path={steps:[],terminal:null};var c=r.start.steps.length,h;for(h=0;h<c&&this.equalStep(r.start.steps[h],r.end.steps[h]);h++)h===c-1?r.start.terminal===r.end.terminal&&(r.path.steps.push(r.start.steps[h]),r.range=!1):r.path.steps.push(r.start.steps[h]);r.start.steps=r.start.steps.slice(r.path.steps.length),r.end.steps=r.end.steps.slice(r.path.steps.length)}return r}fromNode(e,t,n){var r={range:!1,base:{},path:{},start:null,end:null};return typeof t=="string"?(r.base=this.parseComponent(t),r.spinePos=r.base.steps[1].index):typeof t=="object"&&(r.base=t),r.path=this.pathTo(e,null,n),r}filter(e,t){var n,r,s,a,o,l=!1;return e.nodeType===ur?(l=!0,s=e.parentNode,n=e.parentNode.classList.contains(t)):(l=!1,n=e.classList.contains(t)),n&&l?(a=s.previousSibling,o=s.nextSibling,a&&a.nodeType===ur?r=a:o&&o.nodeType===ur&&(r=o),r||e):n&&!l?!1:e}patchOffset(e,t,n){if(e.nodeType!=ur)throw new Error("Anchor must be a text node");var r=e,s=t;for(e.parentNode.classList.contains(n)&&(r=e.parentNode);r.previousSibling;){if(r.previousSibling.nodeType===Mu)if(r.previousSibling.classList.contains(n))s+=r.previousSibling.textContent.length;else break;else s+=r.previousSibling.textContent.length;r=r.previousSibling}return s}normalizedMap(e,t,n){var r={},s=-1,a,o=e.length,l,u;for(a=0;a<o;a++)l=e[a].nodeType,l===Mu&&e[a].classList.contains(n)&&(l=ur),a>0&&l===ur&&u===ur?r[a]=s:t===l&&(s=s+1,r[a]=s),u=l;return r}position(e){var t,n;return e.nodeType===Mu?(t=e.parentNode.children,t||(t=Y1(e.parentNode)),n=Array.prototype.indexOf.call(t,e)):(t=this.textNodes(e.parentNode),n=t.indexOf(e)),n}filteredPosition(e,t){var n,r,s;return e.nodeType===Mu?(n=e.parentNode.children,s=this.normalizedMap(n,Mu,t)):(n=e.parentNode.childNodes,e.parentNode.classList.contains(t)&&(e=e.parentNode,n=e.parentNode.childNodes),s=this.normalizedMap(n,ur,t)),r=Array.prototype.indexOf.call(n,e),s[r]}stepsToXpath(e){var t=[".","*"];return e.forEach(function(n){var r=n.index+1;n.id?t.push("*[position()="+r+" and @id='"+n.id+"']"):n.type==="text"?t.push("text()["+r+"]"):t.push("*["+r+"]")}),t.join("/")}stepsToQuerySelector(e){var t=["html"];return e.forEach(function(n){var r=n.index+1;n.id?t.push("#"+n.id):n.type==="text"||t.push("*:nth-child("+r+")")}),t.join(">")}textNodes(e,t){return Array.prototype.slice.call(e.childNodes).filter(function(n){return n.nodeType===ur?!0:!!(t&&n.classList.contains(t))})}walkToNode(e,t,n){var r=t||document,s=r.documentElement,a,o,l=e.length,u;for(u=0;u<l&&(o=e[u],o.type==="element"?o.id?s=r.getElementById(o.id):(a=s.children||Y1(s),s=a[o.index]):o.type==="text"&&(s=this.textNodes(s,n)[o.index]),!!s);u++);return s}findNode(e,t,n){var r=t||document,s,a;return!n&&typeof r.evaluate<"u"?(a=this.stepsToXpath(e),s=r.evaluate(a,r,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue):n?s=this.walkToNode(e,r,n):s=this.walkToNode(e,r),s}fixMiss(e,t,n,r){var s=this.findNode(e.slice(0,-1),n,r),a=s.childNodes,o=this.normalizedMap(a,ur,r),l,u,c=e[e.length-1].index;for(let h in o){if(!o.hasOwnProperty(h))return;if(o[h]===c)if(l=a[h],u=l.textContent.length,t>u)t=t-u;else{l.nodeType===Mu?s=l.childNodes[0]:s=l;break}}return{container:s,offset:t}}toRange(e,t){var n=e||document,r,s,a,o,l,u=this,c,h,f=t?n.querySelector("."+t)!=null:!1,d;if(typeof n.createRange<"u"?r=n.createRange():r=new aD,u.range?(s=u.start,c=u.path.steps.concat(s.steps),o=this.findNode(c,n,f?t:null),a=u.end,h=u.path.steps.concat(a.steps),l=this.findNode(h,n,f?t:null)):(s=u.path,c=u.path.steps,o=this.findNode(u.path.steps,n,f?t:null)),o)try{s.terminal.offset!=null?r.setStart(o,s.terminal.offset):r.setStart(o,0)}catch{d=this.fixMiss(c,s.terminal.offset,n,f?t:null),r.setStart(d.container,d.offset)}else return console.log("No startContainer found for",this.toString()),null;if(l)try{a.terminal.offset!=null?r.setEnd(l,a.terminal.offset):r.setEnd(l,0)}catch{d=this.fixMiss(h,u.end.terminal.offset,n,f?t:null),r.setEnd(d.container,d.offset)}return r}isCfiString(e){return typeof e=="string"&&e.indexOf("epubcfi(")===0&&e[e.length-1]===")"}generateChapterComponent(e,t,n){var r=parseInt(t),s=(e+1)*2,a="/"+s+"/";return a+=(r+1)*2,n&&(a+="["+n+"]"),a}collapse(e){this.range&&(this.range=!1,e?(this.path.steps=this.path.steps.concat(this.start.steps),this.path.terminal=this.start.terminal):(this.path.steps=this.path.steps.concat(this.end.steps),this.path.terminal=this.end.terminal))}}class Kr{constructor(e){this.context=e||this,this.hooks=[]}register(){for(var e=0;e<arguments.length;++e)if(typeof arguments[e]=="function")this.hooks.push(arguments[e]);else for(var t=0;t<arguments[e].length;++t)this.hooks.push(arguments[e][t])}deregister(e){let t;for(let n=0;n<this.hooks.length;n++)if(t=this.hooks[n],t===e){this.hooks.splice(n,1);break}}trigger(){var e=arguments,t=this.context,n=[];return this.hooks.forEach(function(r){try{var s=r.apply(t,e)}catch(a){console.log(a)}s&&typeof s.then=="function"&&n.push(s)}),Promise.all(n)}list(){return this.hooks}clear(){return this.hooks=[]}}function lD(i,e){var t,n,r=e.url,s=r.indexOf("://")>-1;i&&(n=Ot(i,"head"),t=Ot(n,"base"),t||(t=i.createElement("base"),n.insertBefore(t,n.firstChild)),!s&&window&&window.location&&(r=window.location.origin+r),t.setAttribute("href",r))}function yM(i,e){var t,n,r=e.canonical;i&&(t=Ot(i,"head"),n=Ot(t,"link[rel='canonical']"),n?n.setAttribute("href",r):(n=i.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",r),t.appendChild(n)))}function bM(i,e){var t,n,r=e.idref;i&&(t=Ot(i,"head"),n=Ot(t,"link[property='dc.identifier']"),n?n.setAttribute("content",r):(n=i.createElement("meta"),n.setAttribute("name","dc.identifier"),n.setAttribute("content",r),t.appendChild(n)))}function wM(i,e){var t=i.querySelectorAll("a[href]");if(t.length)for(var n=Ot(i.ownerDocument,"base"),r=n?n.getAttribute("href"):void 0,s=(function(o){var l=o.getAttribute("href");if(l.indexOf("mailto:")!==0){var u=l.indexOf("://")>-1;if(u)o.setAttribute("target","_blank");else{var c;try{c=new Ir(l,r)}catch{}o.onclick=function(){return c&&c.hash?e(c.Path.path+c.hash):e(c?c.Path.path:l),!1}}}}).bind(this),a=0;a<t.length;a++)s(t[a])}function rA(i,e,t){return e.forEach(function(n,r){n&&t[r]&&(n=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=i.replace(new RegExp(n,"g"),t[r]))}),i}function gd(i,e,t,n){var r=typeof window<"u"?window.URL:!1,s=r?"blob":"arraybuffer",a=new dt,o=new XMLHttpRequest,l=XMLHttpRequest.prototype,u;"overrideMimeType"in l||Object.defineProperty(l,"overrideMimeType",{value:function(){}}),t&&(o.withCredentials=!0),o.onreadystatechange=h,o.onerror=c,o.open("GET",i,!0);for(u in n)o.setRequestHeader(u,n[u]);e=="json"&&o.setRequestHeader("Accept","application/json"),e||(e=new Oa(i).extension),e=="blob"&&(o.responseType=s),pd(e)&&o.overrideMimeType("text/xml"),e=="binary"&&(o.responseType="arraybuffer"),o.send();function c(f){a.reject(f)}function h(){if(this.readyState===XMLHttpRequest.DONE){var f=!1;if((this.responseType===""||this.responseType==="document")&&(f=this.responseXML),this.status===200||this.status===0||f){var d;if(!this.response&&!f)return a.reject({status:this.status,message:"Empty Response",stack:new Error().stack}),a.promise;if(this.status===403)return a.reject({status:this.status,response:this.response,message:"Forbidden",stack:new Error().stack}),a.promise;f?d=this.responseXML:pd(e)?d=Ps(this.response,"text/xml"):e=="xhtml"?d=Ps(this.response,"application/xhtml+xml"):e=="html"||e=="htm"?d=Ps(this.response,"text/html"):e=="json"?d=JSON.parse(this.response):e=="blob"?r?d=this.response:d=new Blob([this.response]):d=this.response,a.resolve(d)}else a.reject({status:this.status,message:this.response,stack:new Error().stack})}}return a.promise}class _M{constructor(e,t){this.idref=e.idref,this.linear=e.linear==="yes",this.properties=e.properties,this.index=e.index,this.href=e.href,this.url=e.url,this.canonical=e.canonical,this.next=e.next,this.prev=e.prev,this.cfiBase=e.cfiBase,t?this.hooks=t:(this.hooks={},this.hooks.serialize=new Kr(this),this.hooks.content=new Kr(this)),this.document=void 0,this.contents=void 0,this.output=void 0}load(e){var t=e||this.request||gd,n=new dt,r=n.promise;return this.contents?n.resolve(this.contents):t(this.url).then((function(s){return this.document=s,this.contents=s.documentElement,this.hooks.content.trigger(this.document,this)}).bind(this)).then((function(){n.resolve(this.contents)}).bind(this)).catch(function(s){n.reject(s)}),r}base(){return lD(this.document,this)}render(e){var t=new dt,n=t.promise;return this.output,this.load(e).then((function(r){var s=typeof navigator<"u"&&navigator.userAgent||"",a=s.indexOf("Trident")>=0,o;typeof XMLSerializer>"u"||a?o=Kk:o=XMLSerializer;var l=new o;return this.output=l.serializeToString(r),this.output}).bind(this)).then((function(){return this.hooks.serialize.trigger(this.output,this)}).bind(this)).then((function(){t.resolve(this.output)}).bind(this)).catch(function(r){t.reject(r)}),n}find(e){var t=this,n=[],r=e.toLowerCase(),s=function(a){for(var o=a.textContent.toLowerCase(),l=t.document.createRange(),u,c,h=-1,f,d=150;c!=-1;)c=o.indexOf(r,h+1),c!=-1&&(l=t.document.createRange(),l.setStart(a,c),l.setEnd(a,c+r.length),u=t.cfiFromRange(l),a.textContent.length<d?f=a.textContent:(f=a.textContent.substring(c-d/2,c+d/2),f="..."+f+"..."),n.push({cfi:u,excerpt:f})),h=c};return dv(t.document,function(a){s(a)}),n}search(e,t=5){if(typeof document.createTreeWalker>"u")return this.find(e);let n=[];const r=150,s=this,a=e.toLowerCase(),o=function(h){const y=h.reduce((b,v)=>b+v.textContent,"").toLowerCase().indexOf(a);if(y!=-1){const v=y+a.length;let g=0,m=0;if(y<h[0].length){let w;for(;g<h.length-1&&(m+=h[g].length,!(v<=m));)g+=1;let _=h[0],E=h[g],x=s.document.createRange();x.setStart(_,y);let A=h.slice(0,g).reduce((O,C)=>O+C.textContent.length,0);x.setEnd(E,A>v?v:v-A),w=s.cfiFromRange(x);let S=h.slice(0,g+1).reduce((O,C)=>O+C.textContent,"");S.length>r&&(S=S.substring(y-r/2,y+r/2),S="..."+S+"..."),n.push({cfi:w,excerpt:S})}}},l=document.createTreeWalker(s.document,NodeFilter.SHOW_TEXT,null,!1);let u,c=[];for(;u=l.nextNode();)c.push(u),c.length==t&&(o(c.slice(0,t)),c=c.slice(1,t));return c.length>0&&o(c),n}reconcileLayoutSettings(e){var t={layout:e.layout,spread:e.spread,orientation:e.orientation};return this.properties.forEach(function(n){var r=n.replace("rendition:",""),s=r.indexOf("-"),a,o;s!=-1&&(a=r.slice(0,s),o=r.slice(s+1),t[a]=o)}),t}cfiFromRange(e){return new pt(e,this.cfiBase).toString()}cfiFromElement(e){return new pt(e,this.cfiBase).toString()}unload(){this.document=void 0,this.contents=void 0,this.output=void 0}destroy(){this.unload(),this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.idref=void 0,this.linear=void 0,this.properties=void 0,this.index=void 0,this.href=void 0,this.url=void 0,this.next=void 0,this.prev=void 0,this.cfiBase=void 0}}class EM{constructor(){this.spineItems=[],this.spineByHref={},this.spineById={},this.hooks={},this.hooks.serialize=new Kr,this.hooks.content=new Kr,this.hooks.content.register(lD),this.hooks.content.register(yM),this.hooks.content.register(bM),this.epubcfi=new pt,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}unpack(e,t,n){this.items=e.spine,this.manifest=e.manifest,this.spineNodeIndex=e.spineNodeIndex,this.baseUrl=e.baseUrl||e.basePath||"",this.length=this.items.length,this.items.forEach((r,s)=>{var a=this.manifest[r.idref],o;r.index=s,r.cfiBase=this.epubcfi.generateChapterComponent(this.spineNodeIndex,r.index,r.id),r.href&&(r.url=t(r.href,!0),r.canonical=n(r.href)),a&&(r.href=a.href,r.url=t(r.href,!0),r.canonical=n(r.href),a.properties.length&&r.properties.push.apply(r.properties,a.properties)),r.linear==="yes"?(r.prev=(function(){let l=r.index;for(;l>0;){let u=this.get(l-1);if(u&&u.linear)return u;l-=1}}).bind(this),r.next=(function(){let l=r.index;for(;l<this.spineItems.length-1;){let u=this.get(l+1);if(u&&u.linear)return u;l+=1}}).bind(this)):(r.prev=function(){},r.next=function(){}),o=new _M(r,this.hooks),this.append(o)}),this.loaded=!0}get(e){var t=0;if(typeof e>"u")for(;t<this.spineItems.length;){let n=this.spineItems[t];if(n&&n.linear)break;t+=1}else this.epubcfi.isCfiString(e)?t=new pt(e).spinePos:typeof e=="number"||isNaN(e)===!1?t=e:typeof e=="string"&&e.indexOf("#")===0?t=this.spineById[e.substring(1)]:typeof e=="string"&&(e=e.split("#")[0],t=this.spineByHref[e]||this.spineByHref[encodeURI(e)]);return this.spineItems[t]||null}append(e){var t=this.spineItems.length;return e.index=t,this.spineItems.push(e),this.spineByHref[decodeURI(e.href)]=t,this.spineByHref[encodeURI(e.href)]=t,this.spineByHref[e.href]=t,this.spineById[e.idref]=t,t}prepend(e){return this.spineByHref[e.href]=0,this.spineById[e.idref]=0,this.spineItems.forEach(function(t,n){t.index=n}),0}remove(e){var t=this.spineItems.indexOf(e);if(t>-1)return delete this.spineByHref[e.href],delete this.spineById[e.idref],this.spineItems.splice(t,1)}each(){return this.spineItems.forEach.apply(this.spineItems,arguments)}first(){let e=0;do{let t=this.get(e);if(t&&t.linear)return t;e+=1}while(e<this.spineItems.length)}last(){let e=this.spineItems.length-1;do{let t=this.get(e);if(t&&t.linear)return t;e-=1}while(e>=0)}destroy(){this.each(e=>e.destroy()),this.spineItems=void 0,this.spineByHref=void 0,this.spineById=void 0,this.hooks.serialize.clear(),this.hooks.content.clear(),this.hooks=void 0,this.epubcfi=void 0,this.loaded=!1,this.items=void 0,this.manifest=void 0,this.spineNodeIndex=void 0,this.baseUrl=void 0,this.length=void 0}}class D_{constructor(e){this._q=[],this.context=e,this.tick=C_,this.running=!1,this.paused=!1}enqueue(){var e,t,n,r=[].shift.call(arguments),s=arguments;if(!r)throw new Error("No Task Provided");return typeof r=="function"?(e=new dt,t=e.promise,n={task:r,args:s,deferred:e,promise:t}):n={promise:r},this._q.push(n),this.paused==!1&&!this.running&&this.run(),n.promise}dequeue(){var e,t,n;if(this._q.length&&!this.paused){if(e=this._q.shift(),t=e.task,t)return n=t.apply(this.context,e.args),n&&typeof n.then=="function"?n.then((function(){e.deferred.resolve.apply(this.context,arguments)}).bind(this),(function(){e.deferred.reject.apply(this.context,arguments)}).bind(this)):(e.deferred.resolve.apply(this.context,n),e.promise);if(e.promise)return e.promise}else return e=new dt,e.deferred.resolve(),e.promise}dump(){for(;this._q.length;)this.dequeue()}run(){return this.running||(this.running=!0,this.defered=new dt),this.tick.call(window,()=>{this._q.length?this.dequeue().then((function(){this.run()}).bind(this)):(this.defered.resolve(),this.running=void 0)}),this.paused==!0&&(this.paused=!1),this.defered.promise}flush(){if(this.running)return this.running;if(this._q.length)return this.running=this.dequeue().then((function(){return this.running=void 0,this.flush()}).bind(this)),this.running}clear(){this._q=[]}length(){return this._q.length}pause(){this.paused=!0}stop(){this._q=[],this.running=!1,this.paused=!0}}const vy="0.3",xm=["keydown","keyup","keypressed","mouseup","mousedown","mousemove","click","touchend","touchstart","touchmove"],Re={BOOK:{OPEN_FAILED:"openFailed"},CONTENTS:{EXPAND:"expand",RESIZE:"resize",SELECTED:"selected",SELECTED_RANGE:"selectedRange",LINK_CLICKED:"linkClicked"},LOCATIONS:{CHANGED:"changed"},MANAGERS:{RESIZE:"resize",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",ADDED:"added",SCROLL:"scroll",SCROLLED:"scrolled",REMOVED:"removed"},VIEWS:{AXIS:"axis",WRITING_MODE:"writingMode",LOAD_ERROR:"loaderror",RENDERED:"rendered",RESIZED:"resized",DISPLAYED:"displayed",SHOWN:"shown",HIDDEN:"hidden",MARK_CLICKED:"markClicked"},RENDITION:{STARTED:"started",ATTACHED:"attached",DISPLAYED:"displayed",DISPLAY_ERROR:"displayerror",RENDERED:"rendered",REMOVED:"removed",RESIZED:"resized",ORIENTATION_CHANGE:"orientationchange",LOCATION_CHANGED:"locationChanged",RELOCATED:"relocated",MARK_CLICKED:"markClicked",SELECTED:"selected",LAYOUT:"layout"},LAYOUT:{UPDATED:"updated"},ANNOTATION:{ATTACH:"attach",DETACH:"detach"}};class uD{constructor(e,t,n){this.spine=e,this.request=t,this.pause=n||100,this.q=new D_(this),this.epubcfi=new pt,this._locations=[],this._locationsWords=[],this.total=0,this.break=150,this._current=0,this._wordCounter=0,this.currentLocation="",this._currentCfi="",this.processingTimeout=void 0}generate(e){return e&&(this.break=e),this.q.pause(),this.spine.each((function(t){t.linear&&this.q.enqueue(this.process.bind(this),t)}).bind(this)),this.q.run().then((function(){return this.total=this._locations.length-1,this._currentCfi&&(this.currentLocation=this._currentCfi),this._locations}).bind(this))}createRange(){return{startContainer:void 0,startOffset:void 0,endContainer:void 0,endOffset:void 0}}process(e){return e.load(this.request).then((function(t){var n=new dt,r=this.parse(t,e.cfiBase);return this._locations=this._locations.concat(r),e.unload(),this.processingTimeout=setTimeout(()=>n.resolve(r),this.pause),n.promise}).bind(this))}parse(e,t,n){var r=[],s,a=e.ownerDocument,o=Ot(a,"body"),l=0,u,c=n||this.break,h=function(f){var d=f.length,y,b=0;if(f.textContent.trim().length===0)return!1;for(l==0&&(s=this.createRange(),s.startContainer=f,s.startOffset=0),y=c-l,y>d&&(l+=d,b=d);b<d;)if(y=c-l,l===0&&(b+=1,s=this.createRange(),s.startContainer=f,s.startOffset=b),b+y>=d)l+=d-b,b=d;else{b+=y,s.endContainer=f,s.endOffset=b;let v=new pt(s,t).toString();r.push(v),l=0}u=f};if(dv(o,h.bind(this)),s&&s.startContainer&&u){s.endContainer=u,s.endOffset=u.length;let f=new pt(s,t).toString();r.push(f),l=0}return r}generateFromWords(e,t,n){var r=e?new pt(e):void 0;return this.q.pause(),this._locationsWords=[],this._wordCounter=0,this.spine.each((function(s){s.linear&&(r?s.index>=r.spinePos&&this.q.enqueue(this.processWords.bind(this),s,t,r,n):this.q.enqueue(this.processWords.bind(this),s,t,r,n))}).bind(this)),this.q.run().then((function(){return this._currentCfi&&(this.currentLocation=this._currentCfi),this._locationsWords}).bind(this))}processWords(e,t,n,r){return r&&this._locationsWords.length>=r?Promise.resolve():e.load(this.request).then((function(s){var a=new dt,o=this.parseWords(s,e,t,n),l=r-this._locationsWords.length;return this._locationsWords=this._locationsWords.concat(o.length>=r?o.slice(0,l):o),e.unload(),this.processingTimeout=setTimeout(()=>a.resolve(o),this.pause),a.promise}).bind(this))}countWords(e){return e=e.replace(/(^\s*)|(\s*$)/gi,""),e=e.replace(/[ ]{2,}/gi," "),e=e.replace(/\n /,`
`),e.split(" ").length}parseWords(e,t,n,r){var s=t.cfiBase,a=[],o=e.ownerDocument,l=Ot(o,"body"),u=n,c=r?r.spinePos!==t.index:!0,h;r&&t.index===r.spinePos&&(h=r.findNode(r.range?r.path.steps.concat(r.start.steps):r.path.steps,e.ownerDocument));var f=function(d){if(!c)if(d===h)c=!0;else return!1;if(d.textContent.length<10&&d.textContent.trim().length===0)return!1;var y=this.countWords(d.textContent),b,v=0;if(y===0)return!1;for(b=u-this._wordCounter,b>y&&(this._wordCounter+=y,v=y);v<y;)if(b=u-this._wordCounter,v+b>=y)this._wordCounter+=y-v,v=y;else{v+=b;let g=new pt(d,s);a.push({cfi:g.toString(),wordCount:this._wordCounter}),this._wordCounter=0}};return dv(l,f.bind(this)),a}locationFromCfi(e){let t;return pt.prototype.isCfiString(e)&&(e=new pt(e)),this._locations.length===0?-1:(t=Rh(e,this._locations,this.epubcfi.compare),t>this.total?this.total:t)}percentageFromCfi(e){if(this._locations.length===0)return null;var t=this.locationFromCfi(e);return this.percentageFromLocation(t)}percentageFromLocation(e){return!e||!this.total?0:e/this.total}cfiFromLocation(e){var t=-1;return typeof e!="number"&&(e=parseInt(e)),e>=0&&e<this._locations.length&&(t=this._locations[e]),t}cfiFromPercentage(e){let t;if(e>1&&console.warn("Normalize cfiFromPercentage value to between 0 - 1"),e>=1){let n=new pt(this._locations[this.total]);return n.collapse(),n.toString()}return t=Math.ceil(this.total*e),this.cfiFromLocation(t)}load(e){return typeof e=="string"?this._locations=JSON.parse(e):this._locations=e,this.total=this._locations.length-1,this._locations}save(){return JSON.stringify(this._locations)}getCurrent(){return this._current}setCurrent(e){var t;if(typeof e=="string")this._currentCfi=e;else if(typeof e=="number")this._current=e;else return;this._locations.length!==0&&(typeof e=="string"?(t=this.locationFromCfi(e),this._current=t):t=e,this.emit(Re.LOCATIONS.CHANGED,{percentage:this.percentageFromLocation(t)}))}get currentLocation(){return this._current}set currentLocation(e){this.setCurrent(e)}length(){return this._locations.length}destroy(){this.spine=void 0,this.request=void 0,this.pause=void 0,this.q.stop(),this.q=void 0,this.epubcfi=void 0,this._locations=void 0,this.total=void 0,this.break=void 0,this._current=void 0,this.currentLocation=void 0,this._currentCfi=void 0,clearTimeout(this.processingTimeout)}}Is(uD.prototype);class AM{constructor(e){this.packagePath="",this.directory="",this.encoding="",e&&this.parse(e)}parse(e){var t;if(!e)throw new Error("Container File Not Found");if(t=Ot(e,"rootfile"),!t)throw new Error("No RootFile Found");this.packagePath=t.getAttribute("full-path"),this.directory=Ao.dirname(this.packagePath),this.encoding=e.xmlEncoding}destroy(){this.packagePath=void 0,this.directory=void 0,this.encoding=void 0}}class sA{constructor(e){this.manifest={},this.navPath="",this.ncxPath="",this.coverPath="",this.spineNodeIndex=0,this.spine=[],this.metadata={},e&&this.parse(e)}parse(e){var t,n,r;if(!e)throw new Error("Package File Not Found");if(t=Ot(e,"metadata"),!t)throw new Error("No Metadata Found");if(n=Ot(e,"manifest"),!n)throw new Error("No Manifest Found");if(r=Ot(e,"spine"),!r)throw new Error("No Spine Found");return this.manifest=this.parseManifest(n),this.navPath=this.findNavPath(n),this.ncxPath=this.findNcxPath(n,r),this.coverPath=this.findCoverPath(e),this.spineNodeIndex=eD(r),this.spine=this.parseSpine(r,this.manifest),this.uniqueIdentifier=this.findUniqueIdentifier(e),this.metadata=this.parseMetadata(t),this.metadata.direction=r.getAttribute("page-progression-direction"),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex}}parseMetadata(e){var t={};return t.title=this.getElementText(e,"title"),t.creator=this.getElementText(e,"creator"),t.description=this.getElementText(e,"description"),t.pubdate=this.getElementText(e,"date"),t.publisher=this.getElementText(e,"publisher"),t.identifier=this.getElementText(e,"identifier"),t.language=this.getElementText(e,"language"),t.rights=this.getElementText(e,"rights"),t.modified_date=this.getPropertyText(e,"dcterms:modified"),t.layout=this.getPropertyText(e,"rendition:layout"),t.orientation=this.getPropertyText(e,"rendition:orientation"),t.flow=this.getPropertyText(e,"rendition:flow"),t.viewport=this.getPropertyText(e,"rendition:viewport"),t.media_active_class=this.getPropertyText(e,"media:active-class"),t.spread=this.getPropertyText(e,"rendition:spread"),t}parseManifest(e){var t={},n=Da(e,"item"),r=Array.prototype.slice.call(n);return r.forEach(function(s){var a=s.getAttribute("id"),o=s.getAttribute("href")||"",l=s.getAttribute("media-type")||"",u=s.getAttribute("media-overlay")||"",c=s.getAttribute("properties")||"";t[a]={href:o,type:l,overlay:u,properties:c.length?c.split(" "):[]}}),t}parseSpine(e,t){var n=[],r=Da(e,"itemref"),s=Array.prototype.slice.call(r);return s.forEach(function(a,o){var l=a.getAttribute("idref"),u=a.getAttribute("properties")||"",c=u.length?u.split(" "):[],h={id:a.getAttribute("id"),idref:l,linear:a.getAttribute("linear")||"yes",properties:c,index:o};n.push(h)}),n}findUniqueIdentifier(e){var t=e.documentElement.getAttribute("unique-identifier");if(!t)return"";var n=e.getElementById(t);return n&&n.localName==="identifier"&&n.namespaceURI==="http://purl.org/dc/elements/1.1/"&&n.childNodes.length>0?n.childNodes[0].nodeValue.trim():""}findNavPath(e){var t=$u(e,"item",{properties:"nav"});return t?t.getAttribute("href"):!1}findNcxPath(e,t){var n=$u(e,"item",{"media-type":"application/x-dtbncx+xml"}),r;return n||(r=t.getAttribute("toc"),r&&(n=e.querySelector(`#${r}`))),n?n.getAttribute("href"):!1}findCoverPath(e){var t=Ot(e,"package");t.getAttribute("version");var n=$u(e,"item",{properties:"cover-image"});if(n)return n.getAttribute("href");var r=$u(e,"meta",{name:"cover"});if(r){var s=r.getAttribute("content"),a=e.getElementById(s);return a?a.getAttribute("href"):""}else return!1}getElementText(e,t){var n=e.getElementsByTagNameNS("http://purl.org/dc/elements/1.1/",t),r;return!n||n.length===0?"":(r=n[0],r.childNodes.length?r.childNodes[0].nodeValue:"")}getPropertyText(e,t){var n=$u(e,"meta",{property:t});return n&&n.childNodes.length?n.childNodes[0].nodeValue:""}load(e){this.metadata=e.metadata;let t=e.readingOrder||e.spine;return this.spine=t.map((n,r)=>(n.index=r,n.linear=n.linear||"yes",n)),e.resources.forEach((n,r)=>{this.manifest[r]=n,n.rel&&n.rel[0]==="cover"&&(this.coverPath=n.href)}),this.spineNodeIndex=0,this.toc=e.toc.map((n,r)=>(n.label=n.title,n)),{metadata:this.metadata,spine:this.spine,manifest:this.manifest,navPath:this.navPath,ncxPath:this.ncxPath,coverPath:this.coverPath,spineNodeIndex:this.spineNodeIndex,toc:this.toc}}destroy(){this.manifest=void 0,this.navPath=void 0,this.ncxPath=void 0,this.coverPath=void 0,this.spineNodeIndex=void 0,this.spine=void 0,this.metadata=void 0}}class E0{constructor(e){this.toc=[],this.tocByHref={},this.tocById={},this.landmarks=[],this.landmarksByType={},this.length=0,e&&this.parse(e)}parse(e){let t=e.nodeType,n,r;t&&(n=Ot(e,"html"),r=Ot(e,"ncx")),t?n?(this.toc=this.parseNav(e),this.landmarks=this.parseLandmarks(e)):r&&(this.toc=this.parseNcx(e)):this.toc=this.load(e),this.length=0,this.unpack(this.toc)}unpack(e){for(var t,n=0;n<e.length;n++)t=e[n],t.href&&(this.tocByHref[t.href]=n),t.id&&(this.tocById[t.id]=n),this.length++,t.subitems.length&&this.unpack(t.subitems)}get(e){var t;return e?(e.indexOf("#")===0?t=this.tocById[e.substring(1)]:e in this.tocByHref&&(t=this.tocByHref[e]),this.getByIndex(e,t,this.toc)):this.toc}getByIndex(e,t,n){if(n.length===0)return;const r=n[t];if(r&&(e===r.id||e===r.href))return r;{let s;for(let a=0;a<n.length&&(s=this.getByIndex(e,t,n[a].subitems),!s);++a);return s}}landmark(e){var t;return e?(t=this.landmarksByType[e],this.landmarks[t]):this.landmarks}parseNav(e){var t=pv(e,"nav","toc"),n=[];if(!t)return n;let r=Vu(t,"ol",!0);return r&&(n=this.parseNavList(r)),n}parseNavList(e,t){const n=[];if(!e||!e.children)return n;for(let r=0;r<e.children.length;r++){const s=this.navItem(e.children[r],t);s&&n.push(s)}return n}navItem(e,t){let n=e.getAttribute("id")||void 0,r=Vu(e,"a",!0)||Vu(e,"span",!0);if(!r)return;let s=r.getAttribute("href")||"";n||(n=s);let a=r.textContent||"",o=[],l=Vu(e,"ol",!0);return l&&(o=this.parseNavList(l,n)),{id:n,href:s,label:a,subitems:o,parent:t}}parseLandmarks(e){var t=pv(e,"nav","landmarks"),n=t?Da(t,"li"):[],r=n.length,s,a=[],o;if(!n||r===0)return a;for(s=0;s<r;++s)o=this.landmarkItem(n[s]),o&&(a.push(o),this.landmarksByType[o.type]=s);return a}landmarkItem(e){let t=Vu(e,"a",!0);if(!t)return;let n=t.getAttributeNS("http://www.idpf.org/2007/ops","type")||void 0,r=t.getAttribute("href")||"",s=t.textContent||"";return{href:r,label:s,type:n}}parseNcx(e){var t=Da(e,"navPoint"),n=t.length,r,s={},a=[],o,l;if(!t||n===0)return a;for(r=0;r<n;++r)o=this.ncxItem(t[r]),s[o.id]=o,o.parent?(l=s[o.parent],l.subitems.push(o)):a.push(o);return a}ncxItem(e){var t=e.getAttribute("id")||!1,n=Ot(e,"content"),r=n.getAttribute("src"),s=Ot(e,"navLabel"),a=s.textContent?s.textContent:"",o=[],l=e.parentNode,u;return l&&(l.nodeName==="navPoint"||l.nodeName.split(":").slice(-1)[0]==="navPoint")&&(u=l.getAttribute("id")),{id:t,href:r,label:a,subitems:o,parent:u}}load(e){return e.map(t=>(t.label=t.title,t.subitems=t.children?this.load(t.children):[],t))}forEach(e){return this.toc.forEach(e)}}var of={application:{ecmascript:["es","ecma"],javascript:"js",ogg:"ogx",pdf:"pdf",postscript:["ps","ai","eps","epsi","epsf","eps2","eps3"],"rdf+xml":"rdf",smil:["smi","smil"],"xhtml+xml":["xhtml","xht"],xml:["xml","xsl","xsd","opf","ncx"],zip:"zip","x-httpd-eruby":"rhtml","x-latex":"latex","x-maker":["frm","maker","frame","fm","fb","book","fbdoc"],"x-object":"o","x-shockwave-flash":["swf","swfl"],"x-silverlight":"scr","epub+zip":"epub","font-tdpfr":"pfr","inkml+xml":["ink","inkml"],json:"json","jsonml+json":"jsonml","mathml+xml":"mathml","metalink+xml":"metalink",mp4:"mp4s","omdoc+xml":"omdoc",oxps:"oxps","vnd.amazon.ebook":"azw",widget:"wgt","x-dtbook+xml":"dtb","x-dtbresource+xml":"res","x-font-bdf":"bdf","x-font-ghostscript":"gsf","x-font-linux-psf":"psf","x-font-otf":"otf","x-font-pcf":"pcf","x-font-snf":"snf","x-font-ttf":["ttf","ttc"],"x-font-type1":["pfa","pfb","pfm","afm"],"x-font-woff":"woff","x-mobipocket-ebook":["prc","mobi"],"x-mspublisher":"pub","x-nzb":"nzb","x-tgif":"obj","xaml+xml":"xaml","xml-dtd":"dtd","xproc+xml":"xpl","xslt+xml":"xslt","internet-property-stream":"acx","x-compress":"z","x-compressed":"tgz","x-gzip":"gz"},audio:{flac:"flac",midi:["mid","midi","kar","rmi"],mpeg:["mpga","mpega","mp2","mp3","m4a","mp2a","m2a","m3a"],mpegurl:"m3u",ogg:["oga","ogg","spx"],"x-aiff":["aif","aiff","aifc"],"x-ms-wma":"wma","x-wav":"wav",adpcm:"adp",mp4:"mp4a",webm:"weba","x-aac":"aac","x-caf":"caf","x-matroska":"mka","x-pn-realaudio-plugin":"rmp",xm:"xm",mid:["mid","rmi"]},image:{gif:"gif",ief:"ief",jpeg:["jpeg","jpg","jpe"],pcx:"pcx",png:"png","svg+xml":["svg","svgz"],tiff:["tiff","tif"],"x-icon":"ico",bmp:"bmp",webp:"webp","x-pict":["pic","pct"],"x-tga":"tga","cis-cod":"cod"},text:{"cache-manifest":["manifest","appcache"],css:"css",csv:"csv",html:["html","htm","shtml","stm"],mathml:"mml",plain:["txt","text","brf","conf","def","list","log","in","bas"],richtext:"rtx","tab-separated-values":"tsv","x-bibtex":"bib"},video:{mpeg:["mpeg","mpg","mpe","m1v","m2v","mp2","mpa","mpv2"],mp4:["mp4","mp4v","mpg4"],quicktime:["qt","mov"],ogg:"ogv","vnd.mpegurl":["mxu","m4u"],"x-flv":"flv","x-la-asf":["lsf","lsx"],"x-mng":"mng","x-ms-asf":["asf","asx","asr"],"x-ms-wm":"wm","x-ms-wmv":"wmv","x-ms-wmx":"wmx","x-ms-wvx":"wvx","x-msvideo":"avi","x-sgi-movie":"movie","x-matroska":["mpv","mkv","mk3d","mks"],"3gpp2":"3g2",h261:"h261",h263:"h263",h264:"h264",jpeg:"jpgv",jpm:["jpm","jpgm"],mj2:["mj2","mjp2"],"vnd.ms-playready.media.pyv":"pyv","vnd.uvvu.mp4":["uvu","uvvu"],"vnd.vivo":"viv",webm:"webm","x-f4v":"f4v","x-m4v":"m4v","x-ms-vob":"vob","x-smv":"smv"}},xM=function(){var i,e,t,n,r={};for(i in of)if(of.hasOwnProperty(i)){for(e in of[i])if(of[i].hasOwnProperty(e))if(t=of[i][e],typeof t=="string")r[t]=i+"/"+e;else for(n=0;n<t.length;n++)r[t[n]]=i+"/"+e}return r}(),SM="text/plain";function CM(i){return i&&xM[i.split(".").pop().toLowerCase()]||SM}const mc={lookup:CM};class TM{constructor(e,t){this.settings={replacements:t&&t.replacements||"base64",archive:t&&t.archive,resolver:t&&t.resolver,request:t&&t.request},this.process(e)}process(e){this.manifest=e,this.resources=Object.keys(e).map(function(t){return e[t]}),this.replacementUrls=[],this.html=[],this.assets=[],this.css=[],this.urls=[],this.cssUrls=[],this.split(),this.splitUrls()}split(){this.html=this.resources.filter(function(e){if(e.type==="application/xhtml+xml"||e.type==="text/html")return!0}),this.assets=this.resources.filter(function(e){if(e.type!=="application/xhtml+xml"&&e.type!=="text/html")return!0}),this.css=this.resources.filter(function(e){if(e.type==="text/css")return!0})}splitUrls(){this.urls=this.assets.map((function(e){return e.href}).bind(this)),this.cssUrls=this.css.map(function(e){return e.href})}createUrl(e){var t=new Ir(e),n=mc.lookup(t.filename);return this.settings.archive?this.settings.archive.createUrl(e,{base64:this.settings.replacements==="base64"}):this.settings.replacements==="base64"?this.settings.request(e,"blob").then(r=>sD(r)).then(r=>K1(r,n)):this.settings.request(e,"blob").then(r=>fv(r,n))}replacements(){if(this.settings.replacements==="none")return new Promise((function(t){t(this.urls)}).bind(this));var e=this.urls.map(t=>{var n=this.settings.resolver(t);return this.createUrl(n).catch(r=>(console.error(r),null))});return Promise.all(e).then(t=>(this.replacementUrls=t.filter(n=>typeof n=="string"),t))}replaceCss(e,t){var n=[];return e=e||this.settings.archive,t=t||this.settings.resolver,this.cssUrls.forEach((function(r){var s=this.createCssFile(r,e,t).then((function(a){var o=this.urls.indexOf(r);o>-1&&(this.replacementUrls[o]=a)}).bind(this));n.push(s)}).bind(this)),Promise.all(n)}createCssFile(e){var t;if(Ao.isAbsolute(e))return new Promise(function(a){a()});var n=this.settings.resolver(e),r;this.settings.archive?r=this.settings.archive.getText(n):r=this.settings.request(n,"text");var s=this.urls.map(a=>{var o=this.settings.resolver(a),l=new Oa(n).relative(o);return l});return r?r.then(a=>(a=rA(a,s,this.replacementUrls),this.settings.replacements==="base64"?t=K1(a,"text/css"):t=fv(a,"text/css"),t),a=>new Promise(function(o){o()})):new Promise(function(a){a()})}relativeTo(e,t){return t=t||this.settings.resolver,this.urls.map((function(n){var r=t(n),s=new Oa(e).relative(r);return s}).bind(this))}get(e){var t=this.urls.indexOf(e);if(t!==-1)return this.replacementUrls.length?new Promise((function(n,r){n(this.replacementUrls[t])}).bind(this)):this.createUrl(e)}substitute(e,t){var n;return t?n=this.relativeTo(t):n=this.urls,rA(e,n,this.replacementUrls)}destroy(){this.settings=void 0,this.manifest=void 0,this.resources=void 0,this.replacementUrls=void 0,this.html=void 0,this.assets=void 0,this.css=void 0,this.urls=void 0,this.cssUrls=void 0}}class A0{constructor(e){this.pages=[],this.locations=[],this.epubcfi=new pt,this.firstPage=0,this.lastPage=0,this.totalPages=0,this.toc=void 0,this.ncx=void 0,e&&(this.pageList=this.parse(e)),this.pageList&&this.pageList.length&&this.process(this.pageList)}parse(e){var t=Ot(e,"html"),n=Ot(e,"ncx");if(t)return this.parseNav(e);if(n)return this.parseNcx(e)}parseNav(e){var t=pv(e,"nav","page-list"),n=t?Da(t,"li"):[],r=n.length,s,a=[],o;if(!n||r===0)return a;for(s=0;s<r;++s)o=this.item(n[s]),a.push(o);return a}parseNcx(e){var t=[],n=0,r,s,a,o=0;if(s=Ot(e,"pageList"),!s||(a=Da(s,"pageTarget"),o=a.length,!a||a.length===0))return t;for(n=0;n<o;++n)r=this.ncxItem(a[n]),t.push(r);return t}ncxItem(e){var t=Ot(e,"navLabel"),n=Ot(t,"text"),r=n.textContent,s=Ot(e,"content"),a=s.getAttribute("src"),o=parseInt(r,10);return{href:a,page:o}}item(e){var t=Ot(e,"a"),n=t.getAttribute("href")||"",r=t.textContent||"",s=parseInt(r),a=n.indexOf("epubcfi"),o,l,u;return a!=-1?(o=n.split("#"),l=o[0],u=o.length>1?o[1]:!1,{cfi:u,href:n,packageUrl:l,page:s}):{href:n,page:s}}process(e){e.forEach(function(t){this.pages.push(t.page),t.cfi&&this.locations.push(t.cfi)},this),this.firstPage=parseInt(this.pages[0]),this.lastPage=parseInt(this.pages[this.pages.length-1]),this.totalPages=this.lastPage-this.firstPage}pageFromCfi(e){var t=-1;if(this.locations.length===0)return-1;var n=uv(e,this.locations,this.epubcfi.compare);return n!=-1?t=this.pages[n]:(n=Rh(e,this.locations,this.epubcfi.compare),t=n-1>=0?this.pages[n-1]:this.pages[0],t!==void 0||(t=-1)),t}cfiFromPage(e){var t=-1;typeof e!="number"&&(e=parseInt(e));var n=this.pages.indexOf(e);return n!=-1&&(t=this.locations[n]),t}pageFromPercentage(e){var t=Math.round(this.totalPages*e);return t}percentageFromPage(e){var t=(e-this.firstPage)/this.totalPages;return Math.round(t*1e3)/1e3}percentageFromCfi(e){var t=this.pageFromCfi(e),n=this.percentageFromPage(t);return n}destroy(){this.pages=void 0,this.locations=void 0,this.epubcfi=void 0,this.pageList=void 0,this.toc=void 0,this.ncx=void 0}}class cD{constructor(e){this.settings=e,this.name=e.layout||"reflowable",this._spread=e.spread!=="none",this._minSpreadWidth=e.minSpreadWidth||800,this._evenSpreads=e.evenSpreads||!1,e.flow==="scrolled"||e.flow==="scrolled-continuous"||e.flow==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.width=0,this.height=0,this.spreadWidth=0,this.delta=0,this.columnWidth=0,this.gap=0,this.divisor=1,this.props={name:this.name,spread:this._spread,flow:this._flow,width:0,height:0,spreadWidth:0,delta:0,columnWidth:0,gap:0,divisor:1}}flow(e){return typeof e<"u"&&(e==="scrolled"||e==="scrolled-continuous"||e==="scrolled-doc"?this._flow="scrolled":this._flow="paginated",this.update({flow:this._flow})),this._flow}spread(e,t){return e&&(this._spread=e!=="none",this.update({spread:this._spread})),t>=0&&(this._minSpreadWidth=t),this._spread}calculate(e,t,n){var r=1,s=n||0,a=e,o=t,l=Math.floor(a/12),u,c,h,f;this._spread&&a>=this._minSpreadWidth?r=2:r=1,this.name==="reflowable"&&this._flow==="paginated"&&!(n>=0)&&(s=l%2===0?l:l-1),this.name==="pre-paginated"&&(s=0),r>1?(u=a/r-s,h=u+s):(u=a,h=a),this.name==="pre-paginated"&&r>1&&(a=u),c=u*r+s,f=a,this.width=a,this.height=o,this.spreadWidth=c,this.pageWidth=h,this.delta=f,this.columnWidth=u,this.gap=s,this.divisor=r,this.update({width:a,height:o,spreadWidth:c,pageWidth:h,delta:f,columnWidth:u,gap:s,divisor:r})}format(e,t,n){var r;return this.name==="pre-paginated"?r=e.fit(this.columnWidth,this.height,t):this._flow==="paginated"?r=e.columns(this.width,this.height,this.columnWidth,this.gap,this.settings.direction):n&&n==="horizontal"?r=e.size(null,this.height):r=e.size(this.width,null),r}count(e,t){let n,r;return this.name==="pre-paginated"?(n=1,r=1):this._flow==="paginated"?(t=t||this.delta,n=Math.ceil(e/t),r=n*this.divisor):(t=t||this.height,n=Math.ceil(e/t),r=n),{spreads:n,pages:r}}update(e){if(Object.keys(e).forEach(t=>{this.props[t]===e[t]&&delete e[t]}),Object.keys(e).length>0){let t=Wn(this.props,e);this.emit(Re.LAYOUT.UPDATED,t,e)}}}Is(cD.prototype);class kM{constructor(e){this.rendition=e,this._themes={default:{rules:{},url:"",serialized:""}},this._overrides={},this._current="default",this._injected=[],this.rendition.hooks.content.register(this.inject.bind(this)),this.rendition.hooks.content.register(this.overrides.bind(this))}register(){if(arguments.length!==0){if(arguments.length===1&&typeof arguments[0]=="object")return this.registerThemes(arguments[0]);if(arguments.length===1&&typeof arguments[0]=="string")return this.default(arguments[0]);if(arguments.length===2&&typeof arguments[1]=="string")return this.registerUrl(arguments[0],arguments[1]);if(arguments.length===2&&typeof arguments[1]=="object")return this.registerRules(arguments[0],arguments[1])}}default(e){if(e){if(typeof e=="string")return this.registerUrl("default",e);if(typeof e=="object")return this.registerRules("default",e)}}registerThemes(e){for(var t in e)e.hasOwnProperty(t)&&(typeof e[t]=="string"?this.registerUrl(t,e[t]):this.registerRules(t,e[t]))}registerCss(e,t){this._themes[e]={serialized:t},(this._injected[e]||e=="default")&&this.update(e)}registerUrl(e,t){var n=new Ir(t);this._themes[e]={url:n.toString()},(this._injected[e]||e=="default")&&this.update(e)}registerRules(e,t){this._themes[e]={rules:t},(this._injected[e]||e=="default")&&this.update(e)}select(e){var t=this._current,n;this._current=e,this.update(e),n=this.rendition.getContents(),n.forEach(r=>{r.removeClass(t),r.addClass(e)})}update(e){var t=this.rendition.getContents();t.forEach(n=>{this.add(e,n)})}inject(e){var t=[],n=this._themes,r;for(var s in n)n.hasOwnProperty(s)&&(s===this._current||s==="default")&&(r=n[s],(r.rules&&Object.keys(r.rules).length>0||r.url&&t.indexOf(r.url)===-1)&&this.add(s,e),this._injected.push(s));this._current!="default"&&e.addClass(this._current)}add(e,t){var n=this._themes[e];!n||!t||(n.url?t.addStylesheet(n.url):n.serialized?(t.addStylesheetCss(n.serialized,e),n.injected=!0):n.rules&&(t.addStylesheetRules(n.rules,e),n.injected=!0))}override(e,t,n){var r=this.rendition.getContents();this._overrides[e]={value:t,priority:n===!0},r.forEach(s=>{s.css(e,this._overrides[e].value,this._overrides[e].priority)})}removeOverride(e){var t=this.rendition.getContents();delete this._overrides[e],t.forEach(n=>{n.css(e)})}overrides(e){var t=this._overrides;for(var n in t)t.hasOwnProperty(n)&&e.css(n,t[n].value,t[n].priority)}fontSize(e){this.override("font-size",e)}font(e){this.override("font-family",e,!0)}destroy(){this.rendition=void 0,this._themes=void 0,this._overrides=void 0,this._current=void 0,this._injected=void 0}}class gv{constructor(e,t,n,r=!1){this.layout=e,this.horizontal=n==="horizontal",this.direction=t||"ltr",this._dev=r}section(e){var t=this.findRanges(e),n=this.rangeListToCfiList(e.section.cfiBase,t);return n}page(e,t,n,r){var s=e&&e.document?e.document.body:!1,a;if(s){if(a=this.rangePairToCfiPair(t,{start:this.findStart(s,n,r),end:this.findEnd(s,n,r)}),this._dev===!0){let o=e.document,l=new pt(a.start).toRange(o),u=new pt(a.end).toRange(o),c=o.defaultView.getSelection(),h=o.createRange();c.removeAllRanges(),h.setStart(l.startContainer,l.startOffset),h.setEnd(u.endContainer,u.endOffset),c.addRange(h)}return a}}walk(e,t){if(!(e&&e.nodeType===Node.TEXT_NODE)){var n={acceptNode:function(l){return l.data.trim().length>0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_REJECT}},r=n.acceptNode;r.acceptNode=n.acceptNode;for(var s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT,r,!1),a,o;(a=s.nextNode())&&(o=t(a),!o););return o}}findRanges(e){for(var t=[],n=e.contents.scrollWidth(),r=Math.ceil(n/this.layout.spreadWidth),s=r*this.layout.divisor,a=this.layout.columnWidth,o=this.layout.gap,l,u,c=0;c<s.pages;c++)l=(a+o)*c,u=a*(c+1)+o*c,t.push({start:this.findStart(e.document.body,l,u),end:this.findEnd(e.document.body,l,u)});return t}findStart(e,t,n){for(var r=[e],s,a,o=e;r.length;)if(s=r.shift(),a=this.walk(s,l=>{var u,c,h,f,d;if(d=X1(l),this.horizontal&&this.direction==="ltr"){if(u=this.horizontal?d.left:d.top,c=this.horizontal?d.right:d.bottom,u>=t&&u<=n)return l;if(c>t)return l;o=l,r.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(u=d.left,c=d.right,c<=n&&c>=t)return l;if(u<n)return l;o=l,r.push(l)}else{if(h=d.top,f=d.bottom,h>=t&&h<=n)return l;if(f>t)return l;o=l,r.push(l)}}),a)return this.findTextStartRange(a,t,n);return this.findTextStartRange(o,t,n)}findEnd(e,t,n){for(var r=[e],s,a=e,o;r.length;)if(s=r.shift(),o=this.walk(s,l=>{var u,c,h,f,d;if(d=X1(l),this.horizontal&&this.direction==="ltr"){if(u=Math.round(d.left),c=Math.round(d.right),u>n&&a)return a;if(c>n)return l;a=l,r.push(l)}else if(this.horizontal&&this.direction==="rtl"){if(u=Math.round(this.horizontal?d.left:d.top),c=Math.round(this.horizontal?d.right:d.bottom),c<t&&a)return a;if(u<t)return l;a=l,r.push(l)}else{if(h=Math.round(d.top),f=Math.round(d.bottom),h>n&&a)return a;if(f>n)return l;a=l,r.push(l)}}),o)return this.findTextEndRange(o,t,n);return this.findTextEndRange(a,t,n)}findTextStartRange(e,t,n){for(var r=this.splitTextNodeIntoRanges(e),s,a,o,l,u,c=0;c<r.length;c++)if(s=r[c],a=s.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(o=a.left,o>=t)return s}else if(this.horizontal&&this.direction==="rtl"){if(u=a.right,u<=n)return s}else if(l=a.top,l>=t)return s;return r[0]}findTextEndRange(e,t,n){for(var r=this.splitTextNodeIntoRanges(e),s,a,o,l,u,c,h,f=0;f<r.length;f++){if(a=r[f],o=a.getBoundingClientRect(),this.horizontal&&this.direction==="ltr"){if(l=o.left,u=o.right,l>n&&s)return s;if(u>n)return a}else if(this.horizontal&&this.direction==="rtl"){if(l=o.left,u=o.right,u<t&&s)return s;if(l<t)return a}else{if(c=o.top,h=o.bottom,c>n&&s)return s;if(h>n)return a}s=a}return r[r.length-1]}splitTextNodeIntoRanges(e,t){var n=[],r=e.textContent||"",s=r.trim(),a,o=e.ownerDocument,l=t||" ",u=s.indexOf(l);if(u===-1||e.nodeType!=Node.TEXT_NODE)return a=o.createRange(),a.selectNodeContents(e),[a];for(a=o.createRange(),a.setStart(e,0),a.setEnd(e,u),n.push(a),a=!1;u!=-1;)u=s.indexOf(l,u+1),u>0&&(a&&(a.setEnd(e,u),n.push(a)),a=o.createRange(),a.setStart(e,u+1));return a&&(a.setEnd(e,s.length),n.push(a)),n}rangePairToCfiPair(e,t){var n=t.start,r=t.end;n.collapse(!0),r.collapse(!1);let s=new pt(n,e).toString(),a=new pt(r,e).toString();return{start:s,end:a}}rangeListToCfiList(e,t){for(var n=[],r,s=0;s<t.length;s++)r=this.rangePairToCfiPair(e,t[s]),n.push(r);return n}axis(e){return e&&(this.horizontal=e==="horizontal"),this.horizontal}}const hD=typeof navigator<"u",DM=hD&&/Chrome/.test(navigator.userAgent),aA=hD&&!DM&&/AppleWebKit/.test(navigator.userAgent),OM=1;class O_{constructor(e,t,n,r){this.epubcfi=new pt,this.document=e,this.documentElement=this.document.documentElement,this.content=t||this.document.body,this.window=this.document.defaultView,this._size={width:0,height:0},this.sectionIndex=r||0,this.cfiBase=n||"",this.epubReadingSystem("epub.js",vy),this.called=0,this.active=!0,this.listeners()}static get listenedEvents(){return xm}width(e){var t=this.content;return e&&en(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}height(e){var t=this.content;return e&&en(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}contentWidth(e){var t=this.content||this.document.body;return e&&en(e)&&(e=e+"px"),e&&(t.style.width=e),parseInt(this.window.getComputedStyle(t).width)}contentHeight(e){var t=this.content||this.document.body;return e&&en(e)&&(e=e+"px"),e&&(t.style.height=e),parseInt(this.window.getComputedStyle(t).height)}textWidth(){let e,t,n=this.document.createRange(),r=this.content||this.document.body,s=cv(r);return n.selectNodeContents(r),e=n.getBoundingClientRect(),t=e.width,s&&s.width&&(t+=s.width),Math.round(t)}textHeight(){let e,t,n=this.document.createRange(),r=this.content||this.document.body;return n.selectNodeContents(r),e=n.getBoundingClientRect(),t=e.bottom,Math.round(t)}scrollWidth(){var e=this.documentElement.scrollWidth;return e}scrollHeight(){var e=this.documentElement.scrollHeight;return e}overflow(e){return e&&(this.documentElement.style.overflow=e),this.window.getComputedStyle(this.documentElement).overflow}overflowX(e){return e&&(this.documentElement.style.overflowX=e),this.window.getComputedStyle(this.documentElement).overflowX}overflowY(e){return e&&(this.documentElement.style.overflowY=e),this.window.getComputedStyle(this.documentElement).overflowY}css(e,t,n){var r=this.content||this.document.body;return t?r.style.setProperty(e,t,n?"important":""):r.style.removeProperty(e),this.window.getComputedStyle(r)[e]}viewport(e){var t=this.document.querySelector("meta[name='viewport']"),n={width:void 0,height:void 0,scale:void 0,minimum:void 0,maximum:void 0,scalable:void 0},r=[],s={};if(t&&t.hasAttribute("content")){let a=t.getAttribute("content"),o=a.match(/width\s*=\s*([^,]*)/),l=a.match(/height\s*=\s*([^,]*)/),u=a.match(/initial-scale\s*=\s*([^,]*)/),c=a.match(/minimum-scale\s*=\s*([^,]*)/),h=a.match(/maximum-scale\s*=\s*([^,]*)/),f=a.match(/user-scalable\s*=\s*([^,]*)/);o&&o.length&&typeof o[1]<"u"&&(n.width=o[1]),l&&l.length&&typeof l[1]<"u"&&(n.height=l[1]),u&&u.length&&typeof u[1]<"u"&&(n.scale=u[1]),c&&c.length&&typeof c[1]<"u"&&(n.minimum=c[1]),h&&h.length&&typeof h[1]<"u"&&(n.maximum=h[1]),f&&f.length&&typeof f[1]<"u"&&(n.scalable=f[1])}return s=Jk(e||{},n),e&&(s.width&&r.push("width="+s.width),s.height&&r.push("height="+s.height),s.scale&&r.push("initial-scale="+s.scale),s.scalable==="no"?(r.push("minimum-scale="+s.scale),r.push("maximum-scale="+s.scale),r.push("user-scalable="+s.scalable)):(s.scalable&&r.push("user-scalable="+s.scalable),s.minimum&&r.push("minimum-scale="+s.minimum),s.maximum&&r.push("minimum-scale="+s.maximum)),t||(t=this.document.createElement("meta"),t.setAttribute("name","viewport"),this.document.querySelector("head").appendChild(t)),t.setAttribute("content",r.join(", ")),this.window.scrollTo(0,0)),s}expand(){this.emit(Re.CONTENTS.EXPAND)}listeners(){this.imageLoadListeners(),this.mediaQueryListeners(),this.addEventListeners(),this.addSelectionListeners(),typeof ResizeObserver>"u"?(this.resizeListeners(),this.visibilityListeners()):this.resizeObservers(),this.linksHandler()}removeListeners(){this.removeEventListeners(),this.removeSelectionListeners(),this.observer&&this.observer.disconnect(),clearTimeout(this.expanding)}resizeCheck(){let e=this.textWidth(),t=this.textHeight();(e!=this._size.width||t!=this._size.height)&&(this._size={width:e,height:t},this.onResize&&this.onResize(this._size),this.emit(Re.CONTENTS.RESIZE,this._size))}resizeListeners(){clearTimeout(this.expanding),requestAnimationFrame(this.resizeCheck.bind(this)),this.expanding=setTimeout(this.resizeListeners.bind(this),350)}visibilityListeners(){document.addEventListener("visibilitychange",()=>{document.visibilityState==="visible"&&this.active===!1?(this.active=!0,this.resizeListeners()):(this.active=!1,clearTimeout(this.expanding))})}transitionListeners(){let e=this.content;e.style.transitionProperty="font, font-size, font-size-adjust, font-stretch, font-variation-settings, font-weight, width, height",e.style.transitionDuration="0.001ms",e.style.transitionTimingFunction="linear",e.style.transitionDelay="0",this._resizeCheck=this.resizeCheck.bind(this),this.document.addEventListener("transitionend",this._resizeCheck)}mediaQueryListeners(){for(var e=this.document.styleSheets,t=(function(o){o.matches&&!this._expanding&&setTimeout(this.expand.bind(this),1)}).bind(this),n=0;n<e.length;n+=1){var r;try{r=e[n].cssRules}catch{return}if(!r)return;for(var s=0;s<r.length;s+=1)if(r[s].media){var a=this.window.matchMedia(r[s].media.mediaText);a.addListener(t)}}}resizeObservers(){this.observer=new ResizeObserver(e=>{requestAnimationFrame(this.resizeCheck.bind(this))}),this.observer.observe(this.document.documentElement)}mutationObservers(){this.observer=new MutationObserver(t=>{this.resizeCheck()});let e={attributes:!0,childList:!0,characterData:!0,subtree:!0};this.observer.observe(this.document,e)}imageLoadListeners(){for(var e=this.document.querySelectorAll("img"),t,n=0;n<e.length;n++)t=e[n],typeof t.naturalWidth<"u"&&t.naturalWidth===0&&(t.onload=this.expand.bind(this))}fontLoadListeners(){!this.document||!this.document.fonts||this.document.fonts.ready.then((function(){this.resizeCheck()}).bind(this))}root(){return this.document?this.document.documentElement:null}locationOf(e,t){var n,r={left:0,top:0};if(!this.document)return r;if(this.epubcfi.isCfiString(e)){let s=new pt(e).toRange(this.document,t);if(s){try{if(!s.endContainer||s.startContainer==s.endContainer&&s.startOffset==s.endOffset){let a=s.startContainer.textContent.indexOf(" ",s.startOffset);a==-1&&(a=s.startContainer.textContent.length),s.setEnd(s.startContainer,a)}}catch(a){console.error("setting end offset to start container length failed",a)}if(s.startContainer.nodeType===Node.ELEMENT_NODE)n=s.startContainer.getBoundingClientRect(),r.left=n.left,r.top=n.top;else if(aA){let a=s.startContainer,o=new Range;try{a.nodeType===OM?n=a.getBoundingClientRect():s.startOffset+2<a.length?(o.setStart(a,s.startOffset),o.setEnd(a,s.startOffset+2),n=o.getBoundingClientRect()):s.startOffset-2>0?(o.setStart(a,s.startOffset-2),o.setEnd(a,s.startOffset),n=o.getBoundingClientRect()):n=a.parentNode.getBoundingClientRect()}catch(l){console.error(l,l.stack)}}else n=s.getBoundingClientRect()}}else if(typeof e=="string"&&e.indexOf("#")>-1){let s=e.substring(e.indexOf("#")+1),a=this.document.getElementById(s);if(a)if(aA){let o=new Range;o.selectNode(a),n=o.getBoundingClientRect()}else n=a.getBoundingClientRect()}return n&&(r.left=n.left,r.top=n.top),r}addStylesheet(e){return new Promise((function(t,n){var r,s=!1;if(!this.document){t(!1);return}if(r=this.document.querySelector("link[href='"+e+"']"),r){t(!0);return}r=this.document.createElement("link"),r.type="text/css",r.rel="stylesheet",r.href=e,r.onload=r.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(()=>{t(!0)},1))},this.document.head.appendChild(r)}).bind(this))}_getStylesheetNode(e){var t;return e="epubjs-inserted-css-"+(e||""),this.document?(t=this.document.getElementById(e),t||(t=this.document.createElement("style"),t.id=e,this.document.head.appendChild(t)),t):!1}addStylesheetCss(e,t){if(!this.document||!e)return!1;var n;return n=this._getStylesheetNode(t),n.innerHTML=e,!0}addStylesheetRules(e,t){var n;if(!(!this.document||!e||e.length===0))if(n=this._getStylesheetNode(t).sheet,Object.prototype.toString.call(e)==="[object Array]")for(var r=0,s=e.length;r<s;r++){var a=1,o=e[r],l=e[r][0],u="";Object.prototype.toString.call(o[1][0])==="[object Array]"&&(o=o[1],a=0);for(var c=o.length;a<c;a++){var h=o[a];u+=h[0]+":"+h[1]+(h[2]?" !important":"")+`;
`}n.insertRule(l+"{"+u+"}",n.cssRules.length)}else Object.keys(e).forEach(d=>{const y=e[d];if(Array.isArray(y))y.forEach(b=>{const g=Object.keys(b).map(m=>`${m}:${b[m]}`).join(";");n.insertRule(`${d}{${g}}`,n.cssRules.length)});else{const v=Object.keys(y).map(g=>`${g}:${y[g]}`).join(";");n.insertRule(`${d}{${v}}`,n.cssRules.length)}})}addScript(e){return new Promise((function(t,n){var r,s=!1;if(!this.document){t(!1);return}r=this.document.createElement("script"),r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){!s&&(!this.readyState||this.readyState=="complete")&&(s=!0,setTimeout(function(){t(!0)},1))},this.document.head.appendChild(r)}).bind(this))}addClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.add(e))}removeClass(e){var t;this.document&&(t=this.content||this.document.body,t&&t.classList.remove(e))}addEventListeners(){this.document&&(this._triggerEvent=this.triggerEvent.bind(this),xm.forEach(function(e){this.document.addEventListener(e,this._triggerEvent,{passive:!0})},this))}removeEventListeners(){this.document&&(xm.forEach(function(e){this.document.removeEventListener(e,this._triggerEvent,{passive:!0})},this),this._triggerEvent=void 0)}triggerEvent(e){this.emit(e.type,e)}addSelectionListeners(){this.document&&(this._onSelectionChange=this.onSelectionChange.bind(this),this.document.addEventListener("selectionchange",this._onSelectionChange,{passive:!0}))}removeSelectionListeners(){this.document&&(this.document.removeEventListener("selectionchange",this._onSelectionChange,{passive:!0}),this._onSelectionChange=void 0)}onSelectionChange(e){this.selectionEndTimeout&&clearTimeout(this.selectionEndTimeout),this.selectionEndTimeout=setTimeout((function(){var t=this.window.getSelection();this.triggerSelectedEvent(t)}).bind(this),250)}triggerSelectedEvent(e){var t,n;e&&e.rangeCount>0&&(t=e.getRangeAt(0),t.collapsed||(n=new pt(t,this.cfiBase).toString(),this.emit(Re.CONTENTS.SELECTED,n),this.emit(Re.CONTENTS.SELECTED_RANGE,t)))}range(e,t){var n=new pt(e);return n.toRange(this.document,t)}cfiFromRange(e,t){return new pt(e,this.cfiBase,t).toString()}cfiFromNode(e,t){return new pt(e,this.cfiBase,t).toString()}map(e){var t=new gv(e);return t.section()}size(e,t){var n={scale:1,scalable:"no"};this.layoutStyle("scrolling"),e>=0&&(this.width(e),n.width=e,this.css("padding","0 "+e/12+"px")),t>=0&&(this.height(t),n.height=t),this.css("margin","0"),this.css("box-sizing","border-box"),this.viewport(n)}columns(e,t,n,r,s){let a=Wu("column-axis"),o=Wu("column-gap"),l=Wu("column-width"),u=Wu("column-fill"),h=this.writingMode().indexOf("vertical")===0?"vertical":"horizontal";this.layoutStyle("paginated"),s==="rtl"&&h==="horizontal"&&this.direction(s),this.width(e),this.height(t),this.viewport({width:e,height:t,scale:1,scalable:"no"}),this.css("overflow-y","hidden"),this.css("margin","0",!0),h==="vertical"?(this.css("padding-top",r/2+"px",!0),this.css("padding-bottom",r/2+"px",!0),this.css("padding-left","20px"),this.css("padding-right","20px"),this.css(a,"vertical")):(this.css("padding-top","20px"),this.css("padding-bottom","20px"),this.css("padding-left",r/2+"px",!0),this.css("padding-right",r/2+"px",!0),this.css(a,"horizontal")),this.css("box-sizing","border-box"),this.css("max-width","inherit"),this.css(u,"auto"),this.css(o,r+"px"),this.css(l,n+"px"),this.css("-webkit-line-box-contain","block glyphs replaced")}scaler(e,t,n){var r="scale("+e+")",s="";this.css("transform-origin","top left"),(t>=0||n>=0)&&(s=" translate("+(t||0)+"px, "+(n||0)+"px )"),this.css("transform",r+s)}fit(e,t,n){var r=this.viewport(),s=parseInt(r.width),a=parseInt(r.height),o=e/s,l=t/a,u=o<l?o:l;if(this.layoutStyle("paginated"),this.width(s),this.height(a),this.overflow("hidden"),this.scaler(u,0,0),this.css("background-size",s*u+"px "+a*u+"px"),this.css("background-color","transparent"),n&&n.properties.includes("page-spread-left")){var c=e-s*u;this.css("margin-left",c+"px")}}direction(e){this.documentElement&&(this.documentElement.style.direction=e)}mapPage(e,t,n,r,s){var a=new gv(t,s);return a.page(this,e,n,r)}linksHandler(){wM(this.content,e=>{this.emit(Re.CONTENTS.LINK_CLICKED,e)})}writingMode(e){let t=Wu("writing-mode");return e&&this.documentElement&&(this.documentElement.style[t]=e),this.window.getComputedStyle(this.documentElement)[t]||""}layoutStyle(e){return e&&(this._layoutStyle=e,navigator.epubReadingSystem.layoutStyle=this._layoutStyle),this._layoutStyle||"paginated"}epubReadingSystem(e,t){return navigator.epubReadingSystem={name:e,version:t,layoutStyle:this.layoutStyle(),hasFeature:function(n){switch(n){case"dom-manipulation":return!0;case"layout-changes":return!0;case"touch-events":return!0;case"mouse-events":return!0;case"keyboard-events":return!0;case"spine-scripting":return!1;default:return!1}}},navigator.epubReadingSystem}destroy(){this.removeListeners()}}Is(O_.prototype);class NM{constructor(e){this.rendition=e,this.highlights=[],this.underlines=[],this.marks=[],this._annotations={},this._annotationsBySectionIndex={},this.rendition.hooks.render.register(this.inject.bind(this)),this.rendition.hooks.unloaded.register(this.clear.bind(this))}add(e,t,n,r,s,a){let o=encodeURI(t+e),u=new pt(t).spinePos,c=new fD({type:e,cfiRange:t,data:n,sectionIndex:u,cb:r,className:s,styles:a});return this._annotations[o]=c,u in this._annotationsBySectionIndex?this._annotationsBySectionIndex[u].push(o):this._annotationsBySectionIndex[u]=[o],this.rendition.views().forEach(f=>{c.sectionIndex===f.index&&c.attach(f)}),c}remove(e,t){let n=encodeURI(e+t);if(n in this._annotations){let r=this._annotations[n];if(t&&r.type!==t)return;this.rendition.views().forEach(a=>{this._removeFromAnnotationBySectionIndex(r.sectionIndex,n),r.sectionIndex===a.index&&r.detach(a)}),delete this._annotations[n]}}_removeFromAnnotationBySectionIndex(e,t){this._annotationsBySectionIndex[e]=this._annotationsAt(e).filter(n=>n!==t)}_annotationsAt(e){return this._annotationsBySectionIndex[e]}highlight(e,t,n,r,s){return this.add("highlight",e,t,n,r,s)}underline(e,t,n,r,s){return this.add("underline",e,t,n,r,s)}mark(e,t,n){return this.add("mark",e,t,n)}each(){return this._annotations.forEach.apply(this._annotations,arguments)}inject(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(r=>{this._annotations[r].attach(e)})}clear(e){let t=e.index;t in this._annotationsBySectionIndex&&this._annotationsBySectionIndex[t].forEach(r=>{this._annotations[r].detach(e)})}show(){}hide(){}}class fD{constructor({type:e,cfiRange:t,data:n,sectionIndex:r,cb:s,className:a,styles:o}){this.type=e,this.cfiRange=t,this.data=n,this.sectionIndex=r,this.mark=void 0,this.cb=s,this.className=a,this.styles=o}update(e){this.data=e}attach(e){let{cfiRange:t,data:n,type:r,mark:s,cb:a,className:o,styles:l}=this,u;return r==="highlight"?u=e.highlight(t,n,a,o,l):r==="underline"?u=e.underline(t,n,a,o,l):r==="mark"&&(u=e.mark(t,n,a)),this.mark=u,this.emit(Re.ANNOTATION.ATTACH,u),u}detach(e){let{cfiRange:t,type:n}=this,r;return e&&(n==="highlight"?r=e.unhighlight(t):n==="underline"?r=e.ununderline(t):n==="mark"&&(r=e.unmark(t))),this.mark=void 0,this.emit(Re.ANNOTATION.DETACH,r),r}text(){}}Is(fD.prototype);var ya={},yy={};Object.defineProperty(yy,"__esModule",{value:!0});yy.createElement=dD;function dD(i){return document.createElementNS("http://www.w3.org/2000/svg",i)}yy.default={createElement:dD};var ng={};Object.defineProperty(ng,"__esModule",{value:!0});ng.proxyMouse=pD;ng.clone=gD;ng.default={proxyMouse:pD};function pD(i,e){function t(a){for(var o=e.length-1;o>=0;o--){var l=e[o],u=a.clientX,c=a.clientY;if(a.touches&&a.touches.length&&(u=a.touches[0].clientX,c=a.touches[0].clientY),!!RM(l,i,u,c)){l.dispatchEvent(gD(a));break}}}if(i.nodeName==="iframe"||i.nodeName==="IFRAME")try{this.target=i.contentDocument}catch{this.target=i}else this.target=i;for(var n=["mouseup","mousedown","click","touchstart"],r=0;r<n.length;r++){var s=n[r];this.target.addEventListener(s,function(a){return t(a)},!1)}}function gD(i){var e=Object.assign({},i,{bubbles:!1});try{return new MouseEvent(i.type,e)}catch{var t=document.createEvent("MouseEvents");return t.initMouseEvent(i.type,!1,e.cancelable,e.view,e.detail,e.screenX,e.screenY,e.clientX,e.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,e.button,e.relatedTarget),t}}function RM(i,e,t,n){var r=e.getBoundingClientRect();function s(c,h,f){var d=c.top-r.top,y=c.left-r.left,b=d+c.height,v=y+c.width;return d<=f&&y<=h&&b>f&&v>h}var a=i.getBoundingClientRect();if(!s(a,t,n))return!1;for(var o=i.getClientRects(),l=0,u=o.length;l<u;l++)if(s(o[l],t,n))return!0;return!1}var mv,N_;Object.defineProperty(ya,"__esModule",{value:!0});var mD=ya.Underline=N_=ya.Highlight=ya.Mark=mv=ya.Pane=void 0,PM=function i(e,t,n){e===null&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,t);if(r===void 0){var s=Object.getPrototypeOf(e);return s===null?void 0:i(s,t,n)}else{if("value"in r)return r.value;var a=r.get;return a===void 0?void 0:a.call(n)}},by=function(){function i(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&i(e.prototype,t),n&&i(e,n),e}}(),LM=yy,md=vD(LM),IM=ng,MM=vD(IM);function vD(i){return i&&i.__esModule?i:{default:i}}function yD(i,e){if(!i)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&(typeof e=="object"||typeof e=="function")?e:i}function bD(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof e);i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(i,e):i.__proto__=e)}function wy(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}mv=ya.Pane=function(){function i(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:document.body;wy(this,i),this.target=e,this.element=md.default.createElement("svg"),this.marks=[],this.element.style.position="absolute",this.element.setAttribute("pointer-events","none"),MM.default.proxyMouse(this.target,this.marks),this.container=t,this.container.appendChild(this.element),this.render()}return by(i,[{key:"addMark",value:function(t){var n=md.default.createElement("g");return this.element.appendChild(n),t.bind(n,this.container),this.marks.push(t),t.render(),t}},{key:"removeMark",value:function(t){var n=this.marks.indexOf(t);if(n!==-1){var r=t.unbind();this.element.removeChild(r),this.marks.splice(n,1)}}},{key:"render",value:function(){zM(this.element,jM(this.target,this.container));var t=!0,n=!1,r=void 0;try{for(var s=this.marks[Symbol.iterator](),a;!(t=(a=s.next()).done);t=!0){var o=a.value;o.render()}}catch(l){n=!0,r=l}finally{try{!t&&s.return&&s.return()}finally{if(n)throw r}}}}]),i}();var FM=ya.Mark=function(){function i(){wy(this,i),this.element=null}return by(i,[{key:"bind",value:function(t,n){this.element=t,this.container=n}},{key:"unbind",value:function(){var t=this.element;return this.element=null,t}},{key:"render",value:function(){}},{key:"dispatchEvent",value:function(t){this.element&&this.element.dispatchEvent(t)}},{key:"getBoundingClientRect",value:function(){return this.element.getBoundingClientRect()}},{key:"getClientRects",value:function(){for(var t=[],n=this.element.firstChild;n;)t.push(n.getBoundingClientRect()),n=n.nextSibling;return t}},{key:"filteredRanges",value:function(){var t=Array.from(this.range.getClientRects());return t.filter(function(n){for(var r=0;r<t.length;r++){if(t[r]===n)return!0;var s=UM(t[r],n);if(s)return!1}return!0})}}]),i}(),BM=N_=ya.Highlight=function(i){bD(e,i);function e(t,n,r,s){wy(this,e);var a=yD(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return a.range=t,a.className=n,a.data=r||{},a.attributes=s||{},a}return by(e,[{key:"bind",value:function(n,r){PM(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"bind",this).call(this,n,r);for(var s in this.data)this.data.hasOwnProperty(s)&&(this.element.dataset[s]=this.data[s]);for(var s in this.attributes)this.attributes.hasOwnProperty(s)&&this.element.setAttribute(s,this.attributes[s]);this.className&&this.element.classList.add(this.className)}},{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),r=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=r.length;o<l;o++){var u=r[o],c=md.default.createElement("rect");c.setAttribute("x",u.left-s.left+a.left),c.setAttribute("y",u.top-s.top+a.top),c.setAttribute("height",u.height),c.setAttribute("width",u.width),n.appendChild(c)}this.element.appendChild(n)}}]),e}(FM);mD=ya.Underline=function(i){bD(e,i);function e(t,n,r,s){return wy(this,e),yD(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n,r,s))}return by(e,[{key:"render",value:function(){for(;this.element.firstChild;)this.element.removeChild(this.element.firstChild);for(var n=this.element.ownerDocument.createDocumentFragment(),r=this.filteredRanges(),s=this.element.getBoundingClientRect(),a=this.container.getBoundingClientRect(),o=0,l=r.length;o<l;o++){var u=r[o],c=md.default.createElement("rect");c.setAttribute("x",u.left-s.left+a.left),c.setAttribute("y",u.top-s.top+a.top),c.setAttribute("height",u.height),c.setAttribute("width",u.width),c.setAttribute("fill","none");var h=md.default.createElement("line");h.setAttribute("x1",u.left-s.left+a.left),h.setAttribute("x2",u.left-s.left+a.left+u.width),h.setAttribute("y1",u.top-s.top+a.top+u.height-1),h.setAttribute("y2",u.top-s.top+a.top+u.height-1),h.setAttribute("stroke-width",1),h.setAttribute("stroke","black"),h.setAttribute("stroke-linecap","square"),n.appendChild(c),n.appendChild(h)}this.element.appendChild(n)}}]),e}(BM);function jM(i,e){var t=e.getBoundingClientRect(),n=i.getBoundingClientRect();return{top:n.top-t.top,left:n.left-t.left,height:i.scrollHeight,width:i.scrollWidth}}function zM(i,e){i.style.setProperty("top",e.top+"px","important"),i.style.setProperty("left",e.left+"px","important"),i.style.setProperty("height",e.height+"px","important"),i.style.setProperty("width",e.width+"px","important")}function UM(i,e){return e.right<=i.right&&e.left>=i.left&&e.top>=i.top&&e.bottom<=i.bottom}class wD{constructor(e,t){this.settings=Wn({ignoreClass:"",axis:void 0,direction:void 0,width:0,height:0,layout:void 0,globalLayoutProperties:{},method:void 0,forceRight:!1,allowScriptedContent:!1,allowPopups:!1},t||{}),this.id="epubjs-view-"+my(),this.section=e,this.index=e.index,this.element=this.container(this.settings.axis),this.added=!1,this.displayed=!1,this.rendered=!1,this.fixedWidth=0,this.fixedHeight=0,this.epubcfi=new pt,this.layout=this.settings.layout,this.pane=void 0,this.highlights={},this.underlines={},this.marks={}}container(e){var t=document.createElement("div");return t.classList.add("epub-view"),t.style.height="0px",t.style.width="0px",t.style.overflow="hidden",t.style.position="relative",t.style.display="block",e&&e=="horizontal"?t.style.flex="none":t.style.flex="initial",t}create(){return this.iframe?this.iframe:(this.element||(this.element=this.createContainer()),this.iframe=document.createElement("iframe"),this.iframe.id=this.id,this.iframe.scrolling="no",this.iframe.style.overflow="hidden",this.iframe.seamless="seamless",this.iframe.style.border="none",this.iframe.sandbox="allow-same-origin",this.settings.allowScriptedContent&&(this.iframe.sandbox+=" allow-scripts"),this.settings.allowPopups&&(this.iframe.sandbox+=" allow-popups"),this.iframe.setAttribute("enable-annotation","true"),this.resizing=!0,this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this.element.setAttribute("ref",this.index),this.added=!0,this.elementBounds=Em(this.element),"srcdoc"in this.iframe?this.supportsSrcdoc=!0:this.supportsSrcdoc=!1,this.settings.method||(this.settings.method=this.supportsSrcdoc?"srcdoc":"write"),this.iframe)}render(e,t){return this.create(),this.size(),this.sectionRender||(this.sectionRender=this.section.render(e)),this.sectionRender.then((function(n){return this.load(n)}).bind(this)).then((function(){let n=this.contents.writingMode(),r;return this.settings.flow==="scrolled"?r=n.indexOf("vertical")===0?"horizontal":"vertical":r=n.indexOf("vertical")===0?"vertical":"horizontal",n.indexOf("vertical")===0&&this.settings.flow==="paginated"&&(this.layout.delta=this.layout.height),this.setAxis(r),this.emit(Re.VIEWS.AXIS,r),this.setWritingMode(n),this.emit(Re.VIEWS.WRITING_MODE,n),this.layout.format(this.contents,this.section,this.axis),this.addListeners(),new Promise((s,a)=>{this.expand(),this.settings.forceRight&&(this.element.style.marginLeft=this.width()+"px"),s()})}).bind(this),(function(n){return this.emit(Re.VIEWS.LOAD_ERROR,n),new Promise((r,s)=>{s(n)})}).bind(this)).then((function(){this.emit(Re.VIEWS.RENDERED,this.section)}).bind(this))}reset(){this.iframe&&(this.iframe.style.width="0",this.iframe.style.height="0",this._width=0,this._height=0,this._textWidth=void 0,this._contentWidth=void 0,this._textHeight=void 0,this._contentHeight=void 0),this._needsReframe=!0}size(e,t){var n=e||this.settings.width,r=t||this.settings.height;this.layout.name==="pre-paginated"?this.lock("both",n,r):this.settings.axis==="horizontal"?this.lock("height",n,r):this.lock("width",n,r),this.settings.width=n,this.settings.height=r}lock(e,t,n){var r=cv(this.element),s;this.iframe?s=cv(this.iframe):s={width:0,height:0},e=="width"&&en(t)&&(this.lockedWidth=t-r.width-s.width),e=="height"&&en(n)&&(this.lockedHeight=n-r.height-s.height),e==="both"&&en(t)&&en(n)&&(this.lockedWidth=t-r.width-s.width,this.lockedHeight=n-r.height-s.height),this.displayed&&this.iframe&&this.expand()}expand(e){var t=this.lockedWidth,n=this.lockedHeight,r;!this.iframe||this._expanding||(this._expanding=!0,this.layout.name==="pre-paginated"?(t=this.layout.columnWidth,n=this.layout.height):this.settings.axis==="horizontal"?(t=this.contents.textWidth(),t%this.layout.pageWidth>0&&(t=Math.ceil(t/this.layout.pageWidth)*this.layout.pageWidth),this.settings.forceEvenPages&&(r=t/this.layout.pageWidth,this.layout.divisor>1&&this.layout.name==="reflowable"&&r%2>0&&(t+=this.layout.pageWidth))):this.settings.axis==="vertical"&&(n=this.contents.textHeight(),this.settings.flow==="paginated"&&n%this.layout.height>0&&(n=Math.ceil(n/this.layout.height)*this.layout.height)),(this._needsReframe||t!=this._width||n!=this._height)&&this.reframe(t,n),this._expanding=!1)}reframe(e,t){var n;en(e)&&(this.element.style.width=e+"px",this.iframe.style.width=e+"px",this._width=e),en(t)&&(this.element.style.height=t+"px",this.iframe.style.height=t+"px",this._height=t);let r=this.prevBounds?e-this.prevBounds.width:e,s=this.prevBounds?t-this.prevBounds.height:t;n={width:e,height:t,widthDelta:r,heightDelta:s},this.pane&&this.pane.render(),requestAnimationFrame(()=>{let a;for(let o in this.marks)this.marks.hasOwnProperty(o)&&(a=this.marks[o],this.placeMark(a.element,a.range))}),this.onResize(this,n),this.emit(Re.VIEWS.RESIZED,n),this.prevBounds=n,this.elementBounds=Em(this.element)}load(e){var t=new dt,n=t.promise;if(!this.iframe)return t.reject(new Error("No Iframe Available")),n;if(this.iframe.onload=(function(s){this.onLoad(s,t)}).bind(this),this.settings.method==="blobUrl")this.blobUrl=fv(e,"application/xhtml+xml"),this.iframe.src=this.blobUrl,this.element.appendChild(this.iframe);else if(this.settings.method==="srcdoc")this.iframe.srcdoc=e,this.element.appendChild(this.iframe);else{if(this.element.appendChild(this.iframe),this.document=this.iframe.contentDocument,!this.document)return t.reject(new Error("No Document Available")),n;if(this.iframe.contentDocument.open(),window.MSApp&&MSApp.execUnsafeLocalFunction){var r=this;MSApp.execUnsafeLocalFunction(function(){r.iframe.contentDocument.write(e)})}else this.iframe.contentDocument.write(e);this.iframe.contentDocument.close()}return n}onLoad(e,t){this.window=this.iframe.contentWindow,this.document=this.iframe.contentDocument,this.contents=new O_(this.document,this.document.body,this.section.cfiBase,this.section.index),this.rendering=!1;var n=this.document.querySelector("link[rel='canonical']");n?n.setAttribute("href",this.section.canonical):(n=this.document.createElement("link"),n.setAttribute("rel","canonical"),n.setAttribute("href",this.section.canonical),this.document.querySelector("head").appendChild(n)),this.contents.on(Re.CONTENTS.EXPAND,()=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),this.contents.on(Re.CONTENTS.RESIZE,r=>{this.displayed&&this.iframe&&(this.expand(),this.contents&&this.layout.format(this.contents))}),t.resolve(this.contents)}setLayout(e){this.layout=e,this.contents&&(this.layout.format(this.contents),this.expand())}setAxis(e){this.settings.axis=e,e=="horizontal"?this.element.style.flex="none":this.element.style.flex="initial",this.size()}setWritingMode(e){this.writingMode=e}addListeners(){}removeListeners(e){}display(e){var t=new dt;return this.displayed?t.resolve(this):this.render(e).then((function(){this.emit(Re.VIEWS.DISPLAYED,this),this.onDisplayed(this),this.displayed=!0,t.resolve(this)}).bind(this),function(n){t.reject(n,this)}),t.promise}show(){this.element.style.visibility="visible",this.iframe&&(this.iframe.style.visibility="visible",this.iframe.style.transform="translateZ(0)",this.iframe.offsetWidth,this.iframe.style.transform=null),this.emit(Re.VIEWS.SHOWN,this)}hide(){this.element.style.visibility="hidden",this.iframe.style.visibility="hidden",this.stopExpanding=!0,this.emit(Re.VIEWS.HIDDEN,this)}offset(){return{top:this.element.offsetTop,left:this.element.offsetLeft}}width(){return this._width}height(){return this._height}position(){return this.element.getBoundingClientRect()}locationOf(e){this.iframe.getBoundingClientRect();var t=this.contents.locationOf(e,this.settings.ignoreClass);return{left:t.left,top:t.top}}onDisplayed(e){}onResize(e,t){}bounds(e){return(e||!this.elementBounds)&&(this.elementBounds=Em(this.element)),this.elementBounds}highlight(e,t={},n,r="epubjs-hl",s={}){if(!this.contents)return;const a=Object.assign({fill:"yellow","fill-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(Re.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new mv(this.iframe,this.element));let u=new N_(o,r,t,a),c=this.pane.addMark(u);return this.highlights[e]={mark:c,element:c.element,listeners:[l,n]},c.element.setAttribute("ref",r),c.element.addEventListener("click",l),c.element.addEventListener("touchstart",l),n&&(c.element.addEventListener("click",n),c.element.addEventListener("touchstart",n)),c}underline(e,t={},n,r="epubjs-ul",s={}){if(!this.contents)return;const a=Object.assign({stroke:"black","stroke-opacity":"0.3","mix-blend-mode":"multiply"},s);let o=this.contents.range(e),l=()=>{this.emit(Re.VIEWS.MARK_CLICKED,e,t)};t.epubcfi=e,this.pane||(this.pane=new mv(this.iframe,this.element));let u=new mD(o,r,t,a),c=this.pane.addMark(u);return this.underlines[e]={mark:c,element:c.element,listeners:[l,n]},c.element.setAttribute("ref",r),c.element.addEventListener("click",l),c.element.addEventListener("touchstart",l),n&&(c.element.addEventListener("click",n),c.element.addEventListener("touchstart",n)),c}mark(e,t={},n){if(!this.contents)return;if(e in this.marks)return this.marks[e];let r=this.contents.range(e);if(!r)return;let s=r.commonAncestorContainer,a=s.nodeType===1?s:s.parentNode,o=u=>{this.emit(Re.VIEWS.MARK_CLICKED,e,t)};r.collapsed&&s.nodeType===1?(r=new Range,r.selectNodeContents(s)):r.collapsed&&(r=new Range,r.selectNodeContents(a));let l=this.document.createElement("a");return l.setAttribute("ref","epubjs-mk"),l.style.position="absolute",l.dataset.epubcfi=e,t&&Object.keys(t).forEach(u=>{l.dataset[u]=t[u]}),n&&(l.addEventListener("click",n),l.addEventListener("touchstart",n)),l.addEventListener("click",o),l.addEventListener("touchstart",o),this.placeMark(l,r),this.element.appendChild(l),this.marks[e]={element:l,range:r,listeners:[o,n]},a}placeMark(e,t){let n,r,s;if(this.layout.name==="pre-paginated"||this.settings.axis!=="horizontal"){let o=t.getBoundingClientRect();n=o.top,r=o.right}else{let o=t.getClientRects(),l;for(var a=0;a!=o.length;a++)l=o[a],(!s||l.left<s)&&(s=l.left,r=Math.ceil(s/this.layout.props.pageWidth)*this.layout.props.pageWidth-this.layout.gap/2,n=l.top)}e.style.top=`${n}px`,e.style.left=`${r}px`}unhighlight(e){let t;e in this.highlights&&(t=this.highlights[e],this.pane.removeMark(t.mark),t.listeners.forEach(n=>{n&&(t.element.removeEventListener("click",n),t.element.removeEventListener("touchstart",n))}),delete this.highlights[e])}ununderline(e){let t;e in this.underlines&&(t=this.underlines[e],this.pane.removeMark(t.mark),t.listeners.forEach(n=>{n&&(t.element.removeEventListener("click",n),t.element.removeEventListener("touchstart",n))}),delete this.underlines[e])}unmark(e){let t;e in this.marks&&(t=this.marks[e],this.element.removeChild(t.element),t.listeners.forEach(n=>{n&&(t.element.removeEventListener("click",n),t.element.removeEventListener("touchstart",n))}),delete this.marks[e])}destroy(){for(let e in this.highlights)this.unhighlight(e);for(let e in this.underlines)this.ununderline(e);for(let e in this.marks)this.unmark(e);this.blobUrl&&nD(this.blobUrl),this.displayed&&(this.displayed=!1,this.removeListeners(),this.contents.destroy(),this.stopExpanding=!0,this.element.removeChild(this.iframe),this.pane&&(this.pane.element.remove(),this.pane=void 0),this.iframe=void 0,this.contents=void 0,this._textWidth=null,this._textHeight=null,this._width=null,this._height=null)}}Is(wD.prototype);function qM(){var i="reverse",e=HM();return document.body.appendChild(e),e.scrollLeft>0?i="default":typeof Element<"u"&&Element.prototype.scrollIntoView?(e.children[0].children[1].scrollIntoView(),e.scrollLeft<0&&(i="negative")):(e.scrollLeft=1,e.scrollLeft===0&&(i="negative")),document.body.removeChild(e),i}function HM(){var i=document.createElement("div");i.dir="rtl",i.style.position="fixed",i.style.width="1px",i.style.height="1px",i.style.top="0px",i.style.left="0px",i.style.overflow="hidden";var e=document.createElement("div");e.style.width="2px";var t=document.createElement("span");t.style.width="1px",t.style.display="inline-block";var n=document.createElement("span");return n.style.width="1px",n.style.display="inline-block",e.appendChild(t),e.appendChild(n),i.appendChild(e),i}function WM(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var ig=WM,$M=typeof ln=="object"&&ln&&ln.Object===Object&&ln,_D=$M,VM=_D,GM=typeof self=="object"&&self&&self.Object===Object&&self,XM=VM||GM||Function("return this")(),Ms=XM,KM=Ms,YM=function(){return KM.Date.now()},ZM=YM,QM=/\s/;function JM(i){for(var e=i.length;e--&&QM.test(i.charAt(e)););return e}var eF=JM,tF=eF,nF=/^\s+/;function iF(i){return i&&i.slice(0,tF(i)+1).replace(nF,"")}var rF=iF,sF=Ms,aF=sF.Symbol,R_=aF,oA=R_,ED=Object.prototype,oF=ED.hasOwnProperty,lF=ED.toString,lf=oA?oA.toStringTag:void 0;function uF(i){var e=oF.call(i,lf),t=i[lf];try{i[lf]=void 0;var n=!0}catch{}var r=lF.call(i);return n&&(e?i[lf]=t:delete i[lf]),r}var cF=uF,hF=Object.prototype,fF=hF.toString;function dF(i){return fF.call(i)}var pF=dF,lA=R_,gF=cF,mF=pF,vF="[object Null]",yF="[object Undefined]",uA=lA?lA.toStringTag:void 0;function bF(i){return i==null?i===void 0?yF:vF:uA&&uA in Object(i)?gF(i):mF(i)}var rg=bF;function wF(i){return i!=null&&typeof i=="object"}var sg=wF,_F=rg,EF=sg,AF="[object Symbol]";function xF(i){return typeof i=="symbol"||EF(i)&&_F(i)==AF}var SF=xF,CF=rF,cA=ig,TF=SF,hA=NaN,kF=/^[-+]0x[0-9a-f]+$/i,DF=/^0b[01]+$/i,OF=/^0o[0-7]+$/i,NF=parseInt;function RF(i){if(typeof i=="number")return i;if(TF(i))return hA;if(cA(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=cA(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=CF(i);var t=DF.test(i);return t||OF.test(i)?NF(i.slice(2),t?2:8):kF.test(i)?hA:+i}var PF=RF,LF=ig,x0=ZM,fA=PF,IF="Expected a function",MF=Math.max,FF=Math.min;function BF(i,e,t){var n,r,s,a,o,l,u=0,c=!1,h=!1,f=!0;if(typeof i!="function")throw new TypeError(IF);e=fA(e)||0,LF(t)&&(c=!!t.leading,h="maxWait"in t,s=h?MF(fA(t.maxWait)||0,e):s,f="trailing"in t?!!t.trailing:f);function d(x){var A=n,S=r;return n=r=void 0,u=x,a=i.apply(S,A),a}function y(x){return u=x,o=setTimeout(g,e),c?d(x):a}function b(x){var A=x-l,S=x-u,O=e-A;return h?FF(O,s-S):O}function v(x){var A=x-l,S=x-u;return l===void 0||A>=e||A<0||h&&S>=s}function g(){var x=x0();if(v(x))return m(x);o=setTimeout(g,b(x))}function m(x){return o=void 0,f&&n?d(x):(n=r=void 0,a)}function w(){o!==void 0&&clearTimeout(o),u=0,n=l=r=o=void 0}function _(){return o===void 0?a:m(x0())}function E(){var x=x0(),A=v(x);if(n=arguments,r=this,l=x,A){if(o===void 0)return y(l);if(h)return clearTimeout(o),o=setTimeout(g,e),d(l)}return o===void 0&&(o=setTimeout(g,e)),a}return E.cancel=w,E.flush=_,E}var AD=BF;const jF=zo(AD);var zF=AD,UF=ig,qF="Expected a function";function HF(i,e,t){var n=!0,r=!0;if(typeof i!="function")throw new TypeError(qF);return UF(t)&&(n="leading"in t?!!t.leading:n,r="trailing"in t?!!t.trailing:r),zF(i,e,{leading:n,maxWait:e,trailing:r})}var WF=HF;const $F=zo(WF);class VF{constructor(e){this.settings=e||{},this.id="epubjs-container-"+my(),this.container=this.create(this.settings),this.settings.hidden&&(this.wrapper=this.wrap(this.container))}create(e){let t=e.height,n=e.width,r=e.overflow||!1,s=e.axis||"vertical",a=e.direction;Wn(this.settings,e),e.height&&en(e.height)&&(t=e.height+"px"),e.width&&en(e.width)&&(n=e.width+"px");let o=document.createElement("div");return o.id=this.id,o.classList.add("epub-container"),o.style.wordSpacing="0",o.style.lineHeight="0",o.style.verticalAlign="top",o.style.position="relative",s==="horizontal"&&(o.style.display="flex",o.style.flexDirection="row",o.style.flexWrap="nowrap"),n&&(o.style.width=n),t&&(o.style.height=t),r&&(r==="scroll"&&s==="vertical"?(o.style["overflow-y"]=r,o.style["overflow-x"]="hidden"):r==="scroll"&&s==="horizontal"?(o.style["overflow-y"]="hidden",o.style["overflow-x"]=r):o.style.overflow=r),a&&(o.dir=a,o.style.direction=a),a&&this.settings.fullsize&&(document.body.style.direction=a),o}wrap(e){var t=document.createElement("div");return t.style.visibility="hidden",t.style.overflow="hidden",t.style.width="0",t.style.height="0",t.appendChild(e),t}getElement(e){var t;if(Zk(e)?t=e:typeof e=="string"&&(t=document.getElementById(e)),!t)throw new Error("Not an Element");return t}attachTo(e){var t=this.getElement(e),n;if(t)return this.settings.hidden?n=this.wrapper:n=this.container,t.appendChild(n),this.element=t,t}getContainer(){return this.container}onResize(e){(!en(this.settings.width)||!en(this.settings.height))&&(this.resizeFunc=$F(e,50),window.addEventListener("resize",this.resizeFunc,!1))}onOrientationChange(e){this.orientationChangeFunc=e,window.addEventListener("orientationchange",this.orientationChangeFunc,!1)}size(e,t){var n;let r=e||this.settings.width,s=t||this.settings.height;e===null?(n=this.element.getBoundingClientRect(),n.width&&(e=Math.floor(n.width),this.container.style.width=e+"px")):en(e)?this.container.style.width=e+"px":this.container.style.width=e,t===null?(n=n||this.element.getBoundingClientRect(),n.height&&(t=n.height,this.container.style.height=t+"px")):en(t)?this.container.style.height=t+"px":this.container.style.height=t,en(e)||(e=this.container.clientWidth),en(t)||(t=this.container.clientHeight),this.containerStyles=window.getComputedStyle(this.container),this.containerPadding={left:parseFloat(this.containerStyles["padding-left"])||0,right:parseFloat(this.containerStyles["padding-right"])||0,top:parseFloat(this.containerStyles["padding-top"])||0,bottom:parseFloat(this.containerStyles["padding-bottom"])||0};let a=hv(),o=window.getComputedStyle(document.body),l={left:parseFloat(o["padding-left"])||0,right:parseFloat(o["padding-right"])||0,top:parseFloat(o["padding-top"])||0,bottom:parseFloat(o["padding-bottom"])||0};return r||(e=a.width-l.left-l.right),(this.settings.fullsize&&!s||!s)&&(t=a.height-l.top-l.bottom),{width:e-this.containerPadding.left-this.containerPadding.right,height:t-this.containerPadding.top-this.containerPadding.bottom}}bounds(){let e;return this.container.style.overflow!=="visible"&&(e=this.container&&this.container.getBoundingClientRect()),!e||!e.width||!e.height?hv():e}getSheet(){var e=document.createElement("style");return e.appendChild(document.createTextNode("")),document.head.appendChild(e),e.sheet}addStyleRules(e,t){var n="#"+this.id+" ",r="";this.sheet||(this.sheet=this.getSheet()),t.forEach(function(s){for(var a in s)s.hasOwnProperty(a)&&(r+=a+":"+s[a]+";")}),this.sheet.insertRule(n+e+" {"+r+"}",0)}axis(e){e==="horizontal"?(this.container.style.display="flex",this.container.style.flexDirection="row",this.container.style.flexWrap="nowrap"):this.container.style.display="block",this.settings.axis=e}direction(e){this.container&&(this.container.dir=e,this.container.style.direction=e),this.settings.fullsize&&(document.body.style.direction=e),this.settings.dir=e}overflow(e){this.container&&(e==="scroll"&&this.settings.axis==="vertical"?(this.container.style["overflow-y"]=e,this.container.style["overflow-x"]="hidden"):e==="scroll"&&this.settings.axis==="horizontal"?(this.container.style["overflow-y"]="hidden",this.container.style["overflow-x"]=e):this.container.style.overflow=e),this.settings.overflow=e}destroy(){this.element&&(this.settings.hidden?this.wrapper:this.container,this.element.contains(this.container)&&this.element.removeChild(this.container),window.removeEventListener("resize",this.resizeFunc),window.removeEventListener("orientationChange",this.orientationChangeFunc))}}class GF{constructor(e){this.container=e,this._views=[],this.length=0,this.hidden=!1}all(){return this._views}first(){return this._views[0]}last(){return this._views[this._views.length-1]}indexOf(e){return this._views.indexOf(e)}slice(){return this._views.slice.apply(this._views,arguments)}get(e){return this._views[e]}append(e){return this._views.push(e),this.container&&this.container.appendChild(e.element),this.length++,e}prepend(e){return this._views.unshift(e),this.container&&this.container.insertBefore(e.element,this.container.firstChild),this.length++,e}insert(e,t){return this._views.splice(t,0,e),this.container&&(t<this.container.children.length?this.container.insertBefore(e.element,this.container.children[t]):this.container.appendChild(e.element)),this.length++,e}remove(e){var t=this._views.indexOf(e);t>-1&&this._views.splice(t,1),this.destroy(e),this.length--}destroy(e){e.displayed&&e.destroy(),this.container&&this.container.removeChild(e.element),e=null}forEach(){return this._views.forEach.apply(this._views,arguments)}clear(){var e,t=this.length;if(this.length){for(var n=0;n<t;n++)e=this._views[n],this.destroy(e);this._views=[],this.length=0}}find(e){for(var t,n=this.length,r=0;r<n;r++)if(t=this._views[r],t.displayed&&t.section.index==e.index)return t}displayed(){for(var e=[],t,n=this.length,r=0;r<n;r++)t=this._views[r],t.displayed&&e.push(t);return e}show(){for(var e,t=this.length,n=0;n<t;n++)e=this._views[n],e.displayed&&e.show();this.hidden=!1}hide(){for(var e,t=this.length,n=0;n<t;n++)e=this._views[n],e.displayed&&e.hide();this.hidden=!0}}class vv{constructor(e){this.name="default",this.optsSettings=e.settings,this.View=e.view,this.request=e.request,this.renditionQueue=e.queue,this.q=new D_(this),this.settings=Wn(this.settings||{},{infinite:!0,hidden:!1,width:void 0,height:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",ignoreClass:"",fullsize:void 0,allowScriptedContent:!1,allowPopups:!1}),Wn(this.settings,e.settings||{}),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,method:this.settings.method,width:0,height:0,forceEvenPages:!0,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.rendered=!1}render(e,t){let n=e.tagName;typeof this.settings.fullsize>"u"&&n&&(n.toLowerCase()=="body"||n.toLowerCase()=="html")&&(this.settings.fullsize=!0),this.settings.fullsize&&(this.settings.overflow="visible",this.overflow=this.settings.overflow),this.settings.size=t,this.settings.rtlScrollType=qM(),this.stage=new VF({width:t.width,height:t.height,overflow:this.overflow,hidden:this.settings.hidden,axis:this.settings.axis,fullsize:this.settings.fullsize,direction:this.settings.direction}),this.stage.attachTo(e),this.container=this.stage.getContainer(),this.views=new GF(this.container),this._bounds=this.bounds(),this._stageSize=this.stage.size(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.stage.onResize(this.onResized.bind(this)),this.stage.onOrientationChange(this.onOrientationChange.bind(this)),this.addEventListeners(),this.layout&&this.updateLayout(),this.rendered=!0}addEventListeners(){var e;window.addEventListener("unload",(function(t){this.destroy()}).bind(this)),this.settings.fullsize?e=window:e=this.container,this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll)}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}destroy(){clearTimeout(this.orientationTimeout),clearTimeout(this.resizeTimeout),clearTimeout(this.afterScrolled),this.clear(),this.removeEventListeners(),this.stage.destroy(),this.rendered=!1}onOrientationChange(e){let{orientation:t}=window;this.optsSettings.resizeOnOrientationChange&&this.resize(),clearTimeout(this.orientationTimeout),this.orientationTimeout=setTimeout((function(){this.orientationTimeout=void 0,this.optsSettings.resizeOnOrientationChange&&this.resize(),this.emit(Re.MANAGERS.ORIENTATION_CHANGE,t)}).bind(this),500)}onResized(e){this.resize()}resize(e,t,n){let r=this.stage.size(e,t);if(this.winBounds=hv(),this.orientationTimeout&&this.winBounds.width===this.winBounds.height){this._stageSize=void 0;return}this._stageSize&&this._stageSize.width===r.width&&this._stageSize.height===r.height||(this._stageSize=r,this._bounds=this.bounds(),this.clear(),this.viewSettings.width=this._stageSize.width,this.viewSettings.height=this._stageSize.height,this.updateLayout(),this.emit(Re.MANAGERS.RESIZED,{width:this._stageSize.width,height:this._stageSize.height},n))}createView(e,t){return new this.View(e,Wn(this.viewSettings,{forceRight:t}))}handleNextPrePaginated(e,t,n){let r;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1){if(e||t.index===0)return;if(r=t.next(),r&&!r.properties.includes("page-spread-left"))return n.call(this,r)}}display(e,t){var n=new dt,r=n.promise;(t===e.href||en(t))&&(t=void 0);var s=this.views.find(e);if(s&&e&&this.layout.name!=="pre-paginated"){let o=s.offset();if(this.settings.direction==="ltr")this.scrollTo(o.left,o.top,!0);else{let l=s.width();this.scrollTo(o.left+l,o.top,!0)}if(t){let l=s.locationOf(t),u=s.width();this.moveTo(l,u)}return n.resolve(),r}this.clear();let a=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(a=!0),this.add(e,a).then((function(o){if(t){let l=o.locationOf(t),u=o.width();this.moveTo(l,u)}}).bind(this),o=>{n.reject(o)}).then((function(){return this.handleNextPrePaginated(a,e,this.add)}).bind(this)).then((function(){this.views.show(),n.resolve()}).bind(this)),r}afterDisplayed(e){this.emit(Re.MANAGERS.ADDED,e)}afterResized(e){this.emit(Re.MANAGERS.RESIZE,e.section)}moveTo(e,t){var n=0,r=0;this.isPaginated?(n=Math.floor(e.left/this.layout.delta)*this.layout.delta,n+this.layout.delta>this.container.scrollWidth&&(n=this.container.scrollWidth-this.layout.delta),r=Math.floor(e.top/this.layout.delta)*this.layout.delta,r+this.layout.delta>this.container.scrollHeight&&(r=this.container.scrollHeight-this.layout.delta)):r=e.top,this.settings.direction==="rtl"&&(n=n+this.layout.delta,n=n-t),this.scrollTo(n,r,!0)}add(e,t){var n=this.createView(e,t);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(Re.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(Re.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),n.display(this.request)}append(e,t){var n=this.createView(e,t);return this.views.append(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(Re.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(Re.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),n.display(this.request)}prepend(e,t){var n=this.createView(e,t);return n.on(Re.VIEWS.RESIZED,r=>{this.counter(r)}),this.views.prepend(n),n.onDisplayed=this.afterDisplayed.bind(this),n.onResize=this.afterResized.bind(this),n.on(Re.VIEWS.AXIS,r=>{this.updateAxis(r)}),n.on(Re.VIEWS.WRITING_MODE,r=>{this.updateWritingMode(r)}),n.display(this.request)}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}next(){var e,t;let n=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft+this.container.offsetWidth+this.layout.delta,t<=this.container.scrollWidth?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft,t>0?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next()):(t=this.container.scrollLeft+this.layout.delta*-1,t>this.container.scrollWidth*-1?this.scrollBy(this.layout.delta,0,!0):e=this.views.last().section.next())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop+this.container.offsetHeight<this.container.scrollHeight?this.scrollBy(0,this.layout.height,!0):e=this.views.last().section.next()):e=this.views.last().section.next(),e)){this.clear(),this.updateLayout();let r=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&e.properties.includes("page-spread-right")&&(r=!0),this.append(e,r).then((function(){return this.handleNextPrePaginated(r,e,this.append)}).bind(this),s=>s).then((function(){!this.isPaginated&&this.settings.axis==="horizontal"&&this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"&&this.scrollTo(this.container.scrollWidth,0,!0),this.views.show()}).bind(this))}}prev(){var e,t;let n=this.settings.direction;if(this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"&&(!n||n==="ltr")?(this.scrollLeft=this.container.scrollLeft,t=this.container.scrollLeft,t>0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):this.isPaginated&&this.settings.axis==="horizontal"&&n==="rtl"?(this.scrollLeft=this.container.scrollLeft,this.settings.rtlScrollType==="default"?(t=this.container.scrollLeft+this.container.offsetWidth,t<this.container.scrollWidth?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev()):(t=this.container.scrollLeft,t<0?this.scrollBy(-this.layout.delta,0,!0):e=this.views.first().section.prev())):this.isPaginated&&this.settings.axis==="vertical"?(this.scrollTop=this.container.scrollTop,this.container.scrollTop>0?this.scrollBy(0,-this.layout.height,!0):e=this.views.first().section.prev()):e=this.views.first().section.prev(),e)){this.clear(),this.updateLayout();let r=!1;return this.layout.name==="pre-paginated"&&this.layout.divisor===2&&typeof e.prev()!="object"&&(r=!0),this.prepend(e,r).then((function(){var s;if(this.layout.name==="pre-paginated"&&this.layout.divisor>1&&(s=e.prev(),s))return this.prepend(s)}).bind(this),s=>s).then((function(){this.isPaginated&&this.settings.axis==="horizontal"&&(this.settings.direction==="rtl"?this.settings.rtlScrollType==="default"?this.scrollTo(0,0,!0):this.scrollTo(this.container.scrollWidth*-1+this.layout.delta,0,!0):this.scrollTo(this.container.scrollWidth-this.layout.delta,0,!0)),this.views.show()}).bind(this))}}current(){var e=this.visible();return e.length?e[e.length-1]:null}clear(){this.views&&(this.views.hide(),this.scrollTo(0,0,!0),this.views.clear())}currentLocation(){return this.updateLayout(),this.isPaginated&&this.settings.axis==="horizontal"?this.location=this.paginatedLocation():this.location=this.scrolledLocation(),this.location}scrolledLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),n=t.height<window.innerHeight?t.height:window.innerHeight,r=t.width<window.innerWidth?t.width:window.innerWidth,s=this.settings.axis==="vertical";this.settings.direction;let a=0,o=0;return this.settings.fullsize&&(a=s?window.scrollY:window.scrollX),e.map(u=>{let{index:c,href:h}=u.section,f=u.position(),d=u.width(),y=u.height(),b,v,g,m;s?(b=a+t.top-f.top+o,v=b+n-o,m=this.layout.count(y,n).pages,g=n):(b=a+t.left-f.left+o,v=b+r-o,m=this.layout.count(d,r).pages,g=r);let w=Math.ceil(b/g),_=[],E=Math.ceil(v/g);if(this.settings.direction==="rtl"&&!s){let S=w;w=m-E,E=m-S}_=[];for(var x=w;x<=E;x++){let S=x+1;_.push(S)}let A=this.mapping.page(u.contents,u.section.cfiBase,b,v);return{index:c,href:h,pages:_,totalPages:m,mapping:A}})}paginatedLocation(){let e=this.visible(),t=this.container.getBoundingClientRect(),n=0,r=0;return this.settings.fullsize&&(n=window.scrollX),e.map(a=>{let{index:o,href:l}=a.section,u,c=a.position(),h=a.width(),f,d,y;this.settings.direction==="rtl"?(u=t.right-n,y=Math.min(Math.abs(u-c.left),this.layout.width)-r,d=c.width-(c.right-u)-r,f=d-y):(u=t.left+n,y=Math.min(c.right-u,this.layout.width)-r,f=u-c.left+r,d=f+y),r+=y;let b=this.mapping.page(a.contents,a.section.cfiBase,f,d),v=this.layout.count(h).pages,g=Math.floor(f/this.layout.pageWidth),m=[],w=Math.floor(d/this.layout.pageWidth);if(g<0&&(g=0,w=w+1),this.settings.direction==="rtl"){let E=g;g=v-w,w=v-E}for(var _=g+1;_<=w;_++){let E=_;m.push(E)}return{index:o,href:l,pages:m,totalPages:v,mapping:b}})}isVisible(e,t,n,r){var s=e.position(),a=r||this.bounds();return this.settings.axis==="horizontal"&&s.right>a.left-t&&s.left<a.right+n?!0:this.settings.axis==="vertical"&&s.bottom>a.top-t&&s.top<a.bottom+n}visible(){for(var e=this.bounds(),t=this.views.displayed(),n=t.length,r=[],s,a,o=0;o<n;o++)a=t[o],s=this.isVisible(a,0,0,e),s===!0&&r.push(a);return r}scrollBy(e,t,n){let r=this.settings.direction==="rtl"?-1:1;n&&(this.ignore=!0),this.settings.fullsize?window.scrollBy(e*r,t*r):(e&&(this.container.scrollLeft+=e*r),t&&(this.container.scrollTop+=t)),this.scrolled=!0}scrollTo(e,t,n){n&&(this.ignore=!0),this.settings.fullsize?window.scrollTo(e,t):(this.container.scrollLeft=e,this.container.scrollTop=t),this.scrolled=!0}onScroll(){let e,t;this.settings.fullsize?(e=window.scrollY,t=window.scrollX):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:(this.emit(Re.MANAGERS.SCROLL,{top:e,left:t}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.emit(Re.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),20))}bounds(){var e;return e=this.stage.bounds(),e}applyLayout(e){this.layout=e,this.updateLayout(),this.views&&this.views.length>0&&this.layout.name==="pre-paginated"&&this.display(this.views.first().section)}updateLayout(){this.stage&&(this._stageSize=this.stage.size(),this.isPaginated?(this.layout.calculate(this._stageSize.width,this._stageSize.height,this.settings.gap),this.settings.offset=this.layout.delta/this.layout.divisor):this.layout.calculate(this._stageSize.width,this._stageSize.height),this.viewSettings.width=this.layout.width,this.viewSettings.height=this.layout.height,this.setLayout(this.layout))}setLayout(e){this.viewSettings.layout=e,this.mapping=new gv(e.props,this.settings.direction,this.settings.axis),this.views&&this.views.forEach(function(t){t&&t.setLayout(e)})}updateWritingMode(e){this.writingMode=e}updateAxis(e,t){!t&&e===this.settings.axis||(this.settings.axis=e,this.stage&&this.stage.axis(e),this.viewSettings.axis=e,this.mapping&&(this.mapping=new gv(this.layout.props,this.settings.direction,this.settings.axis)),this.layout&&(e==="vertical"?this.layout.spread("none"):this.layout.spread(this.layout.settings.spread)))}updateFlow(e,t="auto"){let n=e==="paginated"||e==="auto";this.isPaginated=n,e==="scrolled-doc"||e==="scrolled-continuous"||e==="scrolled"?this.updateAxis("vertical"):this.updateAxis("horizontal"),this.viewSettings.flow=e,this.settings.overflow?this.overflow=this.settings.overflow:this.overflow=n?"hidden":t,this.stage&&this.stage.overflow(this.overflow),this.updateLayout()}getContents(){var e=[];return this.views&&this.views.forEach(function(t){const n=t&&t.contents;n&&e.push(n)}),e}direction(e="ltr"){this.settings.direction=e,this.stage&&this.stage.direction(e),this.viewSettings.direction=e,this.updateLayout()}isRendered(){return this.rendered}}Is(vv.prototype);const XF={easeInCubic:function(i){return Math.pow(i,3)}};class Q1{constructor(e,t){this.settings=Wn({duration:80,minVelocity:.2,minDistance:10,easing:XF.easeInCubic},t||{}),this.supportsTouch=this.supportsTouch(),this.supportsTouch&&this.setup(e)}setup(e){this.manager=e,this.layout=this.manager.layout,this.fullsize=this.manager.settings.fullsize,this.fullsize?(this.element=this.manager.stage.element,this.scroller=window,this.disableScroll()):(this.element=this.manager.stage.container,this.scroller=this.element,this.element.style.WebkitOverflowScrolling="touch"),this.manager.settings.offset=this.layout.width,this.manager.settings.afterScrolledTimeout=this.settings.duration*2,this.isVertical=this.manager.settings.axis==="vertical",!(!this.manager.isPaginated||this.isVertical)&&(this.touchCanceler=!1,this.resizeCanceler=!1,this.snapping=!1,this.scrollLeft,this.scrollTop,this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0,this.addListeners())}supportsTouch(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)}disableScroll(){this.element.style.overflow="hidden"}enableScroll(){this.element.style.overflow=""}addListeners(){this._onResize=this.onResize.bind(this),window.addEventListener("resize",this._onResize),this._onScroll=this.onScroll.bind(this),this.scroller.addEventListener("scroll",this._onScroll),this._onTouchStart=this.onTouchStart.bind(this),this.scroller.addEventListener("touchstart",this._onTouchStart,{passive:!0}),this.on("touchstart",this._onTouchStart),this._onTouchMove=this.onTouchMove.bind(this),this.scroller.addEventListener("touchmove",this._onTouchMove,{passive:!0}),this.on("touchmove",this._onTouchMove),this._onTouchEnd=this.onTouchEnd.bind(this),this.scroller.addEventListener("touchend",this._onTouchEnd,{passive:!0}),this.on("touchend",this._onTouchEnd),this._afterDisplayed=this.afterDisplayed.bind(this),this.manager.on(Re.MANAGERS.ADDED,this._afterDisplayed)}removeListeners(){window.removeEventListener("resize",this._onResize),this._onResize=void 0,this.scroller.removeEventListener("scroll",this._onScroll),this._onScroll=void 0,this.scroller.removeEventListener("touchstart",this._onTouchStart,{passive:!0}),this.off("touchstart",this._onTouchStart),this._onTouchStart=void 0,this.scroller.removeEventListener("touchmove",this._onTouchMove,{passive:!0}),this.off("touchmove",this._onTouchMove),this._onTouchMove=void 0,this.scroller.removeEventListener("touchend",this._onTouchEnd,{passive:!0}),this.off("touchend",this._onTouchEnd),this._onTouchEnd=void 0,this.manager.off(Re.MANAGERS.ADDED,this._afterDisplayed),this._afterDisplayed=void 0}afterDisplayed(e){let t=e.contents;["touchstart","touchmove","touchend"].forEach(n=>{t.on(n,r=>this.triggerViewEvent(r,t))})}triggerViewEvent(e,t){this.emit(e.type,e,t)}onScroll(e){this.scrollLeft=this.fullsize?window.scrollX:this.scroller.scrollLeft,this.scrollTop=this.fullsize?window.scrollY:this.scroller.scrollTop}onResize(e){this.resizeCanceler=!0}onTouchStart(e){let{screenX:t,screenY:n}=e.touches[0];this.fullsize&&this.enableScroll(),this.touchCanceler=!0,this.startTouchX||(this.startTouchX=t,this.startTouchY=n,this.startTime=this.now()),this.endTouchX=t,this.endTouchY=n,this.endTime=this.now()}onTouchMove(e){let{screenX:t,screenY:n}=e.touches[0],r=Math.abs(n-this.endTouchY);this.touchCanceler=!0,!this.fullsize&&r<10&&(this.element.scrollLeft-=t-this.endTouchX),this.endTouchX=t,this.endTouchY=n,this.endTime=this.now()}onTouchEnd(e){this.fullsize&&this.disableScroll(),this.touchCanceler=!1;let t=this.wasSwiped();t!==0?this.snap(t):this.snap(),this.startTouchX=void 0,this.startTouchY=void 0,this.startTime=void 0,this.endTouchX=void 0,this.endTouchY=void 0,this.endTime=void 0}wasSwiped(){let e=this.layout.pageWidth*this.layout.divisor,t=this.endTouchX-this.startTouchX,n=Math.abs(t),r=this.endTime-this.startTime,s=t/r,a=this.settings.minVelocity;if(n<=this.settings.minDistance||n>=e)return 0;if(s>a)return-1;if(s<-a)return 1}needsSnap(){let e=this.scrollLeft,t=this.layout.pageWidth*this.layout.divisor;return e%t!==0}snap(e=0){let t=this.scrollLeft,n=this.layout.pageWidth*this.layout.divisor,r=Math.round(t/n)*n;return e&&(r+=e*n),this.smoothScrollTo(r)}smoothScrollTo(e){const t=new dt,n=this.scrollLeft,r=this.now(),s=this.settings.duration,a=this.settings.easing;this.snapping=!0;function o(){const l=this.now(),u=Math.min(1,(l-r)/s);if(a(u),this.touchCanceler||this.resizeCanceler){this.resizeCanceler=!1,this.snapping=!1,t.resolve();return}u<1?(window.requestAnimationFrame(o.bind(this)),this.scrollTo(n+(e-n)*u,0)):(this.scrollTo(e,0),this.snapping=!1,t.resolve())}return o.call(this),t.promise}scrollTo(e=0,t=0){this.fullsize?window.scroll(e,t):(this.scroller.scrollLeft=e,this.scroller.scrollTop=t)}now(){return"now"in window.performance?performance.now():new Date().getTime()}destroy(){this.scroller&&(this.fullsize&&this.enableScroll(),this.removeListeners(),this.scroller=void 0)}}Is(Q1.prototype);class KF extends vv{constructor(e){super(e),this.name="continuous",this.settings=Wn(this.settings||{},{infinite:!0,overflow:void 0,axis:void 0,writingMode:void 0,flow:"scrolled",offset:500,offsetDelta:250,width:void 0,height:void 0,snap:!1,afterScrolledTimeout:10,allowScriptedContent:!1,allowPopups:!1}),Wn(this.settings,e.settings||{}),e.settings.gap!="undefined"&&e.settings.gap===0&&(this.settings.gap=e.settings.gap),this.viewSettings={ignoreClass:this.settings.ignoreClass,axis:this.settings.axis,flow:this.settings.flow,layout:this.layout,width:0,height:0,forceEvenPages:!1,allowScriptedContent:this.settings.allowScriptedContent,allowPopups:this.settings.allowPopups},this.scrollTop=0,this.scrollLeft=0}display(e,t){return vv.prototype.display.call(this,e,t).then((function(){return this.fill()}).bind(this))}fill(e){var t=e||new dt;return this.q.enqueue(()=>this.check()).then(n=>{n?this.fill(t):t.resolve()}),t.promise}moveTo(e){var t=0,n=0;this.isPaginated?(t=Math.floor(e.left/this.layout.delta)*this.layout.delta,t+this.settings.offsetDelta):(n=e.top,e.top+this.settings.offsetDelta),(t>0||n>0)&&this.scrollBy(t,n,!0)}afterResized(e){this.emit(Re.MANAGERS.RESIZE,e.section)}removeShownListeners(e){e.onDisplayed=function(){}}add(e){var t=this.createView(e);return this.views.append(t),t.on(Re.VIEWS.RESIZED,n=>{t.expanded=!0}),t.on(Re.VIEWS.AXIS,n=>{this.updateAxis(n)}),t.on(Re.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),t.onDisplayed=this.afterDisplayed.bind(this),t.onResize=this.afterResized.bind(this),t.display(this.request)}append(e){var t=this.createView(e);return t.on(Re.VIEWS.RESIZED,n=>{t.expanded=!0}),t.on(Re.VIEWS.AXIS,n=>{this.updateAxis(n)}),t.on(Re.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.append(t),t.onDisplayed=this.afterDisplayed.bind(this),t}prepend(e){var t=this.createView(e);return t.on(Re.VIEWS.RESIZED,n=>{this.counter(n),t.expanded=!0}),t.on(Re.VIEWS.AXIS,n=>{this.updateAxis(n)}),t.on(Re.VIEWS.WRITING_MODE,n=>{this.updateWritingMode(n)}),this.views.prepend(t),t.onDisplayed=this.afterDisplayed.bind(this),t}counter(e){this.settings.axis==="vertical"?this.scrollBy(0,e.heightDelta,!0):this.scrollBy(e.widthDelta,0,!0)}update(e){for(var t=this.bounds(),n=this.views.all(),r=n.length,s=typeof e<"u"?e:this.settings.offset||0,a,o,l=new dt,u=[],c=0;c<r;c++)if(o=n[c],a=this.isVisible(o,s,s,t),a===!0)if(o.displayed)o.show();else{let h=o.display(this.request).then(function(f){f.show()},f=>{o.hide()});u.push(h)}else this.q.enqueue(o.destroy.bind(o)),clearTimeout(this.trimTimeout),this.trimTimeout=setTimeout((function(){this.q.enqueue(this.trim.bind(this))}).bind(this),250);return u.length?Promise.all(u).catch(h=>{l.reject(h)}):(l.resolve(),l.promise)}check(e,t){var n=new dt,r=[],s=this.settings.axis==="horizontal",a=this.settings.offset||0;e&&s&&(a=e),t&&!s&&(a=t);var o=this._bounds;let l=s?this.scrollLeft:this.scrollTop,u=s?Math.floor(o.width):o.height,c=s?this.container.scrollWidth:this.container.scrollHeight,h=this.writingMode&&this.writingMode.indexOf("vertical")===0?"vertical":"horizontal",f=this.settings.rtlScrollType,d=this.settings.direction==="rtl";this.settings.fullsize?(s&&d&&f==="negative"||!s&&d&&f==="default")&&(l=l*-1):(d&&f==="default"&&h==="horizontal"&&(l=c-u-l),d&&f==="negative"&&h==="horizontal"&&(l=l*-1));let y=()=>{let w=this.views.first(),_=w&&w.section.prev();_&&r.push(this.prepend(_))},b=()=>{let w=this.views.last(),_=w&&w.section.next();_&&r.push(this.append(_))},v=l+u+a,g=l-a;v>=c&&b(),g<0&&y();let m=r.map(w=>w.display(this.request));return r.length?Promise.all(m).then(()=>this.check()).then(()=>this.update(a),w=>w):(this.q.enqueue((function(){this.update()}).bind(this)),n.resolve(!1),n.promise)}trim(){for(var e=new dt,t=this.views.displayed(),n=t[0],r=t[t.length-1],s=this.views.indexOf(n),a=this.views.indexOf(r),o=this.views.slice(0,s),l=this.views.slice(a+1),u=0;u<o.length-1;u++)this.erase(o[u],o);for(var c=1;c<l.length;c++)this.erase(l[c]);return e.resolve(),e.promise}erase(e,t){var n,r;this.settings.fullsize?(n=window.scrollY,r=window.scrollX):(n=this.container.scrollTop,r=this.container.scrollLeft);var s=e.bounds();this.views.remove(e),t&&(this.settings.axis==="vertical"?this.scrollTo(0,n-s.height,!0):this.settings.direction==="rtl"?this.settings.fullsize?this.scrollTo(r+Math.floor(s.width),0,!0):this.scrollTo(r,0,!0):this.scrollTo(r-Math.floor(s.width),0,!0))}addEventListeners(e){window.addEventListener("unload",(function(t){this.ignore=!0,this.destroy()}).bind(this)),this.addScrollListeners(),this.isPaginated&&this.settings.snap&&(this.snapper=new Q1(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}addScrollListeners(){var e;this.tick=C_;let t=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.scrollDeltaVert=0,this.scrollDeltaHorz=0,this.settings.fullsize?(e=window,this.scrollTop=window.scrollY*t,this.scrollLeft=window.scrollX*t):(e=this.container,this.scrollTop=this.container.scrollTop,this.scrollLeft=this.container.scrollLeft),this._onScroll=this.onScroll.bind(this),e.addEventListener("scroll",this._onScroll),this._scrolled=jF(this.scrolled.bind(this),30),this.didScroll=!1}removeEventListeners(){var e;this.settings.fullsize?e=window:e=this.container,e.removeEventListener("scroll",this._onScroll),this._onScroll=void 0}onScroll(){let e,t,n=this.settings.direction==="rtl"&&this.settings.rtlScrollType==="default"?-1:1;this.settings.fullsize?(e=window.scrollY*n,t=window.scrollX*n):(e=this.container.scrollTop,t=this.container.scrollLeft),this.scrollTop=e,this.scrollLeft=t,this.ignore?this.ignore=!1:this._scrolled(),this.scrollDeltaVert+=Math.abs(e-this.prevScrollTop),this.scrollDeltaHorz+=Math.abs(t-this.prevScrollLeft),this.prevScrollTop=e,this.prevScrollLeft=t,clearTimeout(this.scrollTimeout),this.scrollTimeout=setTimeout((function(){this.scrollDeltaVert=0,this.scrollDeltaHorz=0}).bind(this),150),clearTimeout(this.afterScrolled),this.didScroll=!1}scrolled(){this.q.enqueue((function(){return this.check()}).bind(this)),this.emit(Re.MANAGERS.SCROLL,{top:this.scrollTop,left:this.scrollLeft}),clearTimeout(this.afterScrolled),this.afterScrolled=setTimeout((function(){this.snapper&&this.snapper.supportsTouch&&this.snapper.needsSnap()||this.emit(Re.MANAGERS.SCROLLED,{top:this.scrollTop,left:this.scrollLeft})}).bind(this),this.settings.afterScrolledTimeout)}next(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(e,0,!0):this.scrollBy(0,this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}prev(){let e=this.layout.props.name==="pre-paginated"&&this.layout.props.spread?this.layout.props.delta*2:this.layout.props.delta;this.views.length&&(this.isPaginated&&this.settings.axis==="horizontal"?this.scrollBy(-e,0,!0):this.scrollBy(0,-this.layout.height,!0),this.q.enqueue((function(){return this.check()}).bind(this)))}updateFlow(e){this.rendered&&this.snapper&&(this.snapper.destroy(),this.snapper=void 0),super.updateFlow(e,"scroll"),this.rendered&&this.isPaginated&&this.settings.snap&&(this.snapper=new Q1(this,this.settings.snap&&typeof this.settings.snap=="object"&&this.settings.snap))}destroy(){super.destroy(),this.snapper&&this.snapper.destroy()}}class P_{constructor(e,t){this.settings=Wn(this.settings||{},{width:null,height:null,ignoreClass:"",manager:"default",view:"iframe",flow:null,layout:null,spread:null,minSpreadWidth:800,stylesheet:null,resizeOnOrientationChange:!0,script:null,snap:!1,defaultDirection:"ltr",allowScriptedContent:!1,allowPopups:!1}),Wn(this.settings,t),typeof this.settings.manager=="object"&&(this.manager=this.settings.manager),this.book=e,this.hooks={},this.hooks.display=new Kr(this),this.hooks.serialize=new Kr(this),this.hooks.content=new Kr(this),this.hooks.unloaded=new Kr(this),this.hooks.layout=new Kr(this),this.hooks.render=new Kr(this),this.hooks.show=new Kr(this),this.hooks.content.register(this.handleLinks.bind(this)),this.hooks.content.register(this.passEvents.bind(this)),this.hooks.content.register(this.adjustImages.bind(this)),this.book.spine.hooks.content.register(this.injectIdentifier.bind(this)),this.settings.stylesheet&&this.book.spine.hooks.content.register(this.injectStylesheet.bind(this)),this.settings.script&&this.book.spine.hooks.content.register(this.injectScript.bind(this)),this.themes=new kM(this),this.annotations=new NM(this),this.epubcfi=new pt,this.q=new D_(this),this.location=void 0,this.q.enqueue(this.book.opened),this.starting=new dt,this.started=this.starting.promise,this.q.enqueue(this.start)}setManager(e){this.manager=e}requireManager(e){var t;return typeof e=="string"&&e==="default"?t=vv:typeof e=="string"&&e==="continuous"?t=KF:t=e,t}requireView(e){var t;return typeof e=="string"&&e==="iframe"?t=wD:t=e,t}start(){switch(!this.settings.layout&&(this.book.package.metadata.layout==="pre-paginated"||this.book.displayOptions.fixedLayout==="true")&&(this.settings.layout="pre-paginated"),this.book.package.metadata.spread){case"none":this.settings.spread="none";break;case"both":this.settings.spread=!0;break}this.manager||(this.ViewManager=this.requireManager(this.settings.manager),this.View=this.requireView(this.settings.view),this.manager=new this.ViewManager({view:this.View,queue:this.q,request:this.book.load.bind(this.book),settings:this.settings})),this.direction(this.book.package.metadata.direction||this.settings.defaultDirection),this.settings.globalLayoutProperties=this.determineLayoutProperties(this.book.package.metadata),this.flow(this.settings.globalLayoutProperties.flow),this.layout(this.settings.globalLayoutProperties),this.manager.on(Re.MANAGERS.ADDED,this.afterDisplayed.bind(this)),this.manager.on(Re.MANAGERS.REMOVED,this.afterRemoved.bind(this)),this.manager.on(Re.MANAGERS.RESIZED,this.onResized.bind(this)),this.manager.on(Re.MANAGERS.ORIENTATION_CHANGE,this.onOrientationChange.bind(this)),this.manager.on(Re.MANAGERS.SCROLLED,this.reportLocation.bind(this)),this.emit(Re.RENDITION.STARTED),this.starting.resolve()}attachTo(e){return this.q.enqueue((function(){this.manager.render(e,{width:this.settings.width,height:this.settings.height}),this.emit(Re.RENDITION.ATTACHED)}).bind(this))}display(e){return this.displaying&&this.displaying.resolve(),this.q.enqueue(this._display,e)}_display(e){if(this.book){this.epubcfi.isCfiString(e);var t=new dt,n=t.promise,r;return this.displaying=t,this.book.locations.length()&&Qk(e)&&(e=this.book.locations.cfiFromPercentage(parseFloat(e))),r=this.book.spine.get(e),r?(this.manager.display(r,e).then(()=>{t.resolve(r),this.displaying=void 0,this.emit(Re.RENDITION.DISPLAYED,r),this.reportLocation()},s=>{this.emit(Re.RENDITION.DISPLAY_ERROR,s)}),n):(t.reject(new Error("No Section Found")),n)}}afterDisplayed(e){e.on(Re.VIEWS.MARK_CLICKED,(t,n)=>this.triggerMarkEvent(t,n,e.contents)),this.hooks.render.trigger(e,this).then(()=>{e.contents?this.hooks.content.trigger(e.contents,this).then(()=>{this.emit(Re.RENDITION.RENDERED,e.section,e)}):this.emit(Re.RENDITION.RENDERED,e.section,e)})}afterRemoved(e){this.hooks.unloaded.trigger(e,this).then(()=>{this.emit(Re.RENDITION.REMOVED,e.section,e)})}onResized(e,t){this.emit(Re.RENDITION.RESIZED,{width:e.width,height:e.height},t),this.location&&this.location.start&&this.display(t||this.location.start.cfi)}onOrientationChange(e){this.emit(Re.RENDITION.ORIENTATION_CHANGE,e)}moveTo(e){this.manager.moveTo(e)}resize(e,t,n){e&&(this.settings.width=e),t&&(this.settings.height=t),this.manager.resize(e,t,n)}clear(){this.manager.clear()}next(){return this.q.enqueue(this.manager.next.bind(this.manager)).then(this.reportLocation.bind(this))}prev(){return this.q.enqueue(this.manager.prev.bind(this.manager)).then(this.reportLocation.bind(this))}determineLayoutProperties(e){var t,n=this.settings.layout||e.layout||"reflowable",r=this.settings.spread||e.spread||"auto",s=this.settings.orientation||e.orientation||"auto",a=this.settings.flow||e.flow||"auto",o=e.viewport||"",l=this.settings.minSpreadWidth||e.minSpreadWidth||800,u=this.settings.direction||e.direction||"ltr";return(this.settings.width===0||this.settings.width>0)&&(this.settings.height===0||this.settings.height>0),t={layout:n,spread:r,orientation:s,flow:a,viewport:o,minSpreadWidth:l,direction:u},t}flow(e){var t=e;(e==="scrolled"||e==="scrolled-doc"||e==="scrolled-continuous")&&(t="scrolled"),(e==="auto"||e==="paginated")&&(t="paginated"),this.settings.flow=e,this._layout&&this._layout.flow(t),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this.manager&&this.manager.updateFlow(t),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}layout(e){return e&&(this._layout=new cD(e),this._layout.spread(e.spread,this.settings.minSpreadWidth),this._layout.on(Re.LAYOUT.UPDATED,(t,n)=>{this.emit(Re.RENDITION.LAYOUT,t,n)})),this.manager&&this._layout&&this.manager.applyLayout(this._layout),this._layout}spread(e,t){this.settings.spread=e,t&&(this.settings.minSpreadWidth=t),this._layout&&this._layout.spread(e,t),this.manager&&this.manager.isRendered()&&this.manager.updateLayout()}direction(e){this.settings.direction=e||"ltr",this.manager&&this.manager.direction(this.settings.direction),this.manager&&this.manager.isRendered()&&this.location&&(this.manager.clear(),this.display(this.location.start.cfi))}reportLocation(){return this.q.enqueue((function(){requestAnimationFrame((function(){var n=this.manager.currentLocation();if(n&&n.then&&typeof n.then=="function")n.then((function(r){let s=this.located(r);!s||!s.start||!s.end||(this.location=s,this.emit(Re.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Re.RENDITION.RELOCATED,this.location))}).bind(this));else if(n){let r=this.located(n);if(!r||!r.start||!r.end)return;this.location=r,this.emit(Re.RENDITION.LOCATION_CHANGED,{index:this.location.start.index,href:this.location.start.href,start:this.location.start.cfi,end:this.location.end.cfi,percentage:this.location.start.percentage}),this.emit(Re.RENDITION.RELOCATED,this.location)}}).bind(this))}).bind(this))}currentLocation(){var e=this.manager.currentLocation();if(e&&e.then&&typeof e.then=="function")e.then((function(t){return this.located(t)}).bind(this));else if(e)return this.located(e)}located(e){if(!e.length)return{};let t=e[0],n=e[e.length-1],r={start:{index:t.index,href:t.href,cfi:t.mapping.start,displayed:{page:t.pages[0]||1,total:t.totalPages}},end:{index:n.index,href:n.href,cfi:n.mapping.end,displayed:{page:n.pages[n.pages.length-1]||1,total:n.totalPages}}},s=this.book.locations.locationFromCfi(t.mapping.start),a=this.book.locations.locationFromCfi(n.mapping.end);s!=null&&(r.start.location=s,r.start.percentage=this.book.locations.percentageFromLocation(s)),a!=null&&(r.end.location=a,r.end.percentage=this.book.locations.percentageFromLocation(a));let o=this.book.pageList.pageFromCfi(t.mapping.start),l=this.book.pageList.pageFromCfi(n.mapping.end);return o!=-1&&(r.start.page=o),l!=-1&&(r.end.page=l),n.index===this.book.spine.last().index&&r.end.displayed.page>=r.end.displayed.total&&(r.atEnd=!0),t.index===this.book.spine.first().index&&r.start.displayed.page===1&&(r.atStart=!0),r}destroy(){this.manager&&this.manager.destroy(),this.book=void 0}passEvents(e){xm.forEach(t=>{e.on(t,n=>this.triggerViewEvent(n,e))}),e.on(Re.CONTENTS.SELECTED,t=>this.triggerSelectedEvent(t,e))}triggerViewEvent(e,t){this.emit(e.type,e,t)}triggerSelectedEvent(e,t){this.emit(Re.RENDITION.SELECTED,e,t)}triggerMarkEvent(e,t,n){this.emit(Re.RENDITION.MARK_CLICKED,e,t,n)}getRange(e,t){var n=new pt(e),r=this.manager.visible().filter(function(s){if(n.spinePos===s.index)return!0});if(r.length)return r[0].contents.range(n,t)}adjustImages(e){if(this._layout.name==="pre-paginated")return new Promise(function(s){s()});let t=e.window.getComputedStyle(e.content,null),n=(e.content.offsetHeight-(parseFloat(t.paddingTop)+parseFloat(t.paddingBottom)))*.95,r=parseFloat(t.paddingLeft)+parseFloat(t.paddingRight);return e.addStylesheetRules({img:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":n+"px!important","object-fit":"contain","page-break-inside":"avoid","break-inside":"avoid","box-sizing":"border-box"},svg:{"max-width":(this._layout.columnWidth?this._layout.columnWidth-r+"px":"100%")+"!important","max-height":n+"px!important","page-break-inside":"avoid","break-inside":"avoid"}}),new Promise(function(s,a){setTimeout(function(){s()},1)})}getContents(){return this.manager?this.manager.getContents():[]}views(){return(this.manager?this.manager.views:void 0)||[]}handleLinks(e){e&&e.on(Re.CONTENTS.LINK_CLICKED,t=>{let n=this.book.path.relative(t);this.display(n)})}injectStylesheet(e,t){let n=e.createElement("link");n.setAttribute("type","text/css"),n.setAttribute("rel","stylesheet"),n.setAttribute("href",this.settings.stylesheet),e.getElementsByTagName("head")[0].appendChild(n)}injectScript(e,t){let n=e.createElement("script");n.setAttribute("type","text/javascript"),n.setAttribute("src",this.settings.script),n.textContent=" ",e.getElementsByTagName("head")[0].appendChild(n)}injectIdentifier(e,t){let n=this.book.packaging.metadata.identifier,r=e.createElement("meta");r.setAttribute("name","dc.relation.ispartof"),n&&r.setAttribute("content",n),e.getElementsByTagName("head")[0].appendChild(r)}}Is(P_.prototype);function xo(i){throw new Error('Could not dynamically require "'+i+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var xD={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(n,r,s){function a(u,c){if(!r[u]){if(!n[u]){var h=typeof xo=="function"&&xo;if(!c&&h)return h(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var d=r[u]={exports:{}};n[u][0].call(d.exports,function(y){var b=n[u][1][y];return a(b||y)},d,d.exports,t,n,r,s)}return r[u].exports}for(var o=typeof xo=="function"&&xo,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,n,r){var s=t("./utils"),a=t("./support"),o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";r.encode=function(l){for(var u=[],c,h,f,d,y,b,v,g=0,m=l.length,w=m,_=s.getTypeOf(l)!=="string";g<l.length;)w=m-g,_?(c=l[g++],h=g<m?l[g++]:0,f=g<m?l[g++]:0):(c=l.charCodeAt(g++),h=g<m?l.charCodeAt(g++):0,f=g<m?l.charCodeAt(g++):0),d=c>>2,y=(c&3)<<4|h>>4,b=w>1?(h&15)<<2|f>>6:64,v=w>2?f&63:64,u.push(o.charAt(d)+o.charAt(y)+o.charAt(b)+o.charAt(v));return u.join("")},r.decode=function(l){var u,c,h,f,d,y,b,v=0,g=0,m="data:";if(l.substr(0,m.length)===m)throw new Error("Invalid base64 input, it looks like a data url.");l=l.replace(/[^A-Za-z0-9+/=]/g,"");var w=l.length*3/4;if(l.charAt(l.length-1)===o.charAt(64)&&w--,l.charAt(l.length-2)===o.charAt(64)&&w--,w%1!==0)throw new Error("Invalid base64 input, bad content length.");var _;for(a.uint8array?_=new Uint8Array(w|0):_=new Array(w|0);v<l.length;)f=o.indexOf(l.charAt(v++)),d=o.indexOf(l.charAt(v++)),y=o.indexOf(l.charAt(v++)),b=o.indexOf(l.charAt(v++)),u=f<<2|d>>4,c=(d&15)<<4|y>>2,h=(y&3)<<6|b,_[g++]=u,y!==64&&(_[g++]=c),b!==64&&(_[g++]=h);return _}},{"./support":30,"./utils":32}],2:[function(t,n,r){var s=t("./external"),a=t("./stream/DataWorker"),o=t("./stream/Crc32Probe"),l=t("./stream/DataLengthProbe");function u(c,h,f,d,y){this.compressedSize=c,this.uncompressedSize=h,this.crc32=f,this.compression=d,this.compressedContent=y}u.prototype={getContentWorker:function(){var c=new a(s.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new l("data_length")),h=this;return c.on("end",function(){if(this.streamInfo.data_length!==h.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),c},getCompressedWorker:function(){return new a(s.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},u.createWorkerFrom=function(c,h,f){return c.pipe(new o).pipe(new l("uncompressedSize")).pipe(h.compressWorker(f)).pipe(new l("compressedSize")).withStreamInfo("compression",h)},n.exports=u},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(t,n,r){var s=t("./stream/GenericWorker");r.STORE={magic:"\0\0",compressWorker:function(){return new s("STORE compression")},uncompressWorker:function(){return new s("STORE decompression")}},r.DEFLATE=t("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(t,n,r){var s=t("./utils");function a(){for(var c,h=[],f=0;f<256;f++){c=f;for(var d=0;d<8;d++)c=c&1?3988292384^c>>>1:c>>>1;h[f]=c}return h}var o=a();function l(c,h,f,d){var y=o,b=d+f;c=c^-1;for(var v=d;v<b;v++)c=c>>>8^y[(c^h[v])&255];return c^-1}function u(c,h,f,d){var y=o,b=d+f;c=c^-1;for(var v=d;v<b;v++)c=c>>>8^y[(c^h.charCodeAt(v))&255];return c^-1}n.exports=function(h,f){if(typeof h>"u"||!h.length)return 0;var d=s.getTypeOf(h)!=="string";return d?l(f|0,h,h.length,0):u(f|0,h,h.length,0)}},{"./utils":32}],5:[function(t,n,r){r.base64=!1,r.binary=!1,r.dir=!1,r.createFolders=!0,r.date=null,r.compression=null,r.compressionOptions=null,r.comment=null,r.unixPermissions=null,r.dosPermissions=null},{}],6:[function(t,n,r){var s=null;typeof Promise<"u"?s=Promise:s=t("lie"),n.exports={Promise:s}},{lie:37}],7:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",a=t("pako"),o=t("./utils"),l=t("./stream/GenericWorker"),u=s?"uint8array":"array";r.magic="\b\0";function c(h,f){l.call(this,"FlateWorker/"+h),this._pako=null,this._pakoAction=h,this._pakoOptions=f,this.meta={}}o.inherits(c,l),c.prototype.processChunk=function(h){this.meta=h.meta,this._pako===null&&this._createPako(),this._pako.push(o.transformTo(u,h.data),!1)},c.prototype.flush=function(){l.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},c.prototype.cleanUp=function(){l.prototype.cleanUp.call(this),this._pako=null},c.prototype._createPako=function(){this._pako=new a[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var h=this;this._pako.onData=function(f){h.push({data:f,meta:h.meta})}},r.compressWorker=function(h){return new c("Deflate",h)},r.uncompressWorker=function(){return new c("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(t,n,r){var s=t("../utils"),a=t("../stream/GenericWorker"),o=t("../utf8"),l=t("../crc32"),u=t("../signature"),c=function(g,m){var w="",_;for(_=0;_<m;_++)w+=String.fromCharCode(g&255),g=g>>>8;return w},h=function(g,m){var w=g;return g||(w=m?16893:33204),(w&65535)<<16},f=function(g){return(g||0)&63},d=function(g,m,w,_,E,x){var A=g.file,S=g.compression,O=x!==o.utf8encode,C=s.transformTo("string",x(A.name)),k=s.transformTo("string",o.utf8encode(A.name)),D=A.comment,R=s.transformTo("string",x(D)),F=s.transformTo("string",o.utf8encode(D)),H=k.length!==A.name.length,$=F.length!==D.length,G,Z,K="",q="",P="",B=A.dir,V=A.date,J={crc32:0,compressedSize:0,uncompressedSize:0};(!m||w)&&(J.crc32=g.crc32,J.compressedSize=g.compressedSize,J.uncompressedSize=g.uncompressedSize);var te=0;m&&(te|=8),!O&&(H||$)&&(te|=2048);var U=0,Y=0;B&&(U|=16),E==="UNIX"?(Y=798,U|=h(A.unixPermissions,B)):(Y=20,U|=f(A.dosPermissions)),G=V.getUTCHours(),G=G<<6,G=G|V.getUTCMinutes(),G=G<<5,G=G|V.getUTCSeconds()/2,Z=V.getUTCFullYear()-1980,Z=Z<<4,Z=Z|V.getUTCMonth()+1,Z=Z<<5,Z=Z|V.getUTCDate(),H&&(q=c(1,1)+c(l(C),4)+k,K+="up"+c(q.length,2)+q),$&&(P=c(1,1)+c(l(R),4)+F,K+="uc"+c(P.length,2)+P);var re="";re+=`
\0`,re+=c(te,2),re+=S.magic,re+=c(G,2),re+=c(Z,2),re+=c(J.crc32,4),re+=c(J.compressedSize,4),re+=c(J.uncompressedSize,4),re+=c(C.length,2),re+=c(K.length,2);var oe=u.LOCAL_FILE_HEADER+re+C+K,de=u.CENTRAL_FILE_HEADER+c(Y,2)+re+c(R.length,2)+"\0\0\0\0"+c(U,4)+c(_,4)+C+K+R;return{fileRecord:oe,dirRecord:de}},y=function(g,m,w,_,E){var x="",A=s.transformTo("string",E(_));return x=u.CENTRAL_DIRECTORY_END+"\0\0\0\0"+c(g,2)+c(g,2)+c(m,4)+c(w,4)+c(A.length,2)+A,x},b=function(g){var m="";return m=u.DATA_DESCRIPTOR+c(g.crc32,4)+c(g.compressedSize,4)+c(g.uncompressedSize,4),m};function v(g,m,w,_){a.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=m,this.zipPlatform=w,this.encodeFileName=_,this.streamFiles=g,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}s.inherits(v,a),v.prototype.push=function(g){var m=g.meta.percent||0,w=this.entriesCount,_=this._sources.length;this.accumulate?this.contentBuffer.push(g):(this.bytesWritten+=g.data.length,a.prototype.push.call(this,{data:g.data,meta:{currentFile:this.currentFile,percent:w?(m+100*(w-_-1))/w:100}}))},v.prototype.openedSource=function(g){this.currentSourceOffset=this.bytesWritten,this.currentFile=g.file.name;var m=this.streamFiles&&!g.file.dir;if(m){var w=d(g,m,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:w.fileRecord,meta:{percent:0}})}else this.accumulate=!0},v.prototype.closedSource=function(g){this.accumulate=!1;var m=this.streamFiles&&!g.file.dir,w=d(g,m,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(w.dirRecord),m)this.push({data:b(g),meta:{percent:100}});else for(this.push({data:w.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},v.prototype.flush=function(){for(var g=this.bytesWritten,m=0;m<this.dirRecords.length;m++)this.push({data:this.dirRecords[m],meta:{percent:100}});var w=this.bytesWritten-g,_=y(this.dirRecords.length,w,g,this.zipComment,this.encodeFileName);this.push({data:_,meta:{percent:100}})},v.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},v.prototype.registerPrevious=function(g){this._sources.push(g);var m=this;return g.on("data",function(w){m.processChunk(w)}),g.on("end",function(){m.closedSource(m.previous.streamInfo),m._sources.length?m.prepareNextSource():m.end()}),g.on("error",function(w){m.error(w)}),this},v.prototype.resume=function(){if(!a.prototype.resume.call(this))return!1;if(!this.previous&&this._sources.length)return this.prepareNextSource(),!0;if(!this.previous&&!this._sources.length&&!this.generatedError)return this.end(),!0},v.prototype.error=function(g){var m=this._sources;if(!a.prototype.error.call(this,g))return!1;for(var w=0;w<m.length;w++)try{m[w].error(g)}catch{}return!0},v.prototype.lock=function(){a.prototype.lock.call(this);for(var g=this._sources,m=0;m<g.length;m++)g[m].lock()},n.exports=v},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(t,n,r){var s=t("../compressions"),a=t("./ZipFileWorker"),o=function(l,u){var c=l||u,h=s[c];if(!h)throw new Error(c+" is not a valid compression method !");return h};r.generateWorker=function(l,u,c){var h=new a(u.streamFiles,c,u.platform,u.encodeFileName),f=0;try{l.forEach(function(d,y){f++;var b=o(y.options.compression,u.compression),v=y.options.compressionOptions||u.compressionOptions||{},g=y.dir,m=y.date;y._compressWorker(b,v).withStreamInfo("file",{name:d,dir:g,date:m,comment:y.comment||"",unixPermissions:y.unixPermissions,dosPermissions:y.dosPermissions}).pipe(h)}),h.entriesCount=f}catch(d){h.error(d)}return h}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(t,n,r){function s(){if(!(this instanceof s))return new s;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var a=new s;for(var o in this)typeof this[o]!="function"&&(a[o]=this[o]);return a}}s.prototype=t("./object"),s.prototype.loadAsync=t("./load"),s.support=t("./support"),s.defaults=t("./defaults"),s.version="3.10.1",s.loadAsync=function(a,o){return new s().loadAsync(a,o)},s.external=t("./external"),n.exports=s},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(t,n,r){var s=t("./utils"),a=t("./external"),o=t("./utf8"),l=t("./zipEntries"),u=t("./stream/Crc32Probe"),c=t("./nodejsUtils");function h(f){return new a.Promise(function(d,y){var b=f.decompressed.getContentWorker().pipe(new u);b.on("error",function(v){y(v)}).on("end",function(){b.streamInfo.crc32!==f.decompressed.crc32?y(new Error("Corrupted zip : CRC32 mismatch")):d()}).resume()})}n.exports=function(f,d){var y=this;return d=s.extend(d||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:o.utf8decode}),c.isNode&&c.isStream(f)?a.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):s.prepareContent("the loaded zip file",f,!0,d.optimizedBinaryString,d.base64).then(function(b){var v=new l(d);return v.load(b),v}).then(function(v){var g=[a.Promise.resolve(v)],m=v.files;if(d.checkCRC32)for(var w=0;w<m.length;w++)g.push(h(m[w]));return a.Promise.all(g)}).then(function(v){for(var g=v.shift(),m=g.files,w=0;w<m.length;w++){var _=m[w],E=_.fileNameStr,x=s.resolve(_.fileNameStr);y.file(x,_.decompressed,{binary:!0,optimizedBinaryString:!0,date:_.date,dir:_.dir,comment:_.fileCommentStr.length?_.fileCommentStr:null,unixPermissions:_.unixPermissions,dosPermissions:_.dosPermissions,createFolders:d.createFolders}),_.dir||(y.file(x).unsafeOriginalName=E)}return g.zipComment.length&&(y.comment=g.zipComment),y})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(t,n,r){var s=t("../utils"),a=t("../stream/GenericWorker");function o(l,u){a.call(this,"Nodejs stream input adapter for "+l),this._upstreamEnded=!1,this._bindStream(u)}s.inherits(o,a),o.prototype._bindStream=function(l){var u=this;this._stream=l,l.pause(),l.on("data",function(c){u.push({data:c,meta:{percent:0}})}).on("error",function(c){u.isPaused?this.generatedError=c:u.error(c)}).on("end",function(){u.isPaused?u._upstreamEnded=!0:u.end()})},o.prototype.pause=function(){return a.prototype.pause.call(this)?(this._stream.pause(),!0):!1},o.prototype.resume=function(){return a.prototype.resume.call(this)?(this._upstreamEnded?this.end():this._stream.resume(),!0):!1},n.exports=o},{"../stream/GenericWorker":28,"../utils":32}],13:[function(t,n,r){var s=t("readable-stream").Readable,a=t("../utils");a.inherits(o,s);function o(l,u,c){s.call(this,u),this._helper=l;var h=this;l.on("data",function(f,d){h.push(f)||h._helper.pause(),c&&c(d)}).on("error",function(f){h.emit("error",f)}).on("end",function(){h.push(null)})}o.prototype._read=function(){this._helper.resume()},n.exports=o},{"../utils":32,"readable-stream":16}],14:[function(t,n,r){n.exports={isNode:typeof Buffer<"u",newBufferFrom:function(s,a){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(s,a);if(typeof s=="number")throw new Error('The "data" argument must not be a number');return new Buffer(s,a)},allocBuffer:function(s){if(Buffer.alloc)return Buffer.alloc(s);var a=new Buffer(s);return a.fill(0),a},isBuffer:function(s){return Buffer.isBuffer(s)},isStream:function(s){return s&&typeof s.on=="function"&&typeof s.pause=="function"&&typeof s.resume=="function"}}},{}],15:[function(t,n,r){var s=t("./utf8"),a=t("./utils"),o=t("./stream/GenericWorker"),l=t("./stream/StreamHelper"),u=t("./defaults"),c=t("./compressedObject"),h=t("./zipObject"),f=t("./generate"),d=t("./nodejsUtils"),y=t("./nodejs/NodejsStreamInputAdapter"),b=function(E,x,A){var S=a.getTypeOf(x),O,C=a.extend(A||{},u);C.date=C.date||new Date,C.compression!==null&&(C.compression=C.compression.toUpperCase()),typeof C.unixPermissions=="string"&&(C.unixPermissions=parseInt(C.unixPermissions,8)),C.unixPermissions&&C.unixPermissions&16384&&(C.dir=!0),C.dosPermissions&&C.dosPermissions&16&&(C.dir=!0),C.dir&&(E=g(E)),C.createFolders&&(O=v(E))&&m.call(this,O,!0);var k=S==="string"&&C.binary===!1&&C.base64===!1;(!A||typeof A.binary>"u")&&(C.binary=!k);var D=x instanceof c&&x.uncompressedSize===0;(D||C.dir||!x||x.length===0)&&(C.base64=!1,C.binary=!0,x="",C.compression="STORE",S="string");var R=null;x instanceof c||x instanceof o?R=x:d.isNode&&d.isStream(x)?R=new y(E,x):R=a.prepareContent(E,x,C.binary,C.optimizedBinaryString,C.base64);var F=new h(E,R,C);this.files[E]=F},v=function(E){E.slice(-1)==="/"&&(E=E.substring(0,E.length-1));var x=E.lastIndexOf("/");return x>0?E.substring(0,x):""},g=function(E){return E.slice(-1)!=="/"&&(E+="/"),E},m=function(E,x){return x=typeof x<"u"?x:u.createFolders,E=g(E),this.files[E]||b.call(this,E,null,{dir:!0,createFolders:x}),this.files[E]};function w(E){return Object.prototype.toString.call(E)==="[object RegExp]"}var _={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(E){var x,A,S;for(x in this.files)S=this.files[x],A=x.slice(this.root.length,x.length),A&&x.slice(0,this.root.length)===this.root&&E(A,S)},filter:function(E){var x=[];return this.forEach(function(A,S){E(A,S)&&x.push(S)}),x},file:function(E,x,A){if(arguments.length===1)if(w(E)){var S=E;return this.filter(function(C,k){return!k.dir&&S.test(C)})}else{var O=this.files[this.root+E];return O&&!O.dir?O:null}else E=this.root+E,b.call(this,E,x,A);return this},folder:function(E){if(!E)return this;if(w(E))return this.filter(function(O,C){return C.dir&&E.test(O)});var x=this.root+E,A=m.call(this,x),S=this.clone();return S.root=A.name,S},remove:function(E){E=this.root+E;var x=this.files[E];if(x||(E.slice(-1)!=="/"&&(E+="/"),x=this.files[E]),x&&!x.dir)delete this.files[E];else for(var A=this.filter(function(O,C){return C.name.slice(0,E.length)===E}),S=0;S<A.length;S++)delete this.files[A[S].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(E){var x,A={};try{if(A=a.extend(E||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:s.utf8encode}),A.type=A.type.toLowerCase(),A.compression=A.compression.toUpperCase(),A.type==="binarystring"&&(A.type="string"),!A.type)throw new Error("No output type specified.");a.checkSupport(A.type),(A.platform==="darwin"||A.platform==="freebsd"||A.platform==="linux"||A.platform==="sunos")&&(A.platform="UNIX"),A.platform==="win32"&&(A.platform="DOS");var S=A.comment||this.comment||"";x=f.generateWorker(this,A,S)}catch(O){x=new o("error"),x.error(O)}return new l(x,A.type||"string",A.mimeType)},generateAsync:function(E,x){return this.generateInternalStream(E).accumulate(x)},generateNodeStream:function(E,x){return E=E||{},E.type||(E.type="nodebuffer"),this.generateInternalStream(E).toNodejsStream(x)}};n.exports=_},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(t,n,r){n.exports=t("stream")},{stream:void 0}],17:[function(t,n,r){var s=t("./DataReader"),a=t("../utils");function o(l){s.call(this,l);for(var u=0;u<this.data.length;u++)l[u]=l[u]&255}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data[this.zero+l]},o.prototype.lastIndexOfSignature=function(l){for(var u=l.charCodeAt(0),c=l.charCodeAt(1),h=l.charCodeAt(2),f=l.charCodeAt(3),d=this.length-4;d>=0;--d)if(this.data[d]===u&&this.data[d+1]===c&&this.data[d+2]===h&&this.data[d+3]===f)return d-this.zero;return-1},o.prototype.readAndCheckSignature=function(l){var u=l.charCodeAt(0),c=l.charCodeAt(1),h=l.charCodeAt(2),f=l.charCodeAt(3),d=this.readData(4);return u===d[0]&&c===d[1]&&h===d[2]&&f===d[3]},o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return[];var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./DataReader":18}],18:[function(t,n,r){var s=t("../utils");function a(o){this.data=o,this.length=o.length,this.index=0,this.zero=0}a.prototype={checkOffset:function(o){this.checkIndex(this.index+o)},checkIndex:function(o){if(this.length<this.zero+o||o<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+o+"). Corrupted zip ?")},setIndex:function(o){this.checkIndex(o),this.index=o},skip:function(o){this.setIndex(this.index+o)},byteAt:function(){},readInt:function(o){var l=0,u;for(this.checkOffset(o),u=this.index+o-1;u>=this.index;u--)l=(l<<8)+this.byteAt(u);return this.index+=o,l},readString:function(o){return s.transformTo("string",this.readData(o))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var o=this.readInt(4);return new Date(Date.UTC((o>>25&127)+1980,(o>>21&15)-1,o>>16&31,o>>11&31,o>>5&63,(o&31)<<1))}},n.exports=a},{"../utils":32}],19:[function(t,n,r){var s=t("./Uint8ArrayReader"),a=t("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(t,n,r){var s=t("./DataReader"),a=t("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.byteAt=function(l){return this.data.charCodeAt(this.zero+l)},o.prototype.lastIndexOfSignature=function(l){return this.data.lastIndexOf(l)-this.zero},o.prototype.readAndCheckSignature=function(l){var u=this.readData(4);return l===u},o.prototype.readData=function(l){this.checkOffset(l);var u=this.data.slice(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./DataReader":18}],21:[function(t,n,r){var s=t("./ArrayReader"),a=t("../utils");function o(l){s.call(this,l)}a.inherits(o,s),o.prototype.readData=function(l){if(this.checkOffset(l),l===0)return new Uint8Array(0);var u=this.data.subarray(this.zero+this.index,this.zero+this.index+l);return this.index+=l,u},n.exports=o},{"../utils":32,"./ArrayReader":17}],22:[function(t,n,r){var s=t("../utils"),a=t("../support"),o=t("./ArrayReader"),l=t("./StringReader"),u=t("./NodeBufferReader"),c=t("./Uint8ArrayReader");n.exports=function(h){var f=s.getTypeOf(h);return s.checkSupport(f),f==="string"&&!a.uint8array?new l(h):f==="nodebuffer"?new u(h):a.uint8array?new c(s.transformTo("uint8array",h)):new o(s.transformTo("array",h))}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(t,n,r){r.LOCAL_FILE_HEADER="PK",r.CENTRAL_FILE_HEADER="PK",r.CENTRAL_DIRECTORY_END="PK",r.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",r.ZIP64_CENTRAL_DIRECTORY_END="PK",r.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(t,n,r){var s=t("./GenericWorker"),a=t("../utils");function o(l){s.call(this,"ConvertWorker to "+l),this.destType=l}a.inherits(o,s),o.prototype.processChunk=function(l){this.push({data:a.transformTo(this.destType,l.data),meta:l.meta})},n.exports=o},{"../utils":32,"./GenericWorker":28}],25:[function(t,n,r){var s=t("./GenericWorker"),a=t("../crc32"),o=t("../utils");function l(){s.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}o.inherits(l,s),l.prototype.processChunk=function(u){this.streamInfo.crc32=a(u.data,this.streamInfo.crc32||0),this.push(u)},n.exports=l},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(t,n,r){var s=t("../utils"),a=t("./GenericWorker");function o(l){a.call(this,"DataLengthProbe for "+l),this.propName=l,this.withStreamInfo(l,0)}s.inherits(o,a),o.prototype.processChunk=function(l){if(l){var u=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=u+l.data.length}a.prototype.processChunk.call(this,l)},n.exports=o},{"../utils":32,"./GenericWorker":28}],27:[function(t,n,r){var s=t("../utils"),a=t("./GenericWorker"),o=16*1024;function l(u){a.call(this,"DataWorker");var c=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,u.then(function(h){c.dataIsReady=!0,c.data=h,c.max=h&&h.length||0,c.type=s.getTypeOf(h),c.isPaused||c._tickAndRepeat()},function(h){c.error(h)})}s.inherits(l,a),l.prototype.cleanUp=function(){a.prototype.cleanUp.call(this),this.data=null},l.prototype.resume=function(){return a.prototype.resume.call(this)?(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,s.delay(this._tickAndRepeat,[],this)),!0):!1},l.prototype._tickAndRepeat=function(){this._tickScheduled=!1,!(this.isPaused||this.isFinished)&&(this._tick(),this.isFinished||(s.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},l.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var u=o,c=null,h=Math.min(this.max,this.index+u);if(this.index>=this.max)return this.end();switch(this.type){case"string":c=this.data.substring(this.index,h);break;case"uint8array":c=this.data.subarray(this.index,h);break;case"array":case"nodebuffer":c=this.data.slice(this.index,h);break}return this.index=h,this.push({data:c,meta:{percent:this.max?this.index/this.max*100:0}})},n.exports=l},{"../utils":32,"./GenericWorker":28}],28:[function(t,n,r){function s(a){this.name=a||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}s.prototype={push:function(a){this.emit("data",a)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(a){this.emit("error",a)}return!0},error:function(a){return this.isFinished?!1:(this.isPaused?this.generatedError=a:(this.isFinished=!0,this.emit("error",a),this.previous&&this.previous.error(a),this.cleanUp()),!0)},on:function(a,o){return this._listeners[a].push(o),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(a,o){if(this._listeners[a])for(var l=0;l<this._listeners[a].length;l++)this._listeners[a][l].call(this,o)},pipe:function(a){return a.registerPrevious(this)},registerPrevious:function(a){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=a.streamInfo,this.mergeStreamInfo(),this.previous=a;var o=this;return a.on("data",function(l){o.processChunk(l)}),a.on("end",function(){o.end()}),a.on("error",function(l){o.error(l)}),this},pause:function(){return this.isPaused||this.isFinished?!1:(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;this.isPaused=!1;var a=!1;return this.generatedError&&(this.error(this.generatedError),a=!0),this.previous&&this.previous.resume(),!a},flush:function(){},processChunk:function(a){this.push(a)},withStreamInfo:function(a,o){return this.extraStreamInfo[a]=o,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var a in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,a)&&(this.streamInfo[a]=this.extraStreamInfo[a])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var a="Worker "+this.name;return this.previous?this.previous+" -> "+a:a}},n.exports=s},{}],29:[function(t,n,r){var s=t("../utils"),a=t("./ConvertWorker"),o=t("./GenericWorker"),l=t("../base64"),u=t("../support"),c=t("../external"),h=null;if(u.nodestream)try{h=t("../nodejs/NodejsStreamOutputAdapter")}catch{}function f(v,g,m){switch(v){case"blob":return s.newBlob(s.transformTo("arraybuffer",g),m);case"base64":return l.encode(g);default:return s.transformTo(v,g)}}function d(v,g){var m,w=0,_=null,E=0;for(m=0;m<g.length;m++)E+=g[m].length;switch(v){case"string":return g.join("");case"array":return Array.prototype.concat.apply([],g);case"uint8array":for(_=new Uint8Array(E),m=0;m<g.length;m++)_.set(g[m],w),w+=g[m].length;return _;case"nodebuffer":return Buffer.concat(g);default:throw new Error("concat : unsupported type '"+v+"'")}}function y(v,g){return new c.Promise(function(m,w){var _=[],E=v._internalType,x=v._outputType,A=v._mimeType;v.on("data",function(S,O){_.push(S),g&&g(O)}).on("error",function(S){_=[],w(S)}).on("end",function(){try{var S=f(x,d(E,_),A);m(S)}catch(O){w(O)}_=[]}).resume()})}function b(v,g,m){var w=g;switch(g){case"blob":case"arraybuffer":w="uint8array";break;case"base64":w="string";break}try{this._internalType=w,this._outputType=g,this._mimeType=m,s.checkSupport(w),this._worker=v.pipe(new a(w)),v.lock()}catch(_){this._worker=new o("error"),this._worker.error(_)}}b.prototype={accumulate:function(v){return y(this,v)},on:function(v,g){var m=this;return v==="data"?this._worker.on(v,function(w){g.call(m,w.data,w.meta)}):this._worker.on(v,function(){s.delay(g,arguments,m)}),this},resume:function(){return s.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(v){if(s.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new h(this,{objectMode:this._outputType!=="nodebuffer"},v)}},n.exports=b},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(t,n,r){if(r.base64=!0,r.array=!0,r.string=!0,r.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",r.nodebuffer=typeof Buffer<"u",r.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")r.blob=!1;else{var s=new ArrayBuffer(0);try{r.blob=new Blob([s],{type:"application/zip"}).size===0}catch{try{var a=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,o=new a;o.append(s),r.blob=o.getBlob("application/zip").size===0}catch{r.blob=!1}}}try{r.nodestream=!!t("readable-stream").Readable}catch{r.nodestream=!1}},{"readable-stream":16}],31:[function(t,n,r){for(var s=t("./utils"),a=t("./support"),o=t("./nodejsUtils"),l=t("./stream/GenericWorker"),u=new Array(256),c=0;c<256;c++)u[c]=c>=252?6:c>=248?5:c>=240?4:c>=224?3:c>=192?2:1;u[254]=u[254]=1;var h=function(v){var g,m,w,_,E,x=v.length,A=0;for(_=0;_<x;_++)m=v.charCodeAt(_),(m&64512)===55296&&_+1<x&&(w=v.charCodeAt(_+1),(w&64512)===56320&&(m=65536+(m-55296<<10)+(w-56320),_++)),A+=m<128?1:m<2048?2:m<65536?3:4;for(a.uint8array?g=new Uint8Array(A):g=new Array(A),E=0,_=0;E<A;_++)m=v.charCodeAt(_),(m&64512)===55296&&_+1<x&&(w=v.charCodeAt(_+1),(w&64512)===56320&&(m=65536+(m-55296<<10)+(w-56320),_++)),m<128?g[E++]=m:m<2048?(g[E++]=192|m>>>6,g[E++]=128|m&63):m<65536?(g[E++]=224|m>>>12,g[E++]=128|m>>>6&63,g[E++]=128|m&63):(g[E++]=240|m>>>18,g[E++]=128|m>>>12&63,g[E++]=128|m>>>6&63,g[E++]=128|m&63);return g},f=function(v,g){var m;for(g=g||v.length,g>v.length&&(g=v.length),m=g-1;m>=0&&(v[m]&192)===128;)m--;return m<0||m===0?g:m+u[v[m]]>g?m:g},d=function(v){var g,m,w,_,E=v.length,x=new Array(E*2);for(m=0,g=0;g<E;){if(w=v[g++],w<128){x[m++]=w;continue}if(_=u[w],_>4){x[m++]=65533,g+=_-1;continue}for(w&=_===2?31:_===3?15:7;_>1&&g<E;)w=w<<6|v[g++]&63,_--;if(_>1){x[m++]=65533;continue}w<65536?x[m++]=w:(w-=65536,x[m++]=55296|w>>10&1023,x[m++]=56320|w&1023)}return x.length!==m&&(x.subarray?x=x.subarray(0,m):x.length=m),s.applyFromCharCode(x)};r.utf8encode=function(g){return a.nodebuffer?o.newBufferFrom(g,"utf-8"):h(g)},r.utf8decode=function(g){return a.nodebuffer?s.transformTo("nodebuffer",g).toString("utf-8"):(g=s.transformTo(a.uint8array?"uint8array":"array",g),d(g))};function y(){l.call(this,"utf-8 decode"),this.leftOver=null}s.inherits(y,l),y.prototype.processChunk=function(v){var g=s.transformTo(a.uint8array?"uint8array":"array",v.data);if(this.leftOver&&this.leftOver.length){if(a.uint8array){var m=g;g=new Uint8Array(m.length+this.leftOver.length),g.set(this.leftOver,0),g.set(m,this.leftOver.length)}else g=this.leftOver.concat(g);this.leftOver=null}var w=f(g),_=g;w!==g.length&&(a.uint8array?(_=g.subarray(0,w),this.leftOver=g.subarray(w,g.length)):(_=g.slice(0,w),this.leftOver=g.slice(w,g.length))),this.push({data:r.utf8decode(_),meta:v.meta})},y.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:r.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},r.Utf8DecodeWorker=y;function b(){l.call(this,"utf-8 encode")}s.inherits(b,l),b.prototype.processChunk=function(v){this.push({data:r.utf8encode(v.data),meta:v.meta})},r.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(t,n,r){var s=t("./support"),a=t("./base64"),o=t("./nodejsUtils"),l=t("./external");t("setimmediate");function u(v){var g=null;return s.uint8array?g=new Uint8Array(v.length):g=new Array(v.length),h(v,g)}r.newBlob=function(v,g){r.checkSupport("blob");try{return new Blob([v],{type:g})}catch{try{var m=self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder,w=new m;return w.append(v),w.getBlob(g)}catch{throw new Error("Bug : can't construct the Blob.")}}};function c(v){return v}function h(v,g){for(var m=0;m<v.length;++m)g[m]=v.charCodeAt(m)&255;return g}var f={stringifyByChunk:function(v,g,m){var w=[],_=0,E=v.length;if(E<=m)return String.fromCharCode.apply(null,v);for(;_<E;)g==="array"||g==="nodebuffer"?w.push(String.fromCharCode.apply(null,v.slice(_,Math.min(_+m,E)))):w.push(String.fromCharCode.apply(null,v.subarray(_,Math.min(_+m,E)))),_+=m;return w.join("")},stringifyByChar:function(v){for(var g="",m=0;m<v.length;m++)g+=String.fromCharCode(v[m]);return g},applyCanBeUsed:{uint8array:function(){try{return s.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return s.nodebuffer&&String.fromCharCode.apply(null,o.allocBuffer(1)).length===1}catch{return!1}}()}};function d(v){var g=65536,m=r.getTypeOf(v),w=!0;if(m==="uint8array"?w=f.applyCanBeUsed.uint8array:m==="nodebuffer"&&(w=f.applyCanBeUsed.nodebuffer),w)for(;g>1;)try{return f.stringifyByChunk(v,m,g)}catch{g=Math.floor(g/2)}return f.stringifyByChar(v)}r.applyFromCharCode=d;function y(v,g){for(var m=0;m<v.length;m++)g[m]=v[m];return g}var b={};b.string={string:c,array:function(v){return h(v,new Array(v.length))},arraybuffer:function(v){return b.string.uint8array(v).buffer},uint8array:function(v){return h(v,new Uint8Array(v.length))},nodebuffer:function(v){return h(v,o.allocBuffer(v.length))}},b.array={string:d,array:c,arraybuffer:function(v){return new Uint8Array(v).buffer},uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(v)}},b.arraybuffer={string:function(v){return d(new Uint8Array(v))},array:function(v){return y(new Uint8Array(v),new Array(v.byteLength))},arraybuffer:c,uint8array:function(v){return new Uint8Array(v)},nodebuffer:function(v){return o.newBufferFrom(new Uint8Array(v))}},b.uint8array={string:d,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return v.buffer},uint8array:c,nodebuffer:function(v){return o.newBufferFrom(v)}},b.nodebuffer={string:d,array:function(v){return y(v,new Array(v.length))},arraybuffer:function(v){return b.nodebuffer.uint8array(v).buffer},uint8array:function(v){return y(v,new Uint8Array(v.length))},nodebuffer:c},r.transformTo=function(v,g){if(g||(g=""),!v)return g;r.checkSupport(v);var m=r.getTypeOf(g),w=b[m][v](g);return w},r.resolve=function(v){for(var g=v.split("/"),m=[],w=0;w<g.length;w++){var _=g[w];_==="."||_===""&&w!==0&&w!==g.length-1||(_===".."?m.pop():m.push(_))}return m.join("/")},r.getTypeOf=function(v){if(typeof v=="string")return"string";if(Object.prototype.toString.call(v)==="[object Array]")return"array";if(s.nodebuffer&&o.isBuffer(v))return"nodebuffer";if(s.uint8array&&v instanceof Uint8Array)return"uint8array";if(s.arraybuffer&&v instanceof ArrayBuffer)return"arraybuffer"},r.checkSupport=function(v){var g=s[v.toLowerCase()];if(!g)throw new Error(v+" is not supported by this platform")},r.MAX_VALUE_16BITS=65535,r.MAX_VALUE_32BITS=-1,r.pretty=function(v){var g="",m,w;for(w=0;w<(v||"").length;w++)m=v.charCodeAt(w),g+="\\x"+(m<16?"0":"")+m.toString(16).toUpperCase();return g},r.delay=function(v,g,m){setImmediate(function(){v.apply(m||null,g||[])})},r.inherits=function(v,g){var m=function(){};m.prototype=g.prototype,v.prototype=new m},r.extend=function(){var v={},g,m;for(g=0;g<arguments.length;g++)for(m in arguments[g])Object.prototype.hasOwnProperty.call(arguments[g],m)&&typeof v[m]>"u"&&(v[m]=arguments[g][m]);return v},r.prepareContent=function(v,g,m,w,_){var E=l.Promise.resolve(g).then(function(x){var A=s.blob&&(x instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(x))!==-1);return A&&typeof FileReader<"u"?new l.Promise(function(S,O){var C=new FileReader;C.onload=function(k){S(k.target.result)},C.onerror=function(k){O(k.target.error)},C.readAsArrayBuffer(x)}):x});return E.then(function(x){var A=r.getTypeOf(x);return A?(A==="arraybuffer"?x=r.transformTo("uint8array",x):A==="string"&&(_?x=a.decode(x):m&&w!==!0&&(x=u(x))),x):l.Promise.reject(new Error("Can't read the data of '"+v+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(t,n,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./signature"),l=t("./zipEntry"),u=t("./support");function c(h){this.files=[],this.loadOptions=h}c.prototype={checkSignature:function(h){if(!this.reader.readAndCheckSignature(h)){this.reader.index-=4;var f=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+a.pretty(f)+", expected "+a.pretty(h)+")")}},isSignature:function(h,f){var d=this.reader.index;this.reader.setIndex(h);var y=this.reader.readString(4),b=y===f;return this.reader.setIndex(d),b},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var h=this.reader.readData(this.zipCommentLength),f=u.uint8array?"uint8array":"array",d=a.transformTo(f,h);this.zipComment=this.loadOptions.decodeFileName(d)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var h=this.zip64EndOfCentralSize-44,f=0,d,y,b;f<h;)d=this.reader.readInt(2),y=this.reader.readInt(4),b=this.reader.readData(y),this.zip64ExtensibleData[d]={id:d,length:y,value:b}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),this.disksCount>1)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var h,f;for(h=0;h<this.files.length;h++)f=this.files[h],this.reader.setIndex(f.localHeaderOffset),this.checkSignature(o.LOCAL_FILE_HEADER),f.readLocalPart(this.reader),f.handleUTF8(),f.processAttributes()},readCentralDir:function(){var h;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(o.CENTRAL_FILE_HEADER);)h=new l({zip64:this.zip64},this.loadOptions),h.readCentralPart(this.reader),this.files.push(h);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var h=this.reader.lastIndexOfSignature(o.CENTRAL_DIRECTORY_END);if(h<0){var f=!this.isSignature(0,o.LOCAL_FILE_HEADER);throw f?new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html"):new Error("Corrupted zip: can't find end of central directory")}this.reader.setIndex(h);var d=h;if(this.checkSignature(o.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===a.MAX_VALUE_16BITS||this.diskWithCentralDirStart===a.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===a.MAX_VALUE_16BITS||this.centralDirRecords===a.MAX_VALUE_16BITS||this.centralDirSize===a.MAX_VALUE_32BITS||this.centralDirOffset===a.MAX_VALUE_32BITS){if(this.zip64=!0,h=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),h<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(h),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,o.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(o.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var y=this.centralDirOffset+this.centralDirSize;this.zip64&&(y+=20,y+=12+this.zip64EndOfCentralSize);var b=d-y;if(b>0)this.isSignature(d,o.CENTRAL_FILE_HEADER)||(this.reader.zero=b);else if(b<0)throw new Error("Corrupted zip: missing "+Math.abs(b)+" bytes.")},prepareReader:function(h){this.reader=s(h)},load:function(h){this.prepareReader(h),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},n.exports=c},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(t,n,r){var s=t("./reader/readerFor"),a=t("./utils"),o=t("./compressedObject"),l=t("./crc32"),u=t("./utf8"),c=t("./compressions"),h=t("./support"),f=0,d=3,y=function(v){for(var g in c)if(Object.prototype.hasOwnProperty.call(c,g)&&c[g].magic===v)return c[g];return null};function b(v,g){this.options=v,this.loadOptions=g}b.prototype={isEncrypted:function(){return(this.bitFlag&1)===1},useUTF8:function(){return(this.bitFlag&2048)===2048},readLocalPart:function(v){var g,m;if(v.skip(22),this.fileNameLength=v.readInt(2),m=v.readInt(2),this.fileName=v.readData(this.fileNameLength),v.skip(m),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if(g=y(this.compressionMethod),g===null)throw new Error("Corrupted zip : compression "+a.pretty(this.compressionMethod)+" unknown (inner file : "+a.transformTo("string",this.fileName)+")");this.decompressed=new o(this.compressedSize,this.uncompressedSize,this.crc32,g,v.readData(this.compressedSize))},readCentralPart:function(v){this.versionMadeBy=v.readInt(2),v.skip(2),this.bitFlag=v.readInt(2),this.compressionMethod=v.readString(2),this.date=v.readDate(),this.crc32=v.readInt(4),this.compressedSize=v.readInt(4),this.uncompressedSize=v.readInt(4);var g=v.readInt(2);if(this.extraFieldsLength=v.readInt(2),this.fileCommentLength=v.readInt(2),this.diskNumberStart=v.readInt(2),this.internalFileAttributes=v.readInt(2),this.externalFileAttributes=v.readInt(4),this.localHeaderOffset=v.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");v.skip(g),this.readExtraFields(v),this.parseZIP64ExtraField(v),this.fileComment=v.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var v=this.versionMadeBy>>8;this.dir=!!(this.externalFileAttributes&16),v===f&&(this.dosPermissions=this.externalFileAttributes&63),v===d&&(this.unixPermissions=this.externalFileAttributes>>16&65535),!this.dir&&this.fileNameStr.slice(-1)==="/"&&(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var v=s(this.extraFields[1].value);this.uncompressedSize===a.MAX_VALUE_32BITS&&(this.uncompressedSize=v.readInt(8)),this.compressedSize===a.MAX_VALUE_32BITS&&(this.compressedSize=v.readInt(8)),this.localHeaderOffset===a.MAX_VALUE_32BITS&&(this.localHeaderOffset=v.readInt(8)),this.diskNumberStart===a.MAX_VALUE_32BITS&&(this.diskNumberStart=v.readInt(4))}},readExtraFields:function(v){var g=v.index+this.extraFieldsLength,m,w,_;for(this.extraFields||(this.extraFields={});v.index+4<g;)m=v.readInt(2),w=v.readInt(2),_=v.readData(w),this.extraFields[m]={id:m,length:w,value:_};v.setIndex(g)},handleUTF8:function(){var v=h.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=u.utf8decode(this.fileName),this.fileCommentStr=u.utf8decode(this.fileComment);else{var g=this.findExtraFieldUnicodePath();if(g!==null)this.fileNameStr=g;else{var m=a.transformTo(v,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(m)}var w=this.findExtraFieldUnicodeComment();if(w!==null)this.fileCommentStr=w;else{var _=a.transformTo(v,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(_)}}},findExtraFieldUnicodePath:function(){var v=this.extraFields[28789];if(v){var g=s(v.value);return g.readInt(1)!==1||l(this.fileName)!==g.readInt(4)?null:u.utf8decode(g.readData(v.length-5))}return null},findExtraFieldUnicodeComment:function(){var v=this.extraFields[25461];if(v){var g=s(v.value);return g.readInt(1)!==1||l(this.fileComment)!==g.readInt(4)?null:u.utf8decode(g.readData(v.length-5))}return null}},n.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(t,n,r){var s=t("./stream/StreamHelper"),a=t("./stream/DataWorker"),o=t("./utf8"),l=t("./compressedObject"),u=t("./stream/GenericWorker"),c=function(y,b,v){this.name=y,this.dir=v.dir,this.date=v.date,this.comment=v.comment,this.unixPermissions=v.unixPermissions,this.dosPermissions=v.dosPermissions,this._data=b,this._dataBinary=v.binary,this.options={compression:v.compression,compressionOptions:v.compressionOptions}};c.prototype={internalStream:function(y){var b=null,v="string";try{if(!y)throw new Error("No output type specified.");v=y.toLowerCase();var g=v==="string"||v==="text";(v==="binarystring"||v==="text")&&(v="string"),b=this._decompressWorker();var m=!this._dataBinary;m&&!g&&(b=b.pipe(new o.Utf8EncodeWorker)),!m&&g&&(b=b.pipe(new o.Utf8DecodeWorker))}catch(w){b=new u("error"),b.error(w)}return new s(b,v,"")},async:function(y,b){return this.internalStream(y).accumulate(b)},nodeStream:function(y,b){return this.internalStream(y||"nodebuffer").toNodejsStream(b)},_compressWorker:function(y,b){if(this._data instanceof l&&this._data.compression.magic===y.magic)return this._data.getCompressedWorker();var v=this._decompressWorker();return this._dataBinary||(v=v.pipe(new o.Utf8EncodeWorker)),l.createWorkerFrom(v,y,b)},_decompressWorker:function(){return this._data instanceof l?this._data.getContentWorker():this._data instanceof u?this._data:new a(this._data)}};for(var h=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],f=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},d=0;d<h.length;d++)c.prototype[h[d]]=f;n.exports=c},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(t,n,r){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,u=new a(y),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),o=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=y,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var v=s.document.createElement("script");v.onreadystatechange=function(){y(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:o=function(){setTimeout(y,0)};var f,d=[];function y(){f=!0;for(var v,g,m=d.length;m;){for(g=d,d=[],v=-1;++v<m;)g[v]();m=d.length}f=!1}n.exports=b;function b(v){d.push(v)===1&&!f&&o()}}).call(this,typeof ln<"u"?ln:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(t,n,r){var s=t("immediate");function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];n.exports=h;function h(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==a&&b(this,E)}h.prototype.finally=function(E){if(typeof E!="function")return this;var x=this.constructor;return this.then(A,S);function A(O){function C(){return O}return x.resolve(E()).then(C)}function S(O){function C(){throw O}return x.resolve(E()).then(C)}},h.prototype.catch=function(E){return this.then(null,E)},h.prototype.then=function(E,x){if(typeof E!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var A=new this.constructor(a);if(this.state!==c){var S=this.state===u?E:x;d(A,S,this.outcome)}else this.queue.push(new f(A,E,x));return A};function f(E,x,A){this.promise=E,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(E){o.resolve(this.promise,E)},f.prototype.otherCallFulfilled=function(E){d(this.promise,this.onFulfilled,E)},f.prototype.callRejected=function(E){o.reject(this.promise,E)},f.prototype.otherCallRejected=function(E){d(this.promise,this.onRejected,E)};function d(E,x,A){s(function(){var S;try{S=x(A)}catch(O){return o.reject(E,O)}S===E?o.reject(E,new TypeError("Cannot resolve promise with itself")):o.resolve(E,S)})}o.resolve=function(E,x){var A=v(y,x);if(A.status==="error")return o.reject(E,A.value);var S=A.value;if(S)b(E,S);else{E.state=u,E.outcome=x;for(var O=-1,C=E.queue.length;++O<C;)E.queue[O].callFulfilled(x)}return E},o.reject=function(E,x){E.state=l,E.outcome=x;for(var A=-1,S=E.queue.length;++A<S;)E.queue[A].callRejected(x);return E};function y(E){var x=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof x=="function")return function(){x.apply(E,arguments)}}function b(E,x){var A=!1;function S(D){A||(A=!0,o.reject(E,D))}function O(D){A||(A=!0,o.resolve(E,D))}function C(){x(O,S)}var k=v(C);k.status==="error"&&S(k.value)}function v(E,x){var A={};try{A.value=E(x),A.status="success"}catch(S){A.status="error",A.value=S}return A}h.resolve=g;function g(E){return E instanceof this?E:o.resolve(new this(a),E)}h.reject=m;function m(E){var x=new this(a);return o.reject(x,E)}h.all=w;function w(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=E.length,S=!1;if(!A)return this.resolve([]);for(var O=new Array(A),C=0,k=-1,D=new this(a);++k<A;)R(E[k],k);return D;function R(F,H){x.resolve(F).then($,function(G){S||(S=!0,o.reject(D,G))});function $(G){O[H]=G,++C===A&&!S&&(S=!0,o.resolve(D,O))}}}h.race=_;function _(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=E.length,S=!1;if(!A)return this.resolve([]);for(var O=-1,C=new this(a);++O<A;)k(E[O]);return C;function k(D){x.resolve(D).then(function(R){S||(S=!0,o.resolve(C,R))},function(R){S||(S=!0,o.reject(C,R))})}}},{immediate:36}],38:[function(t,n,r){var s=t("./lib/utils/common").assign,a=t("./lib/deflate"),o=t("./lib/inflate"),l=t("./lib/zlib/constants"),u={};s(u,a,o,l),n.exports=u},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(t,n,r){var s=t("./zlib/deflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/messages"),u=t("./zlib/zstream"),c=Object.prototype.toString,h=0,f=4,d=0,y=1,b=2,v=-1,g=0,m=8;function w(A){if(!(this instanceof w))return new w(A);this.options=a.assign({level:v,method:m,chunkSize:16384,windowBits:15,memLevel:8,strategy:g,to:""},A||{});var S=this.options;S.raw&&S.windowBits>0?S.windowBits=-S.windowBits:S.gzip&&S.windowBits>0&&S.windowBits<16&&(S.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new u,this.strm.avail_out=0;var O=s.deflateInit2(this.strm,S.level,S.method,S.windowBits,S.memLevel,S.strategy);if(O!==d)throw new Error(l[O]);if(S.header&&s.deflateSetHeader(this.strm,S.header),S.dictionary){var C;if(typeof S.dictionary=="string"?C=o.string2buf(S.dictionary):c.call(S.dictionary)==="[object ArrayBuffer]"?C=new Uint8Array(S.dictionary):C=S.dictionary,O=s.deflateSetDictionary(this.strm,C),O!==d)throw new Error(l[O]);this._dict_set=!0}}w.prototype.push=function(A,S){var O=this.strm,C=this.options.chunkSize,k,D;if(this.ended)return!1;D=S===~~S?S:S===!0?f:h,typeof A=="string"?O.input=o.string2buf(A):c.call(A)==="[object ArrayBuffer]"?O.input=new Uint8Array(A):O.input=A,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new a.Buf8(C),O.next_out=0,O.avail_out=C),k=s.deflate(O,D),k!==y&&k!==d)return this.onEnd(k),this.ended=!0,!1;(O.avail_out===0||O.avail_in===0&&(D===f||D===b))&&(this.options.to==="string"?this.onData(o.buf2binstring(a.shrinkBuf(O.output,O.next_out))):this.onData(a.shrinkBuf(O.output,O.next_out)))}while((O.avail_in>0||O.avail_out===0)&&k!==y);return D===f?(k=s.deflateEnd(this.strm),this.onEnd(k),this.ended=!0,k===d):(D===b&&(this.onEnd(d),O.avail_out=0),!0)},w.prototype.onData=function(A){this.chunks.push(A)},w.prototype.onEnd=function(A){A===d&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=A,this.msg=this.strm.msg};function _(A,S){var O=new w(S);if(O.push(A,!0),O.err)throw O.msg||l[O.err];return O.result}function E(A,S){return S=S||{},S.raw=!0,_(A,S)}function x(A,S){return S=S||{},S.gzip=!0,_(A,S)}r.Deflate=w,r.deflate=_,r.deflateRaw=E,r.gzip=x},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(t,n,r){var s=t("./zlib/inflate"),a=t("./utils/common"),o=t("./utils/strings"),l=t("./zlib/constants"),u=t("./zlib/messages"),c=t("./zlib/zstream"),h=t("./zlib/gzheader"),f=Object.prototype.toString;function d(v){if(!(this instanceof d))return new d(v);this.options=a.assign({chunkSize:16384,windowBits:0,to:""},v||{});var g=this.options;g.raw&&g.windowBits>=0&&g.windowBits<16&&(g.windowBits=-g.windowBits,g.windowBits===0&&(g.windowBits=-15)),g.windowBits>=0&&g.windowBits<16&&!(v&&v.windowBits)&&(g.windowBits+=32),g.windowBits>15&&g.windowBits<48&&(g.windowBits&15||(g.windowBits|=15)),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new c,this.strm.avail_out=0;var m=s.inflateInit2(this.strm,g.windowBits);if(m!==l.Z_OK)throw new Error(u[m]);this.header=new h,s.inflateGetHeader(this.strm,this.header)}d.prototype.push=function(v,g){var m=this.strm,w=this.options.chunkSize,_=this.options.dictionary,E,x,A,S,O,C,k=!1;if(this.ended)return!1;x=g===~~g?g:g===!0?l.Z_FINISH:l.Z_NO_FLUSH,typeof v=="string"?m.input=o.binstring2buf(v):f.call(v)==="[object ArrayBuffer]"?m.input=new Uint8Array(v):m.input=v,m.next_in=0,m.avail_in=m.input.length;do{if(m.avail_out===0&&(m.output=new a.Buf8(w),m.next_out=0,m.avail_out=w),E=s.inflate(m,l.Z_NO_FLUSH),E===l.Z_NEED_DICT&&_&&(typeof _=="string"?C=o.string2buf(_):f.call(_)==="[object ArrayBuffer]"?C=new Uint8Array(_):C=_,E=s.inflateSetDictionary(this.strm,C)),E===l.Z_BUF_ERROR&&k===!0&&(E=l.Z_OK,k=!1),E!==l.Z_STREAM_END&&E!==l.Z_OK)return this.onEnd(E),this.ended=!0,!1;m.next_out&&(m.avail_out===0||E===l.Z_STREAM_END||m.avail_in===0&&(x===l.Z_FINISH||x===l.Z_SYNC_FLUSH))&&(this.options.to==="string"?(A=o.utf8border(m.output,m.next_out),S=m.next_out-A,O=o.buf2string(m.output,A),m.next_out=S,m.avail_out=w-S,S&&a.arraySet(m.output,m.output,A,S,0),this.onData(O)):this.onData(a.shrinkBuf(m.output,m.next_out))),m.avail_in===0&&m.avail_out===0&&(k=!0)}while((m.avail_in>0||m.avail_out===0)&&E!==l.Z_STREAM_END);return E===l.Z_STREAM_END&&(x=l.Z_FINISH),x===l.Z_FINISH?(E=s.inflateEnd(this.strm),this.onEnd(E),this.ended=!0,E===l.Z_OK):(x===l.Z_SYNC_FLUSH&&(this.onEnd(l.Z_OK),m.avail_out=0),!0)},d.prototype.onData=function(v){this.chunks.push(v)},d.prototype.onEnd=function(v){v===l.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=v,this.msg=this.strm.msg};function y(v,g){var m=new d(g);if(m.push(v,!0),m.err)throw m.msg||u[m.err];return m.result}function b(v,g){return g=g||{},g.raw=!0,y(v,g)}r.Inflate=d,r.inflate=y,r.inflateRaw=b,r.ungzip=y},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(t,n,r){var s=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";r.assign=function(l){for(var u=Array.prototype.slice.call(arguments,1);u.length;){var c=u.shift();if(c){if(typeof c!="object")throw new TypeError(c+"must be non-object");for(var h in c)c.hasOwnProperty(h)&&(l[h]=c[h])}}return l},r.shrinkBuf=function(l,u){return l.length===u?l:l.subarray?l.subarray(0,u):(l.length=u,l)};var a={arraySet:function(l,u,c,h,f){if(u.subarray&&l.subarray){l.set(u.subarray(c,c+h),f);return}for(var d=0;d<h;d++)l[f+d]=u[c+d]},flattenChunks:function(l){var u,c,h,f,d,y;for(h=0,u=0,c=l.length;u<c;u++)h+=l[u].length;for(y=new Uint8Array(h),f=0,u=0,c=l.length;u<c;u++)d=l[u],y.set(d,f),f+=d.length;return y}},o={arraySet:function(l,u,c,h,f){for(var d=0;d<h;d++)l[f+d]=u[c+d]},flattenChunks:function(l){return[].concat.apply([],l)}};r.setTyped=function(l){l?(r.Buf8=Uint8Array,r.Buf16=Uint16Array,r.Buf32=Int32Array,r.assign(r,a)):(r.Buf8=Array,r.Buf16=Array,r.Buf32=Array,r.assign(r,o))},r.setTyped(s)},{}],42:[function(t,n,r){var s=t("./common"),a=!0,o=!0;try{String.fromCharCode.apply(null,[0])}catch{a=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{o=!1}for(var l=new s.Buf8(256),u=0;u<256;u++)l[u]=u>=252?6:u>=248?5:u>=240?4:u>=224?3:u>=192?2:1;l[254]=l[254]=1,r.string2buf=function(h){var f,d,y,b,v,g=h.length,m=0;for(b=0;b<g;b++)d=h.charCodeAt(b),(d&64512)===55296&&b+1<g&&(y=h.charCodeAt(b+1),(y&64512)===56320&&(d=65536+(d-55296<<10)+(y-56320),b++)),m+=d<128?1:d<2048?2:d<65536?3:4;for(f=new s.Buf8(m),v=0,b=0;v<m;b++)d=h.charCodeAt(b),(d&64512)===55296&&b+1<g&&(y=h.charCodeAt(b+1),(y&64512)===56320&&(d=65536+(d-55296<<10)+(y-56320),b++)),d<128?f[v++]=d:d<2048?(f[v++]=192|d>>>6,f[v++]=128|d&63):d<65536?(f[v++]=224|d>>>12,f[v++]=128|d>>>6&63,f[v++]=128|d&63):(f[v++]=240|d>>>18,f[v++]=128|d>>>12&63,f[v++]=128|d>>>6&63,f[v++]=128|d&63);return f};function c(h,f){if(f<65537&&(h.subarray&&o||!h.subarray&&a))return String.fromCharCode.apply(null,s.shrinkBuf(h,f));for(var d="",y=0;y<f;y++)d+=String.fromCharCode(h[y]);return d}r.buf2binstring=function(h){return c(h,h.length)},r.binstring2buf=function(h){for(var f=new s.Buf8(h.length),d=0,y=f.length;d<y;d++)f[d]=h.charCodeAt(d);return f},r.buf2string=function(h,f){var d,y,b,v,g=f||h.length,m=new Array(g*2);for(y=0,d=0;d<g;){if(b=h[d++],b<128){m[y++]=b;continue}if(v=l[b],v>4){m[y++]=65533,d+=v-1;continue}for(b&=v===2?31:v===3?15:7;v>1&&d<g;)b=b<<6|h[d++]&63,v--;if(v>1){m[y++]=65533;continue}b<65536?m[y++]=b:(b-=65536,m[y++]=55296|b>>10&1023,m[y++]=56320|b&1023)}return c(m,y)},r.utf8border=function(h,f){var d;for(f=f||h.length,f>h.length&&(f=h.length),d=f-1;d>=0&&(h[d]&192)===128;)d--;return d<0||d===0?f:d+l[h[d]]>f?d:f}},{"./common":41}],43:[function(t,n,r){function s(a,o,l,u){for(var c=a&65535|0,h=a>>>16&65535|0,f=0;l!==0;){f=l>2e3?2e3:l,l-=f;do c=c+o[u++]|0,h=h+c|0;while(--f);c%=65521,h%=65521}return c|h<<16|0}n.exports=s},{}],44:[function(t,n,r){n.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(t,n,r){function s(){for(var l,u=[],c=0;c<256;c++){l=c;for(var h=0;h<8;h++)l=l&1?3988292384^l>>>1:l>>>1;u[c]=l}return u}var a=s();function o(l,u,c,h){var f=a,d=h+c;l^=-1;for(var y=h;y<d;y++)l=l>>>8^f[(l^u[y])&255];return l^-1}n.exports=o},{}],46:[function(t,n,r){var s=t("../utils/common"),a=t("./trees"),o=t("./adler32"),l=t("./crc32"),u=t("./messages"),c=0,h=1,f=3,d=4,y=5,b=0,v=1,g=-2,m=-3,w=-5,_=-1,E=1,x=2,A=3,S=4,O=0,C=2,k=8,D=9,R=15,F=8,H=29,$=256,G=$+1+H,Z=30,K=19,q=2*G+1,P=15,B=3,V=258,J=V+B+1,te=32,U=42,Y=69,re=73,oe=91,de=103,_e=113,Le=666,Ne=1,Ve=2,Xe=3,Et=4,Ke=3;function he(T,ce){return T.msg=u[ce],ce}function pe(T){return(T<<1)-(T>4?9:0)}function xe(T){for(var ce=T.length;--ce>=0;)T[ce]=0}function Te(T){var ce=T.state,fe=ce.pending;fe>T.avail_out&&(fe=T.avail_out),fe!==0&&(s.arraySet(T.output,ce.pending_buf,ce.pending_out,fe,T.next_out),T.next_out+=fe,ce.pending_out+=fe,T.total_out+=fe,T.avail_out-=fe,ce.pending-=fe,ce.pending===0&&(ce.pending_out=0))}function me(T,ce){a._tr_flush_block(T,T.block_start>=0?T.block_start:-1,T.strstart-T.block_start,ce),T.block_start=T.strstart,Te(T.strm)}function De(T,ce){T.pending_buf[T.pending++]=ce}function Ge(T,ce){T.pending_buf[T.pending++]=ce>>>8&255,T.pending_buf[T.pending++]=ce&255}function Je(T,ce,fe,j){var ee=T.avail_in;return ee>j&&(ee=j),ee===0?0:(T.avail_in-=ee,s.arraySet(ce,T.input,T.next_in,ee,fe),T.state.wrap===1?T.adler=o(T.adler,ce,ee,fe):T.state.wrap===2&&(T.adler=l(T.adler,ce,ee,fe)),T.next_in+=ee,T.total_in+=ee,ee)}function jt(T,ce){var fe=T.max_chain_length,j=T.strstart,ee,le,qe=T.prev_length,Pe=T.nice_match,Ie=T.strstart>T.w_size-J?T.strstart-(T.w_size-J):0,lt=T.window,kr=T.w_mask,zt=T.prev,ht=T.strstart+V,tn=lt[j+qe-1],Cn=lt[j+qe];T.prev_length>=T.good_match&&(fe>>=2),Pe>T.lookahead&&(Pe=T.lookahead);do if(ee=ce,!(lt[ee+qe]!==Cn||lt[ee+qe-1]!==tn||lt[ee]!==lt[j]||lt[++ee]!==lt[j+1])){j+=2,ee++;do;while(lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&lt[++j]===lt[++ee]&&j<ht);if(le=V-(ht-j),j=ht-V,le>qe){if(T.match_start=ce,qe=le,le>=Pe)break;tn=lt[j+qe-1],Cn=lt[j+qe]}}while((ce=zt[ce&kr])>Ie&&--fe!==0);return qe<=T.lookahead?qe:T.lookahead}function Lt(T){var ce=T.w_size,fe,j,ee,le,qe;do{if(le=T.window_size-T.lookahead-T.strstart,T.strstart>=ce+(ce-J)){s.arraySet(T.window,T.window,ce,ce,0),T.match_start-=ce,T.strstart-=ce,T.block_start-=ce,j=T.hash_size,fe=j;do ee=T.head[--fe],T.head[fe]=ee>=ce?ee-ce:0;while(--j);j=ce,fe=j;do ee=T.prev[--fe],T.prev[fe]=ee>=ce?ee-ce:0;while(--j);le+=ce}if(T.strm.avail_in===0)break;if(j=Je(T.strm,T.window,T.strstart+T.lookahead,le),T.lookahead+=j,T.lookahead+T.insert>=B)for(qe=T.strstart-T.insert,T.ins_h=T.window[qe],T.ins_h=(T.ins_h<<T.hash_shift^T.window[qe+1])&T.hash_mask;T.insert&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[qe+B-1])&T.hash_mask,T.prev[qe&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=qe,qe++,T.insert--,!(T.lookahead+T.insert<B)););}while(T.lookahead<J&&T.strm.avail_in!==0)}function mt(T,ce){var fe=65535;for(fe>T.pending_buf_size-5&&(fe=T.pending_buf_size-5);;){if(T.lookahead<=1){if(Lt(T),T.lookahead===0&&ce===c)return Ne;if(T.lookahead===0)break}T.strstart+=T.lookahead,T.lookahead=0;var j=T.block_start+fe;if((T.strstart===0||T.strstart>=j)&&(T.lookahead=T.strstart-j,T.strstart=j,me(T,!1),T.strm.avail_out===0)||T.strstart-T.block_start>=T.w_size-J&&(me(T,!1),T.strm.avail_out===0))return Ne}return T.insert=0,ce===d?(me(T,!0),T.strm.avail_out===0?Xe:Et):(T.strstart>T.block_start&&(me(T,!1),T.strm.avail_out===0),Ne)}function Fi(T,ce){for(var fe,j;;){if(T.lookahead<J){if(Lt(T),T.lookahead<J&&ce===c)return Ne;if(T.lookahead===0)break}if(fe=0,T.lookahead>=B&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+B-1])&T.hash_mask,fe=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),fe!==0&&T.strstart-fe<=T.w_size-J&&(T.match_length=jt(T,fe)),T.match_length>=B)if(j=a._tr_tally(T,T.strstart-T.match_start,T.match_length-B),T.lookahead-=T.match_length,T.match_length<=T.max_lazy_match&&T.lookahead>=B){T.match_length--;do T.strstart++,T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+B-1])&T.hash_mask,fe=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart;while(--T.match_length!==0);T.strstart++}else T.strstart+=T.match_length,T.match_length=0,T.ins_h=T.window[T.strstart],T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+1])&T.hash_mask;else j=a._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++;if(j&&(me(T,!1),T.strm.avail_out===0))return Ne}return T.insert=T.strstart<B-1?T.strstart:B-1,ce===d?(me(T,!0),T.strm.avail_out===0?Xe:Et):T.last_lit&&(me(T,!1),T.strm.avail_out===0)?Ne:Ve}function ct(T,ce){for(var fe,j,ee;;){if(T.lookahead<J){if(Lt(T),T.lookahead<J&&ce===c)return Ne;if(T.lookahead===0)break}if(fe=0,T.lookahead>=B&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+B-1])&T.hash_mask,fe=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart),T.prev_length=T.match_length,T.prev_match=T.match_start,T.match_length=B-1,fe!==0&&T.prev_length<T.max_lazy_match&&T.strstart-fe<=T.w_size-J&&(T.match_length=jt(T,fe),T.match_length<=5&&(T.strategy===E||T.match_length===B&&T.strstart-T.match_start>4096)&&(T.match_length=B-1)),T.prev_length>=B&&T.match_length<=T.prev_length){ee=T.strstart+T.lookahead-B,j=a._tr_tally(T,T.strstart-1-T.prev_match,T.prev_length-B),T.lookahead-=T.prev_length-1,T.prev_length-=2;do++T.strstart<=ee&&(T.ins_h=(T.ins_h<<T.hash_shift^T.window[T.strstart+B-1])&T.hash_mask,fe=T.prev[T.strstart&T.w_mask]=T.head[T.ins_h],T.head[T.ins_h]=T.strstart);while(--T.prev_length!==0);if(T.match_available=0,T.match_length=B-1,T.strstart++,j&&(me(T,!1),T.strm.avail_out===0))return Ne}else if(T.match_available){if(j=a._tr_tally(T,0,T.window[T.strstart-1]),j&&me(T,!1),T.strstart++,T.lookahead--,T.strm.avail_out===0)return Ne}else T.match_available=1,T.strstart++,T.lookahead--}return T.match_available&&(j=a._tr_tally(T,0,T.window[T.strstart-1]),T.match_available=0),T.insert=T.strstart<B-1?T.strstart:B-1,ce===d?(me(T,!0),T.strm.avail_out===0?Xe:Et):T.last_lit&&(me(T,!1),T.strm.avail_out===0)?Ne:Ve}function Sn(T,ce){for(var fe,j,ee,le,qe=T.window;;){if(T.lookahead<=V){if(Lt(T),T.lookahead<=V&&ce===c)return Ne;if(T.lookahead===0)break}if(T.match_length=0,T.lookahead>=B&&T.strstart>0&&(ee=T.strstart-1,j=qe[ee],j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee])){le=T.strstart+V;do;while(j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee]&&j===qe[++ee]&&ee<le);T.match_length=V-(le-ee),T.match_length>T.lookahead&&(T.match_length=T.lookahead)}if(T.match_length>=B?(fe=a._tr_tally(T,1,T.match_length-B),T.lookahead-=T.match_length,T.strstart+=T.match_length,T.match_length=0):(fe=a._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++),fe&&(me(T,!1),T.strm.avail_out===0))return Ne}return T.insert=0,ce===d?(me(T,!0),T.strm.avail_out===0?Xe:Et):T.last_lit&&(me(T,!1),T.strm.avail_out===0)?Ne:Ve}function Tr(T,ce){for(var fe;;){if(T.lookahead===0&&(Lt(T),T.lookahead===0)){if(ce===c)return Ne;break}if(T.match_length=0,fe=a._tr_tally(T,0,T.window[T.strstart]),T.lookahead--,T.strstart++,fe&&(me(T,!1),T.strm.avail_out===0))return Ne}return T.insert=0,ce===d?(me(T,!0),T.strm.avail_out===0?Xe:Et):T.last_lit&&(me(T,!1),T.strm.avail_out===0)?Ne:Ve}function mn(T,ce,fe,j,ee){this.good_length=T,this.max_lazy=ce,this.nice_length=fe,this.max_chain=j,this.func=ee}var wi;wi=[new mn(0,0,0,0,mt),new mn(4,4,8,4,Fi),new mn(4,5,16,8,Fi),new mn(4,6,32,32,Fi),new mn(4,4,16,16,ct),new mn(8,16,32,32,ct),new mn(8,16,128,128,ct),new mn(8,32,128,256,ct),new mn(32,128,258,1024,ct),new mn(32,258,258,4096,ct)];function La(T){T.window_size=2*T.w_size,xe(T.head),T.max_lazy_match=wi[T.level].max_lazy,T.good_match=wi[T.level].good_length,T.nice_match=wi[T.level].nice_length,T.max_chain_length=wi[T.level].max_chain,T.strstart=0,T.block_start=0,T.lookahead=0,T.insert=0,T.match_length=T.prev_length=B-1,T.match_available=0,T.ins_h=0}function W(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=k,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new s.Buf16(q*2),this.dyn_dtree=new s.Buf16((2*Z+1)*2),this.bl_tree=new s.Buf16((2*K+1)*2),xe(this.dyn_ltree),xe(this.dyn_dtree),xe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new s.Buf16(P+1),this.heap=new s.Buf16(2*G+1),xe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new s.Buf16(2*G+1),xe(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function ye(T){var ce;return!T||!T.state?he(T,g):(T.total_in=T.total_out=0,T.data_type=C,ce=T.state,ce.pending=0,ce.pending_out=0,ce.wrap<0&&(ce.wrap=-ce.wrap),ce.status=ce.wrap?U:_e,T.adler=ce.wrap===2?0:1,ce.last_flush=c,a._tr_init(ce),b)}function Ee(T){var ce=ye(T);return ce===b&&La(T.state),ce}function Me(T,ce){return!T||!T.state||T.state.wrap!==2?g:(T.state.gzhead=ce,b)}function ne(T,ce,fe,j,ee,le){if(!T)return g;var qe=1;if(ce===_&&(ce=6),j<0?(qe=0,j=-j):j>15&&(qe=2,j-=16),ee<1||ee>D||fe!==k||j<8||j>15||ce<0||ce>9||le<0||le>S)return he(T,g);j===8&&(j=9);var Pe=new W;return T.state=Pe,Pe.strm=T,Pe.wrap=qe,Pe.gzhead=null,Pe.w_bits=j,Pe.w_size=1<<Pe.w_bits,Pe.w_mask=Pe.w_size-1,Pe.hash_bits=ee+7,Pe.hash_size=1<<Pe.hash_bits,Pe.hash_mask=Pe.hash_size-1,Pe.hash_shift=~~((Pe.hash_bits+B-1)/B),Pe.window=new s.Buf8(Pe.w_size*2),Pe.head=new s.Buf16(Pe.hash_size),Pe.prev=new s.Buf16(Pe.w_size),Pe.lit_bufsize=1<<ee+6,Pe.pending_buf_size=Pe.lit_bufsize*4,Pe.pending_buf=new s.Buf8(Pe.pending_buf_size),Pe.d_buf=1*Pe.lit_bufsize,Pe.l_buf=3*Pe.lit_bufsize,Pe.level=ce,Pe.strategy=le,Pe.method=fe,Ee(T)}function ge(T,ce){return ne(T,ce,k,R,F,O)}function I(T,ce){var fe,j,ee,le;if(!T||!T.state||ce>y||ce<0)return T?he(T,g):g;if(j=T.state,!T.output||!T.input&&T.avail_in!==0||j.status===Le&&ce!==d)return he(T,T.avail_out===0?w:g);if(j.strm=T,fe=j.last_flush,j.last_flush=ce,j.status===U)if(j.wrap===2)T.adler=0,De(j,31),De(j,139),De(j,8),j.gzhead?(De(j,(j.gzhead.text?1:0)+(j.gzhead.hcrc?2:0)+(j.gzhead.extra?4:0)+(j.gzhead.name?8:0)+(j.gzhead.comment?16:0)),De(j,j.gzhead.time&255),De(j,j.gzhead.time>>8&255),De(j,j.gzhead.time>>16&255),De(j,j.gzhead.time>>24&255),De(j,j.level===9?2:j.strategy>=x||j.level<2?4:0),De(j,j.gzhead.os&255),j.gzhead.extra&&j.gzhead.extra.length&&(De(j,j.gzhead.extra.length&255),De(j,j.gzhead.extra.length>>8&255)),j.gzhead.hcrc&&(T.adler=l(T.adler,j.pending_buf,j.pending,0)),j.gzindex=0,j.status=Y):(De(j,0),De(j,0),De(j,0),De(j,0),De(j,0),De(j,j.level===9?2:j.strategy>=x||j.level<2?4:0),De(j,Ke),j.status=_e);else{var qe=k+(j.w_bits-8<<4)<<8,Pe=-1;j.strategy>=x||j.level<2?Pe=0:j.level<6?Pe=1:j.level===6?Pe=2:Pe=3,qe|=Pe<<6,j.strstart!==0&&(qe|=te),qe+=31-qe%31,j.status=_e,Ge(j,qe),j.strstart!==0&&(Ge(j,T.adler>>>16),Ge(j,T.adler&65535)),T.adler=1}if(j.status===Y)if(j.gzhead.extra){for(ee=j.pending;j.gzindex<(j.gzhead.extra.length&65535)&&!(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>ee&&(T.adler=l(T.adler,j.pending_buf,j.pending-ee,ee)),Te(T),ee=j.pending,j.pending===j.pending_buf_size));)De(j,j.gzhead.extra[j.gzindex]&255),j.gzindex++;j.gzhead.hcrc&&j.pending>ee&&(T.adler=l(T.adler,j.pending_buf,j.pending-ee,ee)),j.gzindex===j.gzhead.extra.length&&(j.gzindex=0,j.status=re)}else j.status=re;if(j.status===re)if(j.gzhead.name){ee=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>ee&&(T.adler=l(T.adler,j.pending_buf,j.pending-ee,ee)),Te(T),ee=j.pending,j.pending===j.pending_buf_size)){le=1;break}j.gzindex<j.gzhead.name.length?le=j.gzhead.name.charCodeAt(j.gzindex++)&255:le=0,De(j,le)}while(le!==0);j.gzhead.hcrc&&j.pending>ee&&(T.adler=l(T.adler,j.pending_buf,j.pending-ee,ee)),le===0&&(j.gzindex=0,j.status=oe)}else j.status=oe;if(j.status===oe)if(j.gzhead.comment){ee=j.pending;do{if(j.pending===j.pending_buf_size&&(j.gzhead.hcrc&&j.pending>ee&&(T.adler=l(T.adler,j.pending_buf,j.pending-ee,ee)),Te(T),ee=j.pending,j.pending===j.pending_buf_size)){le=1;break}j.gzindex<j.gzhead.comment.length?le=j.gzhead.comment.charCodeAt(j.gzindex++)&255:le=0,De(j,le)}while(le!==0);j.gzhead.hcrc&&j.pending>ee&&(T.adler=l(T.adler,j.pending_buf,j.pending-ee,ee)),le===0&&(j.status=de)}else j.status=de;if(j.status===de&&(j.gzhead.hcrc?(j.pending+2>j.pending_buf_size&&Te(T),j.pending+2<=j.pending_buf_size&&(De(j,T.adler&255),De(j,T.adler>>8&255),T.adler=0,j.status=_e)):j.status=_e),j.pending!==0){if(Te(T),T.avail_out===0)return j.last_flush=-1,b}else if(T.avail_in===0&&pe(ce)<=pe(fe)&&ce!==d)return he(T,w);if(j.status===Le&&T.avail_in!==0)return he(T,w);if(T.avail_in!==0||j.lookahead!==0||ce!==c&&j.status!==Le){var Ie=j.strategy===x?Tr(j,ce):j.strategy===A?Sn(j,ce):wi[j.level].func(j,ce);if((Ie===Xe||Ie===Et)&&(j.status=Le),Ie===Ne||Ie===Xe)return T.avail_out===0&&(j.last_flush=-1),b;if(Ie===Ve&&(ce===h?a._tr_align(j):ce!==y&&(a._tr_stored_block(j,0,0,!1),ce===f&&(xe(j.head),j.lookahead===0&&(j.strstart=0,j.block_start=0,j.insert=0))),Te(T),T.avail_out===0))return j.last_flush=-1,b}return ce!==d?b:j.wrap<=0?v:(j.wrap===2?(De(j,T.adler&255),De(j,T.adler>>8&255),De(j,T.adler>>16&255),De(j,T.adler>>24&255),De(j,T.total_in&255),De(j,T.total_in>>8&255),De(j,T.total_in>>16&255),De(j,T.total_in>>24&255)):(Ge(j,T.adler>>>16),Ge(j,T.adler&65535)),Te(T),j.wrap>0&&(j.wrap=-j.wrap),j.pending!==0?b:v)}function be(T){var ce;return!T||!T.state?g:(ce=T.state.status,ce!==U&&ce!==Y&&ce!==re&&ce!==oe&&ce!==de&&ce!==_e&&ce!==Le?he(T,g):(T.state=null,ce===_e?he(T,m):b))}function Ye(T,ce){var fe=ce.length,j,ee,le,qe,Pe,Ie,lt,kr;if(!T||!T.state||(j=T.state,qe=j.wrap,qe===2||qe===1&&j.status!==U||j.lookahead))return g;for(qe===1&&(T.adler=o(T.adler,ce,fe,0)),j.wrap=0,fe>=j.w_size&&(qe===0&&(xe(j.head),j.strstart=0,j.block_start=0,j.insert=0),kr=new s.Buf8(j.w_size),s.arraySet(kr,ce,fe-j.w_size,j.w_size,0),ce=kr,fe=j.w_size),Pe=T.avail_in,Ie=T.next_in,lt=T.input,T.avail_in=fe,T.next_in=0,T.input=ce,Lt(j);j.lookahead>=B;){ee=j.strstart,le=j.lookahead-(B-1);do j.ins_h=(j.ins_h<<j.hash_shift^j.window[ee+B-1])&j.hash_mask,j.prev[ee&j.w_mask]=j.head[j.ins_h],j.head[j.ins_h]=ee,ee++;while(--le);j.strstart=ee,j.lookahead=B-1,Lt(j)}return j.strstart+=j.lookahead,j.block_start=j.strstart,j.insert=j.lookahead,j.lookahead=0,j.match_length=j.prev_length=B-1,j.match_available=0,T.next_in=Ie,T.input=lt,T.avail_in=Pe,j.wrap=qe,b}r.deflateInit=ge,r.deflateInit2=ne,r.deflateReset=Ee,r.deflateResetKeep=ye,r.deflateSetHeader=Me,r.deflate=I,r.deflateEnd=be,r.deflateSetDictionary=Ye,r.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(t,n,r){function s(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}n.exports=s},{}],48:[function(t,n,r){var s=30,a=12;n.exports=function(l,u){var c,h,f,d,y,b,v,g,m,w,_,E,x,A,S,O,C,k,D,R,F,H,$,G,Z;c=l.state,h=l.next_in,G=l.input,f=h+(l.avail_in-5),d=l.next_out,Z=l.output,y=d-(u-l.avail_out),b=d+(l.avail_out-257),v=c.dmax,g=c.wsize,m=c.whave,w=c.wnext,_=c.window,E=c.hold,x=c.bits,A=c.lencode,S=c.distcode,O=(1<<c.lenbits)-1,C=(1<<c.distbits)-1;e:do{x<15&&(E+=G[h++]<<x,x+=8,E+=G[h++]<<x,x+=8),k=A[E&O];t:for(;;){if(D=k>>>24,E>>>=D,x-=D,D=k>>>16&255,D===0)Z[d++]=k&65535;else if(D&16){R=k&65535,D&=15,D&&(x<D&&(E+=G[h++]<<x,x+=8),R+=E&(1<<D)-1,E>>>=D,x-=D),x<15&&(E+=G[h++]<<x,x+=8,E+=G[h++]<<x,x+=8),k=S[E&C];n:for(;;){if(D=k>>>24,E>>>=D,x-=D,D=k>>>16&255,D&16){if(F=k&65535,D&=15,x<D&&(E+=G[h++]<<x,x+=8,x<D&&(E+=G[h++]<<x,x+=8)),F+=E&(1<<D)-1,F>v){l.msg="invalid distance too far back",c.mode=s;break e}if(E>>>=D,x-=D,D=d-y,F>D){if(D=F-D,D>m&&c.sane){l.msg="invalid distance too far back",c.mode=s;break e}if(H=0,$=_,w===0){if(H+=g-D,D<R){R-=D;do Z[d++]=_[H++];while(--D);H=d-F,$=Z}}else if(w<D){if(H+=g+w-D,D-=w,D<R){R-=D;do Z[d++]=_[H++];while(--D);if(H=0,w<R){D=w,R-=D;do Z[d++]=_[H++];while(--D);H=d-F,$=Z}}}else if(H+=w-D,D<R){R-=D;do Z[d++]=_[H++];while(--D);H=d-F,$=Z}for(;R>2;)Z[d++]=$[H++],Z[d++]=$[H++],Z[d++]=$[H++],R-=3;R&&(Z[d++]=$[H++],R>1&&(Z[d++]=$[H++]))}else{H=d-F;do Z[d++]=Z[H++],Z[d++]=Z[H++],Z[d++]=Z[H++],R-=3;while(R>2);R&&(Z[d++]=Z[H++],R>1&&(Z[d++]=Z[H++]))}}else if(D&64){l.msg="invalid distance code",c.mode=s;break e}else{k=S[(k&65535)+(E&(1<<D)-1)];continue n}break}}else if(D&64)if(D&32){c.mode=a;break e}else{l.msg="invalid literal/length code",c.mode=s;break e}else{k=A[(k&65535)+(E&(1<<D)-1)];continue t}break}}while(h<f&&d<b);R=x>>3,h-=R,x-=R<<3,E&=(1<<x)-1,l.next_in=h,l.next_out=d,l.avail_in=h<f?5+(f-h):5-(h-f),l.avail_out=d<b?257+(b-d):257-(d-b),c.hold=E,c.bits=x}},{}],49:[function(t,n,r){var s=t("../utils/common"),a=t("./adler32"),o=t("./crc32"),l=t("./inffast"),u=t("./inftrees"),c=0,h=1,f=2,d=4,y=5,b=6,v=0,g=1,m=2,w=-2,_=-3,E=-4,x=-5,A=8,S=1,O=2,C=3,k=4,D=5,R=6,F=7,H=8,$=9,G=10,Z=11,K=12,q=13,P=14,B=15,V=16,J=17,te=18,U=19,Y=20,re=21,oe=22,de=23,_e=24,Le=25,Ne=26,Ve=27,Xe=28,Et=29,Ke=30,he=31,pe=32,xe=852,Te=592,me=15,De=me;function Ge(ne){return(ne>>>24&255)+(ne>>>8&65280)+((ne&65280)<<8)+((ne&255)<<24)}function Je(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new s.Buf16(320),this.work=new s.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function jt(ne){var ge;return!ne||!ne.state?w:(ge=ne.state,ne.total_in=ne.total_out=ge.total=0,ne.msg="",ge.wrap&&(ne.adler=ge.wrap&1),ge.mode=S,ge.last=0,ge.havedict=0,ge.dmax=32768,ge.head=null,ge.hold=0,ge.bits=0,ge.lencode=ge.lendyn=new s.Buf32(xe),ge.distcode=ge.distdyn=new s.Buf32(Te),ge.sane=1,ge.back=-1,v)}function Lt(ne){var ge;return!ne||!ne.state?w:(ge=ne.state,ge.wsize=0,ge.whave=0,ge.wnext=0,jt(ne))}function mt(ne,ge){var I,be;return!ne||!ne.state||(be=ne.state,ge<0?(I=0,ge=-ge):(I=(ge>>4)+1,ge<48&&(ge&=15)),ge&&(ge<8||ge>15))?w:(be.window!==null&&be.wbits!==ge&&(be.window=null),be.wrap=I,be.wbits=ge,Lt(ne))}function Fi(ne,ge){var I,be;return ne?(be=new Je,ne.state=be,be.window=null,I=mt(ne,ge),I!==v&&(ne.state=null),I):w}function ct(ne){return Fi(ne,De)}var Sn=!0,Tr,mn;function wi(ne){if(Sn){var ge;for(Tr=new s.Buf32(512),mn=new s.Buf32(32),ge=0;ge<144;)ne.lens[ge++]=8;for(;ge<256;)ne.lens[ge++]=9;for(;ge<280;)ne.lens[ge++]=7;for(;ge<288;)ne.lens[ge++]=8;for(u(h,ne.lens,0,288,Tr,0,ne.work,{bits:9}),ge=0;ge<32;)ne.lens[ge++]=5;u(f,ne.lens,0,32,mn,0,ne.work,{bits:5}),Sn=!1}ne.lencode=Tr,ne.lenbits=9,ne.distcode=mn,ne.distbits=5}function La(ne,ge,I,be){var Ye,T=ne.state;return T.window===null&&(T.wsize=1<<T.wbits,T.wnext=0,T.whave=0,T.window=new s.Buf8(T.wsize)),be>=T.wsize?(s.arraySet(T.window,ge,I-T.wsize,T.wsize,0),T.wnext=0,T.whave=T.wsize):(Ye=T.wsize-T.wnext,Ye>be&&(Ye=be),s.arraySet(T.window,ge,I-be,Ye,T.wnext),be-=Ye,be?(s.arraySet(T.window,ge,I-be,be,0),T.wnext=be,T.whave=T.wsize):(T.wnext+=Ye,T.wnext===T.wsize&&(T.wnext=0),T.whave<T.wsize&&(T.whave+=Ye))),0}function W(ne,ge){var I,be,Ye,T,ce,fe,j,ee,le,qe,Pe,Ie,lt,kr,zt=0,ht,tn,Cn,Vn,ku,Du,Zt,_i,vn=new s.Buf8(4),Dr,ar,ag=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!ne||!ne.state||!ne.output||!ne.input&&ne.avail_in!==0)return w;I=ne.state,I.mode===K&&(I.mode=q),ce=ne.next_out,Ye=ne.output,j=ne.avail_out,T=ne.next_in,be=ne.input,fe=ne.avail_in,ee=I.hold,le=I.bits,qe=fe,Pe=j,_i=v;e:for(;;)switch(I.mode){case S:if(I.wrap===0){I.mode=q;break}for(;le<16;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(I.wrap&2&&ee===35615){I.check=0,vn[0]=ee&255,vn[1]=ee>>>8&255,I.check=o(I.check,vn,2,0),ee=0,le=0,I.mode=O;break}if(I.flags=0,I.head&&(I.head.done=!1),!(I.wrap&1)||(((ee&255)<<8)+(ee>>8))%31){ne.msg="incorrect header check",I.mode=Ke;break}if((ee&15)!==A){ne.msg="unknown compression method",I.mode=Ke;break}if(ee>>>=4,le-=4,Zt=(ee&15)+8,I.wbits===0)I.wbits=Zt;else if(Zt>I.wbits){ne.msg="invalid window size",I.mode=Ke;break}I.dmax=1<<Zt,ne.adler=I.check=1,I.mode=ee&512?G:K,ee=0,le=0;break;case O:for(;le<16;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(I.flags=ee,(I.flags&255)!==A){ne.msg="unknown compression method",I.mode=Ke;break}if(I.flags&57344){ne.msg="unknown header flags set",I.mode=Ke;break}I.head&&(I.head.text=ee>>8&1),I.flags&512&&(vn[0]=ee&255,vn[1]=ee>>>8&255,I.check=o(I.check,vn,2,0)),ee=0,le=0,I.mode=C;case C:for(;le<32;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}I.head&&(I.head.time=ee),I.flags&512&&(vn[0]=ee&255,vn[1]=ee>>>8&255,vn[2]=ee>>>16&255,vn[3]=ee>>>24&255,I.check=o(I.check,vn,4,0)),ee=0,le=0,I.mode=k;case k:for(;le<16;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}I.head&&(I.head.xflags=ee&255,I.head.os=ee>>8),I.flags&512&&(vn[0]=ee&255,vn[1]=ee>>>8&255,I.check=o(I.check,vn,2,0)),ee=0,le=0,I.mode=D;case D:if(I.flags&1024){for(;le<16;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}I.length=ee,I.head&&(I.head.extra_len=ee),I.flags&512&&(vn[0]=ee&255,vn[1]=ee>>>8&255,I.check=o(I.check,vn,2,0)),ee=0,le=0}else I.head&&(I.head.extra=null);I.mode=R;case R:if(I.flags&1024&&(Ie=I.length,Ie>fe&&(Ie=fe),Ie&&(I.head&&(Zt=I.head.extra_len-I.length,I.head.extra||(I.head.extra=new Array(I.head.extra_len)),s.arraySet(I.head.extra,be,T,Ie,Zt)),I.flags&512&&(I.check=o(I.check,be,Ie,T)),fe-=Ie,T+=Ie,I.length-=Ie),I.length))break e;I.length=0,I.mode=F;case F:if(I.flags&2048){if(fe===0)break e;Ie=0;do Zt=be[T+Ie++],I.head&&Zt&&I.length<65536&&(I.head.name+=String.fromCharCode(Zt));while(Zt&&Ie<fe);if(I.flags&512&&(I.check=o(I.check,be,Ie,T)),fe-=Ie,T+=Ie,Zt)break e}else I.head&&(I.head.name=null);I.length=0,I.mode=H;case H:if(I.flags&4096){if(fe===0)break e;Ie=0;do Zt=be[T+Ie++],I.head&&Zt&&I.length<65536&&(I.head.comment+=String.fromCharCode(Zt));while(Zt&&Ie<fe);if(I.flags&512&&(I.check=o(I.check,be,Ie,T)),fe-=Ie,T+=Ie,Zt)break e}else I.head&&(I.head.comment=null);I.mode=$;case $:if(I.flags&512){for(;le<16;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(ee!==(I.check&65535)){ne.msg="header crc mismatch",I.mode=Ke;break}ee=0,le=0}I.head&&(I.head.hcrc=I.flags>>9&1,I.head.done=!0),ne.adler=I.check=0,I.mode=K;break;case G:for(;le<32;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}ne.adler=I.check=Ge(ee),ee=0,le=0,I.mode=Z;case Z:if(I.havedict===0)return ne.next_out=ce,ne.avail_out=j,ne.next_in=T,ne.avail_in=fe,I.hold=ee,I.bits=le,m;ne.adler=I.check=1,I.mode=K;case K:if(ge===y||ge===b)break e;case q:if(I.last){ee>>>=le&7,le-=le&7,I.mode=Ve;break}for(;le<3;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}switch(I.last=ee&1,ee>>>=1,le-=1,ee&3){case 0:I.mode=P;break;case 1:if(wi(I),I.mode=Y,ge===b){ee>>>=2,le-=2;break e}break;case 2:I.mode=J;break;case 3:ne.msg="invalid block type",I.mode=Ke}ee>>>=2,le-=2;break;case P:for(ee>>>=le&7,le-=le&7;le<32;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if((ee&65535)!==(ee>>>16^65535)){ne.msg="invalid stored block lengths",I.mode=Ke;break}if(I.length=ee&65535,ee=0,le=0,I.mode=B,ge===b)break e;case B:I.mode=V;case V:if(Ie=I.length,Ie){if(Ie>fe&&(Ie=fe),Ie>j&&(Ie=j),Ie===0)break e;s.arraySet(Ye,be,T,Ie,ce),fe-=Ie,T+=Ie,j-=Ie,ce+=Ie,I.length-=Ie;break}I.mode=K;break;case J:for(;le<14;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(I.nlen=(ee&31)+257,ee>>>=5,le-=5,I.ndist=(ee&31)+1,ee>>>=5,le-=5,I.ncode=(ee&15)+4,ee>>>=4,le-=4,I.nlen>286||I.ndist>30){ne.msg="too many length or distance symbols",I.mode=Ke;break}I.have=0,I.mode=te;case te:for(;I.have<I.ncode;){for(;le<3;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}I.lens[ag[I.have++]]=ee&7,ee>>>=3,le-=3}for(;I.have<19;)I.lens[ag[I.have++]]=0;if(I.lencode=I.lendyn,I.lenbits=7,Dr={bits:I.lenbits},_i=u(c,I.lens,0,19,I.lencode,0,I.work,Dr),I.lenbits=Dr.bits,_i){ne.msg="invalid code lengths set",I.mode=Ke;break}I.have=0,I.mode=U;case U:for(;I.have<I.nlen+I.ndist;){for(;zt=I.lencode[ee&(1<<I.lenbits)-1],ht=zt>>>24,tn=zt>>>16&255,Cn=zt&65535,!(ht<=le);){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(Cn<16)ee>>>=ht,le-=ht,I.lens[I.have++]=Cn;else{if(Cn===16){for(ar=ht+2;le<ar;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(ee>>>=ht,le-=ht,I.have===0){ne.msg="invalid bit length repeat",I.mode=Ke;break}Zt=I.lens[I.have-1],Ie=3+(ee&3),ee>>>=2,le-=2}else if(Cn===17){for(ar=ht+3;le<ar;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}ee>>>=ht,le-=ht,Zt=0,Ie=3+(ee&7),ee>>>=3,le-=3}else{for(ar=ht+7;le<ar;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}ee>>>=ht,le-=ht,Zt=0,Ie=11+(ee&127),ee>>>=7,le-=7}if(I.have+Ie>I.nlen+I.ndist){ne.msg="invalid bit length repeat",I.mode=Ke;break}for(;Ie--;)I.lens[I.have++]=Zt}}if(I.mode===Ke)break;if(I.lens[256]===0){ne.msg="invalid code -- missing end-of-block",I.mode=Ke;break}if(I.lenbits=9,Dr={bits:I.lenbits},_i=u(h,I.lens,0,I.nlen,I.lencode,0,I.work,Dr),I.lenbits=Dr.bits,_i){ne.msg="invalid literal/lengths set",I.mode=Ke;break}if(I.distbits=6,I.distcode=I.distdyn,Dr={bits:I.distbits},_i=u(f,I.lens,I.nlen,I.ndist,I.distcode,0,I.work,Dr),I.distbits=Dr.bits,_i){ne.msg="invalid distances set",I.mode=Ke;break}if(I.mode=Y,ge===b)break e;case Y:I.mode=re;case re:if(fe>=6&&j>=258){ne.next_out=ce,ne.avail_out=j,ne.next_in=T,ne.avail_in=fe,I.hold=ee,I.bits=le,l(ne,Pe),ce=ne.next_out,Ye=ne.output,j=ne.avail_out,T=ne.next_in,be=ne.input,fe=ne.avail_in,ee=I.hold,le=I.bits,I.mode===K&&(I.back=-1);break}for(I.back=0;zt=I.lencode[ee&(1<<I.lenbits)-1],ht=zt>>>24,tn=zt>>>16&255,Cn=zt&65535,!(ht<=le);){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(tn&&!(tn&240)){for(Vn=ht,ku=tn,Du=Cn;zt=I.lencode[Du+((ee&(1<<Vn+ku)-1)>>Vn)],ht=zt>>>24,tn=zt>>>16&255,Cn=zt&65535,!(Vn+ht<=le);){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}ee>>>=Vn,le-=Vn,I.back+=Vn}if(ee>>>=ht,le-=ht,I.back+=ht,I.length=Cn,tn===0){I.mode=Ne;break}if(tn&32){I.back=-1,I.mode=K;break}if(tn&64){ne.msg="invalid literal/length code",I.mode=Ke;break}I.extra=tn&15,I.mode=oe;case oe:if(I.extra){for(ar=I.extra;le<ar;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}I.length+=ee&(1<<I.extra)-1,ee>>>=I.extra,le-=I.extra,I.back+=I.extra}I.was=I.length,I.mode=de;case de:for(;zt=I.distcode[ee&(1<<I.distbits)-1],ht=zt>>>24,tn=zt>>>16&255,Cn=zt&65535,!(ht<=le);){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(!(tn&240)){for(Vn=ht,ku=tn,Du=Cn;zt=I.distcode[Du+((ee&(1<<Vn+ku)-1)>>Vn)],ht=zt>>>24,tn=zt>>>16&255,Cn=zt&65535,!(Vn+ht<=le);){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}ee>>>=Vn,le-=Vn,I.back+=Vn}if(ee>>>=ht,le-=ht,I.back+=ht,tn&64){ne.msg="invalid distance code",I.mode=Ke;break}I.offset=Cn,I.extra=tn&15,I.mode=_e;case _e:if(I.extra){for(ar=I.extra;le<ar;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}I.offset+=ee&(1<<I.extra)-1,ee>>>=I.extra,le-=I.extra,I.back+=I.extra}if(I.offset>I.dmax){ne.msg="invalid distance too far back",I.mode=Ke;break}I.mode=Le;case Le:if(j===0)break e;if(Ie=Pe-j,I.offset>Ie){if(Ie=I.offset-Ie,Ie>I.whave&&I.sane){ne.msg="invalid distance too far back",I.mode=Ke;break}Ie>I.wnext?(Ie-=I.wnext,lt=I.wsize-Ie):lt=I.wnext-Ie,Ie>I.length&&(Ie=I.length),kr=I.window}else kr=Ye,lt=ce-I.offset,Ie=I.length;Ie>j&&(Ie=j),j-=Ie,I.length-=Ie;do Ye[ce++]=kr[lt++];while(--Ie);I.length===0&&(I.mode=re);break;case Ne:if(j===0)break e;Ye[ce++]=I.length,j--,I.mode=re;break;case Ve:if(I.wrap){for(;le<32;){if(fe===0)break e;fe--,ee|=be[T++]<<le,le+=8}if(Pe-=j,ne.total_out+=Pe,I.total+=Pe,Pe&&(ne.adler=I.check=I.flags?o(I.check,Ye,Pe,ce-Pe):a(I.check,Ye,Pe,ce-Pe)),Pe=j,(I.flags?ee:Ge(ee))!==I.check){ne.msg="incorrect data check",I.mode=Ke;break}ee=0,le=0}I.mode=Xe;case Xe:if(I.wrap&&I.flags){for(;le<32;){if(fe===0)break e;fe--,ee+=be[T++]<<le,le+=8}if(ee!==(I.total&4294967295)){ne.msg="incorrect length check",I.mode=Ke;break}ee=0,le=0}I.mode=Et;case Et:_i=g;break e;case Ke:_i=_;break e;case he:return E;case pe:default:return w}return ne.next_out=ce,ne.avail_out=j,ne.next_in=T,ne.avail_in=fe,I.hold=ee,I.bits=le,(I.wsize||Pe!==ne.avail_out&&I.mode<Ke&&(I.mode<Ve||ge!==d))&&La(ne,ne.output,ne.next_out,Pe-ne.avail_out),qe-=ne.avail_in,Pe-=ne.avail_out,ne.total_in+=qe,ne.total_out+=Pe,I.total+=Pe,I.wrap&&Pe&&(ne.adler=I.check=I.flags?o(I.check,Ye,Pe,ne.next_out-Pe):a(I.check,Ye,Pe,ne.next_out-Pe)),ne.data_type=I.bits+(I.last?64:0)+(I.mode===K?128:0)+(I.mode===Y||I.mode===B?256:0),(qe===0&&Pe===0||ge===d)&&_i===v&&(_i=x),_i}function ye(ne){if(!ne||!ne.state)return w;var ge=ne.state;return ge.window&&(ge.window=null),ne.state=null,v}function Ee(ne,ge){var I;return!ne||!ne.state||(I=ne.state,!(I.wrap&2))?w:(I.head=ge,ge.done=!1,v)}function Me(ne,ge){var I=ge.length,be,Ye,T;return!ne||!ne.state||(be=ne.state,be.wrap!==0&&be.mode!==Z)?w:be.mode===Z&&(Ye=1,Ye=a(Ye,ge,I,0),Ye!==be.check)?_:(T=La(ne,ge,I,I),T?(be.mode=he,E):(be.havedict=1,v))}r.inflateReset=Lt,r.inflateReset2=mt,r.inflateResetKeep=jt,r.inflateInit=ct,r.inflateInit2=Fi,r.inflate=W,r.inflateEnd=ye,r.inflateGetHeader=Ee,r.inflateSetDictionary=Me,r.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(t,n,r){var s=t("../utils/common"),a=15,o=852,l=592,u=0,c=1,h=2,f=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],d=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],y=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],b=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];n.exports=function(g,m,w,_,E,x,A,S){var O=S.bits,C=0,k=0,D=0,R=0,F=0,H=0,$=0,G=0,Z=0,K=0,q,P,B,V,J,te=null,U=0,Y,re=new s.Buf16(a+1),oe=new s.Buf16(a+1),de=null,_e=0,Le,Ne,Ve;for(C=0;C<=a;C++)re[C]=0;for(k=0;k<_;k++)re[m[w+k]]++;for(F=O,R=a;R>=1&&re[R]===0;R--);if(F>R&&(F=R),R===0)return E[x++]=1<<24|64<<16|0,E[x++]=1<<24|64<<16|0,S.bits=1,0;for(D=1;D<R&&re[D]===0;D++);for(F<D&&(F=D),G=1,C=1;C<=a;C++)if(G<<=1,G-=re[C],G<0)return-1;if(G>0&&(g===u||R!==1))return-1;for(oe[1]=0,C=1;C<a;C++)oe[C+1]=oe[C]+re[C];for(k=0;k<_;k++)m[w+k]!==0&&(A[oe[m[w+k]]++]=k);if(g===u?(te=de=A,Y=19):g===c?(te=f,U-=257,de=d,_e-=257,Y=256):(te=y,de=b,Y=-1),K=0,k=0,C=D,J=x,H=F,$=0,B=-1,Z=1<<F,V=Z-1,g===c&&Z>o||g===h&&Z>l)return 1;for(;;){Le=C-$,A[k]<Y?(Ne=0,Ve=A[k]):A[k]>Y?(Ne=de[_e+A[k]],Ve=te[U+A[k]]):(Ne=96,Ve=0),q=1<<C-$,P=1<<H,D=P;do P-=q,E[J+(K>>$)+P]=Le<<24|Ne<<16|Ve|0;while(P!==0);for(q=1<<C-1;K&q;)q>>=1;if(q!==0?(K&=q-1,K+=q):K=0,k++,--re[C]===0){if(C===R)break;C=m[w+A[k]]}if(C>F&&(K&V)!==B){for($===0&&($=F),J+=D,H=C-$,G=1<<H;H+$<R&&(G-=re[H+$],!(G<=0));)H++,G<<=1;if(Z+=1<<H,g===c&&Z>o||g===h&&Z>l)return 1;B=K&V,E[B]=F<<24|H<<16|J-x|0}}return K!==0&&(E[J+K]=C-$<<24|64<<16|0),S.bits=F,0}},{"../utils/common":41}],51:[function(t,n,r){n.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(t,n,r){var s=t("../utils/common"),a=4,o=0,l=1,u=2;function c(W){for(var ye=W.length;--ye>=0;)W[ye]=0}var h=0,f=1,d=2,y=3,b=258,v=29,g=256,m=g+1+v,w=30,_=19,E=2*m+1,x=15,A=16,S=7,O=256,C=16,k=17,D=18,R=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],F=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],H=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],$=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],G=512,Z=new Array((m+2)*2);c(Z);var K=new Array(w*2);c(K);var q=new Array(G);c(q);var P=new Array(b-y+1);c(P);var B=new Array(v);c(B);var V=new Array(w);c(V);function J(W,ye,Ee,Me,ne){this.static_tree=W,this.extra_bits=ye,this.extra_base=Ee,this.elems=Me,this.max_length=ne,this.has_stree=W&&W.length}var te,U,Y;function re(W,ye){this.dyn_tree=W,this.max_code=0,this.stat_desc=ye}function oe(W){return W<256?q[W]:q[256+(W>>>7)]}function de(W,ye){W.pending_buf[W.pending++]=ye&255,W.pending_buf[W.pending++]=ye>>>8&255}function _e(W,ye,Ee){W.bi_valid>A-Ee?(W.bi_buf|=ye<<W.bi_valid&65535,de(W,W.bi_buf),W.bi_buf=ye>>A-W.bi_valid,W.bi_valid+=Ee-A):(W.bi_buf|=ye<<W.bi_valid&65535,W.bi_valid+=Ee)}function Le(W,ye,Ee){_e(W,Ee[ye*2],Ee[ye*2+1])}function Ne(W,ye){var Ee=0;do Ee|=W&1,W>>>=1,Ee<<=1;while(--ye>0);return Ee>>>1}function Ve(W){W.bi_valid===16?(de(W,W.bi_buf),W.bi_buf=0,W.bi_valid=0):W.bi_valid>=8&&(W.pending_buf[W.pending++]=W.bi_buf&255,W.bi_buf>>=8,W.bi_valid-=8)}function Xe(W,ye){var Ee=ye.dyn_tree,Me=ye.max_code,ne=ye.stat_desc.static_tree,ge=ye.stat_desc.has_stree,I=ye.stat_desc.extra_bits,be=ye.stat_desc.extra_base,Ye=ye.stat_desc.max_length,T,ce,fe,j,ee,le,qe=0;for(j=0;j<=x;j++)W.bl_count[j]=0;for(Ee[W.heap[W.heap_max]*2+1]=0,T=W.heap_max+1;T<E;T++)ce=W.heap[T],j=Ee[Ee[ce*2+1]*2+1]+1,j>Ye&&(j=Ye,qe++),Ee[ce*2+1]=j,!(ce>Me)&&(W.bl_count[j]++,ee=0,ce>=be&&(ee=I[ce-be]),le=Ee[ce*2],W.opt_len+=le*(j+ee),ge&&(W.static_len+=le*(ne[ce*2+1]+ee)));if(qe!==0){do{for(j=Ye-1;W.bl_count[j]===0;)j--;W.bl_count[j]--,W.bl_count[j+1]+=2,W.bl_count[Ye]--,qe-=2}while(qe>0);for(j=Ye;j!==0;j--)for(ce=W.bl_count[j];ce!==0;)fe=W.heap[--T],!(fe>Me)&&(Ee[fe*2+1]!==j&&(W.opt_len+=(j-Ee[fe*2+1])*Ee[fe*2],Ee[fe*2+1]=j),ce--)}}function Et(W,ye,Ee){var Me=new Array(x+1),ne=0,ge,I;for(ge=1;ge<=x;ge++)Me[ge]=ne=ne+Ee[ge-1]<<1;for(I=0;I<=ye;I++){var be=W[I*2+1];be!==0&&(W[I*2]=Ne(Me[be]++,be))}}function Ke(){var W,ye,Ee,Me,ne,ge=new Array(x+1);for(Ee=0,Me=0;Me<v-1;Me++)for(B[Me]=Ee,W=0;W<1<<R[Me];W++)P[Ee++]=Me;for(P[Ee-1]=Me,ne=0,Me=0;Me<16;Me++)for(V[Me]=ne,W=0;W<1<<F[Me];W++)q[ne++]=Me;for(ne>>=7;Me<w;Me++)for(V[Me]=ne<<7,W=0;W<1<<F[Me]-7;W++)q[256+ne++]=Me;for(ye=0;ye<=x;ye++)ge[ye]=0;for(W=0;W<=143;)Z[W*2+1]=8,W++,ge[8]++;for(;W<=255;)Z[W*2+1]=9,W++,ge[9]++;for(;W<=279;)Z[W*2+1]=7,W++,ge[7]++;for(;W<=287;)Z[W*2+1]=8,W++,ge[8]++;for(Et(Z,m+1,ge),W=0;W<w;W++)K[W*2+1]=5,K[W*2]=Ne(W,5);te=new J(Z,R,g+1,m,x),U=new J(K,F,0,w,x),Y=new J(new Array(0),H,0,_,S)}function he(W){var ye;for(ye=0;ye<m;ye++)W.dyn_ltree[ye*2]=0;for(ye=0;ye<w;ye++)W.dyn_dtree[ye*2]=0;for(ye=0;ye<_;ye++)W.bl_tree[ye*2]=0;W.dyn_ltree[O*2]=1,W.opt_len=W.static_len=0,W.last_lit=W.matches=0}function pe(W){W.bi_valid>8?de(W,W.bi_buf):W.bi_valid>0&&(W.pending_buf[W.pending++]=W.bi_buf),W.bi_buf=0,W.bi_valid=0}function xe(W,ye,Ee,Me){pe(W),de(W,Ee),de(W,~Ee),s.arraySet(W.pending_buf,W.window,ye,Ee,W.pending),W.pending+=Ee}function Te(W,ye,Ee,Me){var ne=ye*2,ge=Ee*2;return W[ne]<W[ge]||W[ne]===W[ge]&&Me[ye]<=Me[Ee]}function me(W,ye,Ee){for(var Me=W.heap[Ee],ne=Ee<<1;ne<=W.heap_len&&(ne<W.heap_len&&Te(ye,W.heap[ne+1],W.heap[ne],W.depth)&&ne++,!Te(ye,Me,W.heap[ne],W.depth));)W.heap[Ee]=W.heap[ne],Ee=ne,ne<<=1;W.heap[Ee]=Me}function De(W,ye,Ee){var Me,ne,ge=0,I,be;if(W.last_lit!==0)do Me=W.pending_buf[W.d_buf+ge*2]<<8|W.pending_buf[W.d_buf+ge*2+1],ne=W.pending_buf[W.l_buf+ge],ge++,Me===0?Le(W,ne,ye):(I=P[ne],Le(W,I+g+1,ye),be=R[I],be!==0&&(ne-=B[I],_e(W,ne,be)),Me--,I=oe(Me),Le(W,I,Ee),be=F[I],be!==0&&(Me-=V[I],_e(W,Me,be)));while(ge<W.last_lit);Le(W,O,ye)}function Ge(W,ye){var Ee=ye.dyn_tree,Me=ye.stat_desc.static_tree,ne=ye.stat_desc.has_stree,ge=ye.stat_desc.elems,I,be,Ye=-1,T;for(W.heap_len=0,W.heap_max=E,I=0;I<ge;I++)Ee[I*2]!==0?(W.heap[++W.heap_len]=Ye=I,W.depth[I]=0):Ee[I*2+1]=0;for(;W.heap_len<2;)T=W.heap[++W.heap_len]=Ye<2?++Ye:0,Ee[T*2]=1,W.depth[T]=0,W.opt_len--,ne&&(W.static_len-=Me[T*2+1]);for(ye.max_code=Ye,I=W.heap_len>>1;I>=1;I--)me(W,Ee,I);T=ge;do I=W.heap[1],W.heap[1]=W.heap[W.heap_len--],me(W,Ee,1),be=W.heap[1],W.heap[--W.heap_max]=I,W.heap[--W.heap_max]=be,Ee[T*2]=Ee[I*2]+Ee[be*2],W.depth[T]=(W.depth[I]>=W.depth[be]?W.depth[I]:W.depth[be])+1,Ee[I*2+1]=Ee[be*2+1]=T,W.heap[1]=T++,me(W,Ee,1);while(W.heap_len>=2);W.heap[--W.heap_max]=W.heap[1],Xe(W,ye),Et(Ee,Ye,W.bl_count)}function Je(W,ye,Ee){var Me,ne=-1,ge,I=ye[0*2+1],be=0,Ye=7,T=4;for(I===0&&(Ye=138,T=3),ye[(Ee+1)*2+1]=65535,Me=0;Me<=Ee;Me++)ge=I,I=ye[(Me+1)*2+1],!(++be<Ye&&ge===I)&&(be<T?W.bl_tree[ge*2]+=be:ge!==0?(ge!==ne&&W.bl_tree[ge*2]++,W.bl_tree[C*2]++):be<=10?W.bl_tree[k*2]++:W.bl_tree[D*2]++,be=0,ne=ge,I===0?(Ye=138,T=3):ge===I?(Ye=6,T=3):(Ye=7,T=4))}function jt(W,ye,Ee){var Me,ne=-1,ge,I=ye[0*2+1],be=0,Ye=7,T=4;for(I===0&&(Ye=138,T=3),Me=0;Me<=Ee;Me++)if(ge=I,I=ye[(Me+1)*2+1],!(++be<Ye&&ge===I)){if(be<T)do Le(W,ge,W.bl_tree);while(--be!==0);else ge!==0?(ge!==ne&&(Le(W,ge,W.bl_tree),be--),Le(W,C,W.bl_tree),_e(W,be-3,2)):be<=10?(Le(W,k,W.bl_tree),_e(W,be-3,3)):(Le(W,D,W.bl_tree),_e(W,be-11,7));be=0,ne=ge,I===0?(Ye=138,T=3):ge===I?(Ye=6,T=3):(Ye=7,T=4)}}function Lt(W){var ye;for(Je(W,W.dyn_ltree,W.l_desc.max_code),Je(W,W.dyn_dtree,W.d_desc.max_code),Ge(W,W.bl_desc),ye=_-1;ye>=3&&W.bl_tree[$[ye]*2+1]===0;ye--);return W.opt_len+=3*(ye+1)+5+5+4,ye}function mt(W,ye,Ee,Me){var ne;for(_e(W,ye-257,5),_e(W,Ee-1,5),_e(W,Me-4,4),ne=0;ne<Me;ne++)_e(W,W.bl_tree[$[ne]*2+1],3);jt(W,W.dyn_ltree,ye-1),jt(W,W.dyn_dtree,Ee-1)}function Fi(W){var ye=4093624447,Ee;for(Ee=0;Ee<=31;Ee++,ye>>>=1)if(ye&1&&W.dyn_ltree[Ee*2]!==0)return o;if(W.dyn_ltree[9*2]!==0||W.dyn_ltree[10*2]!==0||W.dyn_ltree[13*2]!==0)return l;for(Ee=32;Ee<g;Ee++)if(W.dyn_ltree[Ee*2]!==0)return l;return o}var ct=!1;function Sn(W){ct||(Ke(),ct=!0),W.l_desc=new re(W.dyn_ltree,te),W.d_desc=new re(W.dyn_dtree,U),W.bl_desc=new re(W.bl_tree,Y),W.bi_buf=0,W.bi_valid=0,he(W)}function Tr(W,ye,Ee,Me){_e(W,(h<<1)+(Me?1:0),3),xe(W,ye,Ee)}function mn(W){_e(W,f<<1,3),Le(W,O,Z),Ve(W)}function wi(W,ye,Ee,Me){var ne,ge,I=0;W.level>0?(W.strm.data_type===u&&(W.strm.data_type=Fi(W)),Ge(W,W.l_desc),Ge(W,W.d_desc),I=Lt(W),ne=W.opt_len+3+7>>>3,ge=W.static_len+3+7>>>3,ge<=ne&&(ne=ge)):ne=ge=Ee+5,Ee+4<=ne&&ye!==-1?Tr(W,ye,Ee,Me):W.strategy===a||ge===ne?(_e(W,(f<<1)+(Me?1:0),3),De(W,Z,K)):(_e(W,(d<<1)+(Me?1:0),3),mt(W,W.l_desc.max_code+1,W.d_desc.max_code+1,I+1),De(W,W.dyn_ltree,W.dyn_dtree)),he(W),Me&&pe(W)}function La(W,ye,Ee){return W.pending_buf[W.d_buf+W.last_lit*2]=ye>>>8&255,W.pending_buf[W.d_buf+W.last_lit*2+1]=ye&255,W.pending_buf[W.l_buf+W.last_lit]=Ee&255,W.last_lit++,ye===0?W.dyn_ltree[Ee*2]++:(W.matches++,ye--,W.dyn_ltree[(P[Ee]+g+1)*2]++,W.dyn_dtree[oe(ye)*2]++),W.last_lit===W.lit_bufsize-1}r._tr_init=Sn,r._tr_stored_block=Tr,r._tr_flush_block=wi,r._tr_tally=La,r._tr_align=mn},{"../utils/common":41}],53:[function(t,n,r){function s(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}n.exports=s},{}],54:[function(t,n,r){(function(s){(function(a,o){if(a.setImmediate)return;var l=1,u={},c=!1,h=a.document,f;function d(S){typeof S!="function"&&(S=new Function(""+S));for(var O=new Array(arguments.length-1),C=0;C<O.length;C++)O[C]=arguments[C+1];var k={callback:S,args:O};return u[l]=k,f(l),l++}function y(S){delete u[S]}function b(S){var O=S.callback,C=S.args;switch(C.length){case 0:O();break;case 1:O(C[0]);break;case 2:O(C[0],C[1]);break;case 3:O(C[0],C[1],C[2]);break;default:O.apply(o,C);break}}function v(S){if(c)setTimeout(v,0,S);else{var O=u[S];if(O){c=!0;try{b(O)}finally{y(S),c=!1}}}}function g(){f=function(S){process.nextTick(function(){v(S)})}}function m(){if(a.postMessage&&!a.importScripts){var S=!0,O=a.onmessage;return a.onmessage=function(){S=!1},a.postMessage("","*"),a.onmessage=O,S}}function w(){var S="setImmediate$"+Math.random()+"$",O=function(C){C.source===a&&typeof C.data=="string"&&C.data.indexOf(S)===0&&v(+C.data.slice(S.length))};a.addEventListener?a.addEventListener("message",O,!1):a.attachEvent("onmessage",O),f=function(C){a.postMessage(S+C,"*")}}function _(){var S=new MessageChannel;S.port1.onmessage=function(O){var C=O.data;v(C)},f=function(O){S.port2.postMessage(O)}}function E(){var S=h.documentElement;f=function(O){var C=h.createElement("script");C.onreadystatechange=function(){v(O),C.onreadystatechange=null,S.removeChild(C),C=null},S.appendChild(C)}}function x(){f=function(S){setTimeout(v,0,S)}}var A=Object.getPrototypeOf&&Object.getPrototypeOf(a);A=A&&A.setTimeout?A:a,{}.toString.call(a.process)==="[object process]"?g():m()?w():a.MessageChannel?_():h&&"onreadystatechange"in h.createElement("script")?E():x(),A.setImmediate=d,A.clearImmediate=y})(typeof self>"u"?typeof s>"u"?this:s:self)}).call(this,typeof ln<"u"?ln:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(xD);var YF=xD.exports;const ZF=zo(YF);class QF{constructor(){this.zip=void 0,this.urlCache={},this.checkRequirements()}checkRequirements(){try{this.zip=new ZF}catch{throw new Error("JSZip lib not loaded")}}open(e,t){return this.zip.loadAsync(e,{base64:t})}openUrl(e,t){return gd(e,"binary").then((function(n){return this.zip.loadAsync(n,{base64:t})}).bind(this))}request(e,t){var n=new dt,r,s=new Oa(e);return t||(t=s.extension),t=="blob"?r=this.getBlob(e):r=this.getText(e),r?r.then((function(a){let o=this.handleResponse(a,t);n.resolve(o)}).bind(this)):n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise}handleResponse(e,t){var n;return t=="json"?n=JSON.parse(e):pd(t)?n=Ps(e,"text/xml"):t=="xhtml"?n=Ps(e,"application/xhtml+xml"):t=="html"||t=="htm"?n=Ps(e,"text/html"):n=e,n}getBlob(e,t){var n=window.decodeURIComponent(e.substr(1)),r=this.zip.file(n);if(r)return t=t||mc.lookup(r.name),r.async("uint8array").then(function(s){return new Blob([s],{type:t})})}getText(e,t){var n=window.decodeURIComponent(e.substr(1)),r=this.zip.file(n);if(r)return r.async("string").then(function(s){return s})}getBase64(e,t){var n=window.decodeURIComponent(e.substr(1)),r=this.zip.file(n);if(r)return t=t||mc.lookup(r.name),r.async("base64").then(function(s){return"data:"+t+";base64,"+s})}createUrl(e,t){var n=new dt,r=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(o?(a=this.getBase64(e),a&&a.then((function(l){this.urlCache[e]=l,n.resolve(l)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(l){s=r.createObjectURL(l),this.urlCache[e]=s,n.resolve(s)}).bind(this))),a||n.reject({message:"File not found in the epub: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.zip=void 0,this.urlCache={}}}var SD={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(i,e){(function(t){i.exports=t()})(function(){return function t(n,r,s){function a(u,c){if(!r[u]){if(!n[u]){var h=typeof xo=="function"&&xo;if(!c&&h)return h(u,!0);if(o)return o(u,!0);var f=new Error("Cannot find module '"+u+"'");throw f.code="MODULE_NOT_FOUND",f}var d=r[u]={exports:{}};n[u][0].call(d.exports,function(y){var b=n[u][1][y];return a(b||y)},d,d.exports,t,n,r,s)}return r[u].exports}for(var o=typeof xo=="function"&&xo,l=0;l<s.length;l++)a(s[l]);return a}({1:[function(t,n,r){(function(s){var a=s.MutationObserver||s.WebKitMutationObserver,o;if(a){var l=0,u=new a(y),c=s.document.createTextNode("");u.observe(c,{characterData:!0}),o=function(){c.data=l=++l%2}}else if(!s.setImmediate&&typeof s.MessageChannel<"u"){var h=new s.MessageChannel;h.port1.onmessage=y,o=function(){h.port2.postMessage(0)}}else"document"in s&&"onreadystatechange"in s.document.createElement("script")?o=function(){var v=s.document.createElement("script");v.onreadystatechange=function(){y(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},s.document.documentElement.appendChild(v)}:o=function(){setTimeout(y,0)};var f,d=[];function y(){f=!0;for(var v,g,m=d.length;m;){for(g=d,d=[],v=-1;++v<m;)g[v]();m=d.length}f=!1}n.exports=b;function b(v){d.push(v)===1&&!f&&o()}}).call(this,typeof ln<"u"?ln:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,r){var s=t(1);function a(){}var o={},l=["REJECTED"],u=["FULFILLED"],c=["PENDING"];n.exports=h;function h(E){if(typeof E!="function")throw new TypeError("resolver must be a function");this.state=c,this.queue=[],this.outcome=void 0,E!==a&&b(this,E)}h.prototype.catch=function(E){return this.then(null,E)},h.prototype.then=function(E,x){if(typeof E!="function"&&this.state===u||typeof x!="function"&&this.state===l)return this;var A=new this.constructor(a);if(this.state!==c){var S=this.state===u?E:x;d(A,S,this.outcome)}else this.queue.push(new f(A,E,x));return A};function f(E,x,A){this.promise=E,typeof x=="function"&&(this.onFulfilled=x,this.callFulfilled=this.otherCallFulfilled),typeof A=="function"&&(this.onRejected=A,this.callRejected=this.otherCallRejected)}f.prototype.callFulfilled=function(E){o.resolve(this.promise,E)},f.prototype.otherCallFulfilled=function(E){d(this.promise,this.onFulfilled,E)},f.prototype.callRejected=function(E){o.reject(this.promise,E)},f.prototype.otherCallRejected=function(E){d(this.promise,this.onRejected,E)};function d(E,x,A){s(function(){var S;try{S=x(A)}catch(O){return o.reject(E,O)}S===E?o.reject(E,new TypeError("Cannot resolve promise with itself")):o.resolve(E,S)})}o.resolve=function(E,x){var A=v(y,x);if(A.status==="error")return o.reject(E,A.value);var S=A.value;if(S)b(E,S);else{E.state=u,E.outcome=x;for(var O=-1,C=E.queue.length;++O<C;)E.queue[O].callFulfilled(x)}return E},o.reject=function(E,x){E.state=l,E.outcome=x;for(var A=-1,S=E.queue.length;++A<S;)E.queue[A].callRejected(x);return E};function y(E){var x=E&&E.then;if(E&&(typeof E=="object"||typeof E=="function")&&typeof x=="function")return function(){x.apply(E,arguments)}}function b(E,x){var A=!1;function S(D){A||(A=!0,o.reject(E,D))}function O(D){A||(A=!0,o.resolve(E,D))}function C(){x(O,S)}var k=v(C);k.status==="error"&&S(k.value)}function v(E,x){var A={};try{A.value=E(x),A.status="success"}catch(S){A.status="error",A.value=S}return A}h.resolve=g;function g(E){return E instanceof this?E:o.resolve(new this(a),E)}h.reject=m;function m(E){var x=new this(a);return o.reject(x,E)}h.all=w;function w(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=E.length,S=!1;if(!A)return this.resolve([]);for(var O=new Array(A),C=0,k=-1,D=new this(a);++k<A;)R(E[k],k);return D;function R(F,H){x.resolve(F).then($,function(G){S||(S=!0,o.reject(D,G))});function $(G){O[H]=G,++C===A&&!S&&(S=!0,o.resolve(D,O))}}}h.race=_;function _(E){var x=this;if(Object.prototype.toString.call(E)!=="[object Array]")return this.reject(new TypeError("must be an array"));var A=E.length,S=!1;if(!A)return this.resolve([]);for(var O=-1,C=new this(a);++O<A;)k(E[O]);return C;function k(D){x.resolve(D).then(function(R){S||(S=!0,o.resolve(C,R))},function(R){S||(S=!0,o.reject(C,R))})}}},{1:1}],3:[function(t,n,r){(function(s){typeof s.Promise!="function"&&(s.Promise=t(2))}).call(this,typeof ln<"u"?ln:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,r){var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(z){return typeof z}:function(z){return z&&typeof Symbol=="function"&&z.constructor===Symbol&&z!==Symbol.prototype?"symbol":typeof z};function a(z,Q){if(!(z instanceof Q))throw new TypeError("Cannot call a class as a function")}function o(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var l=o();function u(){try{if(!l||!l.open)return!1;var z=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),Q=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!z||Q)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function c(z,Q){z=z||[],Q=Q||{};try{return new Blob(z,Q)}catch(ie){if(ie.name!=="TypeError")throw ie;for(var X=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,se=new X,ae=0;ae<z.length;ae+=1)se.append(z[ae]);return se.getBlob(Q.type)}}typeof Promise>"u"&&t(3);var h=Promise;function f(z,Q){Q&&z.then(function(X){Q(null,X)},function(X){Q(X)})}function d(z,Q,X){typeof Q=="function"&&z.then(Q),typeof X=="function"&&z.catch(X)}function y(z){return typeof z!="string"&&(console.warn(z+" used as a key, but it is not a string."),z=String(z)),z}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",g=void 0,m={},w=Object.prototype.toString,_="readonly",E="readwrite";function x(z){for(var Q=z.length,X=new ArrayBuffer(Q),se=new Uint8Array(X),ae=0;ae<Q;ae++)se[ae]=z.charCodeAt(ae);return X}function A(z){return new h(function(Q){var X=z.transaction(v,E),se=c([""]);X.objectStore(v).put(se,"key"),X.onabort=function(ae){ae.preventDefault(),ae.stopPropagation(),Q(!1)},X.oncomplete=function(){var ae=navigator.userAgent.match(/Chrome\/(\d+)/),ie=navigator.userAgent.match(/Edge\//);Q(ie||!ae||parseInt(ae[1],10)>=43)}}).catch(function(){return!1})}function S(z){return typeof g=="boolean"?h.resolve(g):A(z).then(function(Q){return g=Q,g})}function O(z){var Q=m[z.name],X={};X.promise=new h(function(se,ae){X.resolve=se,X.reject=ae}),Q.deferredOperations.push(X),Q.dbReady?Q.dbReady=Q.dbReady.then(function(){return X.promise}):Q.dbReady=X.promise}function C(z){var Q=m[z.name],X=Q.deferredOperations.pop();if(X)return X.resolve(),X.promise}function k(z,Q){var X=m[z.name],se=X.deferredOperations.pop();if(se)return se.reject(Q),se.promise}function D(z,Q){return new h(function(X,se){if(m[z.name]=m[z.name]||B(),z.db)if(Q)O(z),z.db.close();else return X(z.db);var ae=[z.name];Q&&ae.push(z.version);var ie=l.open.apply(l,ae);Q&&(ie.onupgradeneeded=function(ve){var we=ie.result;try{we.createObjectStore(z.storeName),ve.oldVersion<=1&&we.createObjectStore(v)}catch(Se){if(Se.name==="ConstraintError")console.warn('The database "'+z.name+'" has been upgraded from version '+ve.oldVersion+" to version "+ve.newVersion+', but the storage "'+z.storeName+'" already exists.');else throw Se}}),ie.onerror=function(ve){ve.preventDefault(),se(ie.error)},ie.onsuccess=function(){var ve=ie.result;ve.onversionchange=function(we){we.target.close()},X(ve),C(z)}})}function R(z){return D(z,!1)}function F(z){return D(z,!0)}function H(z,Q){if(!z.db)return!0;var X=!z.db.objectStoreNames.contains(z.storeName),se=z.version<z.db.version,ae=z.version>z.db.version;if(se&&(z.version!==Q&&console.warn('The database "'+z.name+`" can't be downgraded from version `+z.db.version+" to version "+z.version+"."),z.version=z.db.version),ae||X){if(X){var ie=z.db.version+1;ie>z.version&&(z.version=ie)}return!0}return!1}function $(z){return new h(function(Q,X){var se=new FileReader;se.onerror=X,se.onloadend=function(ae){var ie=btoa(ae.target.result||"");Q({__local_forage_encoded_blob:!0,data:ie,type:z.type})},se.readAsBinaryString(z)})}function G(z){var Q=x(atob(z.data));return c([Q],{type:z.type})}function Z(z){return z&&z.__local_forage_encoded_blob}function K(z){var Q=this,X=Q._initReady().then(function(){var se=m[Q._dbInfo.name];if(se&&se.dbReady)return se.dbReady});return d(X,z,z),X}function q(z){O(z);for(var Q=m[z.name],X=Q.forages,se=0;se<X.length;se++){var ae=X[se];ae._dbInfo.db&&(ae._dbInfo.db.close(),ae._dbInfo.db=null)}return z.db=null,R(z).then(function(ie){return z.db=ie,H(z)?F(z):ie}).then(function(ie){z.db=Q.db=ie;for(var ve=0;ve<X.length;ve++)X[ve]._dbInfo.db=ie}).catch(function(ie){throw k(z,ie),ie})}function P(z,Q,X,se){se===void 0&&(se=1);try{var ae=z.db.transaction(z.storeName,Q);X(null,ae)}catch(ie){if(se>0&&(!z.db||ie.name==="InvalidStateError"||ie.name==="NotFoundError"))return h.resolve().then(function(){if(!z.db||ie.name==="NotFoundError"&&!z.db.objectStoreNames.contains(z.storeName)&&z.version<=z.db.version)return z.db&&(z.version=z.db.version+1),F(z)}).then(function(){return q(z).then(function(){P(z,Q,X,se-1)})}).catch(X);X(ie)}}function B(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function V(z){var Q=this,X={db:null};if(z)for(var se in z)X[se]=z[se];var ae=m[X.name];ae||(ae=B(),m[X.name]=ae),ae.forages.push(Q),Q._initReady||(Q._initReady=Q.ready,Q.ready=K);var ie=[];function ve(){return h.resolve()}for(var we=0;we<ae.forages.length;we++){var Se=ae.forages[we];Se!==Q&&ie.push(Se._initReady().catch(ve))}var Ce=ae.forages.slice(0);return h.all(ie).then(function(){return X.db=ae.db,R(X)}).then(function(ke){return X.db=ke,H(X,Q._defaultConfig.version)?F(X):ke}).then(function(ke){X.db=ae.db=ke,Q._dbInfo=X;for(var He=0;He<Ce.length;He++){var st=Ce[He];st!==Q&&(st._dbInfo.db=X.db,st._dbInfo.version=X.version)}})}function J(z,Q){var X=this;z=y(z);var se=new h(function(ae,ie){X.ready().then(function(){P(X._dbInfo,_,function(ve,we){if(ve)return ie(ve);try{var Se=we.objectStore(X._dbInfo.storeName),Ce=Se.get(z);Ce.onsuccess=function(){var ke=Ce.result;ke===void 0&&(ke=null),Z(ke)&&(ke=G(ke)),ae(ke)},Ce.onerror=function(){ie(Ce.error)}}catch(ke){ie(ke)}})}).catch(ie)});return f(se,Q),se}function te(z,Q){var X=this,se=new h(function(ae,ie){X.ready().then(function(){P(X._dbInfo,_,function(ve,we){if(ve)return ie(ve);try{var Se=we.objectStore(X._dbInfo.storeName),Ce=Se.openCursor(),ke=1;Ce.onsuccess=function(){var He=Ce.result;if(He){var st=He.value;Z(st)&&(st=G(st));var _t=z(st,He.key,ke++);_t!==void 0?ae(_t):He.continue()}else ae()},Ce.onerror=function(){ie(Ce.error)}}catch(He){ie(He)}})}).catch(ie)});return f(se,Q),se}function U(z,Q,X){var se=this;z=y(z);var ae=new h(function(ie,ve){var we;se.ready().then(function(){return we=se._dbInfo,w.call(Q)==="[object Blob]"?S(we.db).then(function(Se){return Se?Q:$(Q)}):Q}).then(function(Se){P(se._dbInfo,E,function(Ce,ke){if(Ce)return ve(Ce);try{var He=ke.objectStore(se._dbInfo.storeName);Se===null&&(Se=void 0);var st=He.put(Se,z);ke.oncomplete=function(){Se===void 0&&(Se=null),ie(Se)},ke.onabort=ke.onerror=function(){var _t=st.error?st.error:st.transaction.error;ve(_t)}}catch(_t){ve(_t)}})}).catch(ve)});return f(ae,X),ae}function Y(z,Q){var X=this;z=y(z);var se=new h(function(ae,ie){X.ready().then(function(){P(X._dbInfo,E,function(ve,we){if(ve)return ie(ve);try{var Se=we.objectStore(X._dbInfo.storeName),Ce=Se.delete(z);we.oncomplete=function(){ae()},we.onerror=function(){ie(Ce.error)},we.onabort=function(){var ke=Ce.error?Ce.error:Ce.transaction.error;ie(ke)}}catch(ke){ie(ke)}})}).catch(ie)});return f(se,Q),se}function re(z){var Q=this,X=new h(function(se,ae){Q.ready().then(function(){P(Q._dbInfo,E,function(ie,ve){if(ie)return ae(ie);try{var we=ve.objectStore(Q._dbInfo.storeName),Se=we.clear();ve.oncomplete=function(){se()},ve.onabort=ve.onerror=function(){var Ce=Se.error?Se.error:Se.transaction.error;ae(Ce)}}catch(Ce){ae(Ce)}})}).catch(ae)});return f(X,z),X}function oe(z){var Q=this,X=new h(function(se,ae){Q.ready().then(function(){P(Q._dbInfo,_,function(ie,ve){if(ie)return ae(ie);try{var we=ve.objectStore(Q._dbInfo.storeName),Se=we.count();Se.onsuccess=function(){se(Se.result)},Se.onerror=function(){ae(Se.error)}}catch(Ce){ae(Ce)}})}).catch(ae)});return f(X,z),X}function de(z,Q){var X=this,se=new h(function(ae,ie){if(z<0){ae(null);return}X.ready().then(function(){P(X._dbInfo,_,function(ve,we){if(ve)return ie(ve);try{var Se=we.objectStore(X._dbInfo.storeName),Ce=!1,ke=Se.openKeyCursor();ke.onsuccess=function(){var He=ke.result;if(!He){ae(null);return}z===0||Ce?ae(He.key):(Ce=!0,He.advance(z))},ke.onerror=function(){ie(ke.error)}}catch(He){ie(He)}})}).catch(ie)});return f(se,Q),se}function _e(z){var Q=this,X=new h(function(se,ae){Q.ready().then(function(){P(Q._dbInfo,_,function(ie,ve){if(ie)return ae(ie);try{var we=ve.objectStore(Q._dbInfo.storeName),Se=we.openKeyCursor(),Ce=[];Se.onsuccess=function(){var ke=Se.result;if(!ke){se(Ce);return}Ce.push(ke.key),ke.continue()},Se.onerror=function(){ae(Se.error)}}catch(ke){ae(ke)}})}).catch(ae)});return f(X,z),X}function Le(z,Q){Q=b.apply(this,arguments);var X=this.config();z=typeof z!="function"&&z||{},z.name||(z.name=z.name||X.name,z.storeName=z.storeName||X.storeName);var se=this,ae;if(!z.name)ae=h.reject("Invalid arguments");else{var ie=z.name===X.name&&se._dbInfo.db,ve=ie?h.resolve(se._dbInfo.db):R(z).then(function(we){var Se=m[z.name],Ce=Se.forages;Se.db=we;for(var ke=0;ke<Ce.length;ke++)Ce[ke]._dbInfo.db=we;return we});z.storeName?ae=ve.then(function(we){if(we.objectStoreNames.contains(z.storeName)){var Se=we.version+1;O(z);var Ce=m[z.name],ke=Ce.forages;we.close();for(var He=0;He<ke.length;He++){var st=ke[He];st._dbInfo.db=null,st._dbInfo.version=Se}var _t=new h(function(At,cn){var nn=l.open(z.name,Se);nn.onerror=function(or){var Wh=nn.result;Wh.close(),cn(or)},nn.onupgradeneeded=function(){var or=nn.result;or.deleteObjectStore(z.storeName)},nn.onsuccess=function(){var or=nn.result;or.close(),At(or)}});return _t.then(function(At){Ce.db=At;for(var cn=0;cn<ke.length;cn++){var nn=ke[cn];nn._dbInfo.db=At,C(nn._dbInfo)}}).catch(function(At){throw(k(z,At)||h.resolve()).catch(function(){}),At})}}):ae=ve.then(function(we){O(z);var Se=m[z.name],Ce=Se.forages;we.close();for(var ke=0;ke<Ce.length;ke++){var He=Ce[ke];He._dbInfo.db=null}var st=new h(function(_t,At){var cn=l.deleteDatabase(z.name);cn.onerror=function(){var nn=cn.result;nn&&nn.close(),At(cn.error)},cn.onblocked=function(){console.warn('dropInstance blocked for database "'+z.name+'" until all open connections are closed')},cn.onsuccess=function(){var nn=cn.result;nn&&nn.close(),_t(nn)}});return st.then(function(_t){Se.db=_t;for(var At=0;At<Ce.length;At++){var cn=Ce[At];C(cn._dbInfo)}}).catch(function(_t){throw(k(z,_t)||h.resolve()).catch(function(){}),_t})})}return f(ae,Q),ae}var Ne={_driver:"asyncStorage",_initStorage:V,_support:u(),iterate:te,getItem:J,setItem:U,removeItem:Y,clear:re,length:oe,key:de,keys:_e,dropInstance:Le};function Ve(){return typeof openDatabase=="function"}var Xe="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Et="~~local_forage_type~",Ke=/^~~local_forage_type~([^~]+)~/,he="__lfsc__:",pe=he.length,xe="arbf",Te="blob",me="si08",De="ui08",Ge="uic8",Je="si16",jt="si32",Lt="ur16",mt="ui32",Fi="fl32",ct="fl64",Sn=pe+xe.length,Tr=Object.prototype.toString;function mn(z){var Q=z.length*.75,X=z.length,se,ae=0,ie,ve,we,Se;z[z.length-1]==="="&&(Q--,z[z.length-2]==="="&&Q--);var Ce=new ArrayBuffer(Q),ke=new Uint8Array(Ce);for(se=0;se<X;se+=4)ie=Xe.indexOf(z[se]),ve=Xe.indexOf(z[se+1]),we=Xe.indexOf(z[se+2]),Se=Xe.indexOf(z[se+3]),ke[ae++]=ie<<2|ve>>4,ke[ae++]=(ve&15)<<4|we>>2,ke[ae++]=(we&3)<<6|Se&63;return Ce}function wi(z){var Q=new Uint8Array(z),X="",se;for(se=0;se<Q.length;se+=3)X+=Xe[Q[se]>>2],X+=Xe[(Q[se]&3)<<4|Q[se+1]>>4],X+=Xe[(Q[se+1]&15)<<2|Q[se+2]>>6],X+=Xe[Q[se+2]&63];return Q.length%3===2?X=X.substring(0,X.length-1)+"=":Q.length%3===1&&(X=X.substring(0,X.length-2)+"=="),X}function La(z,Q){var X="";if(z&&(X=Tr.call(z)),z&&(X==="[object ArrayBuffer]"||z.buffer&&Tr.call(z.buffer)==="[object ArrayBuffer]")){var se,ae=he;z instanceof ArrayBuffer?(se=z,ae+=xe):(se=z.buffer,X==="[object Int8Array]"?ae+=me:X==="[object Uint8Array]"?ae+=De:X==="[object Uint8ClampedArray]"?ae+=Ge:X==="[object Int16Array]"?ae+=Je:X==="[object Uint16Array]"?ae+=Lt:X==="[object Int32Array]"?ae+=jt:X==="[object Uint32Array]"?ae+=mt:X==="[object Float32Array]"?ae+=Fi:X==="[object Float64Array]"?ae+=ct:Q(new Error("Failed to get type for BinaryArray"))),Q(ae+wi(se))}else if(X==="[object Blob]"){var ie=new FileReader;ie.onload=function(){var ve=Et+z.type+"~"+wi(this.result);Q(he+Te+ve)},ie.readAsArrayBuffer(z)}else try{Q(JSON.stringify(z))}catch(ve){console.error("Couldn't convert value into a JSON string: ",z),Q(null,ve)}}function W(z){if(z.substring(0,pe)!==he)return JSON.parse(z);var Q=z.substring(Sn),X=z.substring(pe,Sn),se;if(X===Te&&Ke.test(Q)){var ae=Q.match(Ke);se=ae[1],Q=Q.substring(ae[0].length)}var ie=mn(Q);switch(X){case xe:return ie;case Te:return c([ie],{type:se});case me:return new Int8Array(ie);case De:return new Uint8Array(ie);case Ge:return new Uint8ClampedArray(ie);case Je:return new Int16Array(ie);case Lt:return new Uint16Array(ie);case jt:return new Int32Array(ie);case mt:return new Uint32Array(ie);case Fi:return new Float32Array(ie);case ct:return new Float64Array(ie);default:throw new Error("Unkown type: "+X)}}var ye={serialize:La,deserialize:W,stringToBuffer:mn,bufferToString:wi};function Ee(z,Q,X,se){z.executeSql("CREATE TABLE IF NOT EXISTS "+Q.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],X,se)}function Me(z){var Q=this,X={db:null};if(z)for(var se in z)X[se]=typeof z[se]!="string"?z[se].toString():z[se];var ae=new h(function(ie,ve){try{X.db=openDatabase(X.name,String(X.version),X.description,X.size)}catch(we){return ve(we)}X.db.transaction(function(we){Ee(we,X,function(){Q._dbInfo=X,ie()},function(Se,Ce){ve(Ce)})},ve)});return X.serializer=ye,ae}function ne(z,Q,X,se,ae,ie){z.executeSql(X,se,ae,function(ve,we){we.code===we.SYNTAX_ERR?ve.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[Q.storeName],function(Se,Ce){Ce.rows.length?ie(Se,we):Ee(Se,Q,function(){Se.executeSql(X,se,ae,ie)},ie)},ie):ie(ve,we)},ie)}function ge(z,Q){var X=this;z=y(z);var se=new h(function(ae,ie){X.ready().then(function(){var ve=X._dbInfo;ve.db.transaction(function(we){ne(we,ve,"SELECT * FROM "+ve.storeName+" WHERE key = ? LIMIT 1",[z],function(Se,Ce){var ke=Ce.rows.length?Ce.rows.item(0).value:null;ke&&(ke=ve.serializer.deserialize(ke)),ae(ke)},function(Se,Ce){ie(Ce)})})}).catch(ie)});return f(se,Q),se}function I(z,Q){var X=this,se=new h(function(ae,ie){X.ready().then(function(){var ve=X._dbInfo;ve.db.transaction(function(we){ne(we,ve,"SELECT * FROM "+ve.storeName,[],function(Se,Ce){for(var ke=Ce.rows,He=ke.length,st=0;st<He;st++){var _t=ke.item(st),At=_t.value;if(At&&(At=ve.serializer.deserialize(At)),At=z(At,_t.key,st+1),At!==void 0){ae(At);return}}ae()},function(Se,Ce){ie(Ce)})})}).catch(ie)});return f(se,Q),se}function be(z,Q,X,se){var ae=this;z=y(z);var ie=new h(function(ve,we){ae.ready().then(function(){Q===void 0&&(Q=null);var Se=Q,Ce=ae._dbInfo;Ce.serializer.serialize(Q,function(ke,He){He?we(He):Ce.db.transaction(function(st){ne(st,Ce,"INSERT OR REPLACE INTO "+Ce.storeName+" (key, value) VALUES (?, ?)",[z,ke],function(){ve(Se)},function(_t,At){we(At)})},function(st){if(st.code===st.QUOTA_ERR){if(se>0){ve(be.apply(ae,[z,Se,X,se-1]));return}we(st)}})})}).catch(we)});return f(ie,X),ie}function Ye(z,Q,X){return be.apply(this,[z,Q,X,1])}function T(z,Q){var X=this;z=y(z);var se=new h(function(ae,ie){X.ready().then(function(){var ve=X._dbInfo;ve.db.transaction(function(we){ne(we,ve,"DELETE FROM "+ve.storeName+" WHERE key = ?",[z],function(){ae()},function(Se,Ce){ie(Ce)})})}).catch(ie)});return f(se,Q),se}function ce(z){var Q=this,X=new h(function(se,ae){Q.ready().then(function(){var ie=Q._dbInfo;ie.db.transaction(function(ve){ne(ve,ie,"DELETE FROM "+ie.storeName,[],function(){se()},function(we,Se){ae(Se)})})}).catch(ae)});return f(X,z),X}function fe(z){var Q=this,X=new h(function(se,ae){Q.ready().then(function(){var ie=Q._dbInfo;ie.db.transaction(function(ve){ne(ve,ie,"SELECT COUNT(key) as c FROM "+ie.storeName,[],function(we,Se){var Ce=Se.rows.item(0).c;se(Ce)},function(we,Se){ae(Se)})})}).catch(ae)});return f(X,z),X}function j(z,Q){var X=this,se=new h(function(ae,ie){X.ready().then(function(){var ve=X._dbInfo;ve.db.transaction(function(we){ne(we,ve,"SELECT key FROM "+ve.storeName+" WHERE id = ? LIMIT 1",[z+1],function(Se,Ce){var ke=Ce.rows.length?Ce.rows.item(0).key:null;ae(ke)},function(Se,Ce){ie(Ce)})})}).catch(ie)});return f(se,Q),se}function ee(z){var Q=this,X=new h(function(se,ae){Q.ready().then(function(){var ie=Q._dbInfo;ie.db.transaction(function(ve){ne(ve,ie,"SELECT key FROM "+ie.storeName,[],function(we,Se){for(var Ce=[],ke=0;ke<Se.rows.length;ke++)Ce.push(Se.rows.item(ke).key);se(Ce)},function(we,Se){ae(Se)})})}).catch(ae)});return f(X,z),X}function le(z){return new h(function(Q,X){z.transaction(function(se){se.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(ae,ie){for(var ve=[],we=0;we<ie.rows.length;we++)ve.push(ie.rows.item(we).name);Q({db:z,storeNames:ve})},function(ae,ie){X(ie)})},function(se){X(se)})})}function qe(z,Q){Q=b.apply(this,arguments);var X=this.config();z=typeof z!="function"&&z||{},z.name||(z.name=z.name||X.name,z.storeName=z.storeName||X.storeName);var se=this,ae;return z.name?ae=new h(function(ie){var ve;z.name===X.name?ve=se._dbInfo.db:ve=openDatabase(z.name,"","",0),z.storeName?ie({db:ve,storeNames:[z.storeName]}):ie(le(ve))}).then(function(ie){return new h(function(ve,we){ie.db.transaction(function(Se){function Ce(_t){return new h(function(At,cn){Se.executeSql("DROP TABLE IF EXISTS "+_t,[],function(){At()},function(nn,or){cn(or)})})}for(var ke=[],He=0,st=ie.storeNames.length;He<st;He++)ke.push(Ce(ie.storeNames[He]));h.all(ke).then(function(){ve()}).catch(function(_t){we(_t)})},function(Se){we(Se)})})}):ae=h.reject("Invalid arguments"),f(ae,Q),ae}var Pe={_driver:"webSQLStorage",_initStorage:Me,_support:Ve(),iterate:I,getItem:ge,setItem:Ye,removeItem:T,clear:ce,length:fe,key:j,keys:ee,dropInstance:qe};function Ie(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function lt(z,Q){var X=z.name+"/";return z.storeName!==Q.storeName&&(X+=z.storeName+"/"),X}function kr(){var z="_localforage_support_test";try{return localStorage.setItem(z,!0),localStorage.removeItem(z),!1}catch{return!0}}function zt(){return!kr()||localStorage.length>0}function ht(z){var Q=this,X={};if(z)for(var se in z)X[se]=z[se];return X.keyPrefix=lt(z,Q._defaultConfig),zt()?(Q._dbInfo=X,X.serializer=ye,h.resolve()):h.reject()}function tn(z){var Q=this,X=Q.ready().then(function(){for(var se=Q._dbInfo.keyPrefix,ae=localStorage.length-1;ae>=0;ae--){var ie=localStorage.key(ae);ie.indexOf(se)===0&&localStorage.removeItem(ie)}});return f(X,z),X}function Cn(z,Q){var X=this;z=y(z);var se=X.ready().then(function(){var ae=X._dbInfo,ie=localStorage.getItem(ae.keyPrefix+z);return ie&&(ie=ae.serializer.deserialize(ie)),ie});return f(se,Q),se}function Vn(z,Q){var X=this,se=X.ready().then(function(){for(var ae=X._dbInfo,ie=ae.keyPrefix,ve=ie.length,we=localStorage.length,Se=1,Ce=0;Ce<we;Ce++){var ke=localStorage.key(Ce);if(ke.indexOf(ie)===0){var He=localStorage.getItem(ke);if(He&&(He=ae.serializer.deserialize(He)),He=z(He,ke.substring(ve),Se++),He!==void 0)return He}}});return f(se,Q),se}function ku(z,Q){var X=this,se=X.ready().then(function(){var ae=X._dbInfo,ie;try{ie=localStorage.key(z)}catch{ie=null}return ie&&(ie=ie.substring(ae.keyPrefix.length)),ie});return f(se,Q),se}function Du(z){var Q=this,X=Q.ready().then(function(){for(var se=Q._dbInfo,ae=localStorage.length,ie=[],ve=0;ve<ae;ve++){var we=localStorage.key(ve);we.indexOf(se.keyPrefix)===0&&ie.push(we.substring(se.keyPrefix.length))}return ie});return f(X,z),X}function Zt(z){var Q=this,X=Q.keys().then(function(se){return se.length});return f(X,z),X}function _i(z,Q){var X=this;z=y(z);var se=X.ready().then(function(){var ae=X._dbInfo;localStorage.removeItem(ae.keyPrefix+z)});return f(se,Q),se}function vn(z,Q,X){var se=this;z=y(z);var ae=se.ready().then(function(){Q===void 0&&(Q=null);var ie=Q;return new h(function(ve,we){var Se=se._dbInfo;Se.serializer.serialize(Q,function(Ce,ke){if(ke)we(ke);else try{localStorage.setItem(Se.keyPrefix+z,Ce),ve(ie)}catch(He){(He.name==="QuotaExceededError"||He.name==="NS_ERROR_DOM_QUOTA_REACHED")&&we(He),we(He)}})})});return f(ae,X),ae}function Dr(z,Q){if(Q=b.apply(this,arguments),z=typeof z!="function"&&z||{},!z.name){var X=this.config();z.name=z.name||X.name,z.storeName=z.storeName||X.storeName}var se=this,ae;return z.name?ae=new h(function(ie){z.storeName?ie(lt(z,se._defaultConfig)):ie(z.name+"/")}).then(function(ie){for(var ve=localStorage.length-1;ve>=0;ve--){var we=localStorage.key(ve);we.indexOf(ie)===0&&localStorage.removeItem(we)}}):ae=h.reject("Invalid arguments"),f(ae,Q),ae}var ar={_driver:"localStorageWrapper",_initStorage:ht,_support:Ie(),iterate:Vn,getItem:Cn,setItem:vn,removeItem:_i,clear:tn,length:Zt,key:ku,keys:Du,dropInstance:Dr},ag=function(Q,X){return Q===X||typeof Q=="number"&&typeof X=="number"&&isNaN(Q)&&isNaN(X)},jD=function(Q,X){for(var se=Q.length,ae=0;ae<se;){if(ag(Q[ae],X))return!0;ae++}return!1},H_=Array.isArray||function(z){return Object.prototype.toString.call(z)==="[object Array]"},Hh={},W_={},Ou={INDEXEDDB:Ne,WEBSQL:Pe,LOCALSTORAGE:ar},zD=[Ou.INDEXEDDB._driver,Ou.WEBSQL._driver,Ou.LOCALSTORAGE._driver],og=["dropInstance"],Cy=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(og),UD={description:"",driver:zD.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function qD(z,Q){z[Q]=function(){var X=arguments;return z.ready().then(function(){return z[Q].apply(z,X)})}}function Ty(){for(var z=1;z<arguments.length;z++){var Q=arguments[z];if(Q)for(var X in Q)Q.hasOwnProperty(X)&&(H_(Q[X])?arguments[0][X]=Q[X].slice():arguments[0][X]=Q[X])}return arguments[0]}var HD=function(){function z(Q){a(this,z);for(var X in Ou)if(Ou.hasOwnProperty(X)){var se=Ou[X],ae=se._driver;this[X]=ae,Hh[ae]||this.defineDriver(se)}this._defaultConfig=Ty({},UD),this._config=Ty({},this._defaultConfig,Q),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return z.prototype.config=function(X){if((typeof X>"u"?"undefined":s(X))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var se in X){if(se==="storeName"&&(X[se]=X[se].replace(/\W/g,"_")),se==="version"&&typeof X[se]!="number")return new Error("Database version must be a number.");this._config[se]=X[se]}return"driver"in X&&X.driver?this.setDriver(this._config.driver):!0}else return typeof X=="string"?this._config[X]:this._config},z.prototype.defineDriver=function(X,se,ae){var ie=new h(function(ve,we){try{var Se=X._driver,Ce=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!X._driver){we(Ce);return}for(var ke=Cy.concat("_initStorage"),He=0,st=ke.length;He<st;He++){var _t=ke[He],At=!jD(og,_t);if((At||X[_t])&&typeof X[_t]!="function"){we(Ce);return}}var cn=function(){for(var Wh=function(VD){return function(){var GD=new Error("Method "+VD+" is not implemented by the current driver"),$_=h.reject(GD);return f($_,arguments[arguments.length-1]),$_}},ky=0,$D=og.length;ky<$D;ky++){var Dy=og[ky];X[Dy]||(X[Dy]=Wh(Dy))}};cn();var nn=function(Wh){Hh[Se]&&console.info("Redefining LocalForage driver: "+Se),Hh[Se]=X,W_[Se]=Wh,ve()};"_support"in X?X._support&&typeof X._support=="function"?X._support().then(nn,we):nn(!!X._support):nn(!0)}catch(or){we(or)}});return d(ie,se,ae),ie},z.prototype.driver=function(){return this._driver||null},z.prototype.getDriver=function(X,se,ae){var ie=Hh[X]?h.resolve(Hh[X]):h.reject(new Error("Driver not found."));return d(ie,se,ae),ie},z.prototype.getSerializer=function(X){var se=h.resolve(ye);return d(se,X),se},z.prototype.ready=function(X){var se=this,ae=se._driverSet.then(function(){return se._ready===null&&(se._ready=se._initDriver()),se._ready});return d(ae,X,X),ae},z.prototype.setDriver=function(X,se,ae){var ie=this;H_(X)||(X=[X]);var ve=this._getSupportedDrivers(X);function we(){ie._config.driver=ie.driver()}function Se(He){return ie._extend(He),we(),ie._ready=ie._initStorage(ie._config),ie._ready}function Ce(He){return function(){var st=0;function _t(){for(;st<He.length;){var At=He[st];return st++,ie._dbInfo=null,ie._ready=null,ie.getDriver(At).then(Se).catch(_t)}we();var cn=new Error("No available storage method found.");return ie._driverSet=h.reject(cn),ie._driverSet}return _t()}}var ke=this._driverSet!==null?this._driverSet.catch(function(){return h.resolve()}):h.resolve();return this._driverSet=ke.then(function(){var He=ve[0];return ie._dbInfo=null,ie._ready=null,ie.getDriver(He).then(function(st){ie._driver=st._driver,we(),ie._wrapLibraryMethodsWithReady(),ie._initDriver=Ce(ve)})}).catch(function(){we();var He=new Error("No available storage method found.");return ie._driverSet=h.reject(He),ie._driverSet}),d(this._driverSet,se,ae),this._driverSet},z.prototype.supports=function(X){return!!W_[X]},z.prototype._extend=function(X){Ty(this,X)},z.prototype._getSupportedDrivers=function(X){for(var se=[],ae=0,ie=X.length;ae<ie;ae++){var ve=X[ae];this.supports(ve)&&se.push(ve)}return se},z.prototype._wrapLibraryMethodsWithReady=function(){for(var X=0,se=Cy.length;X<se;X++)qD(this,Cy[X])},z.prototype.createInstance=function(X){return new z(X)},z}(),WD=new HD;n.exports=WD},{3:3}]},{},[4])(4)})})(SD);var JF=SD.exports;const dA=zo(JF);class CD{constructor(e,t,n){this.urlCache={},this.storage=void 0,this.name=e,this.requester=t||gd,this.resolver=n,this.online=!0,this.checkRequirements(),this.addListeners()}checkRequirements(){try{let e;typeof dA>"u"&&(e=dA),this.storage=e.createInstance({name:this.name})}catch{throw new Error("localForage lib not loaded")}}addListeners(){this._status=this.status.bind(this),window.addEventListener("online",this._status),window.addEventListener("offline",this._status)}removeListeners(){window.removeEventListener("online",this._status),window.removeEventListener("offline",this._status),this._status=void 0}status(e){let t=navigator.onLine;this.online=t,t?this.emit("online",this):this.emit("offline",this)}add(e,t){let n=e.resources.map(r=>{let{href:s}=r,a=this.resolver(s),o=window.encodeURIComponent(a);return this.storage.getItem(o).then(l=>!l||t?this.requester(a,"binary").then(u=>this.storage.setItem(o,u)):l)});return Promise.all(n)}put(e,t,n){let r=window.encodeURIComponent(e);return this.storage.getItem(r).then(s=>s||this.requester(e,"binary",t,n).then(a=>this.storage.setItem(r,a)))}request(e,t,n,r){return this.online?this.requester(e,t,n,r).then(s=>(this.put(e),s)):this.retrieve(e,t)}retrieve(e,t){new dt;var n,r=new Oa(e);return t||(t=r.extension),t=="blob"?n=this.getBlob(e):n=this.getText(e),n.then(s=>{var a=new dt,o;return s?(o=this.handleResponse(s,t),a.resolve(o)):a.reject({message:"File not found in storage: "+e,stack:new Error().stack}),a.promise})}handleResponse(e,t){var n;return t=="json"?n=JSON.parse(e):pd(t)?n=Ps(e,"text/xml"):t=="xhtml"?n=Ps(e,"application/xhtml+xml"):t=="html"||t=="htm"?n=Ps(e,"text/html"):n=e,n}getBlob(e,t){let n=window.encodeURIComponent(e);return this.storage.getItem(n).then(function(r){if(r)return t=t||mc.lookup(e),new Blob([r],{type:t})})}getText(e,t){let n=window.encodeURIComponent(e);return t=t||mc.lookup(e),this.storage.getItem(n).then(function(r){var s=new dt,a=new FileReader,o;if(r)return o=new Blob([r],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsText(o,t),s.promise})}getBase64(e,t){let n=window.encodeURIComponent(e);return t=t||mc.lookup(e),this.storage.getItem(n).then(r=>{var s=new dt,a=new FileReader,o;if(r)return o=new Blob([r],{type:t}),a.addEventListener("loadend",()=>{s.resolve(a.result)}),a.readAsDataURL(o,t),s.promise})}createUrl(e,t){var n=new dt,r=window.URL||window.webkitURL||window.mozURL,s,a,o=t&&t.base64;return e in this.urlCache?(n.resolve(this.urlCache[e]),n.promise):(o?(a=this.getBase64(e),a&&a.then((function(l){this.urlCache[e]=l,n.resolve(l)}).bind(this))):(a=this.getBlob(e),a&&a.then((function(l){s=r.createObjectURL(l),this.urlCache[e]=s,n.resolve(s)}).bind(this))),a||n.reject({message:"File not found in storage: "+e,stack:new Error().stack}),n.promise)}revokeUrl(e){var t=window.URL||window.webkitURL||window.mozURL,n=this.urlCache[e];n&&t.revokeObjectURL(n)}destroy(){var e=window.URL||window.webkitURL||window.mozURL;for(let t in this.urlCache)e.revokeObjectURL(t);this.urlCache={},this.removeListeners()}}Is(CD.prototype);class S0{constructor(e){this.interactive="",this.fixedLayout="",this.openToSpread="",this.orientationLock="",e&&this.parse(e)}parse(e){if(!e)return this;const t=Ot(e,"display_options");return t?(Da(t,"option").forEach(r=>{let s="";switch(r.childNodes.length&&(s=r.childNodes[0].nodeValue),r.attributes.name.value){case"interactive":this.interactive=s;break;case"fixed-layout":this.fixedLayout=s;break;case"open-to-spread":this.openToSpread=s;break;case"orientation-lock":this.orientationLock=s;break}}),this):this}destroy(){this.interactive=void 0,this.fixedLayout=void 0,this.openToSpread=void 0,this.orientationLock=void 0}}const pA="META-INF/container.xml",e4="META-INF/com.apple.ibooks.display-options.xml",Nr={BINARY:"binary",BASE64:"base64",EPUB:"epub",OPF:"opf",MANIFEST:"json",DIRECTORY:"directory"};class L_{constructor(e,t){typeof t>"u"&&typeof e!="string"&&!(e instanceof Blob)&&!(e instanceof ArrayBuffer)&&(t=e,e=void 0),this.settings=Wn(this.settings||{},{requestMethod:void 0,requestCredentials:void 0,requestHeaders:void 0,encoding:void 0,replacements:void 0,canonical:void 0,openAs:void 0,store:void 0}),Wn(this.settings,t),this.opening=new dt,this.opened=this.opening.promise,this.isOpen=!1,this.loading={manifest:new dt,spine:new dt,metadata:new dt,cover:new dt,navigation:new dt,pageList:new dt,resources:new dt,displayOptions:new dt},this.loaded={manifest:this.loading.manifest.promise,spine:this.loading.spine.promise,metadata:this.loading.metadata.promise,cover:this.loading.cover.promise,navigation:this.loading.navigation.promise,pageList:this.loading.pageList.promise,resources:this.loading.resources.promise,displayOptions:this.loading.displayOptions.promise},this.ready=Promise.all([this.loaded.manifest,this.loaded.spine,this.loaded.metadata,this.loaded.cover,this.loaded.navigation,this.loaded.resources,this.loaded.displayOptions]),this.isRendered=!1,this.request=this.settings.requestMethod||gd,this.spine=new EM,this.locations=new uD(this.spine,this.load.bind(this)),this.navigation=void 0,this.pageList=void 0,this.url=void 0,this.path=void 0,this.archived=!1,this.archive=void 0,this.storage=void 0,this.resources=void 0,this.rendition=void 0,this.container=void 0,this.packaging=void 0,this.displayOptions=void 0,this.settings.store&&this.store(this.settings.store),e&&this.open(e,this.settings.openAs).catch(n=>{var r=new Error("Cannot load book at "+e);this.emit(Re.BOOK.OPEN_FAILED,r)})}open(e,t){var n,r=t||this.determineType(e);return r===Nr.BINARY?(this.archived=!0,this.url=new Ir("/",""),n=this.openEpub(e)):r===Nr.BASE64?(this.archived=!0,this.url=new Ir("/",""),n=this.openEpub(e,r)):r===Nr.EPUB?(this.archived=!0,this.url=new Ir("/",""),n=this.request(e,"binary",this.settings.requestCredentials,this.settings.requestHeaders).then(this.openEpub.bind(this))):r==Nr.OPF?(this.url=new Ir(e),n=this.openPackaging(this.url.Path.toString())):r==Nr.MANIFEST?(this.url=new Ir(e),n=this.openManifest(this.url.Path.toString())):(this.url=new Ir(e),n=this.openContainer(pA).then(this.openPackaging.bind(this))),n}openEpub(e,t){return this.unarchive(e,t||this.settings.encoding).then(()=>this.openContainer(pA)).then(n=>this.openPackaging(n))}openContainer(e){return this.load(e).then(t=>(this.container=new AM(t),this.resolve(this.container.packagePath)))}openPackaging(e){return this.path=new Oa(e),this.load(e).then(t=>(this.packaging=new sA(t),this.unpack(this.packaging)))}openManifest(e){return this.path=new Oa(e),this.load(e).then(t=>(this.packaging=new sA,this.packaging.load(t),this.unpack(this.packaging)))}load(e){var t=this.resolve(e);return this.archived?this.archive.request(t):this.request(t,null,this.settings.requestCredentials,this.settings.requestHeaders)}resolve(e,t){if(e){var n=e,r=e.indexOf("://")>-1;return r?e:(this.path&&(n=this.path.resolve(e)),t!=!1&&this.url&&(n=this.url.resolve(n)),n)}}canonical(e){var t=e;return e?(this.settings.canonical?t=this.settings.canonical(e):t=this.resolve(e,!0),t):""}determineType(e){var t,n,r;if(this.settings.encoding==="base64")return Nr.BASE64;if(typeof e!="string")return Nr.BINARY;if(t=new Ir(e),n=t.path(),r=n.extension,r&&(r=r.replace(/\?.*$/,"")),!r)return Nr.DIRECTORY;if(r==="epub")return Nr.EPUB;if(r==="opf")return Nr.OPF;if(r==="json")return Nr.MANIFEST}unpack(e){this.package=e,this.packaging.metadata.layout===""?this.load(this.url.resolve(e4)).then(t=>{this.displayOptions=new S0(t),this.loading.displayOptions.resolve(this.displayOptions)}).catch(t=>{this.displayOptions=new S0,this.loading.displayOptions.resolve(this.displayOptions)}):(this.displayOptions=new S0,this.loading.displayOptions.resolve(this.displayOptions)),this.spine.unpack(this.packaging,this.resolve.bind(this),this.canonical.bind(this)),this.resources=new TM(this.packaging.manifest,{archive:this.archive,resolver:this.resolve.bind(this),request:this.request.bind(this),replacements:this.settings.replacements||(this.archived?"blobUrl":"base64")}),this.loadNavigation(this.packaging).then(()=>{this.loading.navigation.resolve(this.navigation)}),this.packaging.coverPath&&(this.cover=this.resolve(this.packaging.coverPath)),this.loading.manifest.resolve(this.packaging.manifest),this.loading.metadata.resolve(this.packaging.metadata),this.loading.spine.resolve(this.spine),this.loading.cover.resolve(this.cover),this.loading.resources.resolve(this.resources),this.loading.pageList.resolve(this.pageList),this.isOpen=!0,this.archived||this.settings.replacements&&this.settings.replacements!="none"?this.replacements().then(()=>{this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}).catch(t=>{console.error(t)}):this.loaded.displayOptions.then(()=>{this.opening.resolve(this)})}loadNavigation(e){let t=e.navPath||e.ncxPath,n=e.toc;return n?new Promise((r,s)=>{this.navigation=new E0(n),e.pageList&&(this.pageList=new A0(e.pageList)),r(this.navigation)}):t?this.load(t,"xml").then(r=>(this.navigation=new E0(r),this.pageList=new A0(r),this.navigation)):new Promise((r,s)=>{this.navigation=new E0,this.pageList=new A0,r(this.navigation)})}section(e){return this.spine.get(e)}renderTo(e,t){return this.rendition=new P_(this,t),this.rendition.attachTo(e),this.rendition}setRequestCredentials(e){this.settings.requestCredentials=e}setRequestHeaders(e){this.settings.requestHeaders=e}unarchive(e,t){return this.archive=new QF,this.archive.open(e,t)}store(e){let t=this.settings.replacements&&this.settings.replacements!=="none",n=this.url,r=this.settings.requestMethod||gd.bind(this);return this.storage=new CD(e,r,this.resolve.bind(this)),this.request=this.storage.request.bind(this.storage),this.opened.then(()=>{this.archived&&(this.storage.requester=this.archive.request.bind(this.archive));let s=(a,o)=>{o.output=this.resources.substitute(a,o.url)};this.resources.settings.replacements=t||"blobUrl",this.resources.replacements().then(()=>this.resources.replaceCss()),this.storage.on("offline",()=>{this.url=new Ir("/",""),this.spine.hooks.serialize.register(s)}),this.storage.on("online",()=>{this.url=n,this.spine.hooks.serialize.deregister(s)})}),this.storage}coverUrl(){return this.loaded.cover.then(()=>this.cover?this.archived?this.archive.createUrl(this.cover):this.cover:null)}replacements(){return this.spine.hooks.serialize.register((e,t)=>{t.output=this.resources.substitute(e,t.url)}),this.resources.replacements().then(()=>this.resources.replaceCss())}getRange(e){var t=new pt(e),n=this.spine.get(t.spinePos),r=this.load.bind(this);return n?n.load(r).then(function(s){var a=t.toRange(n.document);return a}):new Promise((s,a)=>{a("CFI could not be found")})}key(e){var t=e||this.packaging.metadata.identifier||this.url.filename;return`epubjs:${vy}:${t}`}destroy(){this.opened=void 0,this.loading=void 0,this.loaded=void 0,this.ready=void 0,this.isOpen=!1,this.isRendered=!1,this.spine&&this.spine.destroy(),this.locations&&this.locations.destroy(),this.pageList&&this.pageList.destroy(),this.archive&&this.archive.destroy(),this.resources&&this.resources.destroy(),this.container&&this.container.destroy(),this.packaging&&this.packaging.destroy(),this.rendition&&this.rendition.destroy(),this.displayOptions&&this.displayOptions.destroy(),this.spine=void 0,this.locations=void 0,this.pageList=void 0,this.archive=void 0,this.resources=void 0,this.container=void 0,this.packaging=void 0,this.rendition=void 0,this.navigation=void 0,this.url=void 0,this.path=void 0,this.archived=!1}}Is(L_.prototype);function Tu(i,e){return new L_(i,e)}Tu.VERSION=vy;typeof global<"u"&&(global.EPUBJS_VERSION=vy);Tu.Book=L_;Tu.Rendition=P_;Tu.Contents=O_;Tu.CFI=pt;Tu.utils=pM;function t4({url:i,initialCfi:e,onLocation:t}){const n=gt.useRef(null),r=gt.useRef(null),s=gt.useRef(null),[a,o]=gt.useState(110),[l,u]=gt.useState("dark");gt.useEffect(()=>{let f=!0;return(async()=>{if(!n.current)return;n.current.innerHTML="";const d=Tu(i);r.current=d;const y=d.renderTo(n.current,{width:"100%",height:"100%",flow:"paginated",spread:"none"});s.current=y,y.themes.register("light",{body:{background:"#ffffff",color:"#111827"}}),y.themes.register("sepia",{body:{background:"#f3e7d3",color:"#1f2937"}}),y.themes.register("dark",{body:{background:"#0b1020",color:"#e5e7eb"}}),y.themes.select(l),y.themes.fontSize(`${a}%`),y.on("relocated",b=>{var g;if(!f)return;const v=(g=b==null?void 0:b.start)==null?void 0:g.cfi;v&&t(v)}),await y.display(e??void 0)})(),()=>{var d,y;f=!1;try{(d=s.current)==null||d.destroy()}catch{}try{(y=r.current)==null||y.destroy()}catch{}s.current=null,r.current=null}},[i]),gt.useEffect(()=>{s.current&&s.current.themes.fontSize(`${a}%`)},[a]),gt.useEffect(()=>{s.current&&s.current.themes.select(l)},[l]);function c(){var f;(f=s.current)==null||f.prev()}function h(){var f;(f=s.current)==null||f.next()}return ue.jsxs("div",{style:{height:"100%"},children:[ue.jsxs("div",{className:"row",style:{padding:12,justifyContent:"space-between"},children:[ue.jsxs("div",{className:"row",children:[ue.jsx("button",{className:"btn",onClick:c,children:""}),ue.jsx("button",{className:"btn",onClick:h,children:""})]}),ue.jsxs("div",{className:"row",children:[ue.jsx("label",{className:"small",children:"Size"}),ue.jsx("input",{type:"range",min:85,max:160,value:a,onChange:f=>o(Number(f.target.value))}),ue.jsxs("select",{className:"select",value:l,onChange:f=>u(f.target.value),children:[ue.jsx("option",{value:"dark",children:"Dark"}),ue.jsx("option",{value:"sepia",children:"Sepia"}),ue.jsx("option",{value:"light",children:"Light"})]})]})]}),ue.jsx("div",{ref:n,style:{height:"calc(100% - 58px)"}})]})}function n4(){this.__data__=[],this.size=0}var i4=n4;function r4(i,e){return i===e||i!==i&&e!==e}var TD=r4,s4=TD;function a4(i,e){for(var t=i.length;t--;)if(s4(i[t][0],e))return t;return-1}var _y=a4,o4=_y,l4=Array.prototype,u4=l4.splice;function c4(i){var e=this.__data__,t=o4(e,i);if(t<0)return!1;var n=e.length-1;return t==n?e.pop():u4.call(e,t,1),--this.size,!0}var h4=c4,f4=_y;function d4(i){var e=this.__data__,t=f4(e,i);return t<0?void 0:e[t][1]}var p4=d4,g4=_y;function m4(i){return g4(this.__data__,i)>-1}var v4=m4,y4=_y;function b4(i,e){var t=this.__data__,n=y4(t,i);return n<0?(++this.size,t.push([i,e])):t[n][1]=e,this}var w4=b4,_4=i4,E4=h4,A4=p4,x4=v4,S4=w4;function Fh(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}Fh.prototype.clear=_4;Fh.prototype.delete=E4;Fh.prototype.get=A4;Fh.prototype.has=x4;Fh.prototype.set=S4;var Ey=Fh,C4=Ey;function T4(){this.__data__=new C4,this.size=0}var k4=T4;function D4(i){var e=this.__data__,t=e.delete(i);return this.size=e.size,t}var O4=D4;function N4(i){return this.__data__.get(i)}var R4=N4;function P4(i){return this.__data__.has(i)}var L4=P4,I4=rg,M4=ig,F4="[object AsyncFunction]",B4="[object Function]",j4="[object GeneratorFunction]",z4="[object Proxy]";function U4(i){if(!M4(i))return!1;var e=I4(i);return e==B4||e==j4||e==F4||e==z4}var kD=U4,q4=Ms,H4=q4["__core-js_shared__"],W4=H4,C0=W4,gA=function(){var i=/[^.]+$/.exec(C0&&C0.keys&&C0.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function $4(i){return!!gA&&gA in i}var V4=$4,G4=Function.prototype,X4=G4.toString;function K4(i){if(i!=null){try{return X4.call(i)}catch{}try{return i+""}catch{}}return""}var DD=K4,Y4=kD,Z4=V4,Q4=ig,J4=DD,eB=/[\\^$.*+?()[\]{}|]/g,tB=/^\[object .+?Constructor\]$/,nB=Function.prototype,iB=Object.prototype,rB=nB.toString,sB=iB.hasOwnProperty,aB=RegExp("^"+rB.call(sB).replace(eB,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function oB(i){if(!Q4(i)||Z4(i))return!1;var e=Y4(i)?aB:tB;return e.test(J4(i))}var lB=oB;function uB(i,e){return i==null?void 0:i[e]}var cB=uB,hB=lB,fB=cB;function dB(i,e){var t=fB(i,e);return hB(t)?t:void 0}var Bh=dB,pB=Bh,gB=Ms,mB=pB(gB,"Map"),I_=mB,vB=Bh,yB=vB(Object,"create"),Ay=yB,mA=Ay;function bB(){this.__data__=mA?mA(null):{},this.size=0}var wB=bB;function _B(i){var e=this.has(i)&&delete this.__data__[i];return this.size-=e?1:0,e}var EB=_B,AB=Ay,xB="__lodash_hash_undefined__",SB=Object.prototype,CB=SB.hasOwnProperty;function TB(i){var e=this.__data__;if(AB){var t=e[i];return t===xB?void 0:t}return CB.call(e,i)?e[i]:void 0}var kB=TB,DB=Ay,OB=Object.prototype,NB=OB.hasOwnProperty;function RB(i){var e=this.__data__;return DB?e[i]!==void 0:NB.call(e,i)}var PB=RB,LB=Ay,IB="__lodash_hash_undefined__";function MB(i,e){var t=this.__data__;return this.size+=this.has(i)?0:1,t[i]=LB&&e===void 0?IB:e,this}var FB=MB,BB=wB,jB=EB,zB=kB,UB=PB,qB=FB;function jh(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}jh.prototype.clear=BB;jh.prototype.delete=jB;jh.prototype.get=zB;jh.prototype.has=UB;jh.prototype.set=qB;var HB=jh,vA=HB,WB=Ey,$B=I_;function VB(){this.size=0,this.__data__={hash:new vA,map:new($B||WB),string:new vA}}var GB=VB;function XB(i){var e=typeof i;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?i!=="__proto__":i===null}var KB=XB,YB=KB;function ZB(i,e){var t=i.__data__;return YB(e)?t[typeof e=="string"?"string":"hash"]:t.map}var xy=ZB,QB=xy;function JB(i){var e=QB(this,i).delete(i);return this.size-=e?1:0,e}var e5=JB,t5=xy;function n5(i){return t5(this,i).get(i)}var i5=n5,r5=xy;function s5(i){return r5(this,i).has(i)}var a5=s5,o5=xy;function l5(i,e){var t=o5(this,i),n=t.size;return t.set(i,e),this.size+=t.size==n?0:1,this}var u5=l5,c5=GB,h5=e5,f5=i5,d5=a5,p5=u5;function zh(i){var e=-1,t=i==null?0:i.length;for(this.clear();++e<t;){var n=i[e];this.set(n[0],n[1])}}zh.prototype.clear=c5;zh.prototype.delete=h5;zh.prototype.get=f5;zh.prototype.has=d5;zh.prototype.set=p5;var OD=zh,g5=Ey,m5=I_,v5=OD,y5=200;function b5(i,e){var t=this.__data__;if(t instanceof g5){var n=t.__data__;if(!m5||n.length<y5-1)return n.push([i,e]),this.size=++t.size,this;t=this.__data__=new v5(n)}return t.set(i,e),this.size=t.size,this}var w5=b5,_5=Ey,E5=k4,A5=O4,x5=R4,S5=L4,C5=w5;function Uh(i){var e=this.__data__=new _5(i);this.size=e.size}Uh.prototype.clear=E5;Uh.prototype.delete=A5;Uh.prototype.get=x5;Uh.prototype.has=S5;Uh.prototype.set=C5;var T5=Uh,k5="__lodash_hash_undefined__";function D5(i){return this.__data__.set(i,k5),this}var O5=D5;function N5(i){return this.__data__.has(i)}var R5=N5,P5=OD,L5=O5,I5=R5;function yv(i){var e=-1,t=i==null?0:i.length;for(this.__data__=new P5;++e<t;)this.add(i[e])}yv.prototype.add=yv.prototype.push=L5;yv.prototype.has=I5;var M5=yv;function F5(i,e){for(var t=-1,n=i==null?0:i.length;++t<n;)if(e(i[t],t,i))return!0;return!1}var B5=F5;function j5(i,e){return i.has(e)}var z5=j5,U5=M5,q5=B5,H5=z5,W5=1,$5=2;function V5(i,e,t,n,r,s){var a=t&W5,o=i.length,l=e.length;if(o!=l&&!(a&&l>o))return!1;var u=s.get(i),c=s.get(e);if(u&&c)return u==e&&c==i;var h=-1,f=!0,d=t&$5?new U5:void 0;for(s.set(i,e),s.set(e,i);++h<o;){var y=i[h],b=e[h];if(n)var v=a?n(b,y,h,e,i,s):n(y,b,h,i,e,s);if(v!==void 0){if(v)continue;f=!1;break}if(d){if(!q5(e,function(g,m){if(!H5(d,m)&&(y===g||r(y,g,t,n,s)))return d.push(m)})){f=!1;break}}else if(!(y===b||r(y,b,t,n,s))){f=!1;break}}return s.delete(i),s.delete(e),f}var ND=V5,G5=Ms,X5=G5.Uint8Array,K5=X5;function Y5(i){var e=-1,t=Array(i.size);return i.forEach(function(n,r){t[++e]=[r,n]}),t}var Z5=Y5;function Q5(i){var e=-1,t=Array(i.size);return i.forEach(function(n){t[++e]=n}),t}var J5=Q5,yA=R_,bA=K5,e8=TD,t8=ND,n8=Z5,i8=J5,r8=1,s8=2,a8="[object Boolean]",o8="[object Date]",l8="[object Error]",u8="[object Map]",c8="[object Number]",h8="[object RegExp]",f8="[object Set]",d8="[object String]",p8="[object Symbol]",g8="[object ArrayBuffer]",m8="[object DataView]",wA=yA?yA.prototype:void 0,T0=wA?wA.valueOf:void 0;function v8(i,e,t,n,r,s,a){switch(t){case m8:if(i.byteLength!=e.byteLength||i.byteOffset!=e.byteOffset)return!1;i=i.buffer,e=e.buffer;case g8:return!(i.byteLength!=e.byteLength||!s(new bA(i),new bA(e)));case a8:case o8:case c8:return e8(+i,+e);case l8:return i.name==e.name&&i.message==e.message;case h8:case d8:return i==e+"";case u8:var o=n8;case f8:var l=n&r8;if(o||(o=i8),i.size!=e.size&&!l)return!1;var u=a.get(i);if(u)return u==e;n|=s8,a.set(i,e);var c=t8(o(i),o(e),n,r,s,a);return a.delete(i),c;case p8:if(T0)return T0.call(i)==T0.call(e)}return!1}var y8=v8;function b8(i,e){for(var t=-1,n=e.length,r=i.length;++t<n;)i[r+t]=e[t];return i}var w8=b8,_8=Array.isArray,M_=_8,E8=w8,A8=M_;function x8(i,e,t){var n=e(i);return A8(i)?n:E8(n,t(i))}var S8=x8;function C8(i,e){for(var t=-1,n=i==null?0:i.length,r=0,s=[];++t<n;){var a=i[t];e(a,t,i)&&(s[r++]=a)}return s}var T8=C8;function k8(){return[]}var D8=k8,O8=T8,N8=D8,R8=Object.prototype,P8=R8.propertyIsEnumerable,_A=Object.getOwnPropertySymbols,L8=_A?function(i){return i==null?[]:(i=Object(i),O8(_A(i),function(e){return P8.call(i,e)}))}:N8,I8=L8;function M8(i,e){for(var t=-1,n=Array(i);++t<i;)n[t]=e(t);return n}var F8=M8,B8=rg,j8=sg,z8="[object Arguments]";function U8(i){return j8(i)&&B8(i)==z8}var q8=U8,EA=q8,H8=sg,RD=Object.prototype,W8=RD.hasOwnProperty,$8=RD.propertyIsEnumerable,V8=EA(function(){return arguments}())?EA:function(i){return H8(i)&&W8.call(i,"callee")&&!$8.call(i,"callee")},G8=V8,bv={exports:{}};function X8(){return!1}var K8=X8;bv.exports;(function(i,e){var t=Ms,n=K8,r=e&&!e.nodeType&&e,s=r&&!0&&i&&!i.nodeType&&i,a=s&&s.exports===r,o=a?t.Buffer:void 0,l=o?o.isBuffer:void 0,u=l||n;i.exports=u})(bv,bv.exports);var PD=bv.exports,Y8=9007199254740991,Z8=/^(?:0|[1-9]\d*)$/;function Q8(i,e){var t=typeof i;return e=e??Y8,!!e&&(t=="number"||t!="symbol"&&Z8.test(i))&&i>-1&&i%1==0&&i<e}var J8=Q8,e6=9007199254740991;function t6(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=e6}var LD=t6,n6=rg,i6=LD,r6=sg,s6="[object Arguments]",a6="[object Array]",o6="[object Boolean]",l6="[object Date]",u6="[object Error]",c6="[object Function]",h6="[object Map]",f6="[object Number]",d6="[object Object]",p6="[object RegExp]",g6="[object Set]",m6="[object String]",v6="[object WeakMap]",y6="[object ArrayBuffer]",b6="[object DataView]",w6="[object Float32Array]",_6="[object Float64Array]",E6="[object Int8Array]",A6="[object Int16Array]",x6="[object Int32Array]",S6="[object Uint8Array]",C6="[object Uint8ClampedArray]",T6="[object Uint16Array]",k6="[object Uint32Array]",Ft={};Ft[w6]=Ft[_6]=Ft[E6]=Ft[A6]=Ft[x6]=Ft[S6]=Ft[C6]=Ft[T6]=Ft[k6]=!0;Ft[s6]=Ft[a6]=Ft[y6]=Ft[o6]=Ft[b6]=Ft[l6]=Ft[u6]=Ft[c6]=Ft[h6]=Ft[f6]=Ft[d6]=Ft[p6]=Ft[g6]=Ft[m6]=Ft[v6]=!1;function D6(i){return r6(i)&&i6(i.length)&&!!Ft[n6(i)]}var O6=D6;function N6(i){return function(e){return i(e)}}var R6=N6,wv={exports:{}};wv.exports;(function(i,e){var t=_D,n=e&&!e.nodeType&&e,r=n&&!0&&i&&!i.nodeType&&i,s=r&&r.exports===n,a=s&&t.process,o=function(){try{var l=r&&r.require&&r.require("util").types;return l||a&&a.binding&&a.binding("util")}catch{}}();i.exports=o})(wv,wv.exports);var P6=wv.exports,L6=O6,I6=R6,AA=P6,xA=AA&&AA.isTypedArray,M6=xA?I6(xA):L6,ID=M6,F6=F8,B6=G8,j6=M_,z6=PD,U6=J8,q6=ID,H6=Object.prototype,W6=H6.hasOwnProperty;function $6(i,e){var t=j6(i),n=!t&&B6(i),r=!t&&!n&&z6(i),s=!t&&!n&&!r&&q6(i),a=t||n||r||s,o=a?F6(i.length,String):[],l=o.length;for(var u in i)(e||W6.call(i,u))&&!(a&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||U6(u,l)))&&o.push(u);return o}var V6=$6,G6=Object.prototype;function X6(i){var e=i&&i.constructor,t=typeof e=="function"&&e.prototype||G6;return i===t}var K6=X6;function Y6(i,e){return function(t){return i(e(t))}}var Z6=Y6,Q6=Z6,J6=Q6(Object.keys,Object),ej=J6,tj=K6,nj=ej,ij=Object.prototype,rj=ij.hasOwnProperty;function sj(i){if(!tj(i))return nj(i);var e=[];for(var t in Object(i))rj.call(i,t)&&t!="constructor"&&e.push(t);return e}var aj=sj,oj=kD,lj=LD;function uj(i){return i!=null&&lj(i.length)&&!oj(i)}var cj=uj,hj=V6,fj=aj,dj=cj;function pj(i){return dj(i)?hj(i):fj(i)}var gj=pj,mj=S8,vj=I8,yj=gj;function bj(i){return mj(i,yj,vj)}var wj=bj,SA=wj,_j=1,Ej=Object.prototype,Aj=Ej.hasOwnProperty;function xj(i,e,t,n,r,s){var a=t&_j,o=SA(i),l=o.length,u=SA(e),c=u.length;if(l!=c&&!a)return!1;for(var h=l;h--;){var f=o[h];if(!(a?f in e:Aj.call(e,f)))return!1}var d=s.get(i),y=s.get(e);if(d&&y)return d==e&&y==i;var b=!0;s.set(i,e),s.set(e,i);for(var v=a;++h<l;){f=o[h];var g=i[f],m=e[f];if(n)var w=a?n(m,g,f,e,i,s):n(g,m,f,i,e,s);if(!(w===void 0?g===m||r(g,m,t,n,s):w)){b=!1;break}v||(v=f=="constructor")}if(b&&!v){var _=i.constructor,E=e.constructor;_!=E&&"constructor"in i&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof E=="function"&&E instanceof E)&&(b=!1)}return s.delete(i),s.delete(e),b}var Sj=xj,Cj=Bh,Tj=Ms,kj=Cj(Tj,"DataView"),Dj=kj,Oj=Bh,Nj=Ms,Rj=Oj(Nj,"Promise"),Pj=Rj,Lj=Bh,Ij=Ms,Mj=Lj(Ij,"Set"),Fj=Mj,Bj=Bh,jj=Ms,zj=Bj(jj,"WeakMap"),Uj=zj,J1=Dj,ew=I_,tw=Pj,nw=Fj,iw=Uj,MD=rg,qh=DD,CA="[object Map]",qj="[object Object]",TA="[object Promise]",kA="[object Set]",DA="[object WeakMap]",OA="[object DataView]",Hj=qh(J1),Wj=qh(ew),$j=qh(tw),Vj=qh(nw),Gj=qh(iw),Jo=MD;(J1&&Jo(new J1(new ArrayBuffer(1)))!=OA||ew&&Jo(new ew)!=CA||tw&&Jo(tw.resolve())!=TA||nw&&Jo(new nw)!=kA||iw&&Jo(new iw)!=DA)&&(Jo=function(i){var e=MD(i),t=e==qj?i.constructor:void 0,n=t?qh(t):"";if(n)switch(n){case Hj:return OA;case Wj:return CA;case $j:return TA;case Vj:return kA;case Gj:return DA}return e});var Xj=Jo,k0=T5,Kj=ND,Yj=y8,Zj=Sj,NA=Xj,RA=M_,PA=PD,Qj=ID,Jj=1,LA="[object Arguments]",IA="[object Array]",Ng="[object Object]",ez=Object.prototype,MA=ez.hasOwnProperty;function tz(i,e,t,n,r,s){var a=RA(i),o=RA(e),l=a?IA:NA(i),u=o?IA:NA(e);l=l==LA?Ng:l,u=u==LA?Ng:u;var c=l==Ng,h=u==Ng,f=l==u;if(f&&PA(i)){if(!PA(e))return!1;a=!0,c=!1}if(f&&!c)return s||(s=new k0),a||Qj(i)?Kj(i,e,t,n,r,s):Yj(i,e,l,t,n,r,s);if(!(t&Jj)){var d=c&&MA.call(i,"__wrapped__"),y=h&&MA.call(e,"__wrapped__");if(d||y){var b=d?i.value():i,v=y?e.value():e;return s||(s=new k0),r(b,v,t,n,s)}}return f?(s||(s=new k0),Zj(i,e,t,n,r,s)):!1}var nz=tz,iz=nz,FA=sg;function FD(i,e,t,n,r){return i===e?!0:i==null||e==null||!FA(i)&&!FA(e)?i!==i&&e!==e:iz(i,e,t,n,FD,r)}var rz=FD,sz=rz;function az(i,e){return sz(i,e)}var oz=az,BD={exports:{}};/*!
 * Quill Editor v1.3.7
 * https://quilljs.com/
 * Copyright (c) 2014, Jason Chen
 * Copyright (c) 2013, salesforce.com
 */(function(i,e){(function(n,r){i.exports=r()})(typeof self<"u"?self:ln,function(){return function(t){var n={};function r(s){if(n[s])return n[s].exports;var a=n[s]={i:s,l:!1,exports:{}};return t[s].call(a.exports,a,a.exports,r),a.l=!0,a.exports}return r.m=t,r.c=n,r.d=function(s,a,o){r.o(s,a)||Object.defineProperty(s,a,{configurable:!1,enumerable:!0,get:o})},r.n=function(s){var a=s&&s.__esModule?function(){return s.default}:function(){return s};return r.d(a,"a",a),a},r.o=function(s,a){return Object.prototype.hasOwnProperty.call(s,a)},r.p="",r(r.s=109)}([function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(17),a=r(18),o=r(19),l=r(45),u=r(46),c=r(47),h=r(48),f=r(49),d=r(12),y=r(32),b=r(33),v=r(31),g=r(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:s.default,Format:a.default,Leaf:o.default,Embed:h.default,Scroll:l.default,Block:c.default,Inline:u.default,Text:f.default,Attributor:{Attribute:d.default,Class:y.default,Style:b.default,Store:v.default}};n.default=m},function(t,n,r){var s=this&&this.__extends||function(){var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(g,m){g.__proto__=m}||function(g,m){for(var w in m)m.hasOwnProperty(w)&&(g[w]=m[w])};return function(g,m){v(g,m);function w(){this.constructor=g}g.prototype=m===null?Object.create(m):(w.prototype=m.prototype,new w)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=function(v){s(g,v);function g(m){var w=this;return m="[Parchment] "+m,w=v.call(this,m)||this,w.message=m,w.name=w.constructor.name,w}return g}(Error);n.ParchmentError=a;var o={},l={},u={},c={};n.DATA_KEY="__blot";var h;(function(v){v[v.TYPE=3]="TYPE",v[v.LEVEL=12]="LEVEL",v[v.ATTRIBUTE=13]="ATTRIBUTE",v[v.BLOT=14]="BLOT",v[v.INLINE=7]="INLINE",v[v.BLOCK=11]="BLOCK",v[v.BLOCK_BLOT=10]="BLOCK_BLOT",v[v.INLINE_BLOT=6]="INLINE_BLOT",v[v.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",v[v.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",v[v.ANY=15]="ANY"})(h=n.Scope||(n.Scope={}));function f(v,g){var m=y(v);if(m==null)throw new a("Unable to create "+v+" blot");var w=m,_=v instanceof Node||v.nodeType===Node.TEXT_NODE?v:w.create(g);return new w(_,g)}n.create=f;function d(v,g){return g===void 0&&(g=!1),v==null?null:v[n.DATA_KEY]!=null?v[n.DATA_KEY].blot:g?d(v.parentNode,g):null}n.find=d;function y(v,g){g===void 0&&(g=h.ANY);var m;if(typeof v=="string")m=c[v]||o[v];else if(v instanceof Text||v.nodeType===Node.TEXT_NODE)m=c.text;else if(typeof v=="number")v&h.LEVEL&h.BLOCK?m=c.block:v&h.LEVEL&h.INLINE&&(m=c.inline);else if(v instanceof HTMLElement){var w=(v.getAttribute("class")||"").split(/\s+/);for(var _ in w)if(m=l[w[_]],m)break;m=m||u[v.tagName]}return m==null?null:g&h.LEVEL&m.scope&&g&h.TYPE&m.scope?m:null}n.query=y;function b(){for(var v=[],g=0;g<arguments.length;g++)v[g]=arguments[g];if(v.length>1)return v.map(function(_){return b(_)});var m=v[0];if(typeof m.blotName!="string"&&typeof m.attrName!="string")throw new a("Invalid definition");if(m.blotName==="abstract")throw new a("Cannot register abstract class");if(c[m.blotName||m.attrName]=m,typeof m.keyName=="string")o[m.keyName]=m;else if(m.className!=null&&(l[m.className]=m),m.tagName!=null){Array.isArray(m.tagName)?m.tagName=m.tagName.map(function(_){return _.toUpperCase()}):m.tagName=m.tagName.toUpperCase();var w=Array.isArray(m.tagName)?m.tagName:[m.tagName];w.forEach(function(_){(u[_]==null||m.className==null)&&(u[_]=m)})}return m}n.register=b},function(t,n,r){var s=r(51),a=r(11),o=r(3),l=r(20),u="\0",c=function(h){Array.isArray(h)?this.ops=h:h!=null&&Array.isArray(h.ops)?this.ops=h.ops:this.ops=[]};c.prototype.insert=function(h,f){var d={};return h.length===0?this:(d.insert=h,f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d))},c.prototype.delete=function(h){return h<=0?this:this.push({delete:h})},c.prototype.retain=function(h,f){if(h<=0)return this;var d={retain:h};return f!=null&&typeof f=="object"&&Object.keys(f).length>0&&(d.attributes=f),this.push(d)},c.prototype.push=function(h){var f=this.ops.length,d=this.ops[f-1];if(h=o(!0,{},h),typeof d=="object"){if(typeof h.delete=="number"&&typeof d.delete=="number")return this.ops[f-1]={delete:d.delete+h.delete},this;if(typeof d.delete=="number"&&h.insert!=null&&(f-=1,d=this.ops[f-1],typeof d!="object"))return this.ops.unshift(h),this;if(a(h.attributes,d.attributes)){if(typeof h.insert=="string"&&typeof d.insert=="string")return this.ops[f-1]={insert:d.insert+h.insert},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this;if(typeof h.retain=="number"&&typeof d.retain=="number")return this.ops[f-1]={retain:d.retain+h.retain},typeof h.attributes=="object"&&(this.ops[f-1].attributes=h.attributes),this}}return f===this.ops.length?this.ops.push(h):this.ops.splice(f,0,h),this},c.prototype.chop=function(){var h=this.ops[this.ops.length-1];return h&&h.retain&&!h.attributes&&this.ops.pop(),this},c.prototype.filter=function(h){return this.ops.filter(h)},c.prototype.forEach=function(h){this.ops.forEach(h)},c.prototype.map=function(h){return this.ops.map(h)},c.prototype.partition=function(h){var f=[],d=[];return this.forEach(function(y){var b=h(y)?f:d;b.push(y)}),[f,d]},c.prototype.reduce=function(h,f){return this.ops.reduce(h,f)},c.prototype.changeLength=function(){return this.reduce(function(h,f){return f.insert?h+l.length(f):f.delete?h-f.delete:h},0)},c.prototype.length=function(){return this.reduce(function(h,f){return h+l.length(f)},0)},c.prototype.slice=function(h,f){h=h||0,typeof f!="number"&&(f=1/0);for(var d=[],y=l.iterator(this.ops),b=0;b<f&&y.hasNext();){var v;b<h?v=y.next(h-b):(v=y.next(f-b),d.push(v)),b+=l.length(v)}return new c(d)},c.prototype.compose=function(h){var f=l.iterator(this.ops),d=l.iterator(h.ops),y=[],b=d.peek();if(b!=null&&typeof b.retain=="number"&&b.attributes==null){for(var v=b.retain;f.peekType()==="insert"&&f.peekLength()<=v;)v-=f.peekLength(),y.push(f.next());b.retain-v>0&&d.next(b.retain-v)}for(var g=new c(y);f.hasNext()||d.hasNext();)if(d.peekType()==="insert")g.push(d.next());else if(f.peekType()==="delete")g.push(f.next());else{var m=Math.min(f.peekLength(),d.peekLength()),w=f.next(m),_=d.next(m);if(typeof _.retain=="number"){var E={};typeof w.retain=="number"?E.retain=m:E.insert=w.insert;var x=l.attributes.compose(w.attributes,_.attributes,typeof w.retain=="number");if(x&&(E.attributes=x),g.push(E),!d.hasNext()&&a(g.ops[g.ops.length-1],E)){var A=new c(f.rest());return g.concat(A).chop()}}else typeof _.delete=="number"&&typeof w.retain=="number"&&g.push(_)}return g.chop()},c.prototype.concat=function(h){var f=new c(this.ops.slice());return h.ops.length>0&&(f.push(h.ops[0]),f.ops=f.ops.concat(h.ops.slice(1))),f},c.prototype.diff=function(h,f){if(this.ops===h.ops)return new c;var d=[this,h].map(function(m){return m.map(function(w){if(w.insert!=null)return typeof w.insert=="string"?w.insert:u;var _=m===h?"on":"with";throw new Error("diff() called "+_+" non-document")}).join("")}),y=new c,b=s(d[0],d[1],f),v=l.iterator(this.ops),g=l.iterator(h.ops);return b.forEach(function(m){for(var w=m[1].length;w>0;){var _=0;switch(m[0]){case s.INSERT:_=Math.min(g.peekLength(),w),y.push(g.next(_));break;case s.DELETE:_=Math.min(w,v.peekLength()),v.next(_),y.delete(_);break;case s.EQUAL:_=Math.min(v.peekLength(),g.peekLength(),w);var E=v.next(_),x=g.next(_);a(E.insert,x.insert)?y.retain(_,l.attributes.diff(E.attributes,x.attributes)):y.push(x).delete(_);break}w-=_}}),y.chop()},c.prototype.eachLine=function(h,f){f=f||`
`;for(var d=l.iterator(this.ops),y=new c,b=0;d.hasNext();){if(d.peekType()!=="insert")return;var v=d.peek(),g=l.length(v)-d.peekLength(),m=typeof v.insert=="string"?v.insert.indexOf(f,g)-g:-1;if(m<0)y.push(d.next());else if(m>0)y.push(d.next(m));else{if(h(y,d.next(1).attributes||{},b)===!1)return;b+=1,y=new c}}y.length()>0&&h(y,{},b)},c.prototype.transform=function(h,f){if(f=!!f,typeof h=="number")return this.transformPosition(h,f);for(var d=l.iterator(this.ops),y=l.iterator(h.ops),b=new c;d.hasNext()||y.hasNext();)if(d.peekType()==="insert"&&(f||y.peekType()!=="insert"))b.retain(l.length(d.next()));else if(y.peekType()==="insert")b.push(y.next());else{var v=Math.min(d.peekLength(),y.peekLength()),g=d.next(v),m=y.next(v);if(g.delete)continue;m.delete?b.push(m):b.retain(v,l.attributes.transform(g.attributes,m.attributes,f))}return b.chop()},c.prototype.transformPosition=function(h,f){f=!!f;for(var d=l.iterator(this.ops),y=0;d.hasNext()&&y<=h;){var b=d.peekLength(),v=d.peekType();if(d.next(),v==="delete"){h-=Math.min(b,h-y);continue}else v==="insert"&&(y<h||!f)&&(h+=b);y+=b}return h},t.exports=c},function(t,n){var r=Object.prototype.hasOwnProperty,s=Object.prototype.toString,a=Object.defineProperty,o=Object.getOwnPropertyDescriptor,l=function(d){return typeof Array.isArray=="function"?Array.isArray(d):s.call(d)==="[object Array]"},u=function(d){if(!d||s.call(d)!=="[object Object]")return!1;var y=r.call(d,"constructor"),b=d.constructor&&d.constructor.prototype&&r.call(d.constructor.prototype,"isPrototypeOf");if(d.constructor&&!y&&!b)return!1;var v;for(v in d);return typeof v>"u"||r.call(d,v)},c=function(d,y){a&&y.name==="__proto__"?a(d,y.name,{enumerable:!0,configurable:!0,value:y.newValue,writable:!0}):d[y.name]=y.newValue},h=function(d,y){if(y==="__proto__")if(r.call(d,y)){if(o)return o(d,y).value}else return;return d[y]};t.exports=function f(){var d,y,b,v,g,m,w=arguments[0],_=1,E=arguments.length,x=!1;for(typeof w=="boolean"&&(x=w,w=arguments[1]||{},_=2),(w==null||typeof w!="object"&&typeof w!="function")&&(w={});_<E;++_)if(d=arguments[_],d!=null)for(y in d)b=h(w,y),v=h(d,y),w!==v&&(x&&v&&(u(v)||(g=l(v)))?(g?(g=!1,m=b&&l(b)?b:[]):m=b&&u(b)?b:{},c(w,{name:y,newValue:f(x,m,v)})):typeof v<"u"&&c(w,{name:y,newValue:v}));return w}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BlockEmbed=n.bubbleFormats=void 0;var s=function(){function k(D,R){for(var F=0;F<R.length;F++){var H=R[F];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(D,H.key,H)}}return function(D,R,F){return R&&k(D.prototype,R),F&&k(D,F),D}}(),a=function k(D,R,F){D===null&&(D=Function.prototype);var H=Object.getOwnPropertyDescriptor(D,R);if(H===void 0){var $=Object.getPrototypeOf(D);return $===null?void 0:k($,R,F)}else{if("value"in H)return H.value;var G=H.get;return G===void 0?void 0:G.call(F)}},o=r(3),l=w(o),u=r(2),c=w(u),h=r(0),f=w(h),d=r(16),y=w(d),b=r(6),v=w(b),g=r(7),m=w(g);function w(k){return k&&k.__esModule?k:{default:k}}function _(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")}function E(k,D){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:k}function x(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(k,D):k.__proto__=D)}var A=1,S=function(k){x(D,k);function D(){return _(this,D),E(this,(D.__proto__||Object.getPrototypeOf(D)).apply(this,arguments))}return s(D,[{key:"attach",value:function(){a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"attach",this).call(this),this.attributes=new f.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return new c.default().insert(this.value(),(0,l.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(F,H){var $=f.default.query(F,f.default.Scope.BLOCK_ATTRIBUTE);$!=null&&this.attributes.attribute($,H)}},{key:"formatAt",value:function(F,H,$,G){this.format($,G)}},{key:"insertAt",value:function(F,H,$){if(typeof H=="string"&&H.endsWith(`
`)){var G=f.default.create(O.blotName);this.parent.insertBefore(G,F===0?this:this.next),G.insertAt(0,H.slice(0,-1))}else a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,F,H,$)}}]),D}(f.default.Embed);S.scope=f.default.Scope.BLOCK_BLOT;var O=function(k){x(D,k);function D(R){_(this,D);var F=E(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,R));return F.cache={},F}return s(D,[{key:"delta",value:function(){return this.cache.delta==null&&(this.cache.delta=this.descendants(f.default.Leaf).reduce(function(F,H){return H.length()===0?F:F.insert(H.value(),C(H))},new c.default).insert(`
`,C(this))),this.cache.delta}},{key:"deleteAt",value:function(F,H){a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"deleteAt",this).call(this,F,H),this.cache={}}},{key:"formatAt",value:function(F,H,$,G){H<=0||(f.default.query($,f.default.Scope.BLOCK)?F+H===this.length()&&this.format($,G):a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"formatAt",this).call(this,F,Math.min(H,this.length()-F-1),$,G),this.cache={})}},{key:"insertAt",value:function(F,H,$){if($!=null)return a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,F,H,$);if(H.length!==0){var G=H.split(`
`),Z=G.shift();Z.length>0&&(F<this.length()-1||this.children.tail==null?a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertAt",this).call(this,Math.min(F,this.length()-1),Z):this.children.tail.insertAt(this.children.tail.length(),Z),this.cache={});var K=this;G.reduce(function(q,P){return K=K.split(q,!0),K.insertAt(0,P),P.length},F+Z.length)}}},{key:"insertBefore",value:function(F,H){var $=this.children.head;a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"insertBefore",this).call(this,F,H),$ instanceof y.default&&$.remove(),this.cache={}}},{key:"length",value:function(){return this.cache.length==null&&(this.cache.length=a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"length",this).call(this)+A),this.cache.length}},{key:"moveChildren",value:function(F,H){a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"moveChildren",this).call(this,F,H),this.cache={}}},{key:"optimize",value:function(F){a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"optimize",this).call(this,F),this.cache={}}},{key:"path",value:function(F){return a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"path",this).call(this,F,!0)}},{key:"removeChild",value:function(F){a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"removeChild",this).call(this,F),this.cache={}}},{key:"split",value:function(F){var H=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(H&&(F===0||F>=this.length()-A)){var $=this.clone();return F===0?(this.parent.insertBefore($,this),this):(this.parent.insertBefore($,this.next),$)}else{var G=a(D.prototype.__proto__||Object.getPrototypeOf(D.prototype),"split",this).call(this,F,H);return this.cache={},G}}}]),D}(f.default.Block);O.blotName="block",O.tagName="P",O.defaultChild="break",O.allowedChildren=[v.default,f.default.Embed,m.default];function C(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};return k==null||(typeof k.formats=="function"&&(D=(0,l.default)(D,k.formats())),k.parent==null||k.parent.blotName=="scroll"||k.parent.statics.scope!==k.statics.scope)?D:C(k.parent,D)}n.bubbleFormats=C,n.BlockEmbed=S,n.default=O},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.overload=n.expandConfig=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},a=function(){function K(q,P){var B=[],V=!0,J=!1,te=void 0;try{for(var U=q[Symbol.iterator](),Y;!(V=(Y=U.next()).done)&&(B.push(Y.value),!(P&&B.length===P));V=!0);}catch(re){J=!0,te=re}finally{try{!V&&U.return&&U.return()}finally{if(J)throw te}}return B}return function(q,P){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return K(q,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function K(q,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(q,V.key,V)}}return function(q,P,B){return P&&K(q.prototype,P),B&&K(q,B),q}}();r(50);var l=r(2),u=C(l),c=r(14),h=C(c),f=r(8),d=C(f),y=r(9),b=C(y),v=r(0),g=C(v),m=r(15),w=C(m),_=r(3),E=C(_),x=r(10),A=C(x),S=r(34),O=C(S);function C(K){return K&&K.__esModule?K:{default:K}}function k(K,q,P){return q in K?Object.defineProperty(K,q,{value:P,enumerable:!0,configurable:!0,writable:!0}):K[q]=P,K}function D(K,q){if(!(K instanceof q))throw new TypeError("Cannot call a class as a function")}var R=(0,A.default)("quill"),F=function(){o(K,null,[{key:"debug",value:function(P){P===!0&&(P="log"),A.default.level(P)}},{key:"find",value:function(P){return P.__quill||g.default.find(P)}},{key:"import",value:function(P){return this.imports[P]==null&&R.error("Cannot import "+P+". Are you sure it was registered?"),this.imports[P]}},{key:"register",value:function(P,B){var V=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;if(typeof P!="string"){var te=P.attrName||P.blotName;typeof te=="string"?this.register("formats/"+te,P,B):Object.keys(P).forEach(function(U){V.register(U,P[U],B)})}else this.imports[P]!=null&&!J&&R.warn("Overwriting "+P+" with",B),this.imports[P]=B,(P.startsWith("blots/")||P.startsWith("formats/"))&&B.blotName!=="abstract"?g.default.register(B):P.startsWith("modules")&&typeof B.register=="function"&&B.register()}}]);function K(q){var P=this,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(D(this,K),this.options=H(q,B),this.container=this.options.container,this.container==null)return R.error("Invalid Quill container",q);this.options.debug&&K.debug(this.options.debug);var V=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new d.default,this.scroll=g.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new h.default(this.scroll),this.selection=new w.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(d.default.events.EDITOR_CHANGE,function(te){te===d.default.events.TEXT_CHANGE&&P.root.classList.toggle("ql-blank",P.editor.isBlank())}),this.emitter.on(d.default.events.SCROLL_UPDATE,function(te,U){var Y=P.selection.lastRange,re=Y&&Y.length===0?Y.index:void 0;$.call(P,function(){return P.editor.update(null,U,re)},te)});var J=this.clipboard.convert(`<div class='ql-editor' style="white-space: normal;">`+V+"<p><br></p></div>");this.setContents(J),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return o(K,[{key:"addContainer",value:function(P){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;if(typeof P=="string"){var V=P;P=document.createElement("div"),P.classList.add(V)}return this.container.insertBefore(P,B),P}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(P,B,V){var J=this,te=G(P,B,V),U=a(te,4);return P=U[0],B=U[1],V=U[3],$.call(this,function(){return J.editor.deleteText(P,B)},V,P,-1*B)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.scroll.enable(P),this.container.classList.toggle("ql-disabled",!P)}},{key:"focus",value:function(){var P=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=P,this.scrollIntoView()}},{key:"format",value:function(P,B){var V=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:d.default.sources.API;return $.call(this,function(){var te=V.getSelection(!0),U=new u.default;if(te==null)return U;if(g.default.query(P,g.default.Scope.BLOCK))U=V.editor.formatLine(te.index,te.length,k({},P,B));else{if(te.length===0)return V.selection.format(P,B),U;U=V.editor.formatText(te.index,te.length,k({},P,B))}return V.setSelection(te,d.default.sources.SILENT),U},J)}},{key:"formatLine",value:function(P,B,V,J,te){var U=this,Y=void 0,re=G(P,B,V,J,te),oe=a(re,4);return P=oe[0],B=oe[1],Y=oe[2],te=oe[3],$.call(this,function(){return U.editor.formatLine(P,B,Y)},te,P,0)}},{key:"formatText",value:function(P,B,V,J,te){var U=this,Y=void 0,re=G(P,B,V,J,te),oe=a(re,4);return P=oe[0],B=oe[1],Y=oe[2],te=oe[3],$.call(this,function(){return U.editor.formatText(P,B,Y)},te,P,0)}},{key:"getBounds",value:function(P){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,V=void 0;typeof P=="number"?V=this.selection.getBounds(P,B):V=this.selection.getBounds(P.index,P.length);var J=this.container.getBoundingClientRect();return{bottom:V.bottom-J.top,height:V.height,left:V.left-J.left,right:V.right-J.left,top:V.top-J.top,width:V.width}}},{key:"getContents",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,V=G(P,B),J=a(V,2);return P=J[0],B=J[1],this.editor.getContents(P,B)}},{key:"getFormat",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:this.getSelection(!0),B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return typeof P=="number"?this.editor.getFormat(P,B):this.editor.getFormat(P.index,P.length)}},{key:"getIndex",value:function(P){return P.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(P){return this.scroll.leaf(P)}},{key:"getLine",value:function(P){return this.scroll.line(P)}},{key:"getLines",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE;return typeof P!="number"?this.scroll.lines(P.index,P.length):this.scroll.lines(P,B)}},{key:"getModule",value:function(P){return this.theme.modules[P]}},{key:"getSelection",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1;return P&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:this.getLength()-P,V=G(P,B),J=a(V,2);return P=J[0],B=J[1],this.editor.getText(P,B)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(P,B,V){var J=this,te=arguments.length>3&&arguments[3]!==void 0?arguments[3]:K.sources.API;return $.call(this,function(){return J.editor.insertEmbed(P,B,V)},te,P)}},{key:"insertText",value:function(P,B,V,J,te){var U=this,Y=void 0,re=G(P,0,V,J,te),oe=a(re,4);return P=oe[0],Y=oe[2],te=oe[3],$.call(this,function(){return U.editor.insertText(P,B,Y)},te,P,B.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(P,B,V){this.clipboard.dangerouslyPasteHTML(P,B,V)}},{key:"removeFormat",value:function(P,B,V){var J=this,te=G(P,B,V),U=a(te,4);return P=U[0],B=U[1],V=U[3],$.call(this,function(){return J.editor.removeFormat(P,B)},V,P)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(P){var B=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return $.call(this,function(){P=new u.default(P);var J=B.getLength(),te=B.editor.deleteText(0,J),U=B.editor.applyDelta(P),Y=U.ops[U.ops.length-1];Y!=null&&typeof Y.insert=="string"&&Y.insert[Y.insert.length-1]===`
`&&(B.editor.deleteText(B.getLength()-1,1),U.delete(1));var re=te.compose(U);return re},V)}},{key:"setSelection",value:function(P,B,V){if(P==null)this.selection.setRange(null,B||K.sources.API);else{var J=G(P,B,V),te=a(J,4);P=te[0],B=te[1],V=te[3],this.selection.setRange(new m.Range(P,B),V),V!==d.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(P){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API,V=new u.default().insert(P);return this.setContents(V,B)}},{key:"update",value:function(){var P=arguments.length>0&&arguments[0]!==void 0?arguments[0]:d.default.sources.USER,B=this.scroll.update(P);return this.selection.update(P),B}},{key:"updateContents",value:function(P){var B=this,V=arguments.length>1&&arguments[1]!==void 0?arguments[1]:d.default.sources.API;return $.call(this,function(){return P=new u.default(P),B.editor.applyDelta(P,V)},V,!0)}}]),K}();F.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},F.events=d.default.events,F.sources=d.default.sources,F.version="1.3.7",F.imports={delta:u.default,parchment:g.default,"core/module":b.default,"core/theme":O.default};function H(K,q){if(q=(0,E.default)(!0,{container:K,modules:{clipboard:!0,keyboard:!0,history:!0}},q),!q.theme||q.theme===F.DEFAULTS.theme)q.theme=O.default;else if(q.theme=F.import("themes/"+q.theme),q.theme==null)throw new Error("Invalid theme "+q.theme+". Did you register it?");var P=(0,E.default)(!0,{},q.theme.DEFAULTS);[P,q].forEach(function(J){J.modules=J.modules||{},Object.keys(J.modules).forEach(function(te){J.modules[te]===!0&&(J.modules[te]={})})});var B=Object.keys(P.modules).concat(Object.keys(q.modules)),V=B.reduce(function(J,te){var U=F.import("modules/"+te);return U==null?R.error("Cannot load "+te+" module. Are you sure you registered it?"):J[te]=U.DEFAULTS||{},J},{});return q.modules!=null&&q.modules.toolbar&&q.modules.toolbar.constructor!==Object&&(q.modules.toolbar={container:q.modules.toolbar}),q=(0,E.default)(!0,{},F.DEFAULTS,{modules:V},P,q),["bounds","container","scrollingContainer"].forEach(function(J){typeof q[J]=="string"&&(q[J]=document.querySelector(q[J]))}),q.modules=Object.keys(q.modules).reduce(function(J,te){return q.modules[te]&&(J[te]=q.modules[te]),J},{}),q}function $(K,q,P,B){if(this.options.strict&&!this.isEnabled()&&q===d.default.sources.USER)return new u.default;var V=P==null?null:this.getSelection(),J=this.editor.delta,te=K();if(V!=null&&(P===!0&&(P=V.index),B==null?V=Z(V,te,q):B!==0&&(V=Z(V,P,B,q)),this.setSelection(V,d.default.sources.SILENT)),te.length()>0){var U,Y=[d.default.events.TEXT_CHANGE,te,J,q];if((U=this.emitter).emit.apply(U,[d.default.events.EDITOR_CHANGE].concat(Y)),q!==d.default.sources.SILENT){var re;(re=this.emitter).emit.apply(re,Y)}}return te}function G(K,q,P,B,V){var J={};return typeof K.index=="number"&&typeof K.length=="number"?typeof q!="number"?(V=B,B=P,P=q,q=K.length,K=K.index):(q=K.length,K=K.index):typeof q!="number"&&(V=B,B=P,P=q,q=0),(typeof P>"u"?"undefined":s(P))==="object"?(J=P,V=B):typeof P=="string"&&(B!=null?J[P]=B:V=P),V=V||d.default.sources.API,[K,q,J,V]}function Z(K,q,P,B){if(K==null)return null;var V=void 0,J=void 0;if(q instanceof u.default){var te=[K.index,K.index+K.length].map(function(oe){return q.transformPosition(oe,B!==d.default.sources.USER)}),U=a(te,2);V=U[0],J=U[1]}else{var Y=[K.index,K.index+K.length].map(function(oe){return oe<q||oe===q&&B===d.default.sources.USER?oe:P>=0?oe+P:Math.max(q,oe+P)}),re=a(Y,2);V=re[0],J=re[1]}return new m.Range(V,J-V)}n.expandConfig=H,n.overload=G,n.default=F},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(g,m){for(var w=0;w<m.length;w++){var _=m[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,m,w){return m&&v(g.prototype,m),w&&v(g,w),g}}(),a=function v(g,m,w){g===null&&(g=Function.prototype);var _=Object.getOwnPropertyDescriptor(g,m);if(_===void 0){var E=Object.getPrototypeOf(g);return E===null?void 0:v(E,m,w)}else{if("value"in _)return _.value;var x=_.get;return x===void 0?void 0:x.call(w)}},o=r(7),l=h(o),u=r(0),c=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function d(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function y(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var b=function(v){y(g,v);function g(){return f(this,g),d(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"formatAt",value:function(w,_,E,x){if(g.compare(this.statics.blotName,E)<0&&c.default.query(E,c.default.Scope.BLOT)){var A=this.isolate(w,_);x&&A.wrap(E,x)}else a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"formatAt",this).call(this,w,_,E,x)}},{key:"optimize",value:function(w){if(a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"optimize",this).call(this,w),this.parent instanceof g&&g.compare(this.statics.blotName,this.parent.statics.blotName)>0){var _=this.parent.isolate(this.offset(),this.length());this.moveChildren(_),_.wrap(this)}}}],[{key:"compare",value:function(w,_){var E=g.order.indexOf(w),x=g.order.indexOf(_);return E>=0||x>=0?E-x:w===_?0:w<_?-1:1}}]),g}(c.default.Inline);b.allowedChildren=[b,c.default.Embed,l.default],b.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(0),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(a.default.Text);n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function m(w,_){for(var E=0;E<_.length;E++){var x=_[E];x.enumerable=x.enumerable||!1,x.configurable=!0,"value"in x&&(x.writable=!0),Object.defineProperty(w,x.key,x)}}return function(w,_,E){return _&&m(w.prototype,_),E&&m(w,E),w}}(),a=function m(w,_,E){w===null&&(w=Function.prototype);var x=Object.getOwnPropertyDescriptor(w,_);if(x===void 0){var A=Object.getPrototypeOf(w);return A===null?void 0:m(A,_,E)}else{if("value"in x)return x.value;var S=x.get;return S===void 0?void 0:S.call(E)}},o=r(54),l=h(o),u=r(10),c=h(u);function h(m){return m&&m.__esModule?m:{default:m}}function f(m,w){if(!(m instanceof w))throw new TypeError("Cannot call a class as a function")}function d(m,w){if(!m)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return w&&(typeof w=="object"||typeof w=="function")?w:m}function y(m,w){if(typeof w!="function"&&w!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof w);m.prototype=Object.create(w&&w.prototype,{constructor:{value:m,enumerable:!1,writable:!0,configurable:!0}}),w&&(Object.setPrototypeOf?Object.setPrototypeOf(m,w):m.__proto__=w)}var b=(0,c.default)("quill:events"),v=["selectionchange","mousedown","mouseup","click"];v.forEach(function(m){document.addEventListener(m,function(){for(var w=arguments.length,_=Array(w),E=0;E<w;E++)_[E]=arguments[E];[].slice.call(document.querySelectorAll(".ql-container")).forEach(function(x){if(x.__quill&&x.__quill.emitter){var A;(A=x.__quill.emitter).handleDOM.apply(A,_)}})})});var g=function(m){y(w,m);function w(){f(this,w);var _=d(this,(w.__proto__||Object.getPrototypeOf(w)).call(this));return _.listeners={},_.on("error",b.error),_}return s(w,[{key:"emit",value:function(){b.log.apply(b,arguments),a(w.prototype.__proto__||Object.getPrototypeOf(w.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(E){for(var x=arguments.length,A=Array(x>1?x-1:0),S=1;S<x;S++)A[S-1]=arguments[S];(this.listeners[E.type]||[]).forEach(function(O){var C=O.node,k=O.handler;(E.target===C||C.contains(E.target))&&k.apply(void 0,[E].concat(A))})}},{key:"listenDOM",value:function(E,x,A){this.listeners[E]||(this.listeners[E]=[]),this.listeners[E].push({node:x,handler:A})}}]),w}(l.default);g.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},g.sources={API:"api",SILENT:"silent",USER:"user"},n.default=g},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});function s(o,l){if(!(o instanceof l))throw new TypeError("Cannot call a class as a function")}var a=function o(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};s(this,o),this.quill=l,this.options=u};a.DEFAULTS={},n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=["error","warn","log","info"],a="warn";function o(u){if(s.indexOf(u)<=s.indexOf(a)){for(var c,h=arguments.length,f=Array(h>1?h-1:0),d=1;d<h;d++)f[d-1]=arguments[d];(c=console)[u].apply(c,f)}}function l(u){return s.reduce(function(c,h){return c[h]=o.bind(console,h,u),c},{})}o.level=l.level=function(u){a=u},n.default=l},function(t,n,r){var s=Array.prototype.slice,a=r(52),o=r(53),l=t.exports=function(f,d,y){return y||(y={}),f===d?!0:f instanceof Date&&d instanceof Date?f.getTime()===d.getTime():!f||!d||typeof f!="object"&&typeof d!="object"?y.strict?f===d:f==d:h(f,d,y)};function u(f){return f==null}function c(f){return!(!f||typeof f!="object"||typeof f.length!="number"||typeof f.copy!="function"||typeof f.slice!="function"||f.length>0&&typeof f[0]!="number")}function h(f,d,y){var b,v;if(u(f)||u(d)||f.prototype!==d.prototype)return!1;if(o(f))return o(d)?(f=s.call(f),d=s.call(d),l(f,d,y)):!1;if(c(f)){if(!c(d)||f.length!==d.length)return!1;for(b=0;b<f.length;b++)if(f[b]!==d[b])return!1;return!0}try{var g=a(f),m=a(d)}catch{return!1}if(g.length!=m.length)return!1;for(g.sort(),m.sort(),b=g.length-1;b>=0;b--)if(g[b]!=m[b])return!1;for(b=g.length-1;b>=0;b--)if(v=g[b],!l(f[v],d[v],y))return!1;return typeof f==typeof d}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),a=function(){function o(l,u,c){c===void 0&&(c={}),this.attrName=l,this.keyName=u;var h=s.Scope.TYPE&s.Scope.ATTRIBUTE;c.scope!=null?this.scope=c.scope&s.Scope.LEVEL|h:this.scope=s.Scope.ATTRIBUTE,c.whitelist!=null&&(this.whitelist=c.whitelist)}return o.keys=function(l){return[].map.call(l.attributes,function(u){return u.name})},o.prototype.add=function(l,u){return this.canAdd(l,u)?(l.setAttribute(this.keyName,u),!0):!1},o.prototype.canAdd=function(l,u){var c=s.query(l,s.Scope.BLOT&(this.scope|s.Scope.TYPE));return c==null?!1:this.whitelist==null?!0:typeof u=="string"?this.whitelist.indexOf(u.replace(/["']/g,""))>-1:this.whitelist.indexOf(u)>-1},o.prototype.remove=function(l){l.removeAttribute(this.keyName)},o.prototype.value=function(l){var u=l.getAttribute(this.keyName);return this.canAdd(l,u)&&u?u:""},o}();n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Code=void 0;var s=function(){function S(O,C){var k=[],D=!0,R=!1,F=void 0;try{for(var H=O[Symbol.iterator](),$;!(D=($=H.next()).done)&&(k.push($.value),!(C&&k.length===C));D=!0);}catch(G){R=!0,F=G}finally{try{!D&&H.return&&H.return()}finally{if(R)throw F}}return k}return function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return S(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function S(O,C){for(var k=0;k<C.length;k++){var D=C[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,C,k){return C&&S(O.prototype,C),k&&S(O,k),O}}(),o=function S(O,C,k){O===null&&(O=Function.prototype);var D=Object.getOwnPropertyDescriptor(O,C);if(D===void 0){var R=Object.getPrototypeOf(O);return R===null?void 0:S(R,C,k)}else{if("value"in D)return D.value;var F=D.get;return F===void 0?void 0:F.call(k)}},l=r(2),u=m(l),c=r(0),h=m(c),f=r(4),d=m(f),y=r(6),b=m(y),v=r(7),g=m(v);function m(S){return S&&S.__esModule?S:{default:S}}function w(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}function _(S,O){if(!S)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return O&&(typeof O=="object"||typeof O=="function")?O:S}function E(S,O){if(typeof O!="function"&&O!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof O);S.prototype=Object.create(O&&O.prototype,{constructor:{value:S,enumerable:!1,writable:!0,configurable:!0}}),O&&(Object.setPrototypeOf?Object.setPrototypeOf(S,O):S.__proto__=O)}var x=function(S){E(O,S);function O(){return w(this,O),_(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return O}(b.default);x.blotName="code",x.tagName="CODE";var A=function(S){E(O,S);function O(){return w(this,O),_(this,(O.__proto__||Object.getPrototypeOf(O)).apply(this,arguments))}return a(O,[{key:"delta",value:function(){var k=this,D=this.domNode.textContent;return D.endsWith(`
`)&&(D=D.slice(0,-1)),D.split(`
`).reduce(function(R,F){return R.insert(F).insert(`
`,k.formats())},new u.default)}},{key:"format",value:function(k,D){if(!(k===this.statics.blotName&&D)){var R=this.descendant(g.default,this.length()-1),F=s(R,1),H=F[0];H!=null&&H.deleteAt(H.length()-1,1),o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"format",this).call(this,k,D)}}},{key:"formatAt",value:function(k,D,R,F){if(D!==0&&!(h.default.query(R,h.default.Scope.BLOCK)==null||R===this.statics.blotName&&F===this.statics.formats(this.domNode))){var H=this.newlineIndex(k);if(!(H<0||H>=k+D)){var $=this.newlineIndex(k,!0)+1,G=H-$+1,Z=this.isolate($,G),K=Z.next;Z.format(R,F),K instanceof O&&K.formatAt(0,k-$+D-G,R,F)}}}},{key:"insertAt",value:function(k,D,R){if(R==null){var F=this.descendant(g.default,k),H=s(F,2),$=H[0],G=H[1];$.insertAt(G,D)}}},{key:"length",value:function(){var k=this.domNode.textContent.length;return this.domNode.textContent.endsWith(`
`)?k:k+1}},{key:"newlineIndex",value:function(k){var D=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1;if(D)return this.domNode.textContent.slice(0,k).lastIndexOf(`
`);var R=this.domNode.textContent.slice(k).indexOf(`
`);return R>-1?k+R:-1}},{key:"optimize",value:function(k){this.domNode.textContent.endsWith(`
`)||this.appendChild(h.default.create("text",`
`)),o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"optimize",this).call(this,k);var D=this.next;D!=null&&D.prev===this&&D.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===D.statics.formats(D.domNode)&&(D.optimize(k),D.moveChildren(this),D.remove())}},{key:"replace",value:function(k){o(O.prototype.__proto__||Object.getPrototypeOf(O.prototype),"replace",this).call(this,k),[].slice.call(this.domNode.querySelectorAll("*")).forEach(function(D){var R=h.default.find(D);R==null?D.parentNode.removeChild(D):R instanceof h.default.Embed?R.remove():R.unwrap()})}}],[{key:"create",value:function(k){var D=o(O.__proto__||Object.getPrototypeOf(O),"create",this).call(this,k);return D.setAttribute("spellcheck",!1),D}},{key:"formats",value:function(){return!0}}]),O}(d.default);A.blotName="code-block",A.tagName="PRE",A.TAB="  ",n.Code=x,n.default=A},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(K){return typeof K}:function(K){return K&&typeof Symbol=="function"&&K.constructor===Symbol&&K!==Symbol.prototype?"symbol":typeof K},a=function(){function K(q,P){var B=[],V=!0,J=!1,te=void 0;try{for(var U=q[Symbol.iterator](),Y;!(V=(Y=U.next()).done)&&(B.push(Y.value),!(P&&B.length===P));V=!0);}catch(re){J=!0,te=re}finally{try{!V&&U.return&&U.return()}finally{if(J)throw te}}return B}return function(q,P){if(Array.isArray(q))return q;if(Symbol.iterator in Object(q))return K(q,P);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function K(q,P){for(var B=0;B<P.length;B++){var V=P[B];V.enumerable=V.enumerable||!1,V.configurable=!0,"value"in V&&(V.writable=!0),Object.defineProperty(q,V.key,V)}}return function(q,P,B){return P&&K(q.prototype,P),B&&K(q,B),q}}(),l=r(2),u=D(l),c=r(20),h=D(c),f=r(0),d=D(f),y=r(13),b=D(y),v=r(24),g=D(v),m=r(4),w=D(m),_=r(16),E=D(_),x=r(21),A=D(x),S=r(11),O=D(S),C=r(3),k=D(C);function D(K){return K&&K.__esModule?K:{default:K}}function R(K,q,P){return q in K?Object.defineProperty(K,q,{value:P,enumerable:!0,configurable:!0,writable:!0}):K[q]=P,K}function F(K,q){if(!(K instanceof q))throw new TypeError("Cannot call a class as a function")}var H=/^[ -~]*$/,$=function(){function K(q){F(this,K),this.scroll=q,this.delta=this.getDelta()}return o(K,[{key:"applyDelta",value:function(P){var B=this,V=!1;this.scroll.update();var J=this.scroll.length();return this.scroll.batchStart(),P=Z(P),P.reduce(function(te,U){var Y=U.retain||U.delete||U.insert.length||1,re=U.attributes||{};if(U.insert!=null){if(typeof U.insert=="string"){var oe=U.insert;oe.endsWith(`
`)&&V&&(V=!1,oe=oe.slice(0,-1)),te>=J&&!oe.endsWith(`
`)&&(V=!0),B.scroll.insertAt(te,oe);var de=B.scroll.line(te),_e=a(de,2),Le=_e[0],Ne=_e[1],Ve=(0,k.default)({},(0,m.bubbleFormats)(Le));if(Le instanceof w.default){var Xe=Le.descendant(d.default.Leaf,Ne),Et=a(Xe,1),Ke=Et[0];Ve=(0,k.default)(Ve,(0,m.bubbleFormats)(Ke))}re=h.default.attributes.diff(Ve,re)||{}}else if(s(U.insert)==="object"){var he=Object.keys(U.insert)[0];if(he==null)return te;B.scroll.insertAt(te,he,U.insert[he])}J+=Y}return Object.keys(re).forEach(function(pe){B.scroll.formatAt(te,Y,pe,re[pe])}),te+Y},0),P.reduce(function(te,U){return typeof U.delete=="number"?(B.scroll.deleteAt(te,U.delete),te):te+(U.retain||U.insert.length||1)},0),this.scroll.batchEnd(),this.update(P)}},{key:"deleteText",value:function(P,B){return this.scroll.deleteAt(P,B),this.update(new u.default().retain(P).delete(B))}},{key:"formatLine",value:function(P,B){var V=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return this.scroll.update(),Object.keys(J).forEach(function(te){if(!(V.scroll.whitelist!=null&&!V.scroll.whitelist[te])){var U=V.scroll.lines(P,Math.max(B,1)),Y=B;U.forEach(function(re){var oe=re.length();if(!(re instanceof b.default))re.format(te,J[te]);else{var de=P-re.offset(V.scroll),_e=re.newlineIndex(de+Y)-de+1;re.formatAt(de,_e,te,J[te])}Y-=oe})}}),this.scroll.optimize(),this.update(new u.default().retain(P).retain(B,(0,A.default)(J)))}},{key:"formatText",value:function(P,B){var V=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return Object.keys(J).forEach(function(te){V.scroll.formatAt(P,B,te,J[te])}),this.update(new u.default().retain(P).retain(B,(0,A.default)(J)))}},{key:"getContents",value:function(P,B){return this.delta.slice(P,P+B)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce(function(P,B){return P.concat(B.delta())},new u.default)}},{key:"getFormat",value:function(P){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,V=[],J=[];B===0?this.scroll.path(P).forEach(function(U){var Y=a(U,1),re=Y[0];re instanceof w.default?V.push(re):re instanceof d.default.Leaf&&J.push(re)}):(V=this.scroll.lines(P,B),J=this.scroll.descendants(d.default.Leaf,P,B));var te=[V,J].map(function(U){if(U.length===0)return{};for(var Y=(0,m.bubbleFormats)(U.shift());Object.keys(Y).length>0;){var re=U.shift();if(re==null)return Y;Y=G((0,m.bubbleFormats)(re),Y)}return Y});return k.default.apply(k.default,te)}},{key:"getText",value:function(P,B){return this.getContents(P,B).filter(function(V){return typeof V.insert=="string"}).map(function(V){return V.insert}).join("")}},{key:"insertEmbed",value:function(P,B,V){return this.scroll.insertAt(P,B,V),this.update(new u.default().retain(P).insert(R({},B,V)))}},{key:"insertText",value:function(P,B){var V=this,J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{};return B=B.replace(/\r\n/g,`
`).replace(/\r/g,`
`),this.scroll.insertAt(P,B),Object.keys(J).forEach(function(te){V.scroll.formatAt(P,B.length,te,J[te])}),this.update(new u.default().retain(P).insert(B,(0,A.default)(J)))}},{key:"isBlank",value:function(){if(this.scroll.children.length==0)return!0;if(this.scroll.children.length>1)return!1;var P=this.scroll.children.head;return P.statics.blotName!==w.default.blotName||P.children.length>1?!1:P.children.head instanceof E.default}},{key:"removeFormat",value:function(P,B){var V=this.getText(P,B),J=this.scroll.line(P+B),te=a(J,2),U=te[0],Y=te[1],re=0,oe=new u.default;U!=null&&(U instanceof b.default?re=U.newlineIndex(Y)-Y+1:re=U.length()-Y,oe=U.delta().slice(Y,Y+re-1).insert(`
`));var de=this.getContents(P,B+re),_e=de.diff(new u.default().insert(V).concat(oe)),Le=new u.default().retain(P).concat(_e);return this.applyDelta(Le)}},{key:"update",value:function(P){var B=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],V=arguments.length>2&&arguments[2]!==void 0?arguments[2]:void 0,J=this.delta;if(B.length===1&&B[0].type==="characterData"&&B[0].target.data.match(H)&&d.default.find(B[0].target)){var te=d.default.find(B[0].target),U=(0,m.bubbleFormats)(te),Y=te.offset(this.scroll),re=B[0].oldValue.replace(g.default.CONTENTS,""),oe=new u.default().insert(re),de=new u.default().insert(te.value()),_e=new u.default().retain(Y).concat(oe.diff(de,V));P=_e.reduce(function(Le,Ne){return Ne.insert?Le.insert(Ne.insert,U):Le.push(Ne)},new u.default),this.delta=J.compose(P)}else this.delta=this.getDelta(),(!P||!(0,O.default)(J.compose(P),this.delta))&&(P=J.diff(this.delta,V));return P}}]),K}();function G(K,q){return Object.keys(q).reduce(function(P,B){return K[B]==null||(q[B]===K[B]?P[B]=q[B]:Array.isArray(q[B])?q[B].indexOf(K[B])<0&&(P[B]=q[B].concat([K[B]])):P[B]=[q[B],K[B]]),P},{})}function Z(K){return K.reduce(function(q,P){if(P.insert===1){var B=(0,A.default)(P.attributes);return delete B.image,q.insert({image:P.attributes.image},B)}if(P.attributes!=null&&(P.attributes.list===!0||P.attributes.bullet===!0)&&(P=(0,A.default)(P),P.attributes.list?P.attributes.list="ordered":(P.attributes.list="bullet",delete P.attributes.bullet)),typeof P.insert=="string"){var V=P.insert.replace(/\r\n/g,`
`).replace(/\r/g,`
`);return q.insert(V,P.attributes)}return q.push(P)},new u.default)}n.default=$},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.Range=void 0;var s=function(){function S(O,C){var k=[],D=!0,R=!1,F=void 0;try{for(var H=O[Symbol.iterator](),$;!(D=($=H.next()).done)&&(k.push($.value),!(C&&k.length===C));D=!0);}catch(G){R=!0,F=G}finally{try{!D&&H.return&&H.return()}finally{if(R)throw F}}return k}return function(O,C){if(Array.isArray(O))return O;if(Symbol.iterator in Object(O))return S(O,C);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function S(O,C){for(var k=0;k<C.length;k++){var D=C[k];D.enumerable=D.enumerable||!1,D.configurable=!0,"value"in D&&(D.writable=!0),Object.defineProperty(O,D.key,D)}}return function(O,C,k){return C&&S(O.prototype,C),k&&S(O,k),O}}(),o=r(0),l=g(o),u=r(21),c=g(u),h=r(11),f=g(h),d=r(8),y=g(d),b=r(10),v=g(b);function g(S){return S&&S.__esModule?S:{default:S}}function m(S){if(Array.isArray(S)){for(var O=0,C=Array(S.length);O<S.length;O++)C[O]=S[O];return C}else return Array.from(S)}function w(S,O){if(!(S instanceof O))throw new TypeError("Cannot call a class as a function")}var _=(0,v.default)("quill:selection"),E=function S(O){var C=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;w(this,S),this.index=O,this.length=C},x=function(){function S(O,C){var k=this;w(this,S),this.emitter=C,this.scroll=O,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=l.default.create("cursor",this),this.lastRange=this.savedRange=new E(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,function(){k.mouseDown||setTimeout(k.update.bind(k,y.default.sources.USER),1)}),this.emitter.on(y.default.events.EDITOR_CHANGE,function(D,R){D===y.default.events.TEXT_CHANGE&&R.length()>0&&k.update(y.default.sources.SILENT)}),this.emitter.on(y.default.events.SCROLL_BEFORE_UPDATE,function(){if(k.hasFocus()){var D=k.getNativeRange();D!=null&&D.start.node!==k.cursor.textNode&&k.emitter.once(y.default.events.SCROLL_UPDATE,function(){try{k.setNativeRange(D.start.node,D.start.offset,D.end.node,D.end.offset)}catch{}})}}),this.emitter.on(y.default.events.SCROLL_OPTIMIZE,function(D,R){if(R.range){var F=R.range,H=F.startNode,$=F.startOffset,G=F.endNode,Z=F.endOffset;k.setNativeRange(H,$,G,Z)}}),this.update(y.default.sources.SILENT)}return a(S,[{key:"handleComposition",value:function(){var C=this;this.root.addEventListener("compositionstart",function(){C.composing=!0}),this.root.addEventListener("compositionend",function(){if(C.composing=!1,C.cursor.parent){var k=C.cursor.restore();if(!k)return;setTimeout(function(){C.setNativeRange(k.startNode,k.startOffset,k.endNode,k.endOffset)},1)}})}},{key:"handleDragging",value:function(){var C=this;this.emitter.listenDOM("mousedown",document.body,function(){C.mouseDown=!0}),this.emitter.listenDOM("mouseup",document.body,function(){C.mouseDown=!1,C.update(y.default.sources.USER)})}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(C,k){if(!(this.scroll.whitelist!=null&&!this.scroll.whitelist[C])){this.scroll.update();var D=this.getNativeRange();if(!(D==null||!D.native.collapsed||l.default.query(C,l.default.Scope.BLOCK))){if(D.start.node!==this.cursor.textNode){var R=l.default.find(D.start.node,!1);if(R==null)return;if(R instanceof l.default.Leaf){var F=R.split(D.start.offset);R.parent.insertBefore(this.cursor,F)}else R.insertBefore(this.cursor,D.start.node);this.cursor.attach()}this.cursor.format(C,k),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(C){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,D=this.scroll.length();C=Math.min(C,D-1),k=Math.min(C+k,D-1)-C;var R=void 0,F=this.scroll.leaf(C),H=s(F,2),$=H[0],G=H[1];if($==null)return null;var Z=$.position(G,!0),K=s(Z,2);R=K[0],G=K[1];var q=document.createRange();if(k>0){q.setStart(R,G);var P=this.scroll.leaf(C+k),B=s(P,2);if($=B[0],G=B[1],$==null)return null;var V=$.position(G,!0),J=s(V,2);return R=J[0],G=J[1],q.setEnd(R,G),q.getBoundingClientRect()}else{var te="left",U=void 0;return R instanceof Text?(G<R.data.length?(q.setStart(R,G),q.setEnd(R,G+1)):(q.setStart(R,G-1),q.setEnd(R,G),te="right"),U=q.getBoundingClientRect()):(U=$.domNode.getBoundingClientRect(),G>0&&(te="right")),{bottom:U.top+U.height,height:U.height,left:U[te],right:U[te],top:U.top,width:0}}}},{key:"getNativeRange",value:function(){var C=document.getSelection();if(C==null||C.rangeCount<=0)return null;var k=C.getRangeAt(0);if(k==null)return null;var D=this.normalizeNative(k);return _.info("getNativeRange",D),D}},{key:"getRange",value:function(){var C=this.getNativeRange();if(C==null)return[null,null];var k=this.normalizedToRange(C);return[k,C]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(C){var k=this,D=[[C.start.node,C.start.offset]];C.native.collapsed||D.push([C.end.node,C.end.offset]);var R=D.map(function($){var G=s($,2),Z=G[0],K=G[1],q=l.default.find(Z,!0),P=q.offset(k.scroll);return K===0?P:q instanceof l.default.Container?P+q.length():P+q.index(Z,K)}),F=Math.min(Math.max.apply(Math,m(R)),this.scroll.length()-1),H=Math.min.apply(Math,[F].concat(m(R)));return new E(H,F-H)}},{key:"normalizeNative",value:function(C){if(!A(this.root,C.startContainer)||!C.collapsed&&!A(this.root,C.endContainer))return null;var k={start:{node:C.startContainer,offset:C.startOffset},end:{node:C.endContainer,offset:C.endOffset},native:C};return[k.start,k.end].forEach(function(D){for(var R=D.node,F=D.offset;!(R instanceof Text)&&R.childNodes.length>0;)if(R.childNodes.length>F)R=R.childNodes[F],F=0;else if(R.childNodes.length===F)R=R.lastChild,F=R instanceof Text?R.data.length:R.childNodes.length+1;else break;D.node=R,D.offset=F}),k}},{key:"rangeToNative",value:function(C){var k=this,D=C.collapsed?[C.index]:[C.index,C.index+C.length],R=[],F=this.scroll.length();return D.forEach(function(H,$){H=Math.min(F-1,H);var G=void 0,Z=k.scroll.leaf(H),K=s(Z,2),q=K[0],P=K[1],B=q.position(P,$!==0),V=s(B,2);G=V[0],P=V[1],R.push(G,P)}),R.length<2&&(R=R.concat(R)),R}},{key:"scrollIntoView",value:function(C){var k=this.lastRange;if(k!=null){var D=this.getBounds(k.index,k.length);if(D!=null){var R=this.scroll.length()-1,F=this.scroll.line(Math.min(k.index,R)),H=s(F,1),$=H[0],G=$;if(k.length>0){var Z=this.scroll.line(Math.min(k.index+k.length,R)),K=s(Z,1);G=K[0]}if(!($==null||G==null)){var q=C.getBoundingClientRect();D.top<q.top?C.scrollTop-=q.top-D.top:D.bottom>q.bottom&&(C.scrollTop+=D.bottom-q.bottom)}}}}},{key:"setNativeRange",value:function(C,k){var D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:C,R=arguments.length>3&&arguments[3]!==void 0?arguments[3]:k,F=arguments.length>4&&arguments[4]!==void 0?arguments[4]:!1;if(_.info("setNativeRange",C,k,D,R),!(C!=null&&(this.root.parentNode==null||C.parentNode==null||D.parentNode==null))){var H=document.getSelection();if(H!=null)if(C!=null){this.hasFocus()||this.root.focus();var $=(this.getNativeRange()||{}).native;if($==null||F||C!==$.startContainer||k!==$.startOffset||D!==$.endContainer||R!==$.endOffset){C.tagName=="BR"&&(k=[].indexOf.call(C.parentNode.childNodes,C),C=C.parentNode),D.tagName=="BR"&&(R=[].indexOf.call(D.parentNode.childNodes,D),D=D.parentNode);var G=document.createRange();G.setStart(C,k),G.setEnd(D,R),H.removeAllRanges(),H.addRange(G)}}else H.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(C){var k=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,D=arguments.length>2&&arguments[2]!==void 0?arguments[2]:y.default.sources.API;if(typeof k=="string"&&(D=k,k=!1),_.info("setRange",C),C!=null){var R=this.rangeToNative(C);this.setNativeRange.apply(this,m(R).concat([k]))}else this.setNativeRange(null);this.update(D)}},{key:"update",value:function(){var C=arguments.length>0&&arguments[0]!==void 0?arguments[0]:y.default.sources.USER,k=this.lastRange,D=this.getRange(),R=s(D,2),F=R[0],H=R[1];if(this.lastRange=F,this.lastRange!=null&&(this.savedRange=this.lastRange),!(0,f.default)(k,this.lastRange)){var $;!this.composing&&H!=null&&H.native.collapsed&&H.start.node!==this.cursor.textNode&&this.cursor.restore();var G=[y.default.events.SELECTION_CHANGE,(0,c.default)(this.lastRange),(0,c.default)(k),C];if(($=this.emitter).emit.apply($,[y.default.events.EDITOR_CHANGE].concat(G)),C!==y.default.sources.SILENT){var Z;(Z=this.emitter).emit.apply(Z,G)}}}}]),S}();function A(S,O){try{O.parentNode}catch{return!1}return O instanceof Text&&(O=O.parentNode),S.contains(O)}n.Range=E,n.default=x},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function y(b,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,v,g){return v&&y(b.prototype,v),g&&y(b,g),b}}(),a=function y(b,v,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,v);if(m===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:y(w,v,g)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(g)}},o=r(0),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function f(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var d=function(y){f(b,y);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"insertInto",value:function(g,m){g.children.length===0?a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"insertInto",this).call(this,g,m):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),b}(l.default.Embed);d.blotName="break",d.tagName="BR",n.default=d},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var y in d)d.hasOwnProperty(y)&&(f[y]=d[y])};return function(f,d){h(f,d);function y(){this.constructor=f}f.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(44),o=r(30),l=r(1),u=function(h){s(f,h);function f(d){var y=h.call(this,d)||this;return y.build(),y}return f.prototype.appendChild=function(d){this.insertBefore(d)},f.prototype.attach=function(){h.prototype.attach.call(this),this.children.forEach(function(d){d.attach()})},f.prototype.build=function(){var d=this;this.children=new a.default,[].slice.call(this.domNode.childNodes).reverse().forEach(function(y){try{var b=c(y);d.insertBefore(b,d.children.head||void 0)}catch(v){if(v instanceof l.ParchmentError)return;throw v}})},f.prototype.deleteAt=function(d,y){if(d===0&&y===this.length())return this.remove();this.children.forEachAt(d,y,function(b,v,g){b.deleteAt(v,g)})},f.prototype.descendant=function(d,y){var b=this.children.find(y),v=b[0],g=b[1];return d.blotName==null&&d(v)||d.blotName!=null&&v instanceof d?[v,g]:v instanceof f?v.descendant(d,g):[null,-1]},f.prototype.descendants=function(d,y,b){y===void 0&&(y=0),b===void 0&&(b=Number.MAX_VALUE);var v=[],g=b;return this.children.forEachAt(y,b,function(m,w,_){(d.blotName==null&&d(m)||d.blotName!=null&&m instanceof d)&&v.push(m),m instanceof f&&(v=v.concat(m.descendants(d,w,g))),g-=_}),v},f.prototype.detach=function(){this.children.forEach(function(d){d.detach()}),h.prototype.detach.call(this)},f.prototype.formatAt=function(d,y,b,v){this.children.forEachAt(d,y,function(g,m,w){g.formatAt(m,w,b,v)})},f.prototype.insertAt=function(d,y,b){var v=this.children.find(d),g=v[0],m=v[1];if(g)g.insertAt(m,y,b);else{var w=b==null?l.create("text",y):l.create(y,b);this.appendChild(w)}},f.prototype.insertBefore=function(d,y){if(this.statics.allowedChildren!=null&&!this.statics.allowedChildren.some(function(b){return d instanceof b}))throw new l.ParchmentError("Cannot insert "+d.statics.blotName+" into "+this.statics.blotName);d.insertInto(this,y)},f.prototype.length=function(){return this.children.reduce(function(d,y){return d+y.length()},0)},f.prototype.moveChildren=function(d,y){this.children.forEach(function(b){d.insertBefore(b,y)})},f.prototype.optimize=function(d){if(h.prototype.optimize.call(this,d),this.children.length===0)if(this.statics.defaultChild!=null){var y=l.create(this.statics.defaultChild);this.appendChild(y),y.optimize(d)}else this.remove()},f.prototype.path=function(d,y){y===void 0&&(y=!1);var b=this.children.find(d,y),v=b[0],g=b[1],m=[[this,d]];return v instanceof f?m.concat(v.path(g,y)):(v!=null&&m.push([v,g]),m)},f.prototype.removeChild=function(d){this.children.remove(d)},f.prototype.replace=function(d){d instanceof f&&d.moveChildren(this),h.prototype.replace.call(this,d)},f.prototype.split=function(d,y){if(y===void 0&&(y=!1),!y){if(d===0)return this;if(d===this.length())return this.next}var b=this.clone();return this.parent.insertBefore(b,this.next),this.children.forEachAt(d,this.length(),function(v,g,m){v=v.split(g,y),b.appendChild(v)}),b},f.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},f.prototype.update=function(d,y){var b=this,v=[],g=[];d.forEach(function(m){m.target===b.domNode&&m.type==="childList"&&(v.push.apply(v,m.addedNodes),g.push.apply(g,m.removedNodes))}),g.forEach(function(m){if(!(m.parentNode!=null&&m.tagName!=="IFRAME"&&document.body.compareDocumentPosition(m)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var w=l.find(m);w!=null&&(w.domNode.parentNode==null||w.domNode.parentNode===b.domNode)&&w.detach()}}),v.filter(function(m){return m.parentNode==b.domNode}).sort(function(m,w){return m===w?0:m.compareDocumentPosition(w)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1}).forEach(function(m){var w=null;m.nextSibling!=null&&(w=l.find(m.nextSibling));var _=c(m);(_.next!=w||_.next==null)&&(_.parent!=null&&_.parent.removeChild(b),b.insertBefore(_,w||void 0))})},f}(o.default);function c(h){var f=l.find(h);if(f==null)try{f=l.create(h)}catch{f=l.create(l.Scope.INLINE),[].slice.call(h.childNodes).forEach(function(y){f.domNode.appendChild(y)}),h.parentNode&&h.parentNode.replaceChild(f.domNode,h),f.attach()}return f}n.default=u},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var y in d)d.hasOwnProperty(y)&&(f[y]=d[y])};return function(f,d){h(f,d);function y(){this.constructor=f}f.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(12),o=r(31),l=r(17),u=r(1),c=function(h){s(f,h);function f(d){var y=h.call(this,d)||this;return y.attributes=new o.default(y.domNode),y}return f.formats=function(d){if(typeof this.tagName=="string")return!0;if(Array.isArray(this.tagName))return d.tagName.toLowerCase()},f.prototype.format=function(d,y){var b=u.query(d);b instanceof a.default?this.attributes.attribute(b,y):y&&b!=null&&(d!==this.statics.blotName||this.formats()[d]!==y)&&this.replaceWith(d,y)},f.prototype.formats=function(){var d=this.attributes.values(),y=this.statics.formats(this.domNode);return y!=null&&(d[this.statics.blotName]=y),d},f.prototype.replaceWith=function(d,y){var b=h.prototype.replaceWith.call(this,d,y);return this.attributes.copy(b),b},f.prototype.update=function(d,y){var b=this;h.prototype.update.call(this,d,y),d.some(function(v){return v.target===b.domNode&&v.type==="attributes"})&&this.attributes.build()},f.prototype.wrap=function(d,y){var b=h.prototype.wrap.call(this,d,y);return b instanceof f&&b.statics.scope===this.statics.scope&&this.attributes.move(b),b},f}(l.default);n.default=c},function(t,n,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(30),o=r(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.value=function(h){return!0},c.prototype.index=function(h,f){return this.domNode===h||this.domNode.compareDocumentPosition(h)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(f,1):-1},c.prototype.position=function(h,f){var d=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return h>0&&(d+=1),[this.parent.domNode,d]},c.prototype.value=function(){var h;return h={},h[this.statics.blotName]=this.statics.value(this.domNode)||!0,h},c.scope=o.Scope.INLINE_BLOT,c}(a.default);n.default=l},function(t,n,r){var s=r(11),a=r(3),o={attributes:{compose:function(u,c,h){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var f=a(!0,{},c);h||(f=Object.keys(f).reduce(function(y,b){return f[b]!=null&&(y[b]=f[b]),y},{}));for(var d in u)u[d]!==void 0&&c[d]===void 0&&(f[d]=u[d]);return Object.keys(f).length>0?f:void 0},diff:function(u,c){typeof u!="object"&&(u={}),typeof c!="object"&&(c={});var h=Object.keys(u).concat(Object.keys(c)).reduce(function(f,d){return s(u[d],c[d])||(f[d]=c[d]===void 0?null:c[d]),f},{});return Object.keys(h).length>0?h:void 0},transform:function(u,c,h){if(typeof u!="object")return c;if(typeof c=="object"){if(!h)return c;var f=Object.keys(c).reduce(function(d,y){return u[y]===void 0&&(d[y]=c[y]),d},{});return Object.keys(f).length>0?f:void 0}}},iterator:function(u){return new l(u)},length:function(u){return typeof u.delete=="number"?u.delete:typeof u.retain=="number"?u.retain:typeof u.insert=="string"?u.insert.length:1}};function l(u){this.ops=u,this.index=0,this.offset=0}l.prototype.hasNext=function(){return this.peekLength()<1/0},l.prototype.next=function(u){u||(u=1/0);var c=this.ops[this.index];if(c){var h=this.offset,f=o.length(c);if(u>=f-h?(u=f-h,this.index+=1,this.offset=0):this.offset+=u,typeof c.delete=="number")return{delete:u};var d={};return c.attributes&&(d.attributes=c.attributes),typeof c.retain=="number"?d.retain=u:typeof c.insert=="string"?d.insert=c.insert.substr(h,u):d.insert=c.insert,d}else return{retain:1/0}},l.prototype.peek=function(){return this.ops[this.index]},l.prototype.peekLength=function(){return this.ops[this.index]?o.length(this.ops[this.index])-this.offset:1/0},l.prototype.peekType=function(){return this.ops[this.index]?typeof this.ops[this.index].delete=="number"?"delete":typeof this.ops[this.index].retain=="number"?"retain":"insert":"retain"},l.prototype.rest=function(){if(this.hasNext()){if(this.offset===0)return this.ops.slice(this.index);var u=this.offset,c=this.index,h=this.next(),f=this.ops.slice(this.index);return this.offset=u,this.index=c,[h].concat(f)}else return[]},t.exports=o},function(t,n){var r=function(){function s(b,v){return v!=null&&b instanceof v}var a;try{a=Map}catch{a=function(){}}var o;try{o=Set}catch{o=function(){}}var l;try{l=Promise}catch{l=function(){}}function u(b,v,g,m,w){typeof v=="object"&&(g=v.depth,m=v.prototype,w=v.includeNonEnumerable,v=v.circular);var _=[],E=[],x=typeof Buffer<"u";typeof v>"u"&&(v=!0),typeof g>"u"&&(g=1/0);function A(S,O){if(S===null)return null;if(O===0)return S;var C,k;if(typeof S!="object")return S;if(s(S,a))C=new a;else if(s(S,o))C=new o;else if(s(S,l))C=new l(function(q,P){S.then(function(B){q(A(B,O-1))},function(B){P(A(B,O-1))})});else if(u.__isArray(S))C=[];else if(u.__isRegExp(S))C=new RegExp(S.source,y(S)),S.lastIndex&&(C.lastIndex=S.lastIndex);else if(u.__isDate(S))C=new Date(S.getTime());else{if(x&&Buffer.isBuffer(S))return Buffer.allocUnsafe?C=Buffer.allocUnsafe(S.length):C=new Buffer(S.length),S.copy(C),C;s(S,Error)?C=Object.create(S):typeof m>"u"?(k=Object.getPrototypeOf(S),C=Object.create(k)):(C=Object.create(m),k=m)}if(v){var D=_.indexOf(S);if(D!=-1)return E[D];_.push(S),E.push(C)}s(S,a)&&S.forEach(function(q,P){var B=A(P,O-1),V=A(q,O-1);C.set(B,V)}),s(S,o)&&S.forEach(function(q){var P=A(q,O-1);C.add(P)});for(var R in S){var F;k&&(F=Object.getOwnPropertyDescriptor(k,R)),!(F&&F.set==null)&&(C[R]=A(S[R],O-1))}if(Object.getOwnPropertySymbols)for(var H=Object.getOwnPropertySymbols(S),R=0;R<H.length;R++){var $=H[R],G=Object.getOwnPropertyDescriptor(S,$);G&&!G.enumerable&&!w||(C[$]=A(S[$],O-1),G.enumerable||Object.defineProperty(C,$,{enumerable:!1}))}if(w)for(var Z=Object.getOwnPropertyNames(S),R=0;R<Z.length;R++){var K=Z[R],G=Object.getOwnPropertyDescriptor(S,K);G&&G.enumerable||(C[K]=A(S[K],O-1),Object.defineProperty(C,K,{enumerable:!1}))}return C}return A(b,g)}u.clonePrototype=function(v){if(v===null)return null;var g=function(){};return g.prototype=v,new g};function c(b){return Object.prototype.toString.call(b)}u.__objToStr=c;function h(b){return typeof b=="object"&&c(b)==="[object Date]"}u.__isDate=h;function f(b){return typeof b=="object"&&c(b)==="[object Array]"}u.__isArray=f;function d(b){return typeof b=="object"&&c(b)==="[object RegExp]"}u.__isRegExp=d;function y(b){var v="";return b.global&&(v+="g"),b.ignoreCase&&(v+="i"),b.multiline&&(v+="m"),v}return u.__getRegExpFlags=y,u}();typeof t=="object"&&t.exports&&(t.exports=r)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function C(k,D){var R=[],F=!0,H=!1,$=void 0;try{for(var G=k[Symbol.iterator](),Z;!(F=(Z=G.next()).done)&&(R.push(Z.value),!(D&&R.length===D));F=!0);}catch(K){H=!0,$=K}finally{try{!F&&G.return&&G.return()}finally{if(H)throw $}}return R}return function(k,D){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return C(k,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function C(k,D){for(var R=0;R<D.length;R++){var F=D[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,D,R){return D&&C(k.prototype,D),R&&C(k,R),k}}(),o=function C(k,D,R){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,D);if(F===void 0){var H=Object.getPrototypeOf(k);return H===null?void 0:C(H,D,R)}else{if("value"in F)return F.value;var $=F.get;return $===void 0?void 0:$.call(R)}},l=r(0),u=_(l),c=r(8),h=_(c),f=r(4),d=_(f),y=r(16),b=_(y),v=r(13),g=_(v),m=r(25),w=_(m);function _(C){return C&&C.__esModule?C:{default:C}}function E(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function x(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:C}function A(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}function S(C){return C instanceof d.default||C instanceof f.BlockEmbed}var O=function(C){A(k,C);function k(D,R){E(this,k);var F=x(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,D));return F.emitter=R.emitter,Array.isArray(R.whitelist)&&(F.whitelist=R.whitelist.reduce(function(H,$){return H[$]=!0,H},{})),F.domNode.addEventListener("DOMNodeInserted",function(){}),F.optimize(),F.enable(),F}return a(k,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(R,F){var H=this.line(R),$=s(H,2),G=$[0],Z=$[1],K=this.line(R+F),q=s(K,1),P=q[0];if(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"deleteAt",this).call(this,R,F),P!=null&&G!==P&&Z>0){if(G instanceof f.BlockEmbed||P instanceof f.BlockEmbed){this.optimize();return}if(G instanceof g.default){var B=G.newlineIndex(G.length(),!0);if(B>-1&&(G=G.split(B+1),G===P)){this.optimize();return}}else if(P instanceof g.default){var V=P.newlineIndex(0);V>-1&&P.split(V+1)}var J=P.children.head instanceof b.default?null:P.children.head;G.moveChildren(P,J),G.remove()}this.optimize()}},{key:"enable",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:!0;this.domNode.setAttribute("contenteditable",R)}},{key:"formatAt",value:function(R,F,H,$){this.whitelist!=null&&!this.whitelist[H]||(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"formatAt",this).call(this,R,F,H,$),this.optimize())}},{key:"insertAt",value:function(R,F,H){if(!(H!=null&&this.whitelist!=null&&!this.whitelist[F])){if(R>=this.length())if(H==null||u.default.query(F,u.default.Scope.BLOCK)==null){var $=u.default.create(this.statics.defaultChild);this.appendChild($),H==null&&F.endsWith(`
`)&&(F=F.slice(0,-1)),$.insertAt(0,F,H)}else{var G=u.default.create(F,H);this.appendChild(G)}else o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertAt",this).call(this,R,F,H);this.optimize()}}},{key:"insertBefore",value:function(R,F){if(R.statics.scope===u.default.Scope.INLINE_BLOT){var H=u.default.create(this.statics.defaultChild);H.appendChild(R),R=H}o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"insertBefore",this).call(this,R,F)}},{key:"leaf",value:function(R){return this.path(R).pop()||[null,-1]}},{key:"line",value:function(R){return R===this.length()?this.line(R-1):this.descendant(S,R)}},{key:"lines",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:0,F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Number.MAX_VALUE,H=function $(G,Z,K){var q=[],P=K;return G.children.forEachAt(Z,K,function(B,V,J){S(B)?q.push(B):B instanceof u.default.Container&&(q=q.concat($(B,V,P))),P-=J}),q};return H(this,R,F)}},{key:"optimize",value:function(){var R=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],F=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};this.batch!==!0&&(o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"optimize",this).call(this,R,F),R.length>0&&this.emitter.emit(h.default.events.SCROLL_OPTIMIZE,R,F))}},{key:"path",value:function(R){return o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"path",this).call(this,R).slice(1)}},{key:"update",value:function(R){if(this.batch!==!0){var F=h.default.sources.USER;typeof R=="string"&&(F=R),Array.isArray(R)||(R=this.observer.takeRecords()),R.length>0&&this.emitter.emit(h.default.events.SCROLL_BEFORE_UPDATE,F,R),o(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"update",this).call(this,R.concat([])),R.length>0&&this.emitter.emit(h.default.events.SCROLL_UPDATE,F,R)}}}]),k}(u.default.Scroll);O.blotName="scroll",O.className="ql-editor",O.tagName="DIV",O.defaultChild="block",O.allowedChildren=[d.default,f.BlockEmbed,w.default],n.default=O},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SHORTKEY=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(U){return typeof U}:function(U){return U&&typeof Symbol=="function"&&U.constructor===Symbol&&U!==Symbol.prototype?"symbol":typeof U},a=function(){function U(Y,re){var oe=[],de=!0,_e=!1,Le=void 0;try{for(var Ne=Y[Symbol.iterator](),Ve;!(de=(Ve=Ne.next()).done)&&(oe.push(Ve.value),!(re&&oe.length===re));de=!0);}catch(Xe){_e=!0,Le=Xe}finally{try{!de&&Ne.return&&Ne.return()}finally{if(_e)throw Le}}return oe}return function(Y,re){if(Array.isArray(Y))return Y;if(Symbol.iterator in Object(Y))return U(Y,re);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function U(Y,re){for(var oe=0;oe<re.length;oe++){var de=re[oe];de.enumerable=de.enumerable||!1,de.configurable=!0,"value"in de&&(de.writable=!0),Object.defineProperty(Y,de.key,de)}}return function(Y,re,oe){return re&&U(Y.prototype,re),oe&&U(Y,oe),Y}}(),l=r(21),u=C(l),c=r(11),h=C(c),f=r(3),d=C(f),y=r(2),b=C(y),v=r(20),g=C(v),m=r(0),w=C(m),_=r(5),E=C(_),x=r(10),A=C(x),S=r(9),O=C(S);function C(U){return U&&U.__esModule?U:{default:U}}function k(U,Y,re){return Y in U?Object.defineProperty(U,Y,{value:re,enumerable:!0,configurable:!0,writable:!0}):U[Y]=re,U}function D(U,Y){if(!(U instanceof Y))throw new TypeError("Cannot call a class as a function")}function R(U,Y){if(!U)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Y&&(typeof Y=="object"||typeof Y=="function")?Y:U}function F(U,Y){if(typeof Y!="function"&&Y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof Y);U.prototype=Object.create(Y&&Y.prototype,{constructor:{value:U,enumerable:!1,writable:!0,configurable:!0}}),Y&&(Object.setPrototypeOf?Object.setPrototypeOf(U,Y):U.__proto__=Y)}var H=(0,A.default)("quill:keyboard"),$=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",G=function(U){F(Y,U),o(Y,null,[{key:"match",value:function(oe,de){return de=te(de),["altKey","ctrlKey","metaKey","shiftKey"].some(function(_e){return!!de[_e]!==oe[_e]&&de[_e]!==null})?!1:de.key===(oe.which||oe.keyCode)}}]);function Y(re,oe){D(this,Y);var de=R(this,(Y.__proto__||Object.getPrototypeOf(Y)).call(this,re,oe));return de.bindings={},Object.keys(de.options.bindings).forEach(function(_e){_e==="list autofill"&&re.scroll.whitelist!=null&&!re.scroll.whitelist.list||de.options.bindings[_e]&&de.addBinding(de.options.bindings[_e])}),de.addBinding({key:Y.keys.ENTER,shiftKey:null},B),de.addBinding({key:Y.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},function(){}),/Firefox/i.test(navigator.userAgent)?(de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0},K),de.addBinding({key:Y.keys.DELETE},{collapsed:!0},q)):(de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},K),de.addBinding({key:Y.keys.DELETE},{collapsed:!0,suffix:/^.?$/},q)),de.addBinding({key:Y.keys.BACKSPACE},{collapsed:!1},P),de.addBinding({key:Y.keys.DELETE},{collapsed:!1},P),de.addBinding({key:Y.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},K),de.listen(),de}return o(Y,[{key:"addBinding",value:function(oe){var de=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},_e=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},Le=te(oe);if(Le==null||Le.key==null)return H.warn("Attempted to add invalid keyboard binding",Le);typeof de=="function"&&(de={handler:de}),typeof _e=="function"&&(_e={handler:_e}),Le=(0,d.default)(Le,de,_e),this.bindings[Le.key]=this.bindings[Le.key]||[],this.bindings[Le.key].push(Le)}},{key:"listen",value:function(){var oe=this;this.quill.root.addEventListener("keydown",function(de){if(!de.defaultPrevented){var _e=de.which||de.keyCode,Le=(oe.bindings[_e]||[]).filter(function(ct){return Y.match(de,ct)});if(Le.length!==0){var Ne=oe.quill.getSelection();if(!(Ne==null||!oe.quill.hasFocus())){var Ve=oe.quill.getLine(Ne.index),Xe=a(Ve,2),Et=Xe[0],Ke=Xe[1],he=oe.quill.getLeaf(Ne.index),pe=a(he,2),xe=pe[0],Te=pe[1],me=Ne.length===0?[xe,Te]:oe.quill.getLeaf(Ne.index+Ne.length),De=a(me,2),Ge=De[0],Je=De[1],jt=xe instanceof w.default.Text?xe.value().slice(0,Te):"",Lt=Ge instanceof w.default.Text?Ge.value().slice(Je):"",mt={collapsed:Ne.length===0,empty:Ne.length===0&&Et.length()<=1,format:oe.quill.getFormat(Ne),offset:Ke,prefix:jt,suffix:Lt},Fi=Le.some(function(ct){if(ct.collapsed!=null&&ct.collapsed!==mt.collapsed||ct.empty!=null&&ct.empty!==mt.empty||ct.offset!=null&&ct.offset!==mt.offset)return!1;if(Array.isArray(ct.format)){if(ct.format.every(function(Sn){return mt.format[Sn]==null}))return!1}else if(s(ct.format)==="object"&&!Object.keys(ct.format).every(function(Sn){return ct.format[Sn]===!0?mt.format[Sn]!=null:ct.format[Sn]===!1?mt.format[Sn]==null:(0,h.default)(ct.format[Sn],mt.format[Sn])}))return!1;return ct.prefix!=null&&!ct.prefix.test(mt.prefix)||ct.suffix!=null&&!ct.suffix.test(mt.suffix)?!1:ct.handler.call(oe,Ne,mt)!==!0});Fi&&de.preventDefault()}}}})}}]),Y}(O.default);G.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},G.DEFAULTS={bindings:{bold:J("bold"),italic:J("italic"),underline:J("underline"),indent:{key:G.keys.TAB,format:["blockquote","indent","list"],handler:function(Y,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","+1",E.default.sources.USER)}},outdent:{key:G.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(Y,re){if(re.collapsed&&re.offset!==0)return!0;this.quill.format("indent","-1",E.default.sources.USER)}},"outdent backspace":{key:G.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(Y,re){re.format.indent!=null?this.quill.format("indent","-1",E.default.sources.USER):re.format.list!=null&&this.quill.format("list",!1,E.default.sources.USER)}},"indent code-block":V(!0),"outdent code-block":V(!1),"remove tab":{key:G.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(Y){this.quill.deleteText(Y.index-1,1,E.default.sources.USER)}},tab:{key:G.keys.TAB,handler:function(Y){this.quill.history.cutoff();var re=new b.default().retain(Y.index).delete(Y.length).insert("	");this.quill.updateContents(re,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index+1,E.default.sources.SILENT)}},"list empty enter":{key:G.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(Y,re){this.quill.format("list",!1,E.default.sources.USER),re.format.indent&&this.quill.format("indent",!1,E.default.sources.USER)}},"checklist enter":{key:G.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(Y){var re=this.quill.getLine(Y.index),oe=a(re,2),de=oe[0],_e=oe[1],Le=(0,d.default)({},de.formats(),{list:"checked"}),Ne=new b.default().retain(Y.index).insert(`
`,Le).retain(de.length()-_e-1).retain(1,{list:"unchecked"});this.quill.updateContents(Ne,E.default.sources.USER),this.quill.setSelection(Y.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:G.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(Y,re){var oe=this.quill.getLine(Y.index),de=a(oe,2),_e=de[0],Le=de[1],Ne=new b.default().retain(Y.index).insert(`
`,re.format).retain(_e.length()-Le-1).retain(1,{header:null});this.quill.updateContents(Ne,E.default.sources.USER),this.quill.setSelection(Y.index+1,E.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(Y,re){var oe=re.prefix.length,de=this.quill.getLine(Y.index),_e=a(de,2),Le=_e[0],Ne=_e[1];if(Ne>oe)return!0;var Ve=void 0;switch(re.prefix.trim()){case"[]":case"[ ]":Ve="unchecked";break;case"[x]":Ve="checked";break;case"-":case"*":Ve="bullet";break;default:Ve="ordered"}this.quill.insertText(Y.index," ",E.default.sources.USER),this.quill.history.cutoff();var Xe=new b.default().retain(Y.index-Ne).delete(oe+1).retain(Le.length()-2-Ne).retain(1,{list:Ve});this.quill.updateContents(Xe,E.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(Y.index-oe,E.default.sources.SILENT)}},"code exit":{key:G.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(Y){var re=this.quill.getLine(Y.index),oe=a(re,2),de=oe[0],_e=oe[1],Le=new b.default().retain(Y.index+de.length()-_e-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(Le,E.default.sources.USER)}},"embed left":Z(G.keys.LEFT,!1),"embed left shift":Z(G.keys.LEFT,!0),"embed right":Z(G.keys.RIGHT,!1),"embed right shift":Z(G.keys.RIGHT,!0)}};function Z(U,Y){var re,oe=U===G.keys.LEFT?"prefix":"suffix";return re={key:U,shiftKey:Y,altKey:null},k(re,oe,/^$/),k(re,"handler",function(_e){var Le=_e.index;U===G.keys.RIGHT&&(Le+=_e.length+1);var Ne=this.quill.getLeaf(Le),Ve=a(Ne,1),Xe=Ve[0];return Xe instanceof w.default.Embed?(U===G.keys.LEFT?Y?this.quill.setSelection(_e.index-1,_e.length+1,E.default.sources.USER):this.quill.setSelection(_e.index-1,E.default.sources.USER):Y?this.quill.setSelection(_e.index,_e.length+1,E.default.sources.USER):this.quill.setSelection(_e.index+_e.length+1,E.default.sources.USER),!1):!0}),re}function K(U,Y){if(!(U.index===0||this.quill.getLength()<=1)){var re=this.quill.getLine(U.index),oe=a(re,1),de=oe[0],_e={};if(Y.offset===0){var Le=this.quill.getLine(U.index-1),Ne=a(Le,1),Ve=Ne[0];if(Ve!=null&&Ve.length()>1){var Xe=de.formats(),Et=this.quill.getFormat(U.index-1,1);_e=g.default.attributes.diff(Xe,Et)||{}}}var Ke=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(Y.prefix)?2:1;this.quill.deleteText(U.index-Ke,Ke,E.default.sources.USER),Object.keys(_e).length>0&&this.quill.formatLine(U.index-Ke,Ke,_e,E.default.sources.USER),this.quill.focus()}}function q(U,Y){var re=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(Y.suffix)?2:1;if(!(U.index>=this.quill.getLength()-re)){var oe={},de=0,_e=this.quill.getLine(U.index),Le=a(_e,1),Ne=Le[0];if(Y.offset>=Ne.length()-1){var Ve=this.quill.getLine(U.index+1),Xe=a(Ve,1),Et=Xe[0];if(Et){var Ke=Ne.formats(),he=this.quill.getFormat(U.index,1);oe=g.default.attributes.diff(Ke,he)||{},de=Et.length()}}this.quill.deleteText(U.index,re,E.default.sources.USER),Object.keys(oe).length>0&&this.quill.formatLine(U.index+de-1,re,oe,E.default.sources.USER)}}function P(U){var Y=this.quill.getLines(U),re={};if(Y.length>1){var oe=Y[0].formats(),de=Y[Y.length-1].formats();re=g.default.attributes.diff(de,oe)||{}}this.quill.deleteText(U,E.default.sources.USER),Object.keys(re).length>0&&this.quill.formatLine(U.index,1,re,E.default.sources.USER),this.quill.setSelection(U.index,E.default.sources.SILENT),this.quill.focus()}function B(U,Y){var re=this;U.length>0&&this.quill.scroll.deleteAt(U.index,U.length);var oe=Object.keys(Y.format).reduce(function(de,_e){return w.default.query(_e,w.default.Scope.BLOCK)&&!Array.isArray(Y.format[_e])&&(de[_e]=Y.format[_e]),de},{});this.quill.insertText(U.index,`
`,oe,E.default.sources.USER),this.quill.setSelection(U.index+1,E.default.sources.SILENT),this.quill.focus(),Object.keys(Y.format).forEach(function(de){oe[de]==null&&(Array.isArray(Y.format[de])||de!=="link"&&re.quill.format(de,Y.format[de],E.default.sources.USER))})}function V(U){return{key:G.keys.TAB,shiftKey:!U,format:{"code-block":!0},handler:function(re){var oe=w.default.query("code-block"),de=re.index,_e=re.length,Le=this.quill.scroll.descendant(oe,de),Ne=a(Le,2),Ve=Ne[0],Xe=Ne[1];if(Ve!=null){var Et=this.quill.getIndex(Ve),Ke=Ve.newlineIndex(Xe,!0)+1,he=Ve.newlineIndex(Et+Xe+_e),pe=Ve.domNode.textContent.slice(Ke,he).split(`
`);Xe=0,pe.forEach(function(xe,Te){U?(Ve.insertAt(Ke+Xe,oe.TAB),Xe+=oe.TAB.length,Te===0?de+=oe.TAB.length:_e+=oe.TAB.length):xe.startsWith(oe.TAB)&&(Ve.deleteAt(Ke+Xe,oe.TAB.length),Xe-=oe.TAB.length,Te===0?de-=oe.TAB.length:_e-=oe.TAB.length),Xe+=xe.length+1}),this.quill.update(E.default.sources.USER),this.quill.setSelection(de,_e,E.default.sources.SILENT)}}}}function J(U){return{key:U[0].toUpperCase(),shortKey:!0,handler:function(re,oe){this.quill.format(U,!oe.format[U],E.default.sources.USER)}}}function te(U){if(typeof U=="string"||typeof U=="number")return te({key:U});if((typeof U>"u"?"undefined":s(U))==="object"&&(U=(0,u.default)(U,!1)),typeof U.key=="string")if(G.keys[U.key.toUpperCase()]!=null)U.key=G.keys[U.key.toUpperCase()];else if(U.key.length===1)U.key=U.key.toUpperCase().charCodeAt(0);else return null;return U.shortKey&&(U[$]=U.shortKey,delete U.shortKey),U}n.default=G,n.SHORTKEY=$},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,w){var _=[],E=!0,x=!1,A=void 0;try{for(var S=m[Symbol.iterator](),O;!(E=(O=S.next()).done)&&(_.push(O.value),!(w&&_.length===w));E=!0);}catch(C){x=!0,A=C}finally{try{!E&&S.return&&S.return()}finally{if(x)throw A}}return _}return function(m,w){if(Array.isArray(m))return m;if(Symbol.iterator in Object(m))return g(m,w);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function g(m,w,_){m===null&&(m=Function.prototype);var E=Object.getOwnPropertyDescriptor(m,w);if(E===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:g(x,w,_)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(_)}},o=function(){function g(m,w){for(var _=0;_<w.length;_++){var E=w[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}return function(m,w,_){return w&&g(m.prototype,w),_&&g(m,_),m}}(),l=r(0),u=f(l),c=r(7),h=f(c);function f(g){return g&&g.__esModule?g:{default:g}}function d(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function y(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function b(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var v=function(g){b(m,g),o(m,null,[{key:"value",value:function(){}}]);function m(w,_){d(this,m);var E=y(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,w));return E.selection=_,E.textNode=document.createTextNode(m.CONTENTS),E.domNode.appendChild(E.textNode),E._length=0,E}return o(m,[{key:"detach",value:function(){this.parent!=null&&this.parent.removeChild(this)}},{key:"format",value:function(_,E){if(this._length!==0)return a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"format",this).call(this,_,E);for(var x=this,A=0;x!=null&&x.statics.scope!==u.default.Scope.BLOCK_BLOT;)A+=x.offset(x.parent),x=x.parent;x!=null&&(this._length=m.CONTENTS.length,x.optimize(),x.formatAt(A,m.CONTENTS.length,_,E),this._length=0)}},{key:"index",value:function(_,E){return _===this.textNode?0:a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,_,E)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!(this.selection.composing||this.parent==null)){var _=this.textNode,E=this.selection.getNativeRange(),x=void 0,A=void 0,S=void 0;if(E!=null&&E.start.node===_&&E.end.node===_){var O=[_,E.start.offset,E.end.offset];x=O[0],A=O[1],S=O[2]}for(;this.domNode.lastChild!=null&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==m.CONTENTS){var C=this.textNode.data.split(m.CONTENTS).join("");this.next instanceof h.default?(x=this.next.domNode,this.next.insertAt(0,C),this.textNode.data=m.CONTENTS):(this.textNode.data=C,this.parent.insertBefore(u.default.create(this.textNode),this),this.textNode=document.createTextNode(m.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),A!=null){var k=[A,S].map(function(R){return Math.max(0,Math.min(x.data.length,R-1))}),D=s(k,2);return A=D[0],S=D[1],{startNode:x,startOffset:A,endNode:x,endOffset:S}}}}},{key:"update",value:function(_,E){var x=this;if(_.some(function(S){return S.type==="characterData"&&S.target===x.textNode})){var A=this.restore();A&&(E.range=A)}}},{key:"value",value:function(){return""}}]),m}(u.default.Embed);v.blotName="cursor",v.className="ql-cursor",v.tagName="span",v.CONTENTS="\uFEFF",n.default=v},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(0),a=u(s),o=r(4),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function f(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var d=function(y){f(b,y);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return b}(a.default.Container);d.allowedChildren=[l.default,o.BlockEmbed,d],n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.ColorStyle=n.ColorClass=n.ColorAttributor=void 0;var s=function(){function v(g,m){for(var w=0;w<m.length;w++){var _=m[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,m,w){return m&&v(g.prototype,m),w&&v(g,w),g}}(),a=function v(g,m,w){g===null&&(g=Function.prototype);var _=Object.getOwnPropertyDescriptor(g,m);if(_===void 0){var E=Object.getPrototypeOf(g);return E===null?void 0:v(E,m,w)}else{if("value"in _)return _.value;var x=_.get;return x===void 0?void 0:x.call(w)}},o=r(0),l=u(o);function u(v){return v&&v.__esModule?v:{default:v}}function c(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function h(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function f(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var d=function(v){f(g,v);function g(){return c(this,g),h(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"value",value:function(w){var _=a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"value",this).call(this,w);return _.startsWith("rgb(")?(_=_.replace(/^[^\d]+/,"").replace(/[^\d]+$/,""),"#"+_.split(",").map(function(E){return("00"+parseInt(E).toString(16)).slice(-2)}).join("")):_}}]),g}(l.default.Attributor.Style),y=new l.default.Attributor.Class("color","ql-color",{scope:l.default.Scope.INLINE}),b=new d("color","color",{scope:l.default.Scope.INLINE});n.ColorAttributor=d,n.ColorClass=y,n.ColorStyle=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.sanitize=n.default=void 0;var s=function(){function b(v,g){for(var m=0;m<g.length;m++){var w=g[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,m){return g&&b(v.prototype,g),m&&b(v,m),v}}(),a=function b(v,g,m){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:b(_,g,m)}else{if("value"in w)return w.value;var E=w.get;return E===void 0?void 0:E.call(m)}},o=r(6),l=u(o);function u(b){return b&&b.__esModule?b:{default:b}}function c(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function h(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var d=function(b){f(v,b);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"format",value:function(m,w){if(m!==this.statics.blotName||!w)return a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"format",this).call(this,m,w);w=this.constructor.sanitize(w),this.domNode.setAttribute("href",w)}}],[{key:"create",value:function(m){var w=a(v.__proto__||Object.getPrototypeOf(v),"create",this).call(this,m);return m=this.sanitize(m),w.setAttribute("href",m),w.setAttribute("rel","noopener noreferrer"),w.setAttribute("target","_blank"),w}},{key:"formats",value:function(m){return m.getAttribute("href")}},{key:"sanitize",value:function(m){return y(m,this.PROTOCOL_WHITELIST)?m:this.SANITIZED_URL}}]),v}(l.default);d.blotName="link",d.tagName="A",d.SANITIZED_URL="about:blank",d.PROTOCOL_WHITELIST=["http","https","mailto","tel"];function y(b,v){var g=document.createElement("a");g.href=b;var m=g.href.slice(0,g.href.indexOf(":"));return v.indexOf(m)>-1}n.default=d,n.sanitize=y},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(v){return typeof v}:function(v){return v&&typeof Symbol=="function"&&v.constructor===Symbol&&v!==Symbol.prototype?"symbol":typeof v},a=function(){function v(g,m){for(var w=0;w<m.length;w++){var _=m[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,m,w){return m&&v(g.prototype,m),w&&v(g,w),g}}(),o=r(23),l=h(o),u=r(107),c=h(u);function h(v){return v&&v.__esModule?v:{default:v}}function f(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}var d=0;function y(v,g){v.setAttribute(g,v.getAttribute(g)!=="true")}var b=function(){function v(g){var m=this;f(this,v),this.select=g,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",function(){m.togglePicker()}),this.label.addEventListener("keydown",function(w){switch(w.keyCode){case l.default.keys.ENTER:m.togglePicker();break;case l.default.keys.ESCAPE:m.escape(),w.preventDefault();break}}),this.select.addEventListener("change",this.update.bind(this))}return a(v,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),y(this.label,"aria-expanded"),y(this.options,"aria-hidden")}},{key:"buildItem",value:function(m){var w=this,_=document.createElement("span");return _.tabIndex="0",_.setAttribute("role","button"),_.classList.add("ql-picker-item"),m.hasAttribute("value")&&_.setAttribute("data-value",m.getAttribute("value")),m.textContent&&_.setAttribute("data-label",m.textContent),_.addEventListener("click",function(){w.selectItem(_,!0)}),_.addEventListener("keydown",function(E){switch(E.keyCode){case l.default.keys.ENTER:w.selectItem(_,!0),E.preventDefault();break;case l.default.keys.ESCAPE:w.escape(),E.preventDefault();break}}),_}},{key:"buildLabel",value:function(){var m=document.createElement("span");return m.classList.add("ql-picker-label"),m.innerHTML=c.default,m.tabIndex="0",m.setAttribute("role","button"),m.setAttribute("aria-expanded","false"),this.container.appendChild(m),m}},{key:"buildOptions",value:function(){var m=this,w=document.createElement("span");w.classList.add("ql-picker-options"),w.setAttribute("aria-hidden","true"),w.tabIndex="-1",w.id="ql-picker-options-"+d,d+=1,this.label.setAttribute("aria-controls",w.id),this.options=w,[].slice.call(this.select.options).forEach(function(_){var E=m.buildItem(_);w.appendChild(E),_.selected===!0&&m.selectItem(E)}),this.container.appendChild(w)}},{key:"buildPicker",value:function(){var m=this;[].slice.call(this.select.attributes).forEach(function(w){m.container.setAttribute(w.name,w.value)}),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var m=this;this.close(),setTimeout(function(){return m.label.focus()},1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(m){var w=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!1,_=this.container.querySelector(".ql-selected");if(m!==_&&(_!=null&&_.classList.remove("ql-selected"),m!=null&&(m.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(m.parentNode.children,m),m.hasAttribute("data-value")?this.label.setAttribute("data-value",m.getAttribute("data-value")):this.label.removeAttribute("data-value"),m.hasAttribute("data-label")?this.label.setAttribute("data-label",m.getAttribute("data-label")):this.label.removeAttribute("data-label"),w))){if(typeof Event=="function")this.select.dispatchEvent(new Event("change"));else if((typeof Event>"u"?"undefined":s(Event))==="object"){var E=document.createEvent("Event");E.initEvent("change",!0,!0),this.select.dispatchEvent(E)}this.close()}}},{key:"update",value:function(){var m=void 0;if(this.select.selectedIndex>-1){var w=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];m=this.select.options[this.select.selectedIndex],this.selectItem(w)}else this.selectItem(null);var _=m!=null&&m!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",_)}}]),v}();n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(0),a=H(s),o=r(5),l=H(o),u=r(4),c=H(u),h=r(16),f=H(h),d=r(25),y=H(d),b=r(24),v=H(b),g=r(35),m=H(g),w=r(6),_=H(w),E=r(22),x=H(E),A=r(7),S=H(A),O=r(55),C=H(O),k=r(42),D=H(k),R=r(23),F=H(R);function H($){return $&&$.__esModule?$:{default:$}}l.default.register({"blots/block":c.default,"blots/block/embed":u.BlockEmbed,"blots/break":f.default,"blots/container":y.default,"blots/cursor":v.default,"blots/embed":m.default,"blots/inline":_.default,"blots/scroll":x.default,"blots/text":S.default,"modules/clipboard":C.default,"modules/history":D.default,"modules/keyboard":F.default}),a.default.register(c.default,f.default,v.default,_.default,x.default,S.default),n.default=l.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(1),a=function(){function o(l){this.domNode=l,this.domNode[s.DATA_KEY]={blot:this}}return Object.defineProperty(o.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),o.create=function(l){if(this.tagName==null)throw new s.ParchmentError("Blot definition missing tagName");var u;return Array.isArray(this.tagName)?(typeof l=="string"&&(l=l.toUpperCase(),parseInt(l).toString()===l&&(l=parseInt(l))),typeof l=="number"?u=document.createElement(this.tagName[l-1]):this.tagName.indexOf(l)>-1?u=document.createElement(l):u=document.createElement(this.tagName[0])):u=document.createElement(this.tagName),this.className&&u.classList.add(this.className),u},o.prototype.attach=function(){this.parent!=null&&(this.scroll=this.parent.scroll)},o.prototype.clone=function(){var l=this.domNode.cloneNode(!1);return s.create(l)},o.prototype.detach=function(){this.parent!=null&&this.parent.removeChild(this),delete this.domNode[s.DATA_KEY]},o.prototype.deleteAt=function(l,u){var c=this.isolate(l,u);c.remove()},o.prototype.formatAt=function(l,u,c,h){var f=this.isolate(l,u);if(s.query(c,s.Scope.BLOT)!=null&&h)f.wrap(c,h);else if(s.query(c,s.Scope.ATTRIBUTE)!=null){var d=s.create(this.statics.scope);f.wrap(d),d.format(c,h)}},o.prototype.insertAt=function(l,u,c){var h=c==null?s.create("text",u):s.create(u,c),f=this.split(l);this.parent.insertBefore(h,f)},o.prototype.insertInto=function(l,u){u===void 0&&(u=null),this.parent!=null&&this.parent.children.remove(this);var c=null;l.children.insertBefore(this,u),u!=null&&(c=u.domNode),(this.domNode.parentNode!=l.domNode||this.domNode.nextSibling!=c)&&l.domNode.insertBefore(this.domNode,c),this.parent=l,this.attach()},o.prototype.isolate=function(l,u){var c=this.split(l);return c.split(u),c},o.prototype.length=function(){return 1},o.prototype.offset=function(l){return l===void 0&&(l=this.parent),this.parent==null||this==l?0:this.parent.children.offset(this)+this.parent.offset(l)},o.prototype.optimize=function(l){this.domNode[s.DATA_KEY]!=null&&delete this.domNode[s.DATA_KEY].mutations},o.prototype.remove=function(){this.domNode.parentNode!=null&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},o.prototype.replace=function(l){l.parent!=null&&(l.parent.insertBefore(this,l.next),l.remove())},o.prototype.replaceWith=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return c.replace(this),c},o.prototype.split=function(l,u){return l===0?this:this.next},o.prototype.update=function(l,u){},o.prototype.wrap=function(l,u){var c=typeof l=="string"?s.create(l,u):l;return this.parent!=null&&this.parent.insertBefore(c,this.next),c.appendChild(this),c},o.blotName="abstract",o}();n.default=a},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(12),a=r(32),o=r(33),l=r(1),u=function(){function c(h){this.attributes={},this.domNode=h,this.build()}return c.prototype.attribute=function(h,f){f?h.add(this.domNode,f)&&(h.value(this.domNode)!=null?this.attributes[h.attrName]=h:delete this.attributes[h.attrName]):(h.remove(this.domNode),delete this.attributes[h.attrName])},c.prototype.build=function(){var h=this;this.attributes={};var f=s.default.keys(this.domNode),d=a.default.keys(this.domNode),y=o.default.keys(this.domNode);f.concat(d).concat(y).forEach(function(b){var v=l.query(b,l.Scope.ATTRIBUTE);v instanceof s.default&&(h.attributes[v.attrName]=v)})},c.prototype.copy=function(h){var f=this;Object.keys(this.attributes).forEach(function(d){var y=f.attributes[d].value(f.domNode);h.format(d,y)})},c.prototype.move=function(h){var f=this;this.copy(h),Object.keys(this.attributes).forEach(function(d){f.attributes[d].remove(f.domNode)}),this.attributes={}},c.prototype.values=function(){var h=this;return Object.keys(this.attributes).reduce(function(f,d){return f[d]=h.attributes[d].value(h.domNode),f},{})},c}();n.default=u},function(t,n,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(12);function o(u,c){var h=u.getAttribute("class")||"";return h.split(/\s+/).filter(function(f){return f.indexOf(c+"-")===0})}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("class")||"").split(/\s+/).map(function(f){return f.split("-").slice(0,-1).join("-")})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(this.remove(h),h.classList.add(this.keyName+"-"+f),!0):!1},c.prototype.remove=function(h){var f=o(h,this.keyName);f.forEach(function(d){h.classList.remove(d)}),h.classList.length===0&&h.removeAttribute("class")},c.prototype.value=function(h){var f=o(h,this.keyName)[0]||"",d=f.slice(this.keyName.length+1);return this.canAdd(h,d)?d:""},c}(a.default);n.default=l},function(t,n,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(12);function o(u){var c=u.split("-"),h=c.slice(1).map(function(f){return f[0].toUpperCase()+f.slice(1)}).join("");return c[0]+h}var l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.keys=function(h){return(h.getAttribute("style")||"").split(";").map(function(f){var d=f.split(":");return d[0].trim()})},c.prototype.add=function(h,f){return this.canAdd(h,f)?(h.style[o(this.keyName)]=f,!0):!1},c.prototype.remove=function(h){h.style[o(this.keyName)]="",h.getAttribute("style")||h.removeAttribute("style")},c.prototype.value=function(h){var f=h.style[o(this.keyName)];return this.canAdd(h,f)?f:""},c}(a.default);n.default=l},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}}();function a(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(u,c){a(this,l),this.quill=u,this.options=c,this.modules={}}return s(l,[{key:"init",value:function(){var c=this;Object.keys(this.options.modules).forEach(function(h){c.modules[h]==null&&c.addModule(h)})}},{key:"addModule",value:function(c){var h=this.quill.constructor.import("modules/"+c);return this.modules[c]=new h(this.quill,this.options.modules[c]||{}),this.modules[c]}}]),l}();o.DEFAULTS={modules:{}},o.themes={default:o},n.default=o},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function g(m,w){for(var _=0;_<w.length;_++){var E=w[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}return function(m,w,_){return w&&g(m.prototype,w),_&&g(m,_),m}}(),a=function g(m,w,_){m===null&&(m=Function.prototype);var E=Object.getOwnPropertyDescriptor(m,w);if(E===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:g(x,w,_)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(_)}},o=r(0),l=h(o),u=r(7),c=h(u);function h(g){return g&&g.__esModule?g:{default:g}}function f(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function d(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function y(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var b="\uFEFF",v=function(g){y(m,g);function m(w){f(this,m);var _=d(this,(m.__proto__||Object.getPrototypeOf(m)).call(this,w));return _.contentNode=document.createElement("span"),_.contentNode.setAttribute("contenteditable",!1),[].slice.call(_.domNode.childNodes).forEach(function(E){_.contentNode.appendChild(E)}),_.leftGuard=document.createTextNode(b),_.rightGuard=document.createTextNode(b),_.domNode.appendChild(_.leftGuard),_.domNode.appendChild(_.contentNode),_.domNode.appendChild(_.rightGuard),_}return s(m,[{key:"index",value:function(_,E){return _===this.leftGuard?0:_===this.rightGuard?1:a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"index",this).call(this,_,E)}},{key:"restore",value:function(_){var E=void 0,x=void 0,A=_.data.split(b).join("");if(_===this.leftGuard)if(this.prev instanceof c.default){var S=this.prev.length();this.prev.insertAt(S,A),E={startNode:this.prev.domNode,startOffset:S+A.length}}else x=document.createTextNode(A),this.parent.insertBefore(l.default.create(x),this),E={startNode:x,startOffset:A.length};else _===this.rightGuard&&(this.next instanceof c.default?(this.next.insertAt(0,A),E={startNode:this.next.domNode,startOffset:A.length}):(x=document.createTextNode(A),this.parent.insertBefore(l.default.create(x),this.next),E={startNode:x,startOffset:A.length}));return _.data=b,E}},{key:"update",value:function(_,E){var x=this;_.forEach(function(A){if(A.type==="characterData"&&(A.target===x.leftGuard||A.target===x.rightGuard)){var S=x.restore(A.target);S&&(E.range=S)}})}}]),m}(l.default.Embed);n.default=v},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.AlignStyle=n.AlignClass=n.AlignAttribute=void 0;var s=r(0),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}var l={scope:a.default.Scope.BLOCK,whitelist:["right","center","justify"]},u=new a.default.Attributor.Attribute("align","align",l),c=new a.default.Attributor.Class("align","ql-align",l),h=new a.default.Attributor.Style("align","text-align",l);n.AlignAttribute=u,n.AlignClass=c,n.AlignStyle=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.BackgroundStyle=n.BackgroundClass=void 0;var s=r(0),a=l(s),o=r(26);function l(h){return h&&h.__esModule?h:{default:h}}var u=new a.default.Attributor.Class("background","ql-bg",{scope:a.default.Scope.INLINE}),c=new o.ColorAttributor("background","background-color",{scope:a.default.Scope.INLINE});n.BackgroundClass=u,n.BackgroundStyle=c},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.DirectionStyle=n.DirectionClass=n.DirectionAttribute=void 0;var s=r(0),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}var l={scope:a.default.Scope.BLOCK,whitelist:["rtl"]},u=new a.default.Attributor.Attribute("direction","dir",l),c=new a.default.Attributor.Class("direction","ql-direction",l),h=new a.default.Attributor.Style("direction","direction",l);n.DirectionAttribute=u,n.DirectionClass=c,n.DirectionStyle=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.FontClass=n.FontStyle=void 0;var s=function(){function g(m,w){for(var _=0;_<w.length;_++){var E=w[_];E.enumerable=E.enumerable||!1,E.configurable=!0,"value"in E&&(E.writable=!0),Object.defineProperty(m,E.key,E)}}return function(m,w,_){return w&&g(m.prototype,w),_&&g(m,_),m}}(),a=function g(m,w,_){m===null&&(m=Function.prototype);var E=Object.getOwnPropertyDescriptor(m,w);if(E===void 0){var x=Object.getPrototypeOf(m);return x===null?void 0:g(x,w,_)}else{if("value"in E)return E.value;var A=E.get;return A===void 0?void 0:A.call(_)}},o=r(0),l=u(o);function u(g){return g&&g.__esModule?g:{default:g}}function c(g,m){if(!(g instanceof m))throw new TypeError("Cannot call a class as a function")}function h(g,m){if(!g)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return m&&(typeof m=="object"||typeof m=="function")?m:g}function f(g,m){if(typeof m!="function"&&m!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof m);g.prototype=Object.create(m&&m.prototype,{constructor:{value:g,enumerable:!1,writable:!0,configurable:!0}}),m&&(Object.setPrototypeOf?Object.setPrototypeOf(g,m):g.__proto__=m)}var d={scope:l.default.Scope.INLINE,whitelist:["serif","monospace"]},y=new l.default.Attributor.Class("font","ql-font",d),b=function(g){f(m,g);function m(){return c(this,m),h(this,(m.__proto__||Object.getPrototypeOf(m)).apply(this,arguments))}return s(m,[{key:"value",value:function(_){return a(m.prototype.__proto__||Object.getPrototypeOf(m.prototype),"value",this).call(this,_).replace(/["']/g,"")}}]),m}(l.default.Attributor.Style),v=new b("font","font-family",d);n.FontStyle=v,n.FontClass=y},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.SizeStyle=n.SizeClass=void 0;var s=r(0),a=o(s);function o(c){return c&&c.__esModule?c:{default:c}}var l=new a.default.Attributor.Class("size","ql-size",{scope:a.default.Scope.INLINE,whitelist:["small","large","huge"]}),u=new a.default.Attributor.Style("size","font-size",{scope:a.default.Scope.INLINE,whitelist:["10px","18px","32px"]});n.SizeClass=l,n.SizeStyle=u},function(t,n,r){t.exports={align:{"":r(76),center:r(77),right:r(78),justify:r(79)},background:r(80),blockquote:r(81),bold:r(82),clean:r(83),code:r(58),"code-block":r(58),color:r(84),direction:{"":r(85),rtl:r(86)},float:{center:r(87),full:r(88),left:r(89),right:r(90)},formula:r(91),header:{1:r(92),2:r(93)},italic:r(94),image:r(95),indent:{"+1":r(96),"-1":r(97)},link:r(98),list:{ordered:r(99),bullet:r(100),check:r(101)},script:{sub:r(102),super:r(103)},strike:r(104),underline:r(105),video:r(106)}},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.getLastChangeIndex=n.default=void 0;var s=function(){function w(_,E){for(var x=0;x<E.length;x++){var A=E[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,E,x){return E&&w(_.prototype,E),x&&w(_,x),_}}(),a=r(0),o=f(a),l=r(5),u=f(l),c=r(9),h=f(c);function f(w){return w&&w.__esModule?w:{default:w}}function d(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function y(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function b(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var v=function(w){b(_,w);function _(E,x){d(this,_);var A=y(this,(_.__proto__||Object.getPrototypeOf(_)).call(this,E,x));return A.lastRecorded=0,A.ignoreChange=!1,A.clear(),A.quill.on(u.default.events.EDITOR_CHANGE,function(S,O,C,k){S!==u.default.events.TEXT_CHANGE||A.ignoreChange||(!A.options.userOnly||k===u.default.sources.USER?A.record(O,C):A.transform(O))}),A.quill.keyboard.addBinding({key:"Z",shortKey:!0},A.undo.bind(A)),A.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},A.redo.bind(A)),/Win/i.test(navigator.platform)&&A.quill.keyboard.addBinding({key:"Y",shortKey:!0},A.redo.bind(A)),A}return s(_,[{key:"change",value:function(x,A){if(this.stack[x].length!==0){var S=this.stack[x].pop();this.stack[A].push(S),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(S[x],u.default.sources.USER),this.ignoreChange=!1;var O=m(S[x]);this.quill.setSelection(O)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(x,A){if(x.ops.length!==0){this.stack.redo=[];var S=this.quill.getContents().diff(A),O=Date.now();if(this.lastRecorded+this.options.delay>O&&this.stack.undo.length>0){var C=this.stack.undo.pop();S=S.compose(C.undo),x=C.redo.compose(x)}else this.lastRecorded=O;this.stack.undo.push({redo:x,undo:S}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(x){this.stack.undo.forEach(function(A){A.undo=x.transform(A.undo,!0),A.redo=x.transform(A.redo,!0)}),this.stack.redo.forEach(function(A){A.undo=x.transform(A.undo,!0),A.redo=x.transform(A.redo,!0)})}},{key:"undo",value:function(){this.change("undo","redo")}}]),_}(h.default);v.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1};function g(w){var _=w.ops[w.ops.length-1];return _==null?!1:_.insert!=null?typeof _.insert=="string"&&_.insert.endsWith(`
`):_.attributes!=null?Object.keys(_.attributes).some(function(E){return o.default.query(E,o.default.Scope.BLOCK)!=null}):!1}function m(w){var _=w.reduce(function(x,A){return x+=A.delete||0,x},0),E=w.length()-_;return g(w)&&(E-=1),E}n.default=v,n.getLastChangeIndex=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BaseTooltip=void 0;var s=function(){function B(V,J){for(var te=0;te<J.length;te++){var U=J[te];U.enumerable=U.enumerable||!1,U.configurable=!0,"value"in U&&(U.writable=!0),Object.defineProperty(V,U.key,U)}}return function(V,J,te){return J&&B(V.prototype,J),te&&B(V,te),V}}(),a=function B(V,J,te){V===null&&(V=Function.prototype);var U=Object.getOwnPropertyDescriptor(V,J);if(U===void 0){var Y=Object.getPrototypeOf(V);return Y===null?void 0:B(Y,J,te)}else{if("value"in U)return U.value;var re=U.get;return re===void 0?void 0:re.call(te)}},o=r(3),l=O(o),u=r(2),c=O(u),h=r(8),f=O(h),d=r(23),y=O(d),b=r(34),v=O(b),g=r(59),m=O(g),w=r(60),_=O(w),E=r(28),x=O(E),A=r(61),S=O(A);function O(B){return B&&B.__esModule?B:{default:B}}function C(B,V){if(!(B instanceof V))throw new TypeError("Cannot call a class as a function")}function k(B,V){if(!B)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return V&&(typeof V=="object"||typeof V=="function")?V:B}function D(B,V){if(typeof V!="function"&&V!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof V);B.prototype=Object.create(V&&V.prototype,{constructor:{value:B,enumerable:!1,writable:!0,configurable:!0}}),V&&(Object.setPrototypeOf?Object.setPrototypeOf(B,V):B.__proto__=V)}var R=[!1,"center","right","justify"],F=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],H=[!1,"serif","monospace"],$=["1","2","3",!1],G=["small",!1,"large","huge"],Z=function(B){D(V,B);function V(J,te){C(this,V);var U=k(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,J,te)),Y=function re(oe){if(!document.body.contains(J.root))return document.body.removeEventListener("click",re);U.tooltip!=null&&!U.tooltip.root.contains(oe.target)&&document.activeElement!==U.tooltip.textbox&&!U.quill.hasFocus()&&U.tooltip.hide(),U.pickers!=null&&U.pickers.forEach(function(de){de.container.contains(oe.target)||de.close()})};return J.emitter.listenDOM("click",document.body,Y),U}return s(V,[{key:"addModule",value:function(te){var U=a(V.prototype.__proto__||Object.getPrototypeOf(V.prototype),"addModule",this).call(this,te);return te==="toolbar"&&this.extendToolbar(U),U}},{key:"buildButtons",value:function(te,U){te.forEach(function(Y){var re=Y.getAttribute("class")||"";re.split(/\s+/).forEach(function(oe){if(oe.startsWith("ql-")&&(oe=oe.slice(3),U[oe]!=null))if(oe==="direction")Y.innerHTML=U[oe][""]+U[oe].rtl;else if(typeof U[oe]=="string")Y.innerHTML=U[oe];else{var de=Y.value||"";de!=null&&U[oe][de]&&(Y.innerHTML=U[oe][de])}})})}},{key:"buildPickers",value:function(te,U){var Y=this;this.pickers=te.map(function(oe){if(oe.classList.contains("ql-align"))return oe.querySelector("option")==null&&P(oe,R),new _.default(oe,U.align);if(oe.classList.contains("ql-background")||oe.classList.contains("ql-color")){var de=oe.classList.contains("ql-background")?"background":"color";return oe.querySelector("option")==null&&P(oe,F,de==="background"?"#ffffff":"#000000"),new m.default(oe,U[de])}else return oe.querySelector("option")==null&&(oe.classList.contains("ql-font")?P(oe,H):oe.classList.contains("ql-header")?P(oe,$):oe.classList.contains("ql-size")&&P(oe,G)),new x.default(oe)});var re=function(){Y.pickers.forEach(function(de){de.update()})};this.quill.on(f.default.events.EDITOR_CHANGE,re)}}]),V}(v.default);Z.DEFAULTS=(0,l.default)(!0,{},v.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var V=this,J=this.container.querySelector("input.ql-image[type=file]");J==null&&(J=document.createElement("input"),J.setAttribute("type","file"),J.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),J.classList.add("ql-image"),J.addEventListener("change",function(){if(J.files!=null&&J.files[0]!=null){var te=new FileReader;te.onload=function(U){var Y=V.quill.getSelection(!0);V.quill.updateContents(new c.default().retain(Y.index).delete(Y.length).insert({image:U.target.result}),f.default.sources.USER),V.quill.setSelection(Y.index+1,f.default.sources.SILENT),J.value=""},te.readAsDataURL(J.files[0])}}),this.container.appendChild(J)),J.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var K=function(B){D(V,B);function V(J,te){C(this,V);var U=k(this,(V.__proto__||Object.getPrototypeOf(V)).call(this,J,te));return U.textbox=U.root.querySelector('input[type="text"]'),U.listen(),U}return s(V,[{key:"listen",value:function(){var te=this;this.textbox.addEventListener("keydown",function(U){y.default.match(U,"enter")?(te.save(),U.preventDefault()):y.default.match(U,"escape")&&(te.cancel(),U.preventDefault())})}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var te=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"link",U=arguments.length>1&&arguments[1]!==void 0?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),U!=null?this.textbox.value=U:te!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+te)||""),this.root.setAttribute("data-mode",te)}},{key:"restoreFocus",value:function(){var te=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=te}},{key:"save",value:function(){var te=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":{var U=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",te,f.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",te,f.default.sources.USER)),this.quill.root.scrollTop=U;break}case"video":te=q(te);case"formula":{if(!te)break;var Y=this.quill.getSelection(!0);if(Y!=null){var re=Y.index+Y.length;this.quill.insertEmbed(re,this.root.getAttribute("data-mode"),te,f.default.sources.USER),this.root.getAttribute("data-mode")==="formula"&&this.quill.insertText(re+1," ",f.default.sources.USER),this.quill.setSelection(re+2,f.default.sources.USER)}break}}this.textbox.value="",this.hide()}}]),V}(S.default);function q(B){var V=B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||B.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return V?(V[1]||"https")+"://www.youtube.com/embed/"+V[2]+"?showinfo=0":(V=B.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(V[1]||"https")+"://player.vimeo.com/video/"+V[2]+"/":B}function P(B,V){var J=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;V.forEach(function(te){var U=document.createElement("option");te===J?U.setAttribute("selected","selected"):U.setAttribute("value",te),B.appendChild(U)})}n.BaseTooltip=K,n.default=Z},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function a(){this.head=this.tail=null,this.length=0}return a.prototype.append=function(){for(var o=[],l=0;l<arguments.length;l++)o[l]=arguments[l];this.insertBefore(o[0],null),o.length>1&&this.append.apply(this,o.slice(1))},a.prototype.contains=function(o){for(var l,u=this.iterator();l=u();)if(l===o)return!0;return!1},a.prototype.insertBefore=function(o,l){o&&(o.next=l,l!=null?(o.prev=l.prev,l.prev!=null&&(l.prev.next=o),l.prev=o,l===this.head&&(this.head=o)):this.tail!=null?(this.tail.next=o,o.prev=this.tail,this.tail=o):(o.prev=null,this.head=this.tail=o),this.length+=1)},a.prototype.offset=function(o){for(var l=0,u=this.head;u!=null;){if(u===o)return l;l+=u.length(),u=u.next}return-1},a.prototype.remove=function(o){this.contains(o)&&(o.prev!=null&&(o.prev.next=o.next),o.next!=null&&(o.next.prev=o.prev),o===this.head&&(this.head=o.next),o===this.tail&&(this.tail=o.prev),this.length-=1)},a.prototype.iterator=function(o){return o===void 0&&(o=this.head),function(){var l=o;return o!=null&&(o=o.next),l}},a.prototype.find=function(o,l){l===void 0&&(l=!1);for(var u,c=this.iterator();u=c();){var h=u.length();if(o<h||l&&o===h&&(u.next==null||u.next.length()!==0))return[u,o];o-=h}return[null,0]},a.prototype.forEach=function(o){for(var l,u=this.iterator();l=u();)o(l)},a.prototype.forEachAt=function(o,l,u){if(!(l<=0))for(var c=this.find(o),h=c[0],f=c[1],d,y=o-f,b=this.iterator(h);(d=b())&&y<o+l;){var v=d.length();o>y?u(d,o-y,Math.min(l,y+v-o)):u(d,0,Math.min(v,o+l-y)),y+=v}},a.prototype.map=function(o){return this.reduce(function(l,u){return l.push(o(u)),l},[])},a.prototype.reduce=function(o,l){for(var u,c=this.iterator();u=c();)l=o(l,u);return l},a}();n.default=s},function(t,n,r){var s=this&&this.__extends||function(){var h=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(f,d){f.__proto__=d}||function(f,d){for(var y in d)d.hasOwnProperty(y)&&(f[y]=d[y])};return function(f,d){h(f,d);function y(){this.constructor=f}f.prototype=d===null?Object.create(d):(y.prototype=d.prototype,new y)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(17),o=r(1),l={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},u=100,c=function(h){s(f,h);function f(d){var y=h.call(this,d)||this;return y.scroll=y,y.observer=new MutationObserver(function(b){y.update(b)}),y.observer.observe(y.domNode,l),y.attach(),y}return f.prototype.detach=function(){h.prototype.detach.call(this),this.observer.disconnect()},f.prototype.deleteAt=function(d,y){this.update(),d===0&&y===this.length()?this.children.forEach(function(b){b.remove()}):h.prototype.deleteAt.call(this,d,y)},f.prototype.formatAt=function(d,y,b,v){this.update(),h.prototype.formatAt.call(this,d,y,b,v)},f.prototype.insertAt=function(d,y,b){this.update(),h.prototype.insertAt.call(this,d,y,b)},f.prototype.optimize=function(d,y){var b=this;d===void 0&&(d=[]),y===void 0&&(y={}),h.prototype.optimize.call(this,y);for(var v=[].slice.call(this.observer.takeRecords());v.length>0;)d.push(v.pop());for(var g=function(E,x){x===void 0&&(x=!0),!(E==null||E===b)&&E.domNode.parentNode!=null&&(E.domNode[o.DATA_KEY].mutations==null&&(E.domNode[o.DATA_KEY].mutations=[]),x&&g(E.parent))},m=function(E){E.domNode[o.DATA_KEY]==null||E.domNode[o.DATA_KEY].mutations==null||(E instanceof a.default&&E.children.forEach(m),E.optimize(y))},w=d,_=0;w.length>0;_+=1){if(_>=u)throw new Error("[Parchment] Maximum optimize iterations reached");for(w.forEach(function(E){var x=o.find(E.target,!0);x!=null&&(x.domNode===E.target&&(E.type==="childList"?(g(o.find(E.previousSibling,!1)),[].forEach.call(E.addedNodes,function(A){var S=o.find(A,!1);g(S,!1),S instanceof a.default&&S.children.forEach(function(O){g(O,!1)})})):E.type==="attributes"&&g(x.prev)),g(x))}),this.children.forEach(m),w=[].slice.call(this.observer.takeRecords()),v=w.slice();v.length>0;)d.push(v.pop())}},f.prototype.update=function(d,y){var b=this;y===void 0&&(y={}),d=d||this.observer.takeRecords(),d.map(function(v){var g=o.find(v.target,!0);return g==null?null:g.domNode[o.DATA_KEY].mutations==null?(g.domNode[o.DATA_KEY].mutations=[v],g):(g.domNode[o.DATA_KEY].mutations.push(v),null)}).forEach(function(v){v==null||v===b||v.domNode[o.DATA_KEY]==null||v.update(v.domNode[o.DATA_KEY].mutations||[],y)}),this.domNode[o.DATA_KEY].mutations!=null&&h.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,y),this.optimize(d,y)},f.blotName="scroll",f.defaultChild="block",f.scope=o.Scope.BLOCK_BLOT,f.tagName="DIV",f}(a.default);n.default=c},function(t,n,r){var s=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(h,f){h.__proto__=f}||function(h,f){for(var d in f)f.hasOwnProperty(d)&&(h[d]=f[d])};return function(h,f){c(h,f);function d(){this.constructor=h}h.prototype=f===null?Object.create(f):(d.prototype=f.prototype,new d)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(18),o=r(1);function l(c,h){if(Object.keys(c).length!==Object.keys(h).length)return!1;for(var f in c)if(c[f]!==h[f])return!1;return!0}var u=function(c){s(h,c);function h(){return c!==null&&c.apply(this,arguments)||this}return h.formats=function(f){if(f.tagName!==h.tagName)return c.formats.call(this,f)},h.prototype.format=function(f,d){var y=this;f===this.statics.blotName&&!d?(this.children.forEach(function(b){b instanceof a.default||(b=b.wrap(h.blotName,!0)),y.attributes.copy(b)}),this.unwrap()):c.prototype.format.call(this,f,d)},h.prototype.formatAt=function(f,d,y,b){if(this.formats()[y]!=null||o.query(y,o.Scope.ATTRIBUTE)){var v=this.isolate(f,d);v.format(y,b)}else c.prototype.formatAt.call(this,f,d,y,b)},h.prototype.optimize=function(f){c.prototype.optimize.call(this,f);var d=this.formats();if(Object.keys(d).length===0)return this.unwrap();var y=this.next;y instanceof h&&y.prev===this&&l(d,y.formats())&&(y.moveChildren(this),y.remove())},h.blotName="inline",h.scope=o.Scope.INLINE_BLOT,h.tagName="SPAN",h}(a.default);n.default=u},function(t,n,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(18),o=r(1),l=function(u){s(c,u);function c(){return u!==null&&u.apply(this,arguments)||this}return c.formats=function(h){var f=o.query(c.blotName).tagName;if(h.tagName!==f)return u.formats.call(this,h)},c.prototype.format=function(h,f){o.query(h,o.Scope.BLOCK)!=null&&(h===this.statics.blotName&&!f?this.replaceWith(c.blotName):u.prototype.format.call(this,h,f))},c.prototype.formatAt=function(h,f,d,y){o.query(d,o.Scope.BLOCK)!=null?this.format(d,y):u.prototype.formatAt.call(this,h,f,d,y)},c.prototype.insertAt=function(h,f,d){if(d==null||o.query(f,o.Scope.INLINE)!=null)u.prototype.insertAt.call(this,h,f,d);else{var y=this.split(h),b=o.create(f,d);y.parent.insertBefore(b,y)}},c.prototype.update=function(h,f){navigator.userAgent.match(/Trident/)?this.build():u.prototype.update.call(this,h,f)},c.blotName="block",c.scope=o.Scope.BLOCK_BLOT,c.tagName="P",c}(a.default);n.default=l},function(t,n,r){var s=this&&this.__extends||function(){var l=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(u,c){u.__proto__=c}||function(u,c){for(var h in c)c.hasOwnProperty(h)&&(u[h]=c[h])};return function(u,c){l(u,c);function h(){this.constructor=u}u.prototype=c===null?Object.create(c):(h.prototype=c.prototype,new h)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(19),o=function(l){s(u,l);function u(){return l!==null&&l.apply(this,arguments)||this}return u.formats=function(c){},u.prototype.format=function(c,h){l.prototype.formatAt.call(this,0,this.length(),c,h)},u.prototype.formatAt=function(c,h,f,d){c===0&&h===this.length()?this.format(f,d):l.prototype.formatAt.call(this,c,h,f,d)},u.prototype.formats=function(){return this.statics.formats(this.domNode)},u}(a.default);n.default=o},function(t,n,r){var s=this&&this.__extends||function(){var u=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(c,h){c.__proto__=h}||function(c,h){for(var f in h)h.hasOwnProperty(f)&&(c[f]=h[f])};return function(c,h){u(c,h);function f(){this.constructor=c}c.prototype=h===null?Object.create(h):(f.prototype=h.prototype,new f)}}();Object.defineProperty(n,"__esModule",{value:!0});var a=r(19),o=r(1),l=function(u){s(c,u);function c(h){var f=u.call(this,h)||this;return f.text=f.statics.value(f.domNode),f}return c.create=function(h){return document.createTextNode(h)},c.value=function(h){var f=h.data;return f.normalize&&(f=f.normalize()),f},c.prototype.deleteAt=function(h,f){this.domNode.data=this.text=this.text.slice(0,h)+this.text.slice(h+f)},c.prototype.index=function(h,f){return this.domNode===h?f:-1},c.prototype.insertAt=function(h,f,d){d==null?(this.text=this.text.slice(0,h)+f+this.text.slice(h),this.domNode.data=this.text):u.prototype.insertAt.call(this,h,f,d)},c.prototype.length=function(){return this.text.length},c.prototype.optimize=function(h){u.prototype.optimize.call(this,h),this.text=this.statics.value(this.domNode),this.text.length===0?this.remove():this.next instanceof c&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},c.prototype.position=function(h,f){return[this.domNode,h]},c.prototype.split=function(h,f){if(f===void 0&&(f=!1),!f){if(h===0)return this;if(h===this.length())return this.next}var d=o.create(this.domNode.splitText(h));return this.parent.insertBefore(d,this.next),this.text=this.statics.value(this.domNode),d},c.prototype.update=function(h,f){var d=this;h.some(function(y){return y.type==="characterData"&&y.target===d.domNode})&&(this.text=this.statics.value(this.domNode))},c.prototype.value=function(){return this.text},c.blotName="text",c.scope=o.Scope.INLINE_BLOT,c}(a.default);n.default=l},function(t,n,r){var s=document.createElement("div");if(s.classList.toggle("test-class",!1),s.classList.contains("test-class")){var a=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(o,l){return arguments.length>1&&!this.contains(o)==!l?l:a.call(this,o)}}String.prototype.startsWith||(String.prototype.startsWith=function(o,l){return l=l||0,this.substr(l,o.length)===o}),String.prototype.endsWith||(String.prototype.endsWith=function(o,l){var u=this.toString();(typeof l!="number"||!isFinite(l)||Math.floor(l)!==l||l>u.length)&&(l=u.length),l-=o.length;var c=u.indexOf(o,l);return c!==-1&&c===l}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(l){if(this===null)throw new TypeError("Array.prototype.find called on null or undefined");if(typeof l!="function")throw new TypeError("predicate must be a function");for(var u=Object(this),c=u.length>>>0,h=arguments[1],f,d=0;d<c;d++)if(f=u[d],l.call(h,f,d,u))return f}}),document.addEventListener("DOMContentLoaded",function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)})},function(t,n){var r=-1,s=1,a=0;function o(_,E,x){if(_==E)return _?[[a,_]]:[];(x<0||_.length<x)&&(x=null);var A=h(_,E),S=_.substring(0,A);_=_.substring(A),E=E.substring(A),A=f(_,E);var O=_.substring(_.length-A);_=_.substring(0,_.length-A),E=E.substring(0,E.length-A);var C=l(_,E);return S&&C.unshift([a,S]),O&&C.push([a,O]),y(C),x!=null&&(C=g(C,x)),C=m(C),C}function l(_,E){var x;if(!_)return[[s,E]];if(!E)return[[r,_]];var A=_.length>E.length?_:E,S=_.length>E.length?E:_,O=A.indexOf(S);if(O!=-1)return x=[[s,A.substring(0,O)],[a,S],[s,A.substring(O+S.length)]],_.length>E.length&&(x[0][0]=x[2][0]=r),x;if(S.length==1)return[[r,_],[s,E]];var C=d(_,E);if(C){var k=C[0],D=C[1],R=C[2],F=C[3],H=C[4],$=o(k,R),G=o(D,F);return $.concat([[a,H]],G)}return u(_,E)}function u(_,E){for(var x=_.length,A=E.length,S=Math.ceil((x+A)/2),O=S,C=2*S,k=new Array(C),D=new Array(C),R=0;R<C;R++)k[R]=-1,D[R]=-1;k[O+1]=0,D[O+1]=0;for(var F=x-A,H=F%2!=0,$=0,G=0,Z=0,K=0,q=0;q<S;q++){for(var P=-q+$;P<=q-G;P+=2){var B=O+P,V;P==-q||P!=q&&k[B-1]<k[B+1]?V=k[B+1]:V=k[B-1]+1;for(var J=V-P;V<x&&J<A&&_.charAt(V)==E.charAt(J);)V++,J++;if(k[B]=V,V>x)G+=2;else if(J>A)$+=2;else if(H){var te=O+F-P;if(te>=0&&te<C&&D[te]!=-1){var U=x-D[te];if(V>=U)return c(_,E,V,J)}}}for(var Y=-q+Z;Y<=q-K;Y+=2){var te=O+Y,U;Y==-q||Y!=q&&D[te-1]<D[te+1]?U=D[te+1]:U=D[te-1]+1;for(var re=U-Y;U<x&&re<A&&_.charAt(x-U-1)==E.charAt(A-re-1);)U++,re++;if(D[te]=U,U>x)K+=2;else if(re>A)Z+=2;else if(!H){var B=O+F-Y;if(B>=0&&B<C&&k[B]!=-1){var V=k[B],J=O+V-B;if(U=x-U,V>=U)return c(_,E,V,J)}}}}return[[r,_],[s,E]]}function c(_,E,x,A){var S=_.substring(0,x),O=E.substring(0,A),C=_.substring(x),k=E.substring(A),D=o(S,O),R=o(C,k);return D.concat(R)}function h(_,E){if(!_||!E||_.charAt(0)!=E.charAt(0))return 0;for(var x=0,A=Math.min(_.length,E.length),S=A,O=0;x<S;)_.substring(O,S)==E.substring(O,S)?(x=S,O=x):A=S,S=Math.floor((A-x)/2+x);return S}function f(_,E){if(!_||!E||_.charAt(_.length-1)!=E.charAt(E.length-1))return 0;for(var x=0,A=Math.min(_.length,E.length),S=A,O=0;x<S;)_.substring(_.length-S,_.length-O)==E.substring(E.length-S,E.length-O)?(x=S,O=x):A=S,S=Math.floor((A-x)/2+x);return S}function d(_,E){var x=_.length>E.length?_:E,A=_.length>E.length?E:_;if(x.length<4||A.length*2<x.length)return null;function S(G,Z,K){for(var q=G.substring(K,K+Math.floor(G.length/4)),P=-1,B="",V,J,te,U;(P=Z.indexOf(q,P+1))!=-1;){var Y=h(G.substring(K),Z.substring(P)),re=f(G.substring(0,K),Z.substring(0,P));B.length<re+Y&&(B=Z.substring(P-re,P)+Z.substring(P,P+Y),V=G.substring(0,K-re),J=G.substring(K+Y),te=Z.substring(0,P-re),U=Z.substring(P+Y))}return B.length*2>=G.length?[V,J,te,U,B]:null}var O=S(x,A,Math.ceil(x.length/4)),C=S(x,A,Math.ceil(x.length/2)),k;if(!O&&!C)return null;C?O?k=O[4].length>C[4].length?O:C:k=C:k=O;var D,R,F,H;_.length>E.length?(D=k[0],R=k[1],F=k[2],H=k[3]):(F=k[0],H=k[1],D=k[2],R=k[3]);var $=k[4];return[D,R,F,H,$]}function y(_){_.push([a,""]);for(var E=0,x=0,A=0,S="",O="",C;E<_.length;)switch(_[E][0]){case s:A++,O+=_[E][1],E++;break;case r:x++,S+=_[E][1],E++;break;case a:x+A>1?(x!==0&&A!==0&&(C=h(O,S),C!==0&&(E-x-A>0&&_[E-x-A-1][0]==a?_[E-x-A-1][1]+=O.substring(0,C):(_.splice(0,0,[a,O.substring(0,C)]),E++),O=O.substring(C),S=S.substring(C)),C=f(O,S),C!==0&&(_[E][1]=O.substring(O.length-C)+_[E][1],O=O.substring(0,O.length-C),S=S.substring(0,S.length-C))),x===0?_.splice(E-A,x+A,[s,O]):A===0?_.splice(E-x,x+A,[r,S]):_.splice(E-x-A,x+A,[r,S],[s,O]),E=E-x-A+(x?1:0)+(A?1:0)+1):E!==0&&_[E-1][0]==a?(_[E-1][1]+=_[E][1],_.splice(E,1)):E++,A=0,x=0,S="",O="";break}_[_.length-1][1]===""&&_.pop();var k=!1;for(E=1;E<_.length-1;)_[E-1][0]==a&&_[E+1][0]==a&&(_[E][1].substring(_[E][1].length-_[E-1][1].length)==_[E-1][1]?(_[E][1]=_[E-1][1]+_[E][1].substring(0,_[E][1].length-_[E-1][1].length),_[E+1][1]=_[E-1][1]+_[E+1][1],_.splice(E-1,1),k=!0):_[E][1].substring(0,_[E+1][1].length)==_[E+1][1]&&(_[E-1][1]+=_[E+1][1],_[E][1]=_[E][1].substring(_[E+1][1].length)+_[E+1][1],_.splice(E+1,1),k=!0)),E++;k&&y(_)}var b=o;b.INSERT=s,b.DELETE=r,b.EQUAL=a,t.exports=b;function v(_,E){if(E===0)return[a,_];for(var x=0,A=0;A<_.length;A++){var S=_[A];if(S[0]===r||S[0]===a){var O=x+S[1].length;if(E===O)return[A+1,_];if(E<O){_=_.slice();var C=E-x,k=[S[0],S[1].slice(0,C)],D=[S[0],S[1].slice(C)];return _.splice(A,1,k,D),[A+1,_]}else x=O}}throw new Error("cursor_pos is out of bounds!")}function g(_,E){var x=v(_,E),A=x[1],S=x[0],O=A[S],C=A[S+1];if(O==null)return _;if(O[0]!==a)return _;if(C!=null&&O[1]+C[1]===C[1]+O[1])return A.splice(S,2,C,O),w(A,S,2);if(C!=null&&C[1].indexOf(O[1])===0){A.splice(S,2,[C[0],O[1]],[0,O[1]]);var k=C[1].slice(O[1].length);return k.length>0&&A.splice(S+2,0,[C[0],k]),w(A,S,3)}else return _}function m(_){for(var E=!1,x=function(C){return C.charCodeAt(0)>=56320&&C.charCodeAt(0)<=57343},A=function(C){return C.charCodeAt(C.length-1)>=55296&&C.charCodeAt(C.length-1)<=56319},S=2;S<_.length;S+=1)_[S-2][0]===a&&A(_[S-2][1])&&_[S-1][0]===r&&x(_[S-1][1])&&_[S][0]===s&&x(_[S][1])&&(E=!0,_[S-1][1]=_[S-2][1].slice(-1)+_[S-1][1],_[S][1]=_[S-2][1].slice(-1)+_[S][1],_[S-2][1]=_[S-2][1].slice(0,-1));if(!E)return _;for(var O=[],S=0;S<_.length;S+=1)_[S][1].length>0&&O.push(_[S]);return O}function w(_,E,x){for(var A=E+x-1;A>=0&&A>=E-1;A--)if(A+1<_.length){var S=_[A],O=_[A+1];S[0]===O[1]&&_.splice(A,2,[S[0],S[1]+O[1]])}return _}},function(t,n){n=t.exports=typeof Object.keys=="function"?Object.keys:r,n.shim=r;function r(s){var a=[];for(var o in s)a.push(o);return a}},function(t,n){var r=function(){return Object.prototype.toString.call(arguments)}()=="[object Arguments]";n=t.exports=r?s:a,n.supported=s;function s(o){return Object.prototype.toString.call(o)=="[object Arguments]"}n.unsupported=a;function a(o){return o&&typeof o=="object"&&typeof o.length=="number"&&Object.prototype.hasOwnProperty.call(o,"callee")&&!Object.prototype.propertyIsEnumerable.call(o,"callee")||!1}},function(t,n){var r=Object.prototype.hasOwnProperty,s="~";function a(){}Object.create&&(a.prototype=Object.create(null),new a().__proto__||(s=!1));function o(u,c,h){this.fn=u,this.context=c,this.once=h||!1}function l(){this._events=new a,this._eventsCount=0}l.prototype.eventNames=function(){var c=[],h,f;if(this._eventsCount===0)return c;for(f in h=this._events)r.call(h,f)&&c.push(s?f.slice(1):f);return Object.getOwnPropertySymbols?c.concat(Object.getOwnPropertySymbols(h)):c},l.prototype.listeners=function(c,h){var f=s?s+c:c,d=this._events[f];if(h)return!!d;if(!d)return[];if(d.fn)return[d.fn];for(var y=0,b=d.length,v=new Array(b);y<b;y++)v[y]=d[y].fn;return v},l.prototype.emit=function(c,h,f,d,y,b){var v=s?s+c:c;if(!this._events[v])return!1;var g=this._events[v],m=arguments.length,w,_;if(g.fn){switch(g.once&&this.removeListener(c,g.fn,void 0,!0),m){case 1:return g.fn.call(g.context),!0;case 2:return g.fn.call(g.context,h),!0;case 3:return g.fn.call(g.context,h,f),!0;case 4:return g.fn.call(g.context,h,f,d),!0;case 5:return g.fn.call(g.context,h,f,d,y),!0;case 6:return g.fn.call(g.context,h,f,d,y,b),!0}for(_=1,w=new Array(m-1);_<m;_++)w[_-1]=arguments[_];g.fn.apply(g.context,w)}else{var E=g.length,x;for(_=0;_<E;_++)switch(g[_].once&&this.removeListener(c,g[_].fn,void 0,!0),m){case 1:g[_].fn.call(g[_].context);break;case 2:g[_].fn.call(g[_].context,h);break;case 3:g[_].fn.call(g[_].context,h,f);break;case 4:g[_].fn.call(g[_].context,h,f,d);break;default:if(!w)for(x=1,w=new Array(m-1);x<m;x++)w[x-1]=arguments[x];g[_].fn.apply(g[_].context,w)}}return!0},l.prototype.on=function(c,h,f){var d=new o(h,f||this),y=s?s+c:c;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],d]:this._events[y].push(d):(this._events[y]=d,this._eventsCount++),this},l.prototype.once=function(c,h,f){var d=new o(h,f||this,!0),y=s?s+c:c;return this._events[y]?this._events[y].fn?this._events[y]=[this._events[y],d]:this._events[y].push(d):(this._events[y]=d,this._eventsCount++),this},l.prototype.removeListener=function(c,h,f,d){var y=s?s+c:c;if(!this._events[y])return this;if(!h)return--this._eventsCount===0?this._events=new a:delete this._events[y],this;var b=this._events[y];if(b.fn)b.fn===h&&(!d||b.once)&&(!f||b.context===f)&&(--this._eventsCount===0?this._events=new a:delete this._events[y]);else{for(var v=0,g=[],m=b.length;v<m;v++)(b[v].fn!==h||d&&!b[v].once||f&&b[v].context!==f)&&g.push(b[v]);g.length?this._events[y]=g.length===1?g[0]:g:--this._eventsCount===0?this._events=new a:delete this._events[y]}return this},l.prototype.removeAllListeners=function(c){var h;return c?(h=s?s+c:c,this._events[h]&&(--this._eventsCount===0?this._events=new a:delete this._events[h])):(this._events=new a,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prototype.setMaxListeners=function(){return this},l.prefixed=s,l.EventEmitter=l,typeof t<"u"&&(t.exports=l)},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.matchText=n.matchSpacing=n.matchNewline=n.matchBlot=n.matchAttributor=n.default=void 0;var s=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(he){return typeof he}:function(he){return he&&typeof Symbol=="function"&&he.constructor===Symbol&&he!==Symbol.prototype?"symbol":typeof he},a=function(){function he(pe,xe){var Te=[],me=!0,De=!1,Ge=void 0;try{for(var Je=pe[Symbol.iterator](),jt;!(me=(jt=Je.next()).done)&&(Te.push(jt.value),!(xe&&Te.length===xe));me=!0);}catch(Lt){De=!0,Ge=Lt}finally{try{!me&&Je.return&&Je.return()}finally{if(De)throw Ge}}return Te}return function(pe,xe){if(Array.isArray(pe))return pe;if(Symbol.iterator in Object(pe))return he(pe,xe);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),o=function(){function he(pe,xe){for(var Te=0;Te<xe.length;Te++){var me=xe[Te];me.enumerable=me.enumerable||!1,me.configurable=!0,"value"in me&&(me.writable=!0),Object.defineProperty(pe,me.key,me)}}return function(pe,xe,Te){return xe&&he(pe.prototype,xe),Te&&he(pe,Te),pe}}(),l=r(3),u=D(l),c=r(2),h=D(c),f=r(0),d=D(f),y=r(5),b=D(y),v=r(10),g=D(v),m=r(9),w=D(m),_=r(36),E=r(37),x=r(13),A=D(x),S=r(26),O=r(38),C=r(39),k=r(40);function D(he){return he&&he.__esModule?he:{default:he}}function R(he,pe,xe){return pe in he?Object.defineProperty(he,pe,{value:xe,enumerable:!0,configurable:!0,writable:!0}):he[pe]=xe,he}function F(he,pe){if(!(he instanceof pe))throw new TypeError("Cannot call a class as a function")}function H(he,pe){if(!he)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return pe&&(typeof pe=="object"||typeof pe=="function")?pe:he}function $(he,pe){if(typeof pe!="function"&&pe!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof pe);he.prototype=Object.create(pe&&pe.prototype,{constructor:{value:he,enumerable:!1,writable:!0,configurable:!0}}),pe&&(Object.setPrototypeOf?Object.setPrototypeOf(he,pe):he.__proto__=pe)}var G=(0,g.default)("quill:clipboard"),Z="__ql-matcher",K=[[Node.TEXT_NODE,Ke],[Node.TEXT_NODE,Ve],["br",_e],[Node.ELEMENT_NODE,Ve],[Node.ELEMENT_NODE,de],[Node.ELEMENT_NODE,Xe],[Node.ELEMENT_NODE,oe],[Node.ELEMENT_NODE,Et],["li",Ne],["b",re.bind(re,"bold")],["i",re.bind(re,"italic")],["style",Le]],q=[_.AlignAttribute,O.DirectionAttribute].reduce(function(he,pe){return he[pe.keyName]=pe,he},{}),P=[_.AlignStyle,E.BackgroundStyle,S.ColorStyle,O.DirectionStyle,C.FontStyle,k.SizeStyle].reduce(function(he,pe){return he[pe.keyName]=pe,he},{}),B=function(he){$(pe,he);function pe(xe,Te){F(this,pe);var me=H(this,(pe.__proto__||Object.getPrototypeOf(pe)).call(this,xe,Te));return me.quill.root.addEventListener("paste",me.onPaste.bind(me)),me.container=me.quill.addContainer("ql-clipboard"),me.container.setAttribute("contenteditable",!0),me.container.setAttribute("tabindex",-1),me.matchers=[],K.concat(me.options.matchers).forEach(function(De){var Ge=a(De,2),Je=Ge[0],jt=Ge[1];!Te.matchVisual&&jt===Xe||me.addMatcher(Je,jt)}),me}return o(pe,[{key:"addMatcher",value:function(Te,me){this.matchers.push([Te,me])}},{key:"convert",value:function(Te){if(typeof Te=="string")return this.container.innerHTML=Te.replace(/\>\r?\n +\</g,"><"),this.convert();var me=this.quill.getFormat(this.quill.selection.savedRange.index);if(me[A.default.blotName]){var De=this.container.innerText;return this.container.innerHTML="",new h.default().insert(De,R({},A.default.blotName,me[A.default.blotName]))}var Ge=this.prepareMatching(),Je=a(Ge,2),jt=Je[0],Lt=Je[1],mt=Y(this.container,jt,Lt);return te(mt,`
`)&&mt.ops[mt.ops.length-1].attributes==null&&(mt=mt.compose(new h.default().retain(mt.length()-1).delete(1))),G.log("convert",this.container.innerHTML,mt),this.container.innerHTML="",mt}},{key:"dangerouslyPasteHTML",value:function(Te,me){var De=arguments.length>2&&arguments[2]!==void 0?arguments[2]:b.default.sources.API;if(typeof Te=="string")this.quill.setContents(this.convert(Te),me),this.quill.setSelection(0,b.default.sources.SILENT);else{var Ge=this.convert(me);this.quill.updateContents(new h.default().retain(Te).concat(Ge),De),this.quill.setSelection(Te+Ge.length(),b.default.sources.SILENT)}}},{key:"onPaste",value:function(Te){var me=this;if(!(Te.defaultPrevented||!this.quill.isEnabled())){var De=this.quill.getSelection(),Ge=new h.default().retain(De.index),Je=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(b.default.sources.SILENT),setTimeout(function(){Ge=Ge.concat(me.convert()).delete(De.length),me.quill.updateContents(Ge,b.default.sources.USER),me.quill.setSelection(Ge.length()-De.length,b.default.sources.SILENT),me.quill.scrollingContainer.scrollTop=Je,me.quill.focus()},1)}}},{key:"prepareMatching",value:function(){var Te=this,me=[],De=[];return this.matchers.forEach(function(Ge){var Je=a(Ge,2),jt=Je[0],Lt=Je[1];switch(jt){case Node.TEXT_NODE:De.push(Lt);break;case Node.ELEMENT_NODE:me.push(Lt);break;default:[].forEach.call(Te.container.querySelectorAll(jt),function(mt){mt[Z]=mt[Z]||[],mt[Z].push(Lt)});break}}),[me,De]}}]),pe}(w.default);B.DEFAULTS={matchers:[],matchVisual:!0};function V(he,pe,xe){return(typeof pe>"u"?"undefined":s(pe))==="object"?Object.keys(pe).reduce(function(Te,me){return V(Te,me,pe[me])},he):he.reduce(function(Te,me){return me.attributes&&me.attributes[pe]?Te.push(me):Te.insert(me.insert,(0,u.default)({},R({},pe,xe),me.attributes))},new h.default)}function J(he){if(he.nodeType!==Node.ELEMENT_NODE)return{};var pe="__ql-computed-style";return he[pe]||(he[pe]=window.getComputedStyle(he))}function te(he,pe){for(var xe="",Te=he.ops.length-1;Te>=0&&xe.length<pe.length;--Te){var me=he.ops[Te];if(typeof me.insert!="string")break;xe=me.insert+xe}return xe.slice(-1*pe.length)===pe}function U(he){if(he.childNodes.length===0)return!1;var pe=J(he);return["block","list-item"].indexOf(pe.display)>-1}function Y(he,pe,xe){return he.nodeType===he.TEXT_NODE?xe.reduce(function(Te,me){return me(he,Te)},new h.default):he.nodeType===he.ELEMENT_NODE?[].reduce.call(he.childNodes||[],function(Te,me){var De=Y(me,pe,xe);return me.nodeType===he.ELEMENT_NODE&&(De=pe.reduce(function(Ge,Je){return Je(me,Ge)},De),De=(me[Z]||[]).reduce(function(Ge,Je){return Je(me,Ge)},De)),Te.concat(De)},new h.default):new h.default}function re(he,pe,xe){return V(xe,he,!0)}function oe(he,pe){var xe=d.default.Attributor.Attribute.keys(he),Te=d.default.Attributor.Class.keys(he),me=d.default.Attributor.Style.keys(he),De={};return xe.concat(Te).concat(me).forEach(function(Ge){var Je=d.default.query(Ge,d.default.Scope.ATTRIBUTE);Je!=null&&(De[Je.attrName]=Je.value(he),De[Je.attrName])||(Je=q[Ge],Je!=null&&(Je.attrName===Ge||Je.keyName===Ge)&&(De[Je.attrName]=Je.value(he)||void 0),Je=P[Ge],Je!=null&&(Je.attrName===Ge||Je.keyName===Ge)&&(Je=P[Ge],De[Je.attrName]=Je.value(he)||void 0))}),Object.keys(De).length>0&&(pe=V(pe,De)),pe}function de(he,pe){var xe=d.default.query(he);if(xe==null)return pe;if(xe.prototype instanceof d.default.Embed){var Te={},me=xe.value(he);me!=null&&(Te[xe.blotName]=me,pe=new h.default().insert(Te,xe.formats(he)))}else typeof xe.formats=="function"&&(pe=V(pe,xe.blotName,xe.formats(he)));return pe}function _e(he,pe){return te(pe,`
`)||pe.insert(`
`),pe}function Le(){return new h.default}function Ne(he,pe){var xe=d.default.query(he);if(xe==null||xe.blotName!=="list-item"||!te(pe,`
`))return pe;for(var Te=-1,me=he.parentNode;!me.classList.contains("ql-clipboard");)(d.default.query(me)||{}).blotName==="list"&&(Te+=1),me=me.parentNode;return Te<=0?pe:pe.compose(new h.default().retain(pe.length()-1).retain(1,{indent:Te}))}function Ve(he,pe){return te(pe,`
`)||(U(he)||pe.length()>0&&he.nextSibling&&U(he.nextSibling))&&pe.insert(`
`),pe}function Xe(he,pe){if(U(he)&&he.nextElementSibling!=null&&!te(pe,`

`)){var xe=he.offsetHeight+parseFloat(J(he).marginTop)+parseFloat(J(he).marginBottom);he.nextElementSibling.offsetTop>he.offsetTop+xe*1.5&&pe.insert(`
`)}return pe}function Et(he,pe){var xe={},Te=he.style||{};return Te.fontStyle&&J(he).fontStyle==="italic"&&(xe.italic=!0),Te.fontWeight&&(J(he).fontWeight.startsWith("bold")||parseInt(J(he).fontWeight)>=700)&&(xe.bold=!0),Object.keys(xe).length>0&&(pe=V(pe,xe)),parseFloat(Te.textIndent||0)>0&&(pe=new h.default().insert("	").concat(pe)),pe}function Ke(he,pe){var xe=he.data;if(he.parentNode.tagName==="O:P")return pe.insert(xe.trim());if(xe.trim().length===0&&he.parentNode.classList.contains("ql-clipboard"))return pe;if(!J(he.parentNode).whiteSpace.startsWith("pre")){var Te=function(De,Ge){return Ge=Ge.replace(/[^\u00a0]/g,""),Ge.length<1&&De?" ":Ge};xe=xe.replace(/\r\n/g," ").replace(/\n/g," "),xe=xe.replace(/\s\s+/g,Te.bind(Te,!0)),(he.previousSibling==null&&U(he.parentNode)||he.previousSibling!=null&&U(he.previousSibling))&&(xe=xe.replace(/^\s+/,Te.bind(Te,!1))),(he.nextSibling==null&&U(he.parentNode)||he.nextSibling!=null&&U(he.nextSibling))&&(xe=xe.replace(/\s+$/,Te.bind(Te,!1)))}return pe.insert(xe)}n.default=B,n.matchAttributor=oe,n.matchBlot=de,n.matchNewline=Ve,n.matchSpacing=Xe,n.matchText=Ke},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function y(b,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,v,g){return v&&y(b.prototype,v),g&&y(b,g),b}}(),a=function y(b,v,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,v);if(m===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:y(w,v,g)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(g)}},o=r(6),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function f(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var d=function(y){f(b,y);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,[{key:"optimize",value:function(g){a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"optimize",this).call(this,g),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),b}(l.default);d.blotName="bold",d.tagName=["STRONG","B"],n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.addControls=n.default=void 0;var s=function(){function k(D,R){var F=[],H=!0,$=!1,G=void 0;try{for(var Z=D[Symbol.iterator](),K;!(H=(K=Z.next()).done)&&(F.push(K.value),!(R&&F.length===R));H=!0);}catch(q){$=!0,G=q}finally{try{!H&&Z.return&&Z.return()}finally{if($)throw G}}return F}return function(D,R){if(Array.isArray(D))return D;if(Symbol.iterator in Object(D))return k(D,R);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function(){function k(D,R){for(var F=0;F<R.length;F++){var H=R[F];H.enumerable=H.enumerable||!1,H.configurable=!0,"value"in H&&(H.writable=!0),Object.defineProperty(D,H.key,H)}}return function(D,R,F){return R&&k(D.prototype,R),F&&k(D,F),D}}(),o=r(2),l=g(o),u=r(0),c=g(u),h=r(5),f=g(h),d=r(10),y=g(d),b=r(9),v=g(b);function g(k){return k&&k.__esModule?k:{default:k}}function m(k,D,R){return D in k?Object.defineProperty(k,D,{value:R,enumerable:!0,configurable:!0,writable:!0}):k[D]=R,k}function w(k,D){if(!(k instanceof D))throw new TypeError("Cannot call a class as a function")}function _(k,D){if(!k)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return D&&(typeof D=="object"||typeof D=="function")?D:k}function E(k,D){if(typeof D!="function"&&D!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof D);k.prototype=Object.create(D&&D.prototype,{constructor:{value:k,enumerable:!1,writable:!0,configurable:!0}}),D&&(Object.setPrototypeOf?Object.setPrototypeOf(k,D):k.__proto__=D)}var x=(0,y.default)("quill:toolbar"),A=function(k){E(D,k);function D(R,F){w(this,D);var H=_(this,(D.__proto__||Object.getPrototypeOf(D)).call(this,R,F));if(Array.isArray(H.options.container)){var $=document.createElement("div");O($,H.options.container),R.container.parentNode.insertBefore($,R.container),H.container=$}else typeof H.options.container=="string"?H.container=document.querySelector(H.options.container):H.container=H.options.container;if(!(H.container instanceof HTMLElement)){var G;return G=x.error("Container required for toolbar",H.options),_(H,G)}return H.container.classList.add("ql-toolbar"),H.controls=[],H.handlers={},Object.keys(H.options.handlers).forEach(function(Z){H.addHandler(Z,H.options.handlers[Z])}),[].forEach.call(H.container.querySelectorAll("button, select"),function(Z){H.attach(Z)}),H.quill.on(f.default.events.EDITOR_CHANGE,function(Z,K){Z===f.default.events.SELECTION_CHANGE&&H.update(K)}),H.quill.on(f.default.events.SCROLL_OPTIMIZE,function(){var Z=H.quill.selection.getRange(),K=s(Z,1),q=K[0];H.update(q)}),H}return a(D,[{key:"addHandler",value:function(F,H){this.handlers[F]=H}},{key:"attach",value:function(F){var H=this,$=[].find.call(F.classList,function(Z){return Z.indexOf("ql-")===0});if($){if($=$.slice(3),F.tagName==="BUTTON"&&F.setAttribute("type","button"),this.handlers[$]==null){if(this.quill.scroll.whitelist!=null&&this.quill.scroll.whitelist[$]==null){x.warn("ignoring attaching to disabled format",$,F);return}if(c.default.query($)==null){x.warn("ignoring attaching to nonexistent format",$,F);return}}var G=F.tagName==="SELECT"?"change":"click";F.addEventListener(G,function(Z){var K=void 0;if(F.tagName==="SELECT"){if(F.selectedIndex<0)return;var q=F.options[F.selectedIndex];q.hasAttribute("selected")?K=!1:K=q.value||!1}else F.classList.contains("ql-active")?K=!1:K=F.value||!F.hasAttribute("value"),Z.preventDefault();H.quill.focus();var P=H.quill.selection.getRange(),B=s(P,1),V=B[0];if(H.handlers[$]!=null)H.handlers[$].call(H,K);else if(c.default.query($).prototype instanceof c.default.Embed){if(K=prompt("Enter "+$),!K)return;H.quill.updateContents(new l.default().retain(V.index).delete(V.length).insert(m({},$,K)),f.default.sources.USER)}else H.quill.format($,K,f.default.sources.USER);H.update(V)}),this.controls.push([$,F])}}},{key:"update",value:function(F){var H=F==null?{}:this.quill.getFormat(F);this.controls.forEach(function($){var G=s($,2),Z=G[0],K=G[1];if(K.tagName==="SELECT"){var q=void 0;if(F==null)q=null;else if(H[Z]==null)q=K.querySelector("option[selected]");else if(!Array.isArray(H[Z])){var P=H[Z];typeof P=="string"&&(P=P.replace(/\"/g,'\\"')),q=K.querySelector('option[value="'+P+'"]')}q==null?(K.value="",K.selectedIndex=-1):q.selected=!0}else if(F==null)K.classList.remove("ql-active");else if(K.hasAttribute("value")){var B=H[Z]===K.getAttribute("value")||H[Z]!=null&&H[Z].toString()===K.getAttribute("value")||H[Z]==null&&!K.getAttribute("value");K.classList.toggle("ql-active",B)}else K.classList.toggle("ql-active",H[Z]!=null)})}}]),D}(v.default);A.DEFAULTS={};function S(k,D,R){var F=document.createElement("button");F.setAttribute("type","button"),F.classList.add("ql-"+D),R!=null&&(F.value=R),k.appendChild(F)}function O(k,D){Array.isArray(D[0])||(D=[D]),D.forEach(function(R){var F=document.createElement("span");F.classList.add("ql-formats"),R.forEach(function(H){if(typeof H=="string")S(F,H);else{var $=Object.keys(H)[0],G=H[$];Array.isArray(G)?C(F,$,G):S(F,$,G)}}),k.appendChild(F)})}function C(k,D,R){var F=document.createElement("select");F.classList.add("ql-"+D),R.forEach(function(H){var $=document.createElement("option");H!==!1?$.setAttribute("value",H):$.setAttribute("selected","selected"),F.appendChild($)}),k.appendChild(F)}A.DEFAULTS={container:null,handlers:{clean:function(){var D=this,R=this.quill.getSelection();if(R!=null)if(R.length==0){var F=this.quill.getFormat();Object.keys(F).forEach(function(H){c.default.query(H,c.default.Scope.INLINE)!=null&&D.quill.format(H,!1)})}else this.quill.removeFormat(R,f.default.sources.USER)},direction:function(D){var R=this.quill.getFormat().align;D==="rtl"&&R==null?this.quill.format("align","right",f.default.sources.USER):!D&&R==="right"&&this.quill.format("align",!1,f.default.sources.USER),this.quill.format("direction",D,f.default.sources.USER)},indent:function(D){var R=this.quill.getSelection(),F=this.quill.getFormat(R),H=parseInt(F.indent||0);if(D==="+1"||D==="-1"){var $=D==="+1"?1:-1;F.direction==="rtl"&&($*=-1),this.quill.format("indent",H+$,f.default.sources.USER)}},link:function(D){D===!0&&(D=prompt("Enter link URL:")),this.quill.format("link",D,f.default.sources.USER)},list:function(D){var R=this.quill.getSelection(),F=this.quill.getFormat(R);D==="check"?F.list==="checked"||F.list==="unchecked"?this.quill.format("list",!1,f.default.sources.USER):this.quill.format("list","unchecked",f.default.sources.USER):this.quill.format("list",D,f.default.sources.USER)}}},n.default=A,n.addControls=O},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function y(b,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,v,g){return v&&y(b.prototype,v),g&&y(b,g),b}}(),a=function y(b,v,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,v);if(m===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:y(w,v,g)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(g)}},o=r(28),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function f(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var d=function(y){f(b,y);function b(v,g){c(this,b);var m=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v));return m.label.innerHTML=g,m.container.classList.add("ql-color-picker"),[].slice.call(m.container.querySelectorAll(".ql-picker-item"),0,7).forEach(function(w){w.classList.add("ql-primary")}),m}return s(b,[{key:"buildItem",value:function(g){var m=a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"buildItem",this).call(this,g);return m.style.backgroundColor=g.getAttribute("value")||"",m}},{key:"selectItem",value:function(g,m){a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,g,m);var w=this.label.querySelector(".ql-color-label"),_=g&&g.getAttribute("data-value")||"";w&&(w.tagName==="line"?w.style.stroke=_:w.style.fill=_)}}]),b}(l.default);n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function y(b,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,v,g){return v&&y(b.prototype,v),g&&y(b,g),b}}(),a=function y(b,v,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,v);if(m===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:y(w,v,g)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(g)}},o=r(28),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function f(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var d=function(y){f(b,y);function b(v,g){c(this,b);var m=h(this,(b.__proto__||Object.getPrototypeOf(b)).call(this,v));return m.container.classList.add("ql-icon-picker"),[].forEach.call(m.container.querySelectorAll(".ql-picker-item"),function(w){w.innerHTML=g[w.getAttribute("data-value")||""]}),m.defaultItem=m.container.querySelector(".ql-selected"),m.selectItem(m.defaultItem),m}return s(b,[{key:"selectItem",value:function(g,m){a(b.prototype.__proto__||Object.getPrototypeOf(b.prototype),"selectItem",this).call(this,g,m),g=g||this.defaultItem,this.label.innerHTML=g.innerHTML}}]),b}(l.default);n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function l(u,c){for(var h=0;h<c.length;h++){var f=c[h];f.enumerable=f.enumerable||!1,f.configurable=!0,"value"in f&&(f.writable=!0),Object.defineProperty(u,f.key,f)}}return function(u,c,h){return c&&l(u.prototype,c),h&&l(u,h),u}}();function a(l,u){if(!(l instanceof u))throw new TypeError("Cannot call a class as a function")}var o=function(){function l(u,c){var h=this;a(this,l),this.quill=u,this.boundsContainer=c||document.body,this.root=u.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",function(){h.root.style.marginTop=-1*h.quill.root.scrollTop+"px"}),this.hide()}return s(l,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(c){var h=c.left+c.width/2-this.root.offsetWidth/2,f=c.bottom+this.quill.root.scrollTop;this.root.style.left=h+"px",this.root.style.top=f+"px",this.root.classList.remove("ql-flip");var d=this.boundsContainer.getBoundingClientRect(),y=this.root.getBoundingClientRect(),b=0;if(y.right>d.right&&(b=d.right-y.right,this.root.style.left=h+b+"px"),y.left<d.left&&(b=d.left-y.left,this.root.style.left=h+b+"px"),y.bottom>d.bottom){var v=y.bottom-y.top,g=c.bottom-c.top+v;this.root.style.top=f-g+"px",this.root.classList.add("ql-flip")}return b}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),l}();n.default=o},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function C(k,D){var R=[],F=!0,H=!1,$=void 0;try{for(var G=k[Symbol.iterator](),Z;!(F=(Z=G.next()).done)&&(R.push(Z.value),!(D&&R.length===D));F=!0);}catch(K){H=!0,$=K}finally{try{!F&&G.return&&G.return()}finally{if(H)throw $}}return R}return function(k,D){if(Array.isArray(k))return k;if(Symbol.iterator in Object(k))return C(k,D);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),a=function C(k,D,R){k===null&&(k=Function.prototype);var F=Object.getOwnPropertyDescriptor(k,D);if(F===void 0){var H=Object.getPrototypeOf(k);return H===null?void 0:C(H,D,R)}else{if("value"in F)return F.value;var $=F.get;return $===void 0?void 0:$.call(R)}},o=function(){function C(k,D){for(var R=0;R<D.length;R++){var F=D[R];F.enumerable=F.enumerable||!1,F.configurable=!0,"value"in F&&(F.writable=!0),Object.defineProperty(k,F.key,F)}}return function(k,D,R){return D&&C(k.prototype,D),R&&C(k,R),k}}(),l=r(3),u=w(l),c=r(8),h=w(c),f=r(43),d=w(f),y=r(27),b=w(y),v=r(15),g=r(41),m=w(g);function w(C){return C&&C.__esModule?C:{default:C}}function _(C,k){if(!(C instanceof k))throw new TypeError("Cannot call a class as a function")}function E(C,k){if(!C)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return k&&(typeof k=="object"||typeof k=="function")?k:C}function x(C,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof k);C.prototype=Object.create(k&&k.prototype,{constructor:{value:C,enumerable:!1,writable:!0,configurable:!0}}),k&&(Object.setPrototypeOf?Object.setPrototypeOf(C,k):C.__proto__=k)}var A=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],S=function(C){x(k,C);function k(D,R){_(this,k),R.modules.toolbar!=null&&R.modules.toolbar.container==null&&(R.modules.toolbar.container=A);var F=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,D,R));return F.quill.container.classList.add("ql-snow"),F}return o(k,[{key:"extendToolbar",value:function(R){R.container.classList.add("ql-snow"),this.buildButtons([].slice.call(R.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(R.container.querySelectorAll("select")),m.default),this.tooltip=new O(this.quill,this.options.bounds),R.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},function(F,H){R.handlers.link.call(R,!H.format.link)})}}]),k}(d.default);S.DEFAULTS=(0,u.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(k){if(k){var D=this.quill.getSelection();if(D==null||D.length==0)return;var R=this.quill.getText(D);/^\S+@\S+\.\S+$/.test(R)&&R.indexOf("mailto:")!==0&&(R="mailto:"+R);var F=this.quill.theme.tooltip;F.edit("link",R)}else this.quill.format("link",!1)}}}}});var O=function(C){x(k,C);function k(D,R){_(this,k);var F=E(this,(k.__proto__||Object.getPrototypeOf(k)).call(this,D,R));return F.preview=F.root.querySelector("a.ql-preview"),F}return o(k,[{key:"listen",value:function(){var R=this;a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",function(F){R.root.classList.contains("ql-editing")?R.save():R.edit("link",R.preview.textContent),F.preventDefault()}),this.root.querySelector("a.ql-remove").addEventListener("click",function(F){if(R.linkRange!=null){var H=R.linkRange;R.restoreFocus(),R.quill.formatText(H,"link",!1,h.default.sources.USER),delete R.linkRange}F.preventDefault(),R.hide()}),this.quill.on(h.default.events.SELECTION_CHANGE,function(F,H,$){if(F!=null){if(F.length===0&&$===h.default.sources.USER){var G=R.quill.scroll.descendant(b.default,F.index),Z=s(G,2),K=Z[0],q=Z[1];if(K!=null){R.linkRange=new v.Range(F.index-q,K.length());var P=b.default.formats(K.domNode);R.preview.textContent=P,R.preview.setAttribute("href",P),R.show(),R.position(R.quill.getBounds(R.linkRange));return}}else delete R.linkRange;R.hide()}})}},{key:"show",value:function(){a(k.prototype.__proto__||Object.getPrototypeOf(k.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),k}(f.BaseTooltip);O.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),n.default=S},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(29),a=me(s),o=r(36),l=r(38),u=r(64),c=r(65),h=me(c),f=r(66),d=me(f),y=r(67),b=me(y),v=r(37),g=r(26),m=r(39),w=r(40),_=r(56),E=me(_),x=r(68),A=me(x),S=r(27),O=me(S),C=r(69),k=me(C),D=r(70),R=me(D),F=r(71),H=me(F),$=r(72),G=me($),Z=r(73),K=me(Z),q=r(13),P=me(q),B=r(74),V=me(B),J=r(75),te=me(J),U=r(57),Y=me(U),re=r(41),oe=me(re),de=r(28),_e=me(de),Le=r(59),Ne=me(Le),Ve=r(60),Xe=me(Ve),Et=r(61),Ke=me(Et),he=r(108),pe=me(he),xe=r(62),Te=me(xe);function me(De){return De&&De.__esModule?De:{default:De}}a.default.register({"attributors/attribute/direction":l.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":v.BackgroundClass,"attributors/class/color":g.ColorClass,"attributors/class/direction":l.DirectionClass,"attributors/class/font":m.FontClass,"attributors/class/size":w.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":v.BackgroundStyle,"attributors/style/color":g.ColorStyle,"attributors/style/direction":l.DirectionStyle,"attributors/style/font":m.FontStyle,"attributors/style/size":w.SizeStyle},!0),a.default.register({"formats/align":o.AlignClass,"formats/direction":l.DirectionClass,"formats/indent":u.IndentClass,"formats/background":v.BackgroundStyle,"formats/color":g.ColorStyle,"formats/font":m.FontClass,"formats/size":w.SizeClass,"formats/blockquote":h.default,"formats/code-block":P.default,"formats/header":d.default,"formats/list":b.default,"formats/bold":E.default,"formats/code":q.Code,"formats/italic":A.default,"formats/link":O.default,"formats/script":k.default,"formats/strike":R.default,"formats/underline":H.default,"formats/image":G.default,"formats/video":K.default,"formats/list/item":y.ListItem,"modules/formula":V.default,"modules/syntax":te.default,"modules/toolbar":Y.default,"themes/bubble":pe.default,"themes/snow":Te.default,"ui/icons":oe.default,"ui/picker":_e.default,"ui/icon-picker":Xe.default,"ui/color-picker":Ne.default,"ui/tooltip":Ke.default},!0),n.default=a.default},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.IndentClass=void 0;var s=function(){function b(v,g){for(var m=0;m<g.length;m++){var w=g[m];w.enumerable=w.enumerable||!1,w.configurable=!0,"value"in w&&(w.writable=!0),Object.defineProperty(v,w.key,w)}}return function(v,g,m){return g&&b(v.prototype,g),m&&b(v,m),v}}(),a=function b(v,g,m){v===null&&(v=Function.prototype);var w=Object.getOwnPropertyDescriptor(v,g);if(w===void 0){var _=Object.getPrototypeOf(v);return _===null?void 0:b(_,g,m)}else{if("value"in w)return w.value;var E=w.get;return E===void 0?void 0:E.call(m)}},o=r(0),l=u(o);function u(b){return b&&b.__esModule?b:{default:b}}function c(b,v){if(!(b instanceof v))throw new TypeError("Cannot call a class as a function")}function h(b,v){if(!b)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return v&&(typeof v=="object"||typeof v=="function")?v:b}function f(b,v){if(typeof v!="function"&&v!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof v);b.prototype=Object.create(v&&v.prototype,{constructor:{value:b,enumerable:!1,writable:!0,configurable:!0}}),v&&(Object.setPrototypeOf?Object.setPrototypeOf(b,v):b.__proto__=v)}var d=function(b){f(v,b);function v(){return c(this,v),h(this,(v.__proto__||Object.getPrototypeOf(v)).apply(this,arguments))}return s(v,[{key:"add",value:function(m,w){if(w==="+1"||w==="-1"){var _=this.value(m)||0;w=w==="+1"?_+1:_-1}return w===0?(this.remove(m),!0):a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"add",this).call(this,m,w)}},{key:"canAdd",value:function(m,w){return a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,m,w)||a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"canAdd",this).call(this,m,parseInt(w))}},{key:"value",value:function(m){return parseInt(a(v.prototype.__proto__||Object.getPrototypeOf(v.prototype),"value",this).call(this,m))||void 0}}]),v}(l.default.Attributor.Class),y=new d("indent","ql-indent",{scope:l.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});n.IndentClass=y},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(4),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(a.default);h.blotName="blockquote",h.tagName="blockquote",n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function d(y,b){for(var v=0;v<b.length;v++){var g=b[v];g.enumerable=g.enumerable||!1,g.configurable=!0,"value"in g&&(g.writable=!0),Object.defineProperty(y,g.key,g)}}return function(y,b,v){return b&&d(y.prototype,b),v&&d(y,v),y}}(),a=r(4),o=l(a);function l(d){return d&&d.__esModule?d:{default:d}}function u(d,y){if(!(d instanceof y))throw new TypeError("Cannot call a class as a function")}function c(d,y){if(!d)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return y&&(typeof y=="object"||typeof y=="function")?y:d}function h(d,y){if(typeof y!="function"&&y!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof y);d.prototype=Object.create(y&&y.prototype,{constructor:{value:d,enumerable:!1,writable:!0,configurable:!0}}),y&&(Object.setPrototypeOf?Object.setPrototypeOf(d,y):d.__proto__=y)}var f=function(d){h(y,d);function y(){return u(this,y),c(this,(y.__proto__||Object.getPrototypeOf(y)).apply(this,arguments))}return s(y,null,[{key:"formats",value:function(v){return this.tagName.indexOf(v.tagName)+1}}]),y}(o.default);f.blotName="header",f.tagName=["H1","H2","H3","H4","H5","H6"],n.default=f},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.ListItem=void 0;var s=function(){function _(E,x){for(var A=0;A<x.length;A++){var S=x[A];S.enumerable=S.enumerable||!1,S.configurable=!0,"value"in S&&(S.writable=!0),Object.defineProperty(E,S.key,S)}}return function(E,x,A){return x&&_(E.prototype,x),A&&_(E,A),E}}(),a=function _(E,x,A){E===null&&(E=Function.prototype);var S=Object.getOwnPropertyDescriptor(E,x);if(S===void 0){var O=Object.getPrototypeOf(E);return O===null?void 0:_(O,x,A)}else{if("value"in S)return S.value;var C=S.get;return C===void 0?void 0:C.call(A)}},o=r(0),l=d(o),u=r(4),c=d(u),h=r(25),f=d(h);function d(_){return _&&_.__esModule?_:{default:_}}function y(_,E,x){return E in _?Object.defineProperty(_,E,{value:x,enumerable:!0,configurable:!0,writable:!0}):_[E]=x,_}function b(_,E){if(!(_ instanceof E))throw new TypeError("Cannot call a class as a function")}function v(_,E){if(!_)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return E&&(typeof E=="object"||typeof E=="function")?E:_}function g(_,E){if(typeof E!="function"&&E!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof E);_.prototype=Object.create(E&&E.prototype,{constructor:{value:_,enumerable:!1,writable:!0,configurable:!0}}),E&&(Object.setPrototypeOf?Object.setPrototypeOf(_,E):_.__proto__=E)}var m=function(_){g(E,_);function E(){return b(this,E),v(this,(E.__proto__||Object.getPrototypeOf(E)).apply(this,arguments))}return s(E,[{key:"format",value:function(A,S){A===w.blotName&&!S?this.replaceWith(l.default.create(this.statics.scope)):a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"format",this).call(this,A,S)}},{key:"remove",value:function(){this.prev==null&&this.next==null?this.parent.remove():a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(A,S){return this.parent.isolate(this.offset(this.parent),this.length()),A===this.parent.statics.blotName?(this.parent.replaceWith(A,S),this):(this.parent.unwrap(),a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replaceWith",this).call(this,A,S))}}],[{key:"formats",value:function(A){return A.tagName===this.tagName?void 0:a(E.__proto__||Object.getPrototypeOf(E),"formats",this).call(this,A)}}]),E}(c.default);m.blotName="list-item",m.tagName="LI";var w=function(_){g(E,_),s(E,null,[{key:"create",value:function(A){var S=A==="ordered"?"OL":"UL",O=a(E.__proto__||Object.getPrototypeOf(E),"create",this).call(this,S);return(A==="checked"||A==="unchecked")&&O.setAttribute("data-checked",A==="checked"),O}},{key:"formats",value:function(A){if(A.tagName==="OL")return"ordered";if(A.tagName==="UL")return A.hasAttribute("data-checked")?A.getAttribute("data-checked")==="true"?"checked":"unchecked":"bullet"}}]);function E(x){b(this,E);var A=v(this,(E.__proto__||Object.getPrototypeOf(E)).call(this,x)),S=function(C){if(C.target.parentNode===x){var k=A.statics.formats(x),D=l.default.find(C.target);k==="checked"?D.format("list","unchecked"):k==="unchecked"&&D.format("list","checked")}};return x.addEventListener("touchstart",S),x.addEventListener("mousedown",S),A}return s(E,[{key:"format",value:function(A,S){this.children.length>0&&this.children.tail.format(A,S)}},{key:"formats",value:function(){return y({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(A,S){if(A instanceof m)a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"insertBefore",this).call(this,A,S);else{var O=S==null?this.length():S.offset(this),C=this.split(O);C.parent.insertBefore(A,C)}}},{key:"optimize",value:function(A){a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"optimize",this).call(this,A);var S=this.next;S!=null&&S.prev===this&&S.statics.blotName===this.statics.blotName&&S.domNode.tagName===this.domNode.tagName&&S.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(S.moveChildren(this),S.remove())}},{key:"replace",value:function(A){if(A.statics.blotName!==this.statics.blotName){var S=l.default.create(this.statics.defaultChild);A.moveChildren(S),this.appendChild(S)}a(E.prototype.__proto__||Object.getPrototypeOf(E.prototype),"replace",this).call(this,A)}}]),E}(f.default);w.blotName="list",w.scope=l.default.Scope.BLOCK_BLOT,w.tagName=["OL","UL"],w.defaultChild="list-item",w.allowedChildren=[m],n.ListItem=m,n.default=w},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(56),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(a.default);h.blotName="italic",h.tagName=["EM","I"],n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function y(b,v){for(var g=0;g<v.length;g++){var m=v[g];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(b,m.key,m)}}return function(b,v,g){return v&&y(b.prototype,v),g&&y(b,g),b}}(),a=function y(b,v,g){b===null&&(b=Function.prototype);var m=Object.getOwnPropertyDescriptor(b,v);if(m===void 0){var w=Object.getPrototypeOf(b);return w===null?void 0:y(w,v,g)}else{if("value"in m)return m.value;var _=m.get;return _===void 0?void 0:_.call(g)}},o=r(6),l=u(o);function u(y){return y&&y.__esModule?y:{default:y}}function c(y,b){if(!(y instanceof b))throw new TypeError("Cannot call a class as a function")}function h(y,b){if(!y)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return b&&(typeof b=="object"||typeof b=="function")?b:y}function f(y,b){if(typeof b!="function"&&b!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof b);y.prototype=Object.create(b&&b.prototype,{constructor:{value:y,enumerable:!1,writable:!0,configurable:!0}}),b&&(Object.setPrototypeOf?Object.setPrototypeOf(y,b):y.__proto__=b)}var d=function(y){f(b,y);function b(){return c(this,b),h(this,(b.__proto__||Object.getPrototypeOf(b)).apply(this,arguments))}return s(b,null,[{key:"create",value:function(g){return g==="super"?document.createElement("sup"):g==="sub"?document.createElement("sub"):a(b.__proto__||Object.getPrototypeOf(b),"create",this).call(this,g)}},{key:"formats",value:function(g){if(g.tagName==="SUB")return"sub";if(g.tagName==="SUP")return"super"}}]),b}(l.default);d.blotName="script",d.tagName=["SUB","SUP"],n.default=d},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(a.default);h.blotName="strike",h.tagName="S",n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=r(6),a=o(s);function o(f){return f&&f.__esModule?f:{default:f}}function l(f,d){if(!(f instanceof d))throw new TypeError("Cannot call a class as a function")}function u(f,d){if(!f)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return d&&(typeof d=="object"||typeof d=="function")?d:f}function c(f,d){if(typeof d!="function"&&d!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof d);f.prototype=Object.create(d&&d.prototype,{constructor:{value:f,enumerable:!1,writable:!0,configurable:!0}}),d&&(Object.setPrototypeOf?Object.setPrototypeOf(f,d):f.__proto__=d)}var h=function(f){c(d,f);function d(){return l(this,d),u(this,(d.__proto__||Object.getPrototypeOf(d)).apply(this,arguments))}return d}(a.default);h.blotName="underline",h.tagName="U",n.default=h},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(g,m){for(var w=0;w<m.length;w++){var _=m[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,m,w){return m&&v(g.prototype,m),w&&v(g,w),g}}(),a=function v(g,m,w){g===null&&(g=Function.prototype);var _=Object.getOwnPropertyDescriptor(g,m);if(_===void 0){var E=Object.getPrototypeOf(g);return E===null?void 0:v(E,m,w)}else{if("value"in _)return _.value;var x=_.get;return x===void 0?void 0:x.call(w)}},o=r(0),l=c(o),u=r(27);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function d(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var y=["alt","height","width"],b=function(v){d(g,v);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(w,_){y.indexOf(w)>-1?_?this.domNode.setAttribute(w,_):this.domNode.removeAttribute(w):a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,_)}}],[{key:"create",value:function(w){var _=a(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return typeof w=="string"&&_.setAttribute("src",this.sanitize(w)),_}},{key:"formats",value:function(w){return y.reduce(function(_,E){return w.hasAttribute(E)&&(_[E]=w.getAttribute(E)),_},{})}},{key:"match",value:function(w){return/\.(jpe?g|gif|png)$/.test(w)||/^data:image\/.+;base64/.test(w)}},{key:"sanitize",value:function(w){return(0,u.sanitize)(w,["http","https","data"])?w:"//:0"}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(l.default.Embed);b.blotName="image",b.tagName="IMG",n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0});var s=function(){function v(g,m){for(var w=0;w<m.length;w++){var _=m[w];_.enumerable=_.enumerable||!1,_.configurable=!0,"value"in _&&(_.writable=!0),Object.defineProperty(g,_.key,_)}}return function(g,m,w){return m&&v(g.prototype,m),w&&v(g,w),g}}(),a=function v(g,m,w){g===null&&(g=Function.prototype);var _=Object.getOwnPropertyDescriptor(g,m);if(_===void 0){var E=Object.getPrototypeOf(g);return E===null?void 0:v(E,m,w)}else{if("value"in _)return _.value;var x=_.get;return x===void 0?void 0:x.call(w)}},o=r(4),l=r(27),u=c(l);function c(v){return v&&v.__esModule?v:{default:v}}function h(v,g){if(!(v instanceof g))throw new TypeError("Cannot call a class as a function")}function f(v,g){if(!v)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return g&&(typeof g=="object"||typeof g=="function")?g:v}function d(v,g){if(typeof g!="function"&&g!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof g);v.prototype=Object.create(g&&g.prototype,{constructor:{value:v,enumerable:!1,writable:!0,configurable:!0}}),g&&(Object.setPrototypeOf?Object.setPrototypeOf(v,g):v.__proto__=g)}var y=["height","width"],b=function(v){d(g,v);function g(){return h(this,g),f(this,(g.__proto__||Object.getPrototypeOf(g)).apply(this,arguments))}return s(g,[{key:"format",value:function(w,_){y.indexOf(w)>-1?_?this.domNode.setAttribute(w,_):this.domNode.removeAttribute(w):a(g.prototype.__proto__||Object.getPrototypeOf(g.prototype),"format",this).call(this,w,_)}}],[{key:"create",value:function(w){var _=a(g.__proto__||Object.getPrototypeOf(g),"create",this).call(this,w);return _.setAttribute("frameborder","0"),_.setAttribute("allowfullscreen",!0),_.setAttribute("src",this.sanitize(w)),_}},{key:"formats",value:function(w){return y.reduce(function(_,E){return w.hasAttribute(E)&&(_[E]=w.getAttribute(E)),_},{})}},{key:"sanitize",value:function(w){return u.default.sanitize(w)}},{key:"value",value:function(w){return w.getAttribute("src")}}]),g}(o.BlockEmbed);b.blotName="video",b.className="ql-video",b.tagName="IFRAME",n.default=b},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.FormulaBlot=void 0;var s=function(){function w(_,E){for(var x=0;x<E.length;x++){var A=E[x];A.enumerable=A.enumerable||!1,A.configurable=!0,"value"in A&&(A.writable=!0),Object.defineProperty(_,A.key,A)}}return function(_,E,x){return E&&w(_.prototype,E),x&&w(_,x),_}}(),a=function w(_,E,x){_===null&&(_=Function.prototype);var A=Object.getOwnPropertyDescriptor(_,E);if(A===void 0){var S=Object.getPrototypeOf(_);return S===null?void 0:w(S,E,x)}else{if("value"in A)return A.value;var O=A.get;return O===void 0?void 0:O.call(x)}},o=r(35),l=d(o),u=r(5),c=d(u),h=r(9),f=d(h);function d(w){return w&&w.__esModule?w:{default:w}}function y(w,_){if(!(w instanceof _))throw new TypeError("Cannot call a class as a function")}function b(w,_){if(!w)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return _&&(typeof _=="object"||typeof _=="function")?_:w}function v(w,_){if(typeof _!="function"&&_!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof _);w.prototype=Object.create(_&&_.prototype,{constructor:{value:w,enumerable:!1,writable:!0,configurable:!0}}),_&&(Object.setPrototypeOf?Object.setPrototypeOf(w,_):w.__proto__=_)}var g=function(w){v(_,w);function _(){return y(this,_),b(this,(_.__proto__||Object.getPrototypeOf(_)).apply(this,arguments))}return s(_,null,[{key:"create",value:function(x){var A=a(_.__proto__||Object.getPrototypeOf(_),"create",this).call(this,x);return typeof x=="string"&&(window.katex.render(x,A,{throwOnError:!1,errorColor:"#f00"}),A.setAttribute("data-value",x)),A}},{key:"value",value:function(x){return x.getAttribute("data-value")}}]),_}(l.default);g.blotName="formula",g.className="ql-formula",g.tagName="SPAN";var m=function(w){v(_,w),s(_,null,[{key:"register",value:function(){c.default.register(g,!0)}}]);function _(){y(this,_);var E=b(this,(_.__proto__||Object.getPrototypeOf(_)).call(this));if(window.katex==null)throw new Error("Formula module requires KaTeX.");return E}return _}(f.default);n.FormulaBlot=g,n.default=m},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.CodeToken=n.CodeBlock=void 0;var s=function(){function x(A,S){for(var O=0;O<S.length;O++){var C=S[O];C.enumerable=C.enumerable||!1,C.configurable=!0,"value"in C&&(C.writable=!0),Object.defineProperty(A,C.key,C)}}return function(A,S,O){return S&&x(A.prototype,S),O&&x(A,O),A}}(),a=function x(A,S,O){A===null&&(A=Function.prototype);var C=Object.getOwnPropertyDescriptor(A,S);if(C===void 0){var k=Object.getPrototypeOf(A);return k===null?void 0:x(k,S,O)}else{if("value"in C)return C.value;var D=C.get;return D===void 0?void 0:D.call(O)}},o=r(0),l=b(o),u=r(5),c=b(u),h=r(9),f=b(h),d=r(13),y=b(d);function b(x){return x&&x.__esModule?x:{default:x}}function v(x,A){if(!(x instanceof A))throw new TypeError("Cannot call a class as a function")}function g(x,A){if(!x)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A&&(typeof A=="object"||typeof A=="function")?A:x}function m(x,A){if(typeof A!="function"&&A!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof A);x.prototype=Object.create(A&&A.prototype,{constructor:{value:x,enumerable:!1,writable:!0,configurable:!0}}),A&&(Object.setPrototypeOf?Object.setPrototypeOf(x,A):x.__proto__=A)}var w=function(x){m(A,x);function A(){return v(this,A),g(this,(A.__proto__||Object.getPrototypeOf(A)).apply(this,arguments))}return s(A,[{key:"replaceWith",value:function(O){this.domNode.textContent=this.domNode.textContent,this.attach(),a(A.prototype.__proto__||Object.getPrototypeOf(A.prototype),"replaceWith",this).call(this,O)}},{key:"highlight",value:function(O){var C=this.domNode.textContent;this.cachedText!==C&&((C.trim().length>0||this.cachedText==null)&&(this.domNode.innerHTML=O(C),this.domNode.normalize(),this.attach()),this.cachedText=C)}}]),A}(y.default);w.className="ql-syntax";var _=new l.default.Attributor.Class("token","hljs",{scope:l.default.Scope.INLINE}),E=function(x){m(A,x),s(A,null,[{key:"register",value:function(){c.default.register(_,!0),c.default.register(w,!0)}}]);function A(S,O){v(this,A);var C=g(this,(A.__proto__||Object.getPrototypeOf(A)).call(this,S,O));if(typeof C.options.highlight!="function")throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var k=null;return C.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){clearTimeout(k),k=setTimeout(function(){C.highlight(),k=null},C.options.interval)}),C.highlight(),C}return s(A,[{key:"highlight",value:function(){var O=this;if(!this.quill.selection.composing){this.quill.update(c.default.sources.USER);var C=this.quill.getSelection();this.quill.scroll.descendants(w).forEach(function(k){k.highlight(O.options.highlight)}),this.quill.update(c.default.sources.SILENT),C!=null&&this.quill.setSelection(C,c.default.sources.SILENT)}}}]),A}(f.default);E.DEFAULTS={highlight:function(){return window.hljs==null?null:function(x){var A=window.hljs.highlightAuto(x);return A.value}}(),interval:1e3},n.CodeBlock=w,n.CodeToken=_,n.default=E},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,n){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,n){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,n){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,n,r){Object.defineProperty(n,"__esModule",{value:!0}),n.default=n.BubbleTooltip=void 0;var s=function A(S,O,C){S===null&&(S=Function.prototype);var k=Object.getOwnPropertyDescriptor(S,O);if(k===void 0){var D=Object.getPrototypeOf(S);return D===null?void 0:A(D,O,C)}else{if("value"in k)return k.value;var R=k.get;return R===void 0?void 0:R.call(C)}},a=function(){function A(S,O){for(var C=0;C<O.length;C++){var k=O[C];k.enumerable=k.enumerable||!1,k.configurable=!0,"value"in k&&(k.writable=!0),Object.defineProperty(S,k.key,k)}}return function(S,O,C){return O&&A(S.prototype,O),C&&A(S,C),S}}(),o=r(3),l=v(o),u=r(8),c=v(u),h=r(43),f=v(h),d=r(15),y=r(41),b=v(y);function v(A){return A&&A.__esModule?A:{default:A}}function g(A,S){if(!(A instanceof S))throw new TypeError("Cannot call a class as a function")}function m(A,S){if(!A)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return S&&(typeof S=="object"||typeof S=="function")?S:A}function w(A,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function, not "+typeof S);A.prototype=Object.create(S&&S.prototype,{constructor:{value:A,enumerable:!1,writable:!0,configurable:!0}}),S&&(Object.setPrototypeOf?Object.setPrototypeOf(A,S):A.__proto__=S)}var _=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],E=function(A){w(S,A);function S(O,C){g(this,S),C.modules.toolbar!=null&&C.modules.toolbar.container==null&&(C.modules.toolbar.container=_);var k=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,O,C));return k.quill.container.classList.add("ql-bubble"),k}return a(S,[{key:"extendToolbar",value:function(C){this.tooltip=new x(this.quill,this.options.bounds),this.tooltip.root.appendChild(C.container),this.buildButtons([].slice.call(C.container.querySelectorAll("button")),b.default),this.buildPickers([].slice.call(C.container.querySelectorAll("select")),b.default)}}]),S}(f.default);E.DEFAULTS=(0,l.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(S){S?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var x=function(A){w(S,A);function S(O,C){g(this,S);var k=m(this,(S.__proto__||Object.getPrototypeOf(S)).call(this,O,C));return k.quill.on(c.default.events.EDITOR_CHANGE,function(D,R,F,H){if(D===c.default.events.SELECTION_CHANGE)if(R!=null&&R.length>0&&H===c.default.sources.USER){k.show(),k.root.style.left="0px",k.root.style.width="",k.root.style.width=k.root.offsetWidth+"px";var $=k.quill.getLines(R.index,R.length);if($.length===1)k.position(k.quill.getBounds(R));else{var G=$[$.length-1],Z=k.quill.getIndex(G),K=Math.min(G.length()-1,R.index+R.length-Z),q=k.quill.getBounds(new d.Range(Z,K));k.position(q)}}else document.activeElement!==k.textbox&&k.quill.hasFocus()&&k.hide()}),k}return a(S,[{key:"listen",value:function(){var C=this;s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",function(){C.root.classList.remove("ql-editing")}),this.quill.on(c.default.events.SCROLL_OPTIMIZE,function(){setTimeout(function(){if(!C.root.classList.contains("ql-hidden")){var k=C.quill.getSelection();k!=null&&C.position(C.quill.getBounds(k))}},1)})}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(C){var k=s(S.prototype.__proto__||Object.getPrototypeOf(S.prototype),"position",this).call(this,C),D=this.root.querySelector(".ql-tooltip-arrow");if(D.style.marginLeft="",k===0)return k;D.style.marginLeft=-1*k-D.offsetWidth/2+"px"}}]),S}(h.BaseTooltip);x.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),n.BubbleTooltip=x,n.default=E},function(t,n,r){t.exports=r(63)}]).default})})(BD);var lz=BD.exports,uz=ln&&ln.__extends||function(){var i=function(e,t){return i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)r.hasOwnProperty(s)&&(n[s]=r[s])},i(e,t)};return function(e,t){i(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}}(),_v=ln&&ln.__assign||function(){return _v=Object.assign||function(i){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(i[r]=e[r])}return i},_v.apply(this,arguments)},cz=ln&&ln.__spreadArrays||function(){for(var i=0,e=0,t=arguments.length;e<t;e++)i+=arguments[e].length;for(var n=Array(i),r=0,e=0;e<t;e++)for(var s=arguments[e],a=0,o=s.length;a<o;a++,r++)n[r]=s[a];return n},Sy=ln&&ln.__importDefault||function(i){return i&&i.__esModule?i:{default:i}},ls=Sy(ze),hz=Sy(eC),uf=Sy(oz),BA=Sy(lz),fz=function(i){uz(e,i);function e(t){var n=i.call(this,t)||this;n.dirtyProps=["modules","formats","bounds","theme","children"],n.cleanProps=["id","className","style","placeholder","tabIndex","onChange","onChangeSelection","onFocus","onBlur","onKeyPress","onKeyDown","onKeyUp"],n.state={generation:0},n.selection=null,n.onEditorChange=function(s,a,o,l){var u,c,h,f;s==="text-change"?(c=(u=n).onEditorChangeText)===null||c===void 0||c.call(u,n.editor.root.innerHTML,a,l,n.unprivilegedEditor):s==="selection-change"&&((f=(h=n).onEditorChangeSelection)===null||f===void 0||f.call(h,a,l,n.unprivilegedEditor))};var r=n.isControlled()?t.value:t.defaultValue;return n.value=r??"",n}return e.prototype.validateProps=function(t){var n;if(ls.default.Children.count(t.children)>1)throw new Error("The Quill editing area can only be composed of a single React element.");if(ls.default.Children.count(t.children)){var r=ls.default.Children.only(t.children);if(((n=r)===null||n===void 0?void 0:n.type)==="textarea")throw new Error("Quill does not support editing on a <textarea>. Use a <div> instead.")}if(this.lastDeltaChangeSet&&t.value===this.lastDeltaChangeSet)throw new Error("You are passing the `delta` object from the `onChange` event back as `value`. You most probably want `editor.getContents()` instead. See: https://github.com/zenoamaro/react-quill#using-deltas")},e.prototype.shouldComponentUpdate=function(t,n){var r=this,s;if(this.validateProps(t),!this.editor||this.state.generation!==n.generation)return!0;if("value"in t){var a=this.getEditorContents(),o=(s=t.value,s??"");this.isEqualValue(o,a)||this.setEditorContents(this.editor,o)}return t.readOnly!==this.props.readOnly&&this.setEditorReadOnly(this.editor,t.readOnly),cz(this.cleanProps,this.dirtyProps).some(function(l){return!uf.default(t[l],r.props[l])})},e.prototype.shouldComponentRegenerate=function(t){var n=this;return this.dirtyProps.some(function(r){return!uf.default(t[r],n.props[r])})},e.prototype.componentDidMount=function(){this.instantiateEditor(),this.setEditorContents(this.editor,this.getEditorContents())},e.prototype.componentWillUnmount=function(){this.destroyEditor()},e.prototype.componentDidUpdate=function(t,n){var r=this;if(this.editor&&this.shouldComponentRegenerate(t)){var s=this.editor.getContents(),a=this.editor.getSelection();this.regenerationSnapshot={delta:s,selection:a},this.setState({generation:this.state.generation+1}),this.destroyEditor()}if(this.state.generation!==n.generation){var o=this.regenerationSnapshot,s=o.delta,l=o.selection;delete this.regenerationSnapshot,this.instantiateEditor();var u=this.editor;u.setContents(s),jA(function(){return r.setEditorSelection(u,l)})}},e.prototype.instantiateEditor=function(){this.editor?this.hookEditor(this.editor):this.editor=this.createEditor(this.getEditingArea(),this.getEditorConfig())},e.prototype.destroyEditor=function(){this.editor&&this.unhookEditor(this.editor)},e.prototype.isControlled=function(){return"value"in this.props},e.prototype.getEditorConfig=function(){return{bounds:this.props.bounds,formats:this.props.formats,modules:this.props.modules,placeholder:this.props.placeholder,readOnly:this.props.readOnly,scrollingContainer:this.props.scrollingContainer,tabIndex:this.props.tabIndex,theme:this.props.theme}},e.prototype.getEditor=function(){if(!this.editor)throw new Error("Accessing non-instantiated editor");return this.editor},e.prototype.createEditor=function(t,n){var r=new BA.default(t,n);return n.tabIndex!=null&&this.setEditorTabIndex(r,n.tabIndex),this.hookEditor(r),r},e.prototype.hookEditor=function(t){this.unprivilegedEditor=this.makeUnprivilegedEditor(t),t.on("editor-change",this.onEditorChange)},e.prototype.unhookEditor=function(t){t.off("editor-change",this.onEditorChange)},e.prototype.getEditorContents=function(){return this.value},e.prototype.getEditorSelection=function(){return this.selection},e.prototype.isDelta=function(t){return t&&t.ops},e.prototype.isEqualValue=function(t,n){return this.isDelta(t)&&this.isDelta(n)?uf.default(t.ops,n.ops):uf.default(t,n)},e.prototype.setEditorContents=function(t,n){var r=this;this.value=n;var s=this.getEditorSelection();typeof n=="string"?t.setContents(t.clipboard.convert(n)):t.setContents(n),jA(function(){return r.setEditorSelection(t,s)})},e.prototype.setEditorSelection=function(t,n){if(this.selection=n,n){var r=t.getLength();n.index=Math.max(0,Math.min(n.index,r-1)),n.length=Math.max(0,Math.min(n.length,r-1-n.index)),t.setSelection(n)}},e.prototype.setEditorTabIndex=function(t,n){var r,s;!((s=(r=t)===null||r===void 0?void 0:r.scroll)===null||s===void 0)&&s.domNode&&(t.scroll.domNode.tabIndex=n)},e.prototype.setEditorReadOnly=function(t,n){n?t.disable():t.enable()},e.prototype.makeUnprivilegedEditor=function(t){var n=t;return{getHTML:function(){return n.root.innerHTML},getLength:n.getLength.bind(n),getText:n.getText.bind(n),getContents:n.getContents.bind(n),getSelection:n.getSelection.bind(n),getBounds:n.getBounds.bind(n)}},e.prototype.getEditingArea=function(){if(!this.editingArea)throw new Error("Instantiating on missing editing area");var t=hz.default.findDOMNode(this.editingArea);if(!t)throw new Error("Cannot find element for editing area");if(t.nodeType===3)throw new Error("Editing area cannot be a text node");return t},e.prototype.renderEditingArea=function(){var t=this,n=this.props,r=n.children,s=n.preserveWhitespace,a=this.state.generation,o={key:a,ref:function(l){t.editingArea=l}};return ls.default.Children.count(r)?ls.default.cloneElement(ls.default.Children.only(r),o):s?ls.default.createElement("pre",_v({},o)):ls.default.createElement("div",_v({},o))},e.prototype.render=function(){var t;return ls.default.createElement("div",{id:this.props.id,style:this.props.style,key:this.state.generation,className:"quill "+(t=this.props.className,t??""),onKeyPress:this.props.onKeyPress,onKeyDown:this.props.onKeyDown,onKeyUp:this.props.onKeyUp},this.renderEditingArea())},e.prototype.onEditorChangeText=function(t,n,r,s){var a,o;if(this.editor){var l=this.isDelta(this.value)?s.getContents():s.getHTML();l!==this.getEditorContents()&&(this.lastDeltaChangeSet=n,this.value=l,(o=(a=this.props).onChange)===null||o===void 0||o.call(a,t,n,r,s))}},e.prototype.onEditorChangeSelection=function(t,n,r){var s,a,o,l,u,c;if(this.editor){var h=this.getEditorSelection(),f=!h&&t,d=h&&!t;uf.default(t,h)||(this.selection=t,(a=(s=this.props).onChangeSelection)===null||a===void 0||a.call(s,t,n,r),f?(l=(o=this.props).onFocus)===null||l===void 0||l.call(o,t,n,r):d&&((c=(u=this.props).onBlur)===null||c===void 0||c.call(u,h,n,r)))}},e.prototype.focus=function(){this.editor&&this.editor.focus()},e.prototype.blur=function(){this.editor&&(this.selection=null,this.editor.blur())},e.displayName="React Quill",e.Quill=BA.default,e.defaultProps={theme:"snow",modules:{},readOnly:!1},e}(ls.default.Component);function jA(i){Promise.resolve().then(i)}var dz=fz;const pz=zo(dz);function gz({doc:i,notes:e,activeLocKey:t,onSave:n,onSelectLocKey:r}){const s=e.find(h=>h.locationKey===t)??null,[a,o]=gt.useState((s==null?void 0:s.title)??zA(t)),[l,u]=gt.useState((s==null?void 0:s.html)??"");gt.useEffect(()=>{const h=e.find(f=>f.locationKey===t)??null;o((h==null?void 0:h.title)??zA(t)),u((h==null?void 0:h.html)??"")},[t,e]);const c=[[{header:[1,2,3,!1]}],["bold","italic","underline","strike"],[{list:"ordered"},{list:"bullet"}],["blockquote","code-block"],[{align:[]}],["link"],["clean"]];return ue.jsxs("div",{className:"card",style:{overflow:"hidden"},children:[ue.jsxs("div",{style:{padding:12},children:[ue.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[ue.jsxs("div",{children:[ue.jsx("div",{className:"h1",children:"Writing Nook"}),ue.jsx("div",{className:"small",children:"Notes are tied to your current page/chapter location."})]}),ue.jsx("button",{className:"btn primary",onClick:()=>n(l,a),children:"Save"})]}),ue.jsx("div",{style:{height:10}}),ue.jsx("input",{className:"input",value:a,onChange:h=>o(h.target.value),placeholder:"Note title",style:{width:"100%"}}),ue.jsx("div",{style:{height:10}}),ue.jsxs("div",{className:"small",children:["Current anchor: ",ue.jsx("span",{className:"kbd",children:t})]})]}),ue.jsx("div",{style:{padding:12,paddingTop:0},children:ue.jsx("div",{className:"card",style:{borderRadius:14,overflow:"hidden"},children:ue.jsx(pz,{theme:"snow",value:l,onChange:u,modules:{toolbar:c}})})}),ue.jsxs("div",{style:{padding:12,paddingTop:0},children:[ue.jsx("div",{className:"small",style:{marginBottom:8},children:"All notes for this document"}),ue.jsx("div",{style:{maxHeight:220,overflow:"auto",border:"1px solid rgba(255,255,255,0.08)",borderRadius:14},children:e.length===0?ue.jsx("div",{className:"small",style:{padding:10},children:"No notes yet."}):e.map(h=>ue.jsxs("button",{className:"btn",style:{width:"100%",textAlign:"left",borderRadius:0,border:"none",borderBottom:"1px solid rgba(255,255,255,0.08)",background:h.locationKey===t?"rgba(96,165,250,0.16)":"transparent"},onClick:()=>r(h.locationKey),title:h.locationKey,children:[ue.jsx("div",{style:{fontWeight:650},children:h.title||"(untitled)"}),ue.jsx("div",{className:"small",children:new Date(h.updatedAt).toLocaleString()})]},h.id))}),ue.jsxs("div",{className:"small",style:{marginTop:10},children:["For PDFs, anchors look like ",ue.jsx("span",{className:"kbd",children:"pdf:12"}),". For EPUBs: ",ue.jsx("span",{className:"kbd",children:"epub:<cfi>"}),"."]})]})]})}function zA(i){return i==="doc"?"General note":`Note @ ${i}`}function mz({setToast:i}){const{docId:e}=uC(),[t,n]=gt.useState(null),[r,s]=gt.useState(null),[a,o]=gt.useState([]),[l,u]=gt.useState("doc");gt.useEffect(()=>{let f=!0;return(async()=>{if(!e)return;const d=await HP(e);if(!d)return;const y=await yC(d.opfsPath),b=URL.createObjectURL(y);f&&(n(d),s(b),o(await mE(e)))})(),()=>{f=!1}},[e]),gt.useEffect(()=>()=>{r&&URL.revokeObjectURL(r)},[r]);async function c(f,d){if(!t)return;const y={...t,lastLocation:f,updatedAt:fu()};await mC(y),n(y),u(d)}async function h(f,d){if(!e)return;const y=a.find(m=>m.locationKey===l),b=fu(),v=y?{...y,html:f,title:d,updatedAt:b}:{id:t_(),docId:e,locationKey:l,title:d,html:f,createdAt:b,updatedAt:b};await WP(v);const g=await mE(e);o(g),i("Saved note.")}return!t||!r?ue.jsx("div",{className:"card",style:{padding:14},children:ue.jsx("div",{className:"small",children:"Loading"})}):ue.jsxs("div",{className:"card",style:{padding:14},children:[ue.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[ue.jsxs("div",{children:[ue.jsx("div",{className:"h1",children:t.title}),ue.jsxs("div",{className:"small",children:[t.type.toUpperCase(),"  offline"]})]}),ue.jsx("div",{className:"row",children:ue.jsx(od,{className:"btn",to:`/book/${t.bookId}`,children:" Back"})})]}),ue.jsx("div",{style:{height:12}}),ue.jsxs("div",{className:"split",children:[ue.jsxs("div",{className:"card readerFrame",children:[ue.jsxs("div",{className:"row",style:{padding:12,justifyContent:"space-between"},children:[ue.jsx("div",{className:"small",children:"Reader"}),ue.jsxs("div",{className:"small",children:["Last saved position: ",t.lastLocation??""]})]}),ue.jsx("div",{className:"readerBody",children:t.type==="pdf"?ue.jsx(n3,{url:r,initialPage:t.lastLocation?Number(t.lastLocation):1,onLocation:f=>c(String(f),`pdf:${f}`)}):ue.jsx(t4,{url:r,initialCfi:t.lastLocation??null,onLocation:f=>c(f,`epub:${f}`)})})]}),ue.jsx(gz,{doc:t,notes:a,activeLocKey:l,onSave:h,onSelectLocKey:f=>u(f)})]})]})}function vz({message:i}){return i?ue.jsx("div",{className:"toast",children:i}):null}function yz(){const[i,e]=gt.useState(null),t=lC();gt.useEffect(()=>{if(!i)return;const s=setTimeout(()=>e(null),2500);return()=>clearTimeout(s)},[i]);async function n(){const s=await $P();XP(`solonook-backup-${new Date().toISOString().slice(0,10)}.json`,s),e("Exported backup (metadata + notes).")}async function r(){const s=await n_("application/json");if(!s)return;const a=await s.text(),o=JSON.parse(a);if(!(o!=null&&o.books)||!(o!=null&&o.docs)||!(o!=null&&o.notes)){e("Backup file not recognized.");return}await VP({books:o.books,docs:o.docs,notes:o.notes}),e("Imported backup. Reloading"),setTimeout(()=>t(0),400)}return ue.jsxs("div",{children:[ue.jsxs("div",{className:"container",children:[ue.jsxs("div",{className:"card",style:{padding:14,borderRadius:18},children:[ue.jsxs("div",{className:"row",style:{justifyContent:"space-between"},children:[ue.jsx("div",{className:"row",children:ue.jsxs(od,{to:"/",className:"row",style:{gap:10},children:[ue.jsx("div",{style:{width:34,height:34,borderRadius:12,background:"rgba(96,165,250,0.22)",border:"1px solid rgba(96,165,250,0.35)",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:800},children:"S"}),ue.jsxs("div",{children:[ue.jsx("div",{className:"h1",children:"SoloNook Library"}),ue.jsx("div",{className:"h2",children:"Offline reading  writing  organizing"})]})]})}),ue.jsxs("div",{className:"row",children:[ue.jsx("button",{className:"btn",onClick:n,children:"Export backup"}),ue.jsx("button",{className:"btn",onClick:r,children:"Import backup"})]})]}),ue.jsxs("div",{className:"small",style:{marginTop:10},children:["Tip: Install on Android Chrome  menu  ",ue.jsx("span",{className:"kbd",children:"Add to Home screen"}),". For true offline PWA install, host on HTTPS (GitHub Pages is free)."]})]}),ue.jsx("div",{style:{height:12}}),ue.jsxs(pP,{children:[ue.jsx(Wg,{path:"/",element:ue.jsx(YP,{setToast:e})}),ue.jsx(Wg,{path:"/book/:bookId",element:ue.jsx(eL,{setToast:e})}),ue.jsx(Wg,{path:"/read/:docId",element:ue.jsx(mz,{setToast:e})})]})]}),ue.jsx(vz,{message:i})]})}D0.createRoot(document.getElementById("root")).render(ue.jsx(gt.StrictMode,{children:ue.jsx(_P,{children:ue.jsx(yz,{})})}));
